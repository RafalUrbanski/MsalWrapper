!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("MsalWrapper",[],t):"object"==typeof exports?exports.MsalWrapper=t():e.MsalWrapper=t()}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(1);!function(e){e[e.LoginToken=0]="LoginToken",e[e.AccessToken=1]="AccessToken"}(r||(r={}));var i=function(e){var t=this;if(this._basicConfiguration={auth:{clientId:null,validateAuthority:!0},cache:{cacheLocation:"localStorage",storeAuthStateInCookie:!1},system:{loadFrameTimeout:3e4}},this._basicLoginRequest={scopes:["openid"],prompt:"login"},this.acquireAccessToken=function(e){return new Promise((function(n,o){t._resolve=n,t._reject=o,t._requestType=r.AccessToken,t._acquireAccessTokenInternal(e)}))},this.acquireLoginToken=function(e){return new Promise((function(n,o){t._resolve=n,t._reject=o,t._requestType=r.LoginToken;var i=Object.assign(t._basicLoginRequest,e);t._userAgentApplication.loginPopup(i).then((function(e){t._resolve(e)})).catch((function(e){t._reject(e)}))}))},this._authRedirectCallBack=function(e,n){console.log("Authorization redirect fired"),e?console.log(e):"id_token"===n.tokenType?t._requestType===r.AccessToken?t._acquireAccessTokenInternal({scopes:n.scopes}):t._resolve(n):"access_token"===n.tokenType?t._resolve(n):console.log("token type is:"+n.tokenType)},this._requiresInteraction=function(e){return!(!e||!e.length)&&(console.log(e),-1!==e.indexOf("consent_required")||-1!==e.indexOf("interaction_required")||-1!==e.indexOf("login_required"))},this._acquireAccessTokenInternal=function(e){t._userAgentApplication.loginPopup(t._basicLoginRequest).then((function(){t._userAgentApplication.acquireTokenSilent(e).then((function(e){t._resolve(e)})).catch((function(n){t._requiresInteraction(n.errorCode)?t._userAgentApplication.acquireTokenPopup(e).then((function(e){t._resolve(e)})).catch((function(e){t._reject(e)})):t._reject(n)}))})).catch((function(e){t._reject(e)}))},!e.auth.clientId)throw"ClientId has to be set";var n=Object.assign(this._basicConfiguration,e);this._userAgentApplication=new o.UserAgentApplication(n),this._userAgentApplication.handleRedirectCallback(this._authRedirectCallBack)};t.default=i},function(e,t,n){"use strict";n.r(t);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function o(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};var a=function(){function e(){}return e.createNewGuid=function(){var t=window.crypto;if(t&&t.getRandomValues){var n=new Uint8Array(16);return t.getRandomValues(n),n[6]|=64,n[6]&=79,n[8]|=128,n[8]&=191,e.decimalToHex(n[0])+e.decimalToHex(n[1])+e.decimalToHex(n[2])+e.decimalToHex(n[3])+"-"+e.decimalToHex(n[4])+e.decimalToHex(n[5])+"-"+e.decimalToHex(n[6])+e.decimalToHex(n[7])+"-"+e.decimalToHex(n[8])+e.decimalToHex(n[9])+"-"+e.decimalToHex(n[10])+e.decimalToHex(n[11])+e.decimalToHex(n[12])+e.decimalToHex(n[13])+e.decimalToHex(n[14])+e.decimalToHex(n[15])}for(var r="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx",o="0123456789abcdef",i=0,a="",c=0;c<36;c++)"-"!==r[c]&&"4"!==r[c]&&(i=16*Math.random()|0),"x"===r[c]?a+=o[i]:"y"===r[c]?(i&=3,a+=o[i|=8]):a+=r[c];return a},e.decimalToHex=function(e){for(var t=e.toString(16);t.length<2;)t="0"+t;return t},e.base64Encode=function(e){return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(function(e,t){return String.fromCharCode(Number("0x"+t))})))},e.base64Decode=function(e){return decodeURIComponent(atob(e).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""))},e.deserialize=function(e){var t,n=/\+/g,r=/([^&=]+)=([^&]*)/g,o=function(e){return decodeURIComponent(e.replace(n," "))},i={};for(t=r.exec(e);t;)i[o(t[1])]=o(t[2]),t=r.exec(e);return i},e}(),c=function(){function e(){}return Object.defineProperty(e,"errorDescription",{get:function(){return"error_description"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"error",{get:function(){return"error"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"scope",{get:function(){return"scope"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"clientInfo",{get:function(){return"client_info"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"clientId",{get:function(){return"clientId"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"idToken",{get:function(){return"id_token"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"adalIdToken",{get:function(){return"adal.idtoken"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"accessToken",{get:function(){return"access_token"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"expiresIn",{get:function(){return"expires_in"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"sessionState",{get:function(){return"session_state"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"claims",{get:function(){return"claims"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"msalClientInfo",{get:function(){return"msal.client.info"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"msalError",{get:function(){return"msal.error"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"msalErrorDescription",{get:function(){return"msal.error.description"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"msalSessionState",{get:function(){return"msal.session.state"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"tokenKeys",{get:function(){return"msal.token.keys"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"accessTokenKey",{get:function(){return"msal.access.token.key"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"expirationKey",{get:function(){return"msal.expiration.key"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"stateLogin",{get:function(){return"msal.state.login"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"stateAcquireToken",{get:function(){return"msal.state.acquireToken"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"stateRenew",{get:function(){return"msal.state.renew"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"nonceIdToken",{get:function(){return"msal.nonce.idtoken"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"userName",{get:function(){return"msal.username"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"idTokenKey",{get:function(){return"msal.idtoken"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"loginRequest",{get:function(){return"msal.login.request"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"loginError",{get:function(){return"msal.login.error"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"renewStatus",{get:function(){return"msal.token.renew.status"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"urlHash",{get:function(){return"msal.urlHash"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"angularLoginRequest",{get:function(){return"msal.angular.login.request"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"msal",{get:function(){return"msal"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"no_account",{get:function(){return"NO_ACCOUNT"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"consumersUtid",{get:function(){return"9188040d-6c67-4c5b-b112-36a304b66dad"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"upn",{get:function(){return"upn"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"prompt_select_account",{get:function(){return"&prompt=select_account"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"prompt_none",{get:function(){return"&prompt=none"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"prompt",{get:function(){return"prompt"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"response_mode_fragment",{get:function(){return"&response_mode=fragment"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"resourceDelimiter",{get:function(){return"|"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"tokenRenewStatusCancelled",{get:function(){return"Canceled"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"tokenRenewStatusCompleted",{get:function(){return"Completed"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"tokenRenewStatusInProgress",{get:function(){return"In Progress"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"popUpWidth",{get:function(){return this._popUpWidth},set:function(e){this._popUpWidth=e},enumerable:!0,configurable:!0}),Object.defineProperty(e,"popUpHeight",{get:function(){return this._popUpHeight},set:function(e){this._popUpHeight=e},enumerable:!0,configurable:!0}),Object.defineProperty(e,"login",{get:function(){return"LOGIN"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"renewToken",{get:function(){return"RENEW_TOKEN"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"unknown",{get:function(){return"UNKNOWN"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"homeAccountIdentifier",{get:function(){return"homeAccountIdentifier"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"common",{get:function(){return"common"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"openidScope",{get:function(){return"openid"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"profileScope",{get:function(){return"profile"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"cacheLocationLocal",{get:function(){return"localStorage"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"cacheLocationSession",{get:function(){return"sessionStorage"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"interactionTypeRedirect",{get:function(){return"redirectInteraction"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"interactionTypePopup",{get:function(){return"popupInteraction"},enumerable:!0,configurable:!0}),e._popUpWidth=483,e._popUpHeight=600,e}(),s="msal.authority",u="msal.acquireTokenAccount",l={"login.windows.net":"login.windows.net","login.chinacloudapi.cn":"login.chinacloudapi.cn","login.cloudgovapi.us":"login.cloudgovapi.us","login.microsoftonline.com":"login.microsoftonline.com","login.microsoftonline.de":"login.microsoftonline.de","login.microsoftonline.us":"login.microsoftonline.us"},d="sid",p="login_hint",h="id_token",f="domain_hint",g="organizations",m="consumers",y="homeAccountIdentifier",v="login_req",w="domain_req",I=[d,p],b={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none"};var k=function(){function e(){}return e.isIntersectingScopes=function(e,t){e=this.convertToLowerCase(e);for(var n=0;n<t.length;n++)if(e.indexOf(t[n].toLowerCase())>-1)return!0;return!1},e.containsScope=function(e,t){return e=this.convertToLowerCase(e),t.every((function(t){return e.indexOf(t.toString().toLowerCase())>=0}))},e.convertToLowerCase=function(e){return e.map((function(e){return e.toLowerCase()}))},e.removeElement=function(e,t){return e.filter((function(e){return e!==t}))},e.parseScope=function(e){var t="";if(e)for(var n=0;n<e.length;++n)t+=n!==e.length-1?e[n]+" ":e[n];return t},e}(),T=function(){function e(){}return e.isEmpty=function(e){return void 0===e||!e||0===e.length},e}(),S=function(){function e(){}return e.createNavigateUrl=function(e){var t=this.createNavigationUrlString(e),n=e.authorityInstance.AuthorizationEndpoint;return n.indexOf("?")<0?n+="?":n+="&",""+n+t.join("&")},e.createNavigationUrlString=function(e){var t=e.scopes;-1===t.indexOf(e.clientId)&&t.push(e.clientId);var n=[];return n.push("response_type="+e.responseType),this.translateclientIdUsedInScope(t,e.clientId),n.push("scope="+encodeURIComponent(k.parseScope(t))),n.push("client_id="+encodeURIComponent(e.clientId)),n.push("redirect_uri="+encodeURIComponent(e.redirectUri)),n.push("state="+encodeURIComponent(e.state)),n.push("nonce="+encodeURIComponent(e.nonce)),n.push("client_info=1"),n.push("x-client-SKU="+e.xClientSku),n.push("x-client-Ver="+e.xClientVer),e.promptValue&&n.push("prompt="+encodeURIComponent(e.promptValue)),e.claimsValue&&n.push("claims="+encodeURIComponent(e.claimsValue)),e.queryParameters&&n.push(e.queryParameters),e.extraQueryParameters&&n.push(e.extraQueryParameters),n.push("client-request-id="+encodeURIComponent(e.correlationId)),n},e.translateclientIdUsedInScope=function(e,t){var n=e.indexOf(t);n>=0&&(e.splice(n,1),-1===e.indexOf("openid")&&e.push("openid"),-1===e.indexOf("profile")&&e.push("profile"))},e.getDefaultRedirectUri=function(){return window.location.href.split("?")[0].split("#")[0]},e.replaceTenantPath=function(e,t){e=e.toLowerCase();var n=this.GetUrlComponents(e),r=n.PathSegments;return!t||0===r.length||r[0]!==c.common&&r[0]!==g||(r[0]=t),this.constructAuthorityUriFromObject(n,r)},e.constructAuthorityUriFromObject=function(e,t){return this.CanonicalizeUri(e.Protocol+"//"+e.HostNameAndPort+"/"+t.join("/"))},e.GetUrlComponents=function(e){if(!e)throw"Url required";var t=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),n=e.match(t);if(!n||n.length<6)throw"Valid url required";var r={Protocol:n[1],HostNameAndPort:n[4],AbsolutePath:n[5]},o=r.AbsolutePath.split("/");return o=o.filter((function(e){return e&&e.length>0})),r.PathSegments=o,r},e.CanonicalizeUri=function(t){return t&&(t=t.toLowerCase()),t&&!e.endsWith(t,"/")&&(t+="/"),t},e.endsWith=function(e,t){return!(!e||!t)&&-1!==e.indexOf(t,e.length-t.length)},e.urlRemoveQueryStringParameter=function(e,t){if(T.isEmpty(e))return e;var n=new RegExp("(\\&"+t+"=)[^&]+");return e=e.replace(n,""),n=new RegExp("("+t+"=)[^&]+&"),e=e.replace(n,""),n=new RegExp("("+t+"=)[^&]+"),e=e.replace(n,"")},e.getHashFromUrl=function(e){var t=e.indexOf("#"),n=e.indexOf("#/");return n>-1?e.substring(n+2):t>-1?e.substring(t+1):e},e}(),C=function(e,t,n,r,o){this.authority=S.CanonicalizeUri(e),this.clientId=t,this.scopes=n,this.homeAccountIdentifier=a.base64Encode(r)+"."+a.base64Encode(o)},E=function(e,t,n,r){this.accessToken=e,this.idToken=t,this.expiresIn=n,this.homeAccountIdentifier=r},A={code:"unexpected_error",desc:"Unexpected error in authentication."},P=function(e){function t(n,r){var o=e.call(this,r)||this;return Object.setPrototypeOf(o,t.prototype),o.errorCode=n,o.errorMessage=r,o.name="AuthError",o}return o(t,e),t.createUnexpectedError=function(e){return new t(A.code,A.desc+": "+e)},t}(Error),_={code:"multiple_matching_tokens",desc:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements like authority."},O={code:"multiple_authorities",desc:"Multiple authorities found in the cache. Pass authority in the API overload."},R={code:"endpoints_resolution_error",desc:"Error: could not resolve endpoints. Please check network and try again."},x={code:"popup_window_error",desc:"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser."},q={code:"token_renewal_error",desc:"Token renewal operation failed due to timeout."},U={code:"invalid_id_token",desc:"Invalid ID token format."},j={code:"invalid_state_error",desc:"Invalid state."},L={code:"nonce_mismatch_error",desc:"Nonce is not matching, Nonce received: "},N={code:"login_progress_error",desc:"Login_In_Progress: Error during login call - login is already in progress."},M={code:"acquiretoken_progress_error",desc:"AcquireToken_In_Progress: Error during login call - login is already in progress."},H={code:"user_cancelled",desc:"User cancelled the flow."},D={code:"callback_error",desc:"Error occurred in token received callback function."},F={code:"user_login_error",desc:"User login is required."},W={code:"user_non_existent",desc:"User object does not exist. Please call a login API."},K={code:"client_info_decoding_error",desc:"The client info could not be parsed/decoded correctly. Please review the trace to determine the root cause."},V={code:"client_info_not_populated_error",desc:"The service did not populate client_info in the response, Please verify with the service team"},G={code:"null_or_empty_id_token",desc:"The idToken is null or empty. Please review the trace to determine the root cause."},z={code:"id_token_parsing_error",desc:"ID token cannot be parsed. Please review stack trace to determine root cause."},B={code:"token_encoding_error",desc:"The token to be decoded is not encoded correctly."},J={code:"invalid_interaction_type",desc:"The interaction type passed to the handler was incorrect or unknown"},Q=function(e){function t(n,r){var o=e.call(this,n,r)||this;return o.name="ClientAuthError",Object.setPrototypeOf(o,t.prototype),o}return o(t,e),t.createEndpointResolutionError=function(e){var n=R.desc;return e&&!T.isEmpty(e)&&(n+=" Details: "+e),new t(R.code,n)},t.createMultipleMatchingTokensInCacheError=function(e){return new t(_.code,"Cache error for scope "+e+": "+_.desc+".")},t.createMultipleAuthoritiesInCacheError=function(e){return new t(O.code,"Cache error for scope "+e+": "+O.desc+".")},t.createPopupWindowError=function(e){var n=x.desc;return e&&!T.isEmpty(e)&&(n+=" Details: "+e),new t(x.code,n)},t.createTokenRenewalTimeoutError=function(){return new t(q.code,q.desc)},t.createInvalidIdTokenError=function(e){return new t(U.code,U.desc+" Given token: "+e)},t.createInvalidStateError=function(e,n){return new t(j.code,j.desc+" "+e+", state expected : "+n+".")},t.createNonceMismatchError=function(e,n){return new t(L.code,L.desc+" "+e+", nonce expected : "+n+".")},t.createLoginInProgressError=function(){return new t(N.code,N.desc)},t.createAcquireTokenInProgressError=function(){return new t(M.code,M.desc)},t.createUserCancelledError=function(){return new t(H.code,H.desc)},t.createErrorInCallbackFunction=function(e){return new t(D.code,D.desc+" "+e+".")},t.createUserLoginRequiredError=function(){return new t(F.code,F.desc)},t.createUserDoesNotExistError=function(){return new t(W.code,W.desc)},t.createClientInfoDecodingError=function(e){return new t(K.code,K.desc+" Failed with error: "+e)},t.createClientInfoNotPopulatedError=function(e){return new t(V.code,V.desc+" Failed with error: "+e)},t.createIdTokenNullOrEmptyError=function(e){return new t(G.code,G.desc+" Raw ID Token Value: "+e)},t.createIdTokenParsingError=function(e){return new t(z.code,z.desc+" Failed with error: "+e)},t.createTokenEncodingError=function(e){return new t(B.code,B.desc+" Attempted to decode: "+e)},t.createInvalidInteractionTypeError=function(){return new t(J.code,J.desc)},t}(P),X={configurationNotSet:{code:"no_config_set",desc:"Configuration has not been set. Please call the UserAgentApplication constructor with a valid Configuration object."},invalidCacheLocation:{code:"invalid_cache_location",desc:"The cache location provided is not valid."},noStorageSupported:{code:"browser_storage_not_supported",desc:"localStorage and sessionStorage are not supported."},noRedirectCallbacksSet:{code:"no_redirect_callbacks",desc:"No redirect callbacks have been set. Please call setRedirectCallbacks() with the appropriate function arguments before continuing. More information is available here: https://github.com/AzureAD/microsoft-authentication-library-for-js/wiki/MSAL-basics."},invalidCallbackObject:{code:"invalid_callback_object",desc:"The object passed for the callback was invalid. More information is available here: https://github.com/AzureAD/microsoft-authentication-library-for-js/wiki/MSAL-basics."},scopesRequired:{code:"scopes_required",desc:"Scopes are required to obtain an access token."},emptyScopes:{code:"empty_input_scopes_error",desc:"Scopes cannot be passed as empty array."},nonArrayScopes:{code:"nonarray_input_scopes_error",desc:"Scopes cannot be passed as non-array."},clientScope:{code:"clientid_input_scopes_error",desc:"Client ID can only be provided as a single scope."},invalidPrompt:{code:"invalid_prompt_value",desc:"Supported prompt values are 'login', 'select_account', 'consent' and 'none'"},invalidAuthorityType:{code:"invalid_authority_type",desc:"The given authority is not a valid type of authority supported by MSAL. Please see here for valid authorities: <insert URL here>."},authorityUriInsecure:{code:"authority_uri_insecure",desc:"Authority URIs must use https."},authorityUriInvalidPath:{code:"authority_uri_invalid_path",desc:"Given authority URI is invalid."},unsupportedAuthorityValidation:{code:"unsupported_authority_validation",desc:"The authority validation is not supported for this authority type."},b2cAuthorityUriInvalidPath:{code:"b2c_authority_uri_invalid_path",desc:"The given URI for the B2C authority is invalid."},claimsRequestParsingError:{code:"claims_request_parsing_error",desc:"Could not parse the given claims request object."},emptyRequestError:{code:"empty_request_error",desc:"Request object is required."},telemetryConfigError:{code:"telemetry_config_error",desc:"Telemetry config is not configured with required values"}},Y=function(e){function t(n,r){var o=e.call(this,n,r)||this;return o.name="ClientConfigurationError",Object.setPrototypeOf(o,t.prototype),o}return o(t,e),t.createNoSetConfigurationError=function(){return new t(X.configurationNotSet.code,""+X.configurationNotSet.desc)},t.createInvalidCacheLocationConfigError=function(e){return new t(X.invalidCacheLocation.code,X.invalidCacheLocation.desc+" Provided value: "+e+". Possible values are: "+c.cacheLocationLocal+", "+c.cacheLocationSession+".")},t.createNoStorageSupportedError=function(){return new t(X.noStorageSupported.code,X.noStorageSupported.desc)},t.createRedirectCallbacksNotSetError=function(){return new t(X.noRedirectCallbacksSet.code,X.noRedirectCallbacksSet.desc)},t.createInvalidCallbackObjectError=function(e){return new t(X.invalidCallbackObject.code,X.invalidCallbackObject.desc+" Given value for callback function: "+e)},t.createEmptyScopesArrayError=function(e){return new t(X.emptyScopes.code,X.emptyScopes.desc+" Given value: "+e+".")},t.createScopesNonArrayError=function(e){return new t(X.nonArrayScopes.code,X.nonArrayScopes.desc+" Given value: "+e+".")},t.createClientIdSingleScopeError=function(e){return new t(X.clientScope.code,X.clientScope.desc+" Given value: "+e+".")},t.createScopesRequiredError=function(e){return new t(X.scopesRequired.code,X.scopesRequired.desc+" Given value: "+e)},t.createInvalidPromptError=function(e){return new t(X.invalidPrompt.code,X.invalidPrompt.desc+" Given value: "+e)},t.createClaimsRequestParsingError=function(e){return new t(X.claimsRequestParsingError.code,X.claimsRequestParsingError.desc+" Given value: "+e)},t.createEmptyRequestError=function(){var e=X.emptyRequestError;return new t(e.code,e.desc)},t.createTelemetryConfigError=function(e){var n=X.telemetryConfigError,r=n.code,o=n.desc,i={applicationName:"string",applicationVersion:"string",telemetryEmitter:"function"};return new t(r,o+" mising values: "+Object.keys(i).reduce((function(t,n){return e[n]?t:t.concat([n+" ("+i[n]+")"])}),[]).join(","))},t}(Q);var $,Z=function(){function e(e,t,n,r,o,i){this.authorityInstance=e,this.clientId=t,this.scopes=n?n.slice():[t],this.nonce=a.createNewGuid(),this.state=i&&!T.isEmpty(i)?a.createNewGuid()+"|"+i:a.createNewGuid(),this.correlationId=a.createNewGuid(),this.xClientSku="MSAL.JS",this.xClientVer="1.1.3",this.responseType=r,this.redirectUri=o}return Object.defineProperty(e.prototype,"authority",{get:function(){return this.authorityInstance?this.authorityInstance.CanonicalAuthority:null},enumerable:!0,configurable:!0}),e.prototype.populateQueryParams=function(t,n,r){var o,i={};n&&(n.prompt&&(this.validatePromptParameter(n.prompt),this.promptValue=n.prompt),n.claimsRequest&&(!function(e){if(e.claimsRequest)try{JSON.parse(e.claimsRequest)}catch(e){throw Y.createClaimsRequestParsingError(e)}}(n),this.claimsValue=n.claimsRequest),e.isSSOParam(n)&&(i=this.constructUnifiedCacheQueryParameter(n,null))),r&&(i=this.constructUnifiedCacheQueryParameter(null,r)),i=this.addHintParameters(t,i),n&&(o=this.sanitizeEQParams(n)),this.queryParameters=e.generateQueryParametersString(i),this.extraQueryParameters=e.generateQueryParametersString(o)},e.prototype.validatePromptParameter=function(e){if(!([b.LOGIN,b.SELECT_ACCOUNT,b.CONSENT,b.NONE].indexOf(e)>=0))throw Y.createInvalidPromptError(e)},e.prototype.constructUnifiedCacheQueryParameter=function(e,t){var n,r,o={};if(e)if(e.account){var i=e.account;i.sid?(n=d,r=i.sid):i.userName&&(n=p,r=i.userName)}else e.sid?(n=d,r=e.sid):e.loginHint&&(n=p,r=e.loginHint);else t&&(t.hasOwnProperty(c.upn)?(n=h,r=t.upn):(n=g,r=null));return o=this.addSSOParameter(n,r),e&&e.account&&e.account.homeAccountIdentifier&&(o=this.addSSOParameter(y,e.account.homeAccountIdentifier,o)),o},e.prototype.addHintParameters=function(e,t){if(e&&!t[d]){if(!t[p]&&e.sid&&this.promptValue===b.NONE)t=this.addSSOParameter(d,e.sid,t);else!t[p]&&e.userName&&!T.isEmpty(e.userName)&&(t=this.addSSOParameter(p,e.userName,t));!t[w]&&!t[v]&&(t=this.addSSOParameter(y,e.homeAccountIdentifier,t))}return t},e.prototype.addSSOParameter=function(e,t,n){if(n||(n={}),!t)return n;switch(e){case d:n[d]=t;break;case h:n[p]=t,n[f]=g;break;case p:n[p]=t;break;case g:n[f]=g;break;case m:n[f]=m;break;case y:var r=t.split("."),o=a.base64Decode(r[0]),i=a.base64Decode(r[1]);n[v]=o,n[w]=i,i===c.consumersUtid?n[f]=m:n[f]=g;break;case v:n[v]=t;break;case w:n[w]=t}return n},e.prototype.sanitizeEQParams=function(e){var t=e.extraQueryParameters;return t?(e.claimsRequest&&delete t[c.claims],I.forEach((function(e){t[e]&&delete t[e]})),t):null},e.generateQueryParametersString=function(e){var t=null;return e&&Object.keys(e).forEach((function(n){null==t?t=n+"="+encodeURIComponent(e[n]):t+="&"+n+"="+encodeURIComponent(e[n])})),t},e.isSSOParam=function(e){return e&&(e.account||e.sid||e.loginHint)},e}(),ee=function(){function e(e){if(!e||T.isEmpty(e))return this.uid="",void(this.utid="");try{var t=a.base64Decode(e),n=JSON.parse(t);n&&(n.hasOwnProperty("uid")&&(this.uid=n.uid),n.hasOwnProperty("utid")&&(this.utid=n.utid))}catch(e){throw Q.createClientInfoDecodingError(e)}}return Object.defineProperty(e.prototype,"uid",{get:function(){return this._uid?this._uid:""},set:function(e){this._uid=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"utid",{get:function(){return this._utid?this._utid:""},set:function(e){this._utid=e},enumerable:!0,configurable:!0}),e}(),te=function(){function e(){}return e.decodeJwt=function(e){if(T.isEmpty(e))return null;var t=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(e);return!t||t.length<4?null:{header:t[1],JWSPayload:t[2],JWSSig:t[3]}},e.extractIdToken=function(e){var t=this.decodeJwt(e);if(!t)return null;try{var n=t.JWSPayload,r=a.base64Decode(n);return r?JSON.parse(r):null}catch(e){}return null},e}(),ne=function(e){if(T.isEmpty(e))throw Q.createIdTokenNullOrEmptyError(e);try{this.rawIdToken=e,this.claims=te.extractIdToken(e),this.claims&&(this.claims.hasOwnProperty("iss")&&(this.issuer=this.claims.iss),this.claims.hasOwnProperty("oid")&&(this.objectId=this.claims.oid),this.claims.hasOwnProperty("sub")&&(this.subject=this.claims.sub),this.claims.hasOwnProperty("tid")&&(this.tenantId=this.claims.tid),this.claims.hasOwnProperty("ver")&&(this.version=this.claims.ver),this.claims.hasOwnProperty("preferred_username")&&(this.preferredName=this.claims.preferred_username),this.claims.hasOwnProperty("name")&&(this.name=this.claims.name),this.claims.hasOwnProperty("nonce")&&(this.nonce=this.claims.nonce),this.claims.hasOwnProperty("exp")&&(this.expiration=this.claims.exp),this.claims.hasOwnProperty("home_oid")&&(this.homeObjectId=this.claims.home_oid),this.claims.hasOwnProperty("sid")&&(this.sid=this.claims.sid))}catch(e){throw Q.createIdTokenParsingError(e)}},re=function(e,t){this.key=e,this.value=t},oe=function(){function e(t){if(e.instance)return e.instance;if(this.cacheLocation=t,this.localStorageSupported=void 0!==window[this.cacheLocation]&&null!=window[this.cacheLocation],this.sessionStorageSupported=void 0!==window[t]&&null!=window[t],e.instance=this,!this.localStorageSupported&&!this.sessionStorageSupported)throw Y.createNoStorageSupportedError();return e.instance}return e.prototype.setItem=function(e,t,n){window[this.cacheLocation]&&window[this.cacheLocation].setItem(e,t),n&&this.setItemCookie(e,t)},e.prototype.getItem=function(e,t){return t&&this.getItemCookie(e)?this.getItemCookie(e):window[this.cacheLocation]?window[this.cacheLocation].getItem(e):null},e.prototype.removeItem=function(e){if(window[this.cacheLocation])return window[this.cacheLocation].removeItem(e)},e.prototype.clear=function(){if(window[this.cacheLocation])return window[this.cacheLocation].clear()},e.prototype.getAllAccessTokens=function(e,t){var n,r=[],o=window[this.cacheLocation];if(o){var i=void 0;for(i in o)if(o.hasOwnProperty(i)&&i.match(e)&&i.match(t)){var a=this.getItem(i);a&&(n=new re(JSON.parse(i),JSON.parse(a)),r.push(n))}}return r},e.prototype.removeAcquireTokenEntries=function(e){var t=window[this.cacheLocation];if(t){var n=void 0;for(n in t)if(t.hasOwnProperty(n)&&!(-1===n.indexOf(s)&&1===n.indexOf(u)||e&&-1===n.indexOf(e))){var r=n.split(c.resourceDelimiter),o=void 0;r.length>1&&(o=r[1]),o&&!this.tokenRenewalInProgress(o)&&(this.removeItem(n),this.removeItem(c.renewStatus+o),this.removeItem(c.stateLogin),this.removeItem(c.stateAcquireToken),this.setItemCookie(n,"",-1))}}this.clearCookie()},e.prototype.tokenRenewalInProgress=function(e){var t=window[this.cacheLocation][c.renewStatus+e];return!(!t||t!==c.tokenRenewStatusInProgress)},e.prototype.resetCacheItems=function(){var e=window[this.cacheLocation];if(e){var t=void 0;for(t in e)e.hasOwnProperty(t)&&-1!==t.indexOf(c.msal)&&this.removeItem(t);this.removeAcquireTokenEntries()}},e.prototype.setItemCookie=function(e,t,n){var r=e+"="+t+";";n&&(r+="expires="+this.getCookieExpirationTime(n)+";");document.cookie=r},e.prototype.getItemCookie=function(e){for(var t=e+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var o=n[r];" "===o.charAt(0);)o=o.substring(1);if(0===o.indexOf(t))return o.substring(t.length,o.length)}return""},e.prototype.getCookieExpirationTime=function(e){var t=new Date;return new Date(t.getTime()+24*e*60*60*1e3).toUTCString()},e.prototype.clearCookie=function(){this.setItemCookie(c.nonceIdToken,"",-1),this.setItemCookie(c.stateLogin,"",-1),this.setItemCookie(c.loginRequest,"",-1),this.setItemCookie(c.stateAcquireToken,"",-1)},e.generateAcquireTokenAccountKey=function(e,t){return u+c.resourceDelimiter+""+e+c.resourceDelimiter+t},e.generateAuthorityKey=function(e){return s+c.resourceDelimiter+""+e},e}(),ie=function(){function e(e,t,n,r,o,i,a){this.accountIdentifier=e,this.homeAccountIdentifier=t,this.userName=n,this.name=r,this.idToken=o,this.idTokenClaims=o,this.sid=i,this.environment=a}return e.createAccount=function(t,n){var r,o=t.objectId||t.subject,i=n?n.uid:"",c=n?n.utid:"";return T.isEmpty(i)||T.isEmpty(c)||(r=a.base64Encode(i)+"."+a.base64Encode(c)),new e(o,r,t.preferredName,t.name,t.claims,t.sid,t.issuer)},e.compareAccounts=function(e,t){return!(!e||!t)&&!(!e.homeAccountIdentifier||!t.homeAccountIdentifier||e.homeAccountIdentifier!==t.homeAccountIdentifier)},e}(),ae=function(){function e(){}return e.parseExpiresIn=function(e){return e||(e="3599"),parseInt(e,10)},e.now=function(){return Math.round((new Date).getTime()/1e3)},e}(),ce=function(){function e(){}return e.setResponseIdToken=function(e,t){if(!e)return null;if(!t)return e;var n=Number(t.expiration);return n&&!e.expiresOn&&(e.expiresOn=new Date(1e3*n)),i({},e,{idToken:t,idTokenClaims:t.claims,uniqueId:t.objectId||t.subject,tenantId:t.tenantId})},e}(),se=function(){function e(){}return e.prototype.sendRequestAsync=function(e,t,n){var r=this;return new Promise((function(n,o){var i=new XMLHttpRequest;if(i.open(t,e,!0),i.onload=function(e){(i.status<200||i.status>=300)&&o(r.handleError(i.responseText));try{var t=JSON.parse(i.responseText)}catch(e){o(r.handleError(i.responseText))}n(t)},i.onerror=function(e){o(i.status)},"GET"!==t)throw"not implemented";i.send()}))},e.prototype.handleError=function(e){var t;try{if((t=JSON.parse(e)).error)return t.error;throw e}catch(t){return e}},e}();!function(e){e[e.Aad=0]="Aad",e[e.Adfs=1]="Adfs",e[e.B2C=2]="B2C"}($||($={}));var ue,le=function(){function e(e,t){this.IsValidationEnabled=t,this.CanonicalAuthority=e,this.validateAsUri()}return Object.defineProperty(e.prototype,"Tenant",{get:function(){return this.CanonicalAuthorityUrlComponents.PathSegments[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AuthorizationEndpoint",{get:function(){return this.validateResolved(),this.tenantDiscoveryResponse.AuthorizationEndpoint.replace("{tenant}",this.Tenant)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"EndSessionEndpoint",{get:function(){return this.validateResolved(),this.tenantDiscoveryResponse.EndSessionEndpoint.replace("{tenant}",this.Tenant)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"SelfSignedJwtAudience",{get:function(){return this.validateResolved(),this.tenantDiscoveryResponse.Issuer.replace("{tenant}",this.Tenant)},enumerable:!0,configurable:!0}),e.prototype.validateResolved=function(){if(!this.tenantDiscoveryResponse)throw"Please call ResolveEndpointsAsync first"},Object.defineProperty(e.prototype,"CanonicalAuthority",{get:function(){return this.canonicalAuthority},set:function(e){this.canonicalAuthority=S.CanonicalizeUri(e),this.canonicalAuthorityUrlComponents=null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CanonicalAuthorityUrlComponents",{get:function(){return this.canonicalAuthorityUrlComponents||(this.canonicalAuthorityUrlComponents=S.GetUrlComponents(this.CanonicalAuthority)),this.canonicalAuthorityUrlComponents},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"DefaultOpenIdConfigurationEndpoint",{get:function(){return this.CanonicalAuthority+"v2.0/.well-known/openid-configuration"},enumerable:!0,configurable:!0}),e.prototype.validateAsUri=function(){var e;try{e=this.CanonicalAuthorityUrlComponents}catch(e){throw X.invalidAuthorityType}if(!e.Protocol||"https:"!==e.Protocol.toLowerCase())throw X.authorityUriInsecure;if(!e.PathSegments||e.PathSegments.length<1)throw X.authorityUriInvalidPath},e.prototype.DiscoverEndpoints=function(e){return(new se).sendRequestAsync(e,"GET",!0).then((function(e){return{AuthorizationEndpoint:e.authorization_endpoint,EndSessionEndpoint:e.end_session_endpoint,Issuer:e.issuer}}))},e.prototype.resolveEndpointsAsync=function(){var e=this,t="";return this.GetOpenIdConfigurationEndpointAsync().then((function(n){return t=n,e.DiscoverEndpoints(t)})).then((function(t){return e.tenantDiscoveryResponse=t,e}))},e}(),de=function(e){function t(t,n){return e.call(this,t,n)||this}return o(t,e),Object.defineProperty(t.prototype,"AadInstanceDiscoveryEndpointUrl",{get:function(){return t.AadInstanceDiscoveryEndpoint+"?api-version=1.0&authorization_endpoint="+this.CanonicalAuthority+"oauth2/v2.0/authorize"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"AuthorityType",{get:function(){return $.Aad},enumerable:!0,configurable:!0}),t.prototype.GetOpenIdConfigurationEndpointAsync=function(){var e=this,t=new Promise((function(t,n){return t(e.DefaultOpenIdConfigurationEndpoint)}));if(!this.IsValidationEnabled)return t;var n=this.CanonicalAuthorityUrlComponents.HostNameAndPort;return this.IsInTrustedHostList(n)?t:(new se).sendRequestAsync(this.AadInstanceDiscoveryEndpointUrl,"GET",!0).then((function(e){return e.tenant_discovery_endpoint}))},t.prototype.IsInTrustedHostList=function(e){return l[e.toLowerCase()]},t.AadInstanceDiscoveryEndpoint="https://login.microsoftonline.com/common/discovery/instance",t}(le),pe=function(e){function t(t,n){var r=e.call(this,t,n)||this,o=S.GetUrlComponents(t),i=o.PathSegments;if(i.length<3)throw X.b2cAuthorityUriInvalidPath;return r.CanonicalAuthority="https://"+o.HostNameAndPort+"/"+i[0]+"/"+i[1]+"/"+i[2]+"/",r}return o(t,e),Object.defineProperty(t.prototype,"AuthorityType",{get:function(){return $.B2C},enumerable:!0,configurable:!0}),t.prototype.GetOpenIdConfigurationEndpointAsync=function(){var e=this,t=new Promise((function(t,n){return t(e.DefaultOpenIdConfigurationEndpoint)}));return this.IsValidationEnabled?this.IsInTrustedHostList(this.CanonicalAuthorityUrlComponents.HostNameAndPort)?t:new Promise((function(e,t){return t(X.unsupportedAuthorityValidation)})):t},t.B2C_PREFIX="tfp",t}(de),he=function(){function e(){}return e.DetectAuthorityFromUrl=function(e){switch(e=S.CanonicalizeUri(e),S.GetUrlComponents(e).PathSegments[0]){case"tfp":return $.B2C;case"adfs":return $.Adfs;default:return $.Aad}},e.CreateInstance=function(t,n){if(T.isEmpty(t))return null;switch(e.DetectAuthorityFromUrl(t)){case $.B2C:return new pe(t,n);case $.Aad:return new de(t,n);default:throw X.invalidAuthorityType}},e}();!function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Info=2]="Info",e[e.Verbose=3]="Verbose"}(ue||(ue={}));var fe=function(){function e(e,t){void 0===t&&(t={}),this.level=ue.Info;var n=t.correlationId,r=void 0===n?"":n,o=t.level,i=void 0===o?ue.Info:o,a=t.piiLoggingEnabled,c=void 0!==a&&a;this.localCallback=e,this.correlationId=r,this.level=i,this.piiLoggingEnabled=c}return e.prototype.logMessage=function(e,t,n){if(!(e>this.level||!this.piiLoggingEnabled&&n)){var r,o=(new Date).toUTCString();r=T.isEmpty(this.correlationId)?o+":1.1.3-"+ue[e]+" "+t:o+":"+this.correlationId+"-1.1.3-"+ue[e]+" "+t,this.executeCallback(e,r,n)}},e.prototype.executeCallback=function(e,t,n){this.localCallback&&this.localCallback(e,t,n)},e.prototype.error=function(e){this.logMessage(ue.Error,e,!1)},e.prototype.errorPii=function(e){this.logMessage(ue.Error,e,!0)},e.prototype.warning=function(e){this.logMessage(ue.Warning,e,!1)},e.prototype.warningPii=function(e){this.logMessage(ue.Warning,e,!0)},e.prototype.info=function(e){this.logMessage(ue.Info,e,!1)},e.prototype.infoPii=function(e){this.logMessage(ue.Info,e,!0)},e.prototype.verbose=function(e){this.logMessage(ue.Verbose,e,!1)},e.prototype.verbosePii=function(e){this.logMessage(ue.Verbose,e,!0)},e.prototype.isPiiLoggingEnabled=function(){return this.piiLoggingEnabled},e}(),ge={clientId:"",authority:null,validateAuthority:!0,redirectUri:function(){return S.getDefaultRedirectUri()},postLogoutRedirectUri:function(){return S.getDefaultRedirectUri()},navigateToLoginRequestUrl:!0},me={cacheLocation:"sessionStorage",storeAuthStateInCookie:!1},ye={logger:new fe(null),loadFrameTimeout:6e3,tokenRenewalOffsetSeconds:300,navigateFrameWait:500},ve={isAngular:!1,unprotectedResources:new Array,protectedResourceMap:new Map};var we={code:"server_unavailable",desc:"Server is temporarily unavailable."},Ie={code:"unknown_server_error"},be=function(e){function t(n,r){var o=e.call(this,n,r)||this;return o.name="ServerError",Object.setPrototypeOf(o,t.prototype),o}return o(t,e),t.createServerUnavailableError=function(){return new t(we.code,we.desc)},t.createUnknownServerError=function(e){return new t(Ie.code,e)},t}(P),ke={code:"interaction_required"},Te={code:"consent_required"},Se={code:"login_required"},Ce=function(e){function t(n,r){var o=e.call(this,n,r)||this;return o.name="InteractionRequiredAuthError",Object.setPrototypeOf(o,t.prototype),o}return o(t,e),t.isInteractionRequiredError=function(e){var t=[ke.code,Te.code,Se.code];return e&&t.indexOf(e)>-1},t.createLoginRequiredAuthError=function(e){return new t(Se.code,e)},t.createInteractionRequiredAuthError=function(e){return new t(ke.code,e)},t.createConsentRequiredAuthError=function(e){return new t(Te.code,e)},t}(be);function Ee(e){return{uniqueId:"",tenantId:"",tokenType:"",idToken:null,idTokenClaims:null,accessToken:"",scopes:null,expiresOn:null,account:null,accountState:e}}var Ae="event_name",Pe="start_time",_e="elapsed_time",Oe={MsalCorrelationIdConstStrKey:"Microsoft.MSAL.correlation_id",ApiTelemIdConstStrKey:"msal.api_telem_id",ApiIdConstStrKey:"msal.api_id",BrokerAppConstStrKey:"Microsoft_MSAL_broker_app",CacheEventCountConstStrKey:"Microsoft_MSAL_cache_event_count",HttpEventCountTelemetryBatchKey:"Microsoft_MSAL_http_event_count",IdpConstStrKey:"Microsoft_MSAL_idp",IsSilentTelemetryBatchKey:"",IsSuccessfulConstStrKey:"Microsoft_MSAL_is_successful",ResponseTimeConstStrKey:"Microsoft_MSAL_response_time",TenantIdConstStrKey:"Microsoft_MSAL_tenant_id",UiEventCountTelemetryBatchKey:"Microsoft_MSAL_ui_event_count"},Re=function(e){return"msal."+(e||"")},xe=function(e){function t(t,n,r,o){var i=e.call(this,Re("default_event"),n)||this;return i.event[Re("client_id")]=r,i.event[Re("sdk_plaform")]=t.sdk,i.event[Re("sdk_version")]=t.sdkVersion,i.event[Re("application_name")]=t.applicationName,i.event[Re("application_version")]=t.applicationVersion,i.event[""+Oe.UiEventCountTelemetryBatchKey]=i.getEventCount(Re("ui_event"),o),i.event[""+Oe.HttpEventCountTelemetryBatchKey]=i.getEventCount(Re("http_event"),o),i.event[""+Oe.CacheEventCountConstStrKey]=i.getEventCount(Re("cache_event"),o),i}return o(t,e),t.prototype.getEventCount=function(e,t){return t[e]?t[e]:0},t}(function(){function e(e,t){var n;this.startTimestamp=Date.now(),this.eventId=a.createNewGuid(),this.event=((n={})[Re(Ae)]=e,n[Re(Pe)]=this.startTimestamp,n[Re(_e)]=-1,n[""+Oe.MsalCorrelationIdConstStrKey]=t,n)}return e.prototype.setElapsedTime=function(e){this.event[Re(_e)]=e},e.prototype.stop=function(){this.setElapsedTime(+Date.now()-+this.startTimestamp)},Object.defineProperty(e.prototype,"telemetryCorrelationId",{get:function(){return this.event[""+Oe.MsalCorrelationIdConstStrKey]},set:function(e){this.event[""+Oe.MsalCorrelationIdConstStrKey]=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"eventName",{get:function(){return this.event[Re(Ae)]},enumerable:!0,configurable:!0}),e.prototype.get=function(){return i({},this.event,{eventId:this.eventId})},e}()),qe=function(e){return e.telemetryCorrelationId+"-"+e.eventId+"-"+e.eventName},Ue=function(){function e(e,t){this.completedEvents={},this.inProgressEvents={},this.eventCountByCorrelationId={},this.onlySendFailureTelemetry=!1,this.telemetryPlatform=e.platform,this.clientId=e.clientId,this.onlySendFailureTelemetry=e.onlySendFailureTelemetry,this.telemetryEmitter=t}return e.prototype.startEvent=function(e){if(this.telemetryEmitter){var t=qe(e);this.inProgressEvents[t]=e}},e.prototype.stopEvent=function(e){var t=qe(e);if(this.telemetryEmitter&&this.inProgressEvents[t]){e.stop(),this.incrementEventCount(e);var n=this.completedEvents[e.telemetryCorrelationId];this.completedEvents[e.telemetryCorrelationId]=(n||[]).concat([e]),delete this.inProgressEvents[t]}},e.prototype.flush=function(e){var t=this;if(this.telemetryEmitter&&this.completedEvents[e]){var n=this.getOrphanedEvents(e);n.forEach((function(e){return t.incrementEventCount(e)}));var r=this.completedEvents[e].concat(n);delete this.completedEvents[e];var o=this.eventCountByCorrelationId[e];if(delete this.eventCountByCorrelationId[e],r&&r.length){var i=new xe(this.telemetryPlatform,e,this.clientId,o),a=r.concat([i]);this.telemetryEmitter(a.map((function(e){return e.get()})))}}},e.prototype.incrementEventCount=function(e){var t,n=e.eventName,r=this.eventCountByCorrelationId[e.telemetryCorrelationId];r?r[n]=r[n]?r[n]+1:1:this.eventCountByCorrelationId[e.telemetryCorrelationId]=((t={})[n]=1,t)},e.prototype.getOrphanedEvents=function(e){var t=this;return Object.keys(this.inProgressEvents).reduce((function(n,r){if(-1!==r.indexOf(e)){var o=t.inProgressEvents[r];return delete t.inProgressEvents[r],n.concat([o])}return n}),[])},e}(),je="https://login.microsoftonline.com/common",Le="id_token",Ne="token",Me="id_token token",He=function(e,t,n){var r=n.value;return n.value=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.isInIframe()?new Promise((function(){})):r.apply(this,e)},n},De=function(){function e(e){var t,n,r,o,a,c,s,u;this.authResponseCallback=null,this.tokenReceivedCallback=null,this.errorReceivedCallback=null,this.config=(n=(t=e).auth,r=t.cache,o=void 0===r?{}:r,a=t.system,c=void 0===a?{}:a,s=t.framework,u=void 0===s?{}:s,{auth:i({},ge,n),cache:i({},me,o),system:i({},ye,c),framework:i({},ve,u)}),this.redirectCallbacksSet=!1,this.logger=this.config.system.logger,this.clientId=this.config.auth.clientId,this.inCookie=this.config.cache.storeAuthStateInCookie,this.telemetryManager=this.getTelemetryManagerFromConfig(this.config.system.telemetry,this.clientId),this.authority=this.config.auth.authority||je,this.loginInProgress=!1,this.acquireTokenInProgress=!1;try{this.cacheStorage=new oe(this.config.cache.cacheLocation)}catch(e){throw Y.createInvalidCacheLocationConfigError(this.config.cache.cacheLocation)}window.openedWindows=[],window.activeRenewals={},window.renewStates=[],window.callbackMappedToRenewStates={},window.promiseMappedToRenewStates={},window.msal=this;var l=window.location.hash,d=this.urlContainsHash(l);this.config.framework.isAngular||d&&this.handleAuthenticationResponse(l)}return Object.defineProperty(e.prototype,"authority",{get:function(){return this.authorityInstance.CanonicalAuthority},set:function(e){this.authorityInstance=he.CreateInstance(e,this.config.auth.validateAuthority)},enumerable:!0,configurable:!0}),e.prototype.getAuthorityInstance=function(){return this.authorityInstance},e.prototype.handleRedirectCallback=function(e,t){if(!e)throw this.redirectCallbacksSet=!1,Y.createInvalidCallbackObjectError(e);if(t?(this.tokenReceivedCallback=e,this.errorReceivedCallback=t,this.logger.warning("This overload for callback is deprecated - please change the format of the callbacks to a single callback as shown: (err: AuthError, response: AuthResponse).")):this.authResponseCallback=e,this.redirectCallbacksSet=!0,!this.config.framework.isAngular){var n=this.cacheStorage.getItem(c.urlHash);n&&this.processCallBack(n,null)}},e.prototype.authResponseHandler=function(e,t,n){if(e===c.interactionTypeRedirect)this.errorReceivedCallback?this.tokenReceivedCallback(t):this.authResponseCallback&&this.authResponseCallback(null,t);else{if(e!==c.interactionTypePopup)throw Q.createInvalidInteractionTypeError();n(t)}},e.prototype.authErrorHandler=function(e,t,n,r){if(e===c.interactionTypeRedirect)this.errorReceivedCallback?this.errorReceivedCallback(t,n.accountState):this.authResponseCallback(t,n);else{if(e!==c.interactionTypePopup)throw Q.createInvalidInteractionTypeError();r(t)}},e.prototype.loginRedirect=function(e){if(!this.redirectCallbacksSet)throw Y.createRedirectCallbacksNotSetError();this.acquireTokenInteractive(c.interactionTypeRedirect,!0,e)},e.prototype.acquireTokenRedirect=function(e){if(!e)throw Y.createEmptyRequestError();if(!this.redirectCallbacksSet)throw Y.createRedirectCallbacksNotSetError();this.acquireTokenInteractive(c.interactionTypeRedirect,!1,e)},e.prototype.loginPopup=function(e){var t=this;return new Promise((function(n,r){t.acquireTokenInteractive(c.interactionTypePopup,!0,e,n,r)}))},e.prototype.acquireTokenPopup=function(e){var t=this;if(!e)throw Y.createEmptyRequestError();return new Promise((function(n,r){t.acquireTokenInteractive(c.interactionTypePopup,!1,e,n,r)}))},e.prototype.acquireTokenInteractive=function(e,t,n,r,o){var i=this;if(this.loginInProgress||this.acquireTokenInProgress){var a=this.loginInProgress?Q.createLoginInProgressError():Q.createAcquireTokenInProgressError(),c=Ee(this.getAccountState(n&&n.state));this.authErrorHandler(e,a,c,o)}else{var s=t?this.appendScopes(n):n.scopes;this.validateInputScope(s,!t);var u=n&&n.account&&!t?n.account:this.getAccount();if(u||Z.isSSOParam(n))this.acquireTokenHelper(u,e,t,n,s,r,o);else{if(!t)throw this.logger.info("User login is required"),Q.createUserLoginRequiredError();if(this.extractADALIdToken()&&!s){this.logger.info("ADAL's idToken exists. Extracting login information from ADAL's idToken ");var l=this.buildIDTokenRequest(n);this.silentLogin=!0,this.acquireTokenSilent(l).then((function(t){i.silentLogin=!1,i.logger.info("Unified cache call is successful"),i.authResponseHandler(e,t,r)}),(function(a){i.silentLogin=!1,i.logger.error("Error occurred during unified cache ATS: "+a),i.acquireTokenHelper(null,e,t,n,s,r,o)}))}else this.acquireTokenHelper(null,e,t,n,s,r,o)}}},e.prototype.acquireTokenHelper=function(e,t,n,r,o,i,a){var s=this;n?this.loginInProgress=!0:this.acquireTokenInProgress=!0;var u,l,d=o?o.join(" ").toLowerCase():this.clientId.toLowerCase(),p=!n&&r&&r.authority?he.CreateInstance(r.authority,this.config.auth.validateAuthority):this.authorityInstance;(t!==c.interactionTypePopup||(l=this.openWindow("about:blank","_blank",1,this,i,a)))&&p.resolveEndpointsAsync().then((function(){var h,f=n?Le:s.getTokenType(e,o,!1);n&&((h=s.cacheStorage.getItem(c.angularLoginRequest))&&""!==h?s.cacheStorage.setItem(c.angularLoginRequest,""):h=window.location.href),u=new Z(p,s.clientId,o,f,s.getRedirectUri(),r&&r.state),s.updateCacheEntries(u,e,h),u.populateQueryParams(e,r);var g=S.createNavigateUrl(u)+c.response_mode_fragment;if(t===c.interactionTypeRedirect)n||s.cacheStorage.setItem(c.stateAcquireToken,u.state,s.inCookie);else{if(t!==c.interactionTypePopup)throw Q.createInvalidInteractionTypeError();window.renewStates.push(u.state),window.requestType=n?c.login:c.renewToken,s.registerCallback(u.state,d,i,a)}s.navigateWindow(g,l)})).catch((function(e){s.logger.warning("could not resolve endpoints"),s.authErrorHandler(t,Q.createEndpointResolutionError(e.toString),Ee(r.state),a),l&&l.close()}))},e.prototype.acquireTokenSilent=function(e){var t=this;if(!e)throw Y.createEmptyRequestError();return new Promise((function(n,r){t.validateInputScope(e.scopes,!0);var o=e.scopes.join(" ").toLowerCase(),i=e.account||t.getAccount(),a=t.cacheStorage.getItem(c.adalIdToken);if(!i&&!e.sid&&!e.loginHint&&T.isEmpty(a))return t.logger.info("User login is required"),r(Q.createUserLoginRequiredError());var s=t.getTokenType(i,e.scopes,!0),u=new Z(he.CreateInstance(e.authority,t.config.auth.validateAuthority),t.clientId,e.scopes,s,t.getRedirectUri(),e&&e.state);if(Z.isSSOParam(e)||i)u.populateQueryParams(i,e);else if(!i&&!T.isEmpty(a)){var l=te.extractIdToken(a);t.logger.verbose("ADAL's idToken exists. Extracting login information from ADAL's idToken "),u.populateQueryParams(i,null,l)}var d,p,h=e.claimsRequest||u.claimsValue;if(!h&&!e.forceRefresh)try{p=t.getCachedToken(u,i)}catch(e){d=e}if(p)return t.logger.info("Token is already in cache for scope:"+o),n(p),null;if(d)return t.logger.infoPii(d.errorCode+":"+d.errorMessage),r(d),null;var f=void 0;return f=h?"Skipped cache lookup since claims were given.":e.forceRefresh?"Skipped cache lookup since request.forceRefresh option was set to true":"Token is not in cache for scope:"+o,t.logger.verbose(f),u.authorityInstance||(u.authorityInstance=e.authority?he.CreateInstance(e.authority,t.config.auth.validateAuthority):t.authorityInstance),u.authorityInstance.resolveEndpointsAsync().then((function(){window.activeRenewals[o]?(t.logger.verbose("Renew token for scope: "+o+" is in progress. Registering callback"),t.registerCallback(window.activeRenewals[o],o,n,r)):e.scopes&&e.scopes.indexOf(t.clientId)>-1&&1===e.scopes.length?(t.logger.verbose("renewing idToken"),t.silentLogin=!0,t.renewIdToken(e.scopes,n,r,i,u)):(t.logger.verbose("renewing accesstoken"),t.renewToken(e.scopes,n,r,i,u))})).catch((function(e){return t.logger.warning("could not resolve endpoints"),r(Q.createEndpointResolutionError(e.toString())),null}))}))},e.prototype.openWindow=function(e,t,n,r,o,i){var a,s=this;try{a=this.openPopup(e,t,c.popUpWidth,c.popUpHeight)}catch(e){return r.loginInProgress=!1,r.acquireTokenInProgress=!1,this.logger.info(x.code+":"+x.desc),this.cacheStorage.setItem(c.msalError,x.code),this.cacheStorage.setItem(c.msalErrorDescription,x.desc),i&&i(Q.createPopupWindowError()),null}window.openedWindows.push(a);var u=window.setInterval((function(){if(a&&a.closed&&(r.loginInProgress||r.acquireTokenInProgress)){if(i&&i(Q.createUserCancelledError()),window.clearInterval(u),s.config.framework.isAngular)return void s.broadcast("msal:popUpClosed",H.code+c.resourceDelimiter+H.desc);r.loginInProgress=!1,r.acquireTokenInProgress=!1}try{var e=a.location;if(-1!==e.href.indexOf(s.getRedirectUri())&&(window.clearInterval(u),r.loginInProgress=!1,r.acquireTokenInProgress=!1,s.logger.info("Closing popup window"),s.config.framework.isAngular)){s.broadcast("msal:popUpHashChanged",e.hash);for(var t=0;t<window.openedWindows.length;t++)window.openedWindows[t].close()}}catch(e){}}),n);return a},e.prototype.openPopup=function(e,t,n,r){try{var o=window.screenLeft?window.screenLeft:window.screenX,i=window.screenTop?window.screenTop:window.screenY,a=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,c=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,s=a/2-n/2+o,u=c/2-r/2+i,l=window.open(e,t,"width="+n+", height="+r+", top="+u+", left="+s);if(!l)throw Q.createPopupWindowError();return l.focus&&l.focus(),l}catch(e){throw this.logger.error("error opening popup "+e.message),this.loginInProgress=!1,this.acquireTokenInProgress=!1,Q.createPopupWindowError(e.toString())}},e.prototype.isInIframe=function(){return window.parent!==window},e.prototype.parentIsMsal=function(){return window.parent!==window&&window.parent.msal},e.prototype.loadIframeTimeout=function(e,t,n){var r=this,o=window.activeRenewals[n];this.logger.verbose("Set loading state to pending for: "+n+":"+o),this.cacheStorage.setItem(c.renewStatus+o,c.tokenRenewStatusInProgress),this.loadFrame(e,t),setTimeout((function(){r.cacheStorage.getItem(c.renewStatus+o)===c.tokenRenewStatusInProgress&&(r.logger.verbose("Loading frame has timed out after: "+r.config.system.loadFrameTimeout/1e3+" seconds for scope "+n+":"+o),o&&window.callbackMappedToRenewStates[o]&&window.callbackMappedToRenewStates[o](null,Q.createTokenRenewalTimeoutError()),r.cacheStorage.setItem(c.renewStatus+o,c.tokenRenewStatusCancelled))}),this.config.system.loadFrameTimeout)},e.prototype.loadFrame=function(e,t){var n=this;this.logger.info("LoadFrame: "+t);var r=t;setTimeout((function(){var o=n.addHiddenIFrame(r);""!==o.src&&"about:blank"!==o.src||(o.src=e,n.logger.infoPii("Frame Name : "+t+" Navigated to: "+e))}),this.config.system.navigateFrameWait)},e.prototype.addHiddenIFrame=function(e){if(void 0===e)return null;this.logger.info("Add msal frame to document:"+e);var t=document.getElementById(e);if(!t){if(document.createElement&&document.documentElement&&-1===window.navigator.userAgent.indexOf("MSIE 5.0")){var n=document.createElement("iframe");n.setAttribute("id",e),n.style.visibility="hidden",n.style.position="absolute",n.style.width=n.style.height="0",n.style.border="0",t=document.getElementsByTagName("body")[0].appendChild(n)}else document.body&&document.body.insertAdjacentHTML&&document.body.insertAdjacentHTML("beforeend","<iframe name='"+e+"' id='"+e+"' style='display:none'></iframe>");window.frames&&window.frames[e]&&(t=window.frames[e])}return t},e.prototype.navigateWindow=function(e,t){if(!e||T.isEmpty(e))throw this.logger.info("Navigate url is empty"),P.createUnexpectedError("Navigate url is empty");var n=t||window,r=t?"Navigated Popup window to:"+e:"Navigate to:"+e;this.logger.infoPii(r),n.location.replace(e)},e.prototype.registerCallback=function(e,t,n,r){var o=this;window.activeRenewals[t]=e,window.promiseMappedToRenewStates[e]||(window.promiseMappedToRenewStates[e]=[]),window.promiseMappedToRenewStates[e].push({resolve:n,reject:r}),window.callbackMappedToRenewStates[e]||(window.callbackMappedToRenewStates[e]=function(n,r){window.activeRenewals[t]=null;for(var i=0;i<window.promiseMappedToRenewStates[e].length;++i)try{if(r)window.promiseMappedToRenewStates[e][i].reject(r);else{if(!n)throw P.createUnexpectedError("Error and response are both null");window.promiseMappedToRenewStates[e][i].resolve(n)}}catch(e){o.logger.warning(e)}window.promiseMappedToRenewStates[e]=null,window.callbackMappedToRenewStates[e]=null})},e.prototype.logout=function(){var e=this;this.clearCache(),this.account=null;var t="";this.getPostLogoutRedirectUri()&&(t="post_logout_redirect_uri="+encodeURIComponent(this.getPostLogoutRedirectUri())),this.authorityInstance.resolveEndpointsAsync().then((function(n){var r=n.EndSessionEndpoint?n.EndSessionEndpoint+"?"+t:e.authority+"oauth2/v2.0/logout?"+t;e.navigateWindow(r)}))},e.prototype.clearCache=function(){window.renewStates=[];for(var e=this.cacheStorage.getAllAccessTokens(c.clientId,c.homeAccountIdentifier),t=0;t<e.length;t++)this.cacheStorage.removeItem(JSON.stringify(e[t].key));this.cacheStorage.resetCacheItems(),this.cacheStorage.clearCookie()},e.prototype.clearCacheForScope=function(e){for(var t=this.cacheStorage.getAllAccessTokens(c.clientId,c.homeAccountIdentifier),n=0;n<t.length;n++){var r=t[n];r.value.accessToken===e&&this.cacheStorage.removeItem(JSON.stringify(r.key))}},e.prototype.isCallback=function(e){return this.logger.info("isCallback will be deprecated in favor of urlContainsHash in MSAL.js v2.0."),this.urlContainsHash(e)},e.prototype.urlContainsHash=function(e){var t=this.deserializeHash(e);return t.hasOwnProperty(c.errorDescription)||t.hasOwnProperty(c.error)||t.hasOwnProperty(c.accessToken)||t.hasOwnProperty(c.idToken)},e.prototype.processCallBack=function(e,t,n){var r,o;this.logger.info("Processing the callback from redirect response"),t||(t=this.getResponseState(e));try{r=this.saveTokenFromHash(e,t)}catch(e){o=e}this.cacheStorage.removeItem(c.urlHash);try{this.cacheStorage.clearCookie();var i=this.getAccountState(t.state);if(r){if(t.requestType===c.renewToken||r.accessToken?(window.parent!==window?this.logger.verbose("Window is in iframe, acquiring token silently"):this.logger.verbose("acquiring token interactive in progress"),r.tokenType=c.accessToken):t.requestType===c.login&&(r.tokenType=c.idToken),!n)return void this.authResponseHandler(c.interactionTypeRedirect,r)}else if(!n)return void this.authErrorHandler(c.interactionTypeRedirect,o,Ee(i));n(r,o)}catch(e){throw this.logger.error("Error occurred in token received callback function: "+e),Q.createErrorInCallbackFunction(e.toString())}},e.prototype.handleAuthenticationResponse=function(e){null==e&&(e=window.location.hash);var t=null,n=!1,r=!1;try{r=window.opener&&window.opener.msal&&window.opener.msal!==window.msal}catch(e){r=!1}r?(t=window.opener.msal,n=!0):window.parent&&window.parent.msal&&(t=window.parent.msal);var o=t.getResponseState(e),i=null;if(t.logger.info("Returned from redirect url"),this.parentIsMsal())i=window.parent.callbackMappedToRenewStates[o.state];else if(r)i=window.opener.callbackMappedToRenewStates[o.state];else{if(i=null,t.config.auth.navigateToLoginRequestUrl)return t.cacheStorage.setItem(c.urlHash,e),void(window.parent!==window||n||(window.location.href=t.cacheStorage.getItem(c.loginRequest,t.inCookie)));if(window.location.hash="",!this.redirectCallbacksSet)return void t.cacheStorage.setItem(c.urlHash,e)}if(t.processCallBack(e,o,i),r)for(var a=0;a<window.opener.openedWindows.length;a++)window.opener.openedWindows[a].close()},e.prototype.deserializeHash=function(e){var t=S.getHashFromUrl(e);return a.deserialize(t)},e.prototype.getResponseState=function(e){var t,n=this.deserializeHash(e);if(!n)throw P.createUnexpectedError("Hash was not parsed correctly.");if(!n.hasOwnProperty("state"))throw P.createUnexpectedError("Hash does not contain state.");if((t={requestType:c.unknown,state:n.state,stateMatch:!1}).state===this.cacheStorage.getItem(c.stateLogin,this.inCookie)||t.state===this.silentAuthenticationState)return t.requestType=c.login,t.stateMatch=!0,t;if(t.state===this.cacheStorage.getItem(c.stateAcquireToken,this.inCookie))return t.requestType=c.renewToken,t.stateMatch=!0,t;if(!t.stateMatch){t.requestType=window.requestType;for(var r=window.renewStates,o=0;o<r.length;o++)if(r[o]===t.state){t.stateMatch=!0;break}}return t},e.prototype.getCachedToken=function(e,t){var n=null,r=e.scopes,o=this.cacheStorage.getAllAccessTokens(this.clientId,t?t.homeAccountIdentifier:null);if(0===o.length)return null;var i=[];if(e.authority){for(a=0;a<o.length;a++){u=(s=o[a]).key.scopes.split(" ");k.containsScope(u,r)&&S.CanonicalizeUri(s.key.authority)===e.authority&&i.push(s)}if(0===i.length)return null;if(1!==i.length)throw Q.createMultipleMatchingTokensInCacheError(r.toString());n=i[0]}else{for(var a=0;a<o.length;a++){var s,u=(s=o[a]).key.scopes.split(" ");k.containsScope(u,r)&&i.push(s)}if(1===i.length)n=i[0],e.authorityInstance=he.CreateInstance(n.key.authority,this.config.auth.validateAuthority);else{if(i.length>1)throw Q.createMultipleMatchingTokensInCacheError(r.toString());var l=this.getUniqueAuthority(o,"authority");if(l.length>1)throw Q.createMultipleAuthoritiesInCacheError(r.toString());e.authorityInstance=he.CreateInstance(l[0],this.config.auth.validateAuthority)}}if(null!=n){var d=Number(n.value.expiresIn),p=this.config.system.tokenRenewalOffsetSeconds||300;if(d&&d>ae.now()+p){var h=new ne(n.value.idToken);if(!t&&!(t=this.getAccount()))throw P.createUnexpectedError("Account should not be null here.");var f=this.getAccountState(e.state),g={uniqueId:"",tenantId:"",tokenType:n.value.idToken===n.value.accessToken?c.idToken:c.accessToken,idToken:h,idTokenClaims:h.claims,accessToken:n.value.accessToken,scopes:n.key.scopes.split(" "),expiresOn:new Date(1e3*d),account:t,accountState:f};return ce.setResponseIdToken(g,h),g}return this.cacheStorage.removeItem(JSON.stringify(i[0].key)),null}return null},e.prototype.getUniqueAuthority=function(e,t){var n=[],r=[];return e.forEach((function(e){e.key.hasOwnProperty(t)&&-1===r.indexOf(e.key[t])&&(r.push(e.key[t]),n.push(e.key[t]))})),n},e.prototype.extractADALIdToken=function(){var e=this.cacheStorage.getItem(c.adalIdToken);return T.isEmpty(e)?null:te.extractIdToken(e)},e.prototype.renewToken=function(e,t,n,r,o){var i=e.join(" ").toLowerCase();this.logger.verbose("renewToken is called for scope:"+i);var a=this.addHiddenIFrame("msalRenewFrame"+i);this.updateCacheEntries(o,r),this.logger.verbose("Renew token Expected state: "+o.state);var s=S.urlRemoveQueryStringParameter(S.createNavigateUrl(o),c.prompt)+c.prompt_none;window.renewStates.push(o.state),window.requestType=c.renewToken,this.registerCallback(o.state,i,t,n),this.logger.infoPii("Navigate to:"+s),a.src="about:blank",this.loadIframeTimeout(s,"msalRenewFrame"+i,i)},e.prototype.renewIdToken=function(e,t,n,r,o){this.logger.info("renewidToken is called");var i=this.addHiddenIFrame("msalIdTokenFrame");this.updateCacheEntries(o,r),this.logger.verbose("Renew Idtoken Expected state: "+o.state);var a=S.urlRemoveQueryStringParameter(S.createNavigateUrl(o),c.prompt)+c.prompt_none;this.silentLogin?(window.requestType=c.login,this.silentAuthenticationState=o.state):(window.requestType=c.renewToken,window.renewStates.push(o.state)),this.registerCallback(o.state,this.clientId,t,n),this.logger.infoPii("Navigate to:"+a),i.src="about:blank",this.loadIframeTimeout(a,"msalIdTokenFrame",this.clientId)},e.prototype.saveAccessToken=function(e,t,n,r,o){var a,s,u=i({},e),l=new ee(r);if(n.hasOwnProperty("scope")){for(var d=(a=n.scope).split(" "),p=this.cacheStorage.getAllAccessTokens(this.clientId,t),h=0;h<p.length;h++){var f=p[h];if(f.key.homeAccountIdentifier===e.account.homeAccountIdentifier){var g=f.key.scopes.split(" ");k.isIntersectingScopes(g,d)&&this.cacheStorage.removeItem(JSON.stringify(f.key))}}var m=ae.parseExpiresIn(n[c.expiresIn]);s=ae.now()+m;var y=new C(t,this.clientId,a,l.uid,l.utid),v=new E(n[c.accessToken],o.rawIdToken,s.toString(),r);this.cacheStorage.setItem(JSON.stringify(y),JSON.stringify(v)),u.accessToken=n[c.accessToken],u.scopes=d}else{a=this.clientId;y=new C(t,this.clientId,a,l.uid,l.utid);s=Number(o.expiration);v=new E(n[c.idToken],n[c.idToken],s.toString(),r);this.cacheStorage.setItem(JSON.stringify(y),JSON.stringify(v)),u.scopes=[a],u.accessToken=n[c.idToken]}return s?u.expiresOn=new Date(1e3*s):this.logger.error("Could not parse expiresIn parameter"),u},e.prototype.saveTokenFromHash=function(e,t){this.logger.info("State status:"+t.stateMatch+"; Request type:"+t.requestType),this.cacheStorage.setItem(c.msalError,""),this.cacheStorage.setItem(c.msalErrorDescription,"");var n,r={uniqueId:"",tenantId:"",tokenType:"",idToken:null,idTokenClaims:null,accessToken:null,scopes:[],expiresOn:null,account:null,accountState:""},o=this.deserializeHash(e),i="",a="",s=null;if(o.hasOwnProperty(c.errorDescription)||o.hasOwnProperty(c.error)){if(this.logger.infoPii("Error :"+o[c.error]+"; Error description:"+o[c.errorDescription]),this.cacheStorage.setItem(c.msalError,o[c.error]),this.cacheStorage.setItem(c.msalErrorDescription,o[c.errorDescription]),t.requestType===c.login&&(this.loginInProgress=!1,this.cacheStorage.setItem(c.loginError,o[c.errorDescription]+":"+o[c.error]),i=oe.generateAuthorityKey(t.state)),t.requestType===c.renewToken){this.acquireTokenInProgress=!1,i=oe.generateAuthorityKey(t.state);var u=this.getAccount(),l=void 0;l=u&&!T.isEmpty(u.homeAccountIdentifier)?u.homeAccountIdentifier:c.no_account,a=oe.generateAcquireTokenAccountKey(l,t.state)}var d=o[c.error],p=o[c.errorDescription];n=Ce.isInteractionRequiredError(d)||Ce.isInteractionRequiredError(p)?new Ce(o[c.error],o[c.errorDescription]):new be(o[c.error],o[c.errorDescription])}else if(t.stateMatch){this.logger.info("State is right"),o.hasOwnProperty(c.sessionState)&&this.cacheStorage.setItem(c.msalSessionState,o[c.sessionState]),r.accountState=this.getAccountState(t.state);var h="";if(o.hasOwnProperty(c.accessToken)){this.logger.info("Fragment has access token"),this.acquireTokenInProgress=!1,o.hasOwnProperty(c.idToken)?(s=new ne(o[c.idToken]),r.idToken=s,r.idTokenClaims=s.claims):(s=new ne(this.cacheStorage.getItem(c.idTokenKey)),r=ce.setResponseIdToken(r,s));var f=oe.generateAuthorityKey(t.state),g=this.cacheStorage.getItem(f,this.inCookie);if(T.isEmpty(g)||(g=S.replaceTenantPath(g,r.tenantId)),!o.hasOwnProperty(c.clientInfo))throw this.logger.warning("ClientInfo not received in the response from AAD"),Q.createClientInfoNotPopulatedError("ClientInfo not received in the response from the server");h=o[c.clientInfo],r.account=ie.createAccount(s,new ee(h));var m=void 0;m=r.account&&!T.isEmpty(r.account.homeAccountIdentifier)?r.account.homeAccountIdentifier:c.no_account,a=oe.generateAcquireTokenAccountKey(m,t.state);var y=oe.generateAcquireTokenAccountKey(c.no_account,t.state),v=this.cacheStorage.getItem(a),w=void 0;T.isEmpty(v)?T.isEmpty(this.cacheStorage.getItem(y))||(r=this.saveAccessToken(r,g,o,h,s)):(w=JSON.parse(v),r.account&&w&&ie.compareAccounts(r.account,w)?(r=this.saveAccessToken(r,g,o,h,s),this.logger.info("The user object received in the response is the same as the one passed in the acquireToken request")):this.logger.warning("The account object created from the response is not the same as the one passed in the acquireToken request"))}if(o.hasOwnProperty(c.idToken)){this.logger.info("Fragment has id token"),this.loginInProgress=!1,s=new ne(o[c.idToken]),r=ce.setResponseIdToken(r,s),o.hasOwnProperty(c.clientInfo)?h=o[c.clientInfo]:this.logger.warning("ClientInfo not received in the response from AAD"),i=oe.generateAuthorityKey(t.state);g=this.cacheStorage.getItem(i,this.inCookie);T.isEmpty(g)||(g=S.replaceTenantPath(g,s.tenantId)),this.account=ie.createAccount(s,new ee(h)),r.account=this.account,s&&s.nonce?s.nonce!==this.cacheStorage.getItem(c.nonceIdToken,this.inCookie)?(this.account=null,this.cacheStorage.setItem(c.loginError,"Nonce Mismatch. Expected Nonce: "+this.cacheStorage.getItem(c.nonceIdToken,this.inCookie)+",Actual Nonce: "+s.nonce),this.logger.error("Nonce Mismatch.Expected Nonce: "+this.cacheStorage.getItem(c.nonceIdToken,this.inCookie)+",Actual Nonce: "+s.nonce),n=Q.createNonceMismatchError(this.cacheStorage.getItem(c.nonceIdToken,this.inCookie),s.nonce)):(this.cacheStorage.setItem(c.idTokenKey,o[c.idToken]),this.cacheStorage.setItem(c.msalClientInfo,h),this.saveAccessToken(r,g,o,h,s)):(i=t.state,a=t.state,this.logger.error("Invalid id_token received in the response"),n=Q.createInvalidIdTokenError(s),this.cacheStorage.setItem(c.msalError,n.errorCode),this.cacheStorage.setItem(c.msalErrorDescription,n.errorMessage))}}else{i=t.state,a=t.state;var I=this.cacheStorage.getItem(c.stateLogin,this.inCookie);this.logger.error("State Mismatch.Expected State: "+I+",Actual State: "+t.state),n=Q.createInvalidStateError(t.state,I),this.cacheStorage.setItem(c.msalError,n.errorCode),this.cacheStorage.setItem(c.msalErrorDescription,n.errorMessage)}if(this.cacheStorage.setItem(c.renewStatus+t.state,c.tokenRenewStatusCompleted),this.cacheStorage.removeAcquireTokenEntries(t.state),this.inCookie&&(this.cacheStorage.setItemCookie(i,"",-1),this.cacheStorage.clearCookie()),n)throw n;if(!r)throw P.createUnexpectedError("Response is null");return r},e.prototype.getAccount=function(){if(this.account)return this.account;var e=this.cacheStorage.getItem(c.idTokenKey),t=this.cacheStorage.getItem(c.msalClientInfo);if(!T.isEmpty(e)&&!T.isEmpty(t)){var n=new ne(e),r=new ee(t);return this.account=ie.createAccount(n,r),this.account}return null},e.prototype.getAccountState=function(e){if(e){var t=e.indexOf("|");if(t>-1&&t+1<e.length)return e.substring(t+1)}return e},e.prototype.getAllAccounts=function(){for(var e=[],t=this.cacheStorage.getAllAccessTokens(c.clientId,c.homeAccountIdentifier),n=0;n<t.length;n++){var r=new ne(t[n].value.idToken),o=new ee(t[n].value.homeAccountIdentifier),i=ie.createAccount(r,o);e.push(i)}return this.getUniqueAccounts(e)},e.prototype.getUniqueAccounts=function(e){if(!e||e.length<=1)return e;for(var t=[],n=[],r=0;r<e.length;++r)e[r].homeAccountIdentifier&&-1===t.indexOf(e[r].homeAccountIdentifier)&&(t.push(e[r].homeAccountIdentifier),n.push(e[r]));return n},e.prototype.validateInputScope=function(e,t){if(e){if(!Array.isArray(e))throw Y.createScopesNonArrayError(e);if(e.length<1)throw Y.createEmptyScopesArrayError(e.toString());if(e.indexOf(this.clientId)>-1&&e.length>1)throw Y.createClientIdSingleScopeError(e.toString())}else if(t)throw Y.createScopesRequiredError(e)},e.prototype.getScopeFromState=function(e){if(e){var t=e.indexOf("|");if(t>-1&&t+1<e.length)return e.substring(t+1)}return""},e.prototype.appendScopes=function(e){var t;return e&&e.scopes&&(t=e.extraScopesToConsent?e.scopes.concat(e.extraScopesToConsent):e.scopes),t},e.prototype.broadcast=function(e,t){var n=new CustomEvent(e,{detail:t});window.dispatchEvent(n)},e.prototype.getCachedTokenInternal=function(e,t,n){var r=t||this.getAccount();if(!r)return null;var o=this.authorityInstance?this.authorityInstance:he.CreateInstance(this.authority,this.config.auth.validateAuthority),i=this.getTokenType(r,e,!0),a=new Z(o,this.clientId,e,i,this.getRedirectUri(),n);return this.getCachedToken(a,t)},e.prototype.getScopesForEndpoint=function(e){if(this.config.framework.unprotectedResources.length>0)for(var t=0;t<this.config.framework.unprotectedResources.length;t++)if(e.indexOf(this.config.framework.unprotectedResources[t])>-1)return null;if(this.config.framework.protectedResourceMap.size>0)for(var n=0,r=Array.from(this.config.framework.protectedResourceMap.keys());n<r.length;n++){var o=r[n];if(e.indexOf(o)>-1)return this.config.framework.protectedResourceMap.get(o)}return e.indexOf("http://")>-1||e.indexOf("https://")>-1?this.getHostFromUri(e)===this.getHostFromUri(this.getRedirectUri())?new Array(this.clientId):null:new Array(this.clientId)},e.prototype.getLoginInProgress=function(){return!!this.cacheStorage.getItem(c.urlHash)||this.loginInProgress},e.prototype.setloginInProgress=function(e){this.loginInProgress=e},e.prototype.getAcquireTokenInProgress=function(){return this.acquireTokenInProgress},e.prototype.setAcquireTokenInProgress=function(e){this.acquireTokenInProgress=e},e.prototype.getLogger=function(){return this.config.system.logger},e.prototype.getRedirectUri=function(){return"function"==typeof this.config.auth.redirectUri?this.config.auth.redirectUri():this.config.auth.redirectUri},e.prototype.getPostLogoutRedirectUri=function(){return"function"==typeof this.config.auth.postLogoutRedirectUri?this.config.auth.postLogoutRedirectUri():this.config.auth.postLogoutRedirectUri},e.prototype.getCurrentConfiguration=function(){if(!this.config)throw Y.createNoSetConfigurationError();return this.config},e.prototype.getHostFromUri=function(e){var t=String(e).replace(/^(https?:)\/\//,"");return t=t.split("/")[0]},e.prototype.getTokenType=function(e,t,n){return n?ie.compareAccounts(e,this.getAccount())?t.indexOf(this.config.auth.clientId)>-1?Le:Ne:t.indexOf(this.config.auth.clientId)>-1?Le:Me:ie.compareAccounts(e,this.getAccount())?t.indexOf(this.clientId)>-1?Le:Ne:Me},e.prototype.setAccountCache=function(e,t){var n=e?this.getAccountId(e):c.no_account,r=oe.generateAcquireTokenAccountKey(n,t);this.cacheStorage.setItem(r,JSON.stringify(e))},e.prototype.setAuthorityCache=function(e,t){var n=oe.generateAuthorityKey(e);this.cacheStorage.setItem(n,S.CanonicalizeUri(t),this.inCookie)},e.prototype.updateCacheEntries=function(e,t,n){n?(this.cacheStorage.setItem(c.loginRequest,n,this.inCookie),this.cacheStorage.setItem(c.loginError,""),this.cacheStorage.setItem(c.stateLogin,e.state,this.inCookie),this.cacheStorage.setItem(c.msalError,""),this.cacheStorage.setItem(c.msalErrorDescription,"")):this.setAccountCache(t,e.state),this.setAuthorityCache(e.state,e.authority),this.cacheStorage.setItem(c.nonceIdToken,e.nonce,this.inCookie)},e.prototype.getAccountId=function(e){return T.isEmpty(e.homeAccountIdentifier)?c.no_account:e.homeAccountIdentifier},e.prototype.buildIDTokenRequest=function(e){return{scopes:[this.clientId],authority:this.authority,account:this.getAccount(),extraQueryParameters:e.extraQueryParameters}},e.prototype.getTelemetryManagerFromConfig=function(e,t){if(!e)return null;var n=e.applicationName,r=e.applicationVersion,o=e.telemetryEmitter;if(!n||!r||!o)throw Y.createTelemetryConfigError(e);return new Ue({platform:{sdk:"msal.js",sdkVersion:"1.1.3",applicationName:n,applicationVersion:r},clientId:t},o)},function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);i>3&&a&&Object.defineProperty(t,n,a)}([He],e.prototype,"acquireTokenSilent",null),e}();n.d(t,"UserAgentApplication",(function(){return De})),n.d(t,"Logger",(function(){return fe})),n.d(t,"LogLevel",(function(){return ue})),n.d(t,"Account",(function(){return ie})),n.d(t,"Constants",(function(){return c})),n.d(t,"Authority",(function(){return le})),n.d(t,"AuthError",(function(){return P})),n.d(t,"ClientAuthError",(function(){return Q})),n.d(t,"ServerError",(function(){return be})),n.d(t,"ClientConfigurationError",(function(){return Y})),n.d(t,"InteractionRequiredAuthError",(function(){return Ce}))}])}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Nc2FsV3JhcHBlci93ZWJwYWNrL3VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24iLCJ3ZWJwYWNrOi8vTXNhbFdyYXBwZXIvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vTXNhbFdyYXBwZXIvLi9zcmMvTXNhbFdyYXBwZXIudHMiLCJ3ZWJwYWNrOi8vTXNhbFdyYXBwZXIvLi9ub2RlX21vZHVsZXMvdHNsaWIvdHNsaWIuZXM2LmpzIiwid2VicGFjazovL01zYWxXcmFwcGVyLy4vbm9kZV9tb2R1bGVzL21zYWwvbGliLWVzNi91dGlscy9DcnlwdG9VdGlscy5qcyIsIndlYnBhY2s6Ly9Nc2FsV3JhcHBlci8uL25vZGVfbW9kdWxlcy9tc2FsL2xpYi1lczYvdXRpbHMvQ29uc3RhbnRzLmpzIiwid2VicGFjazovL01zYWxXcmFwcGVyLy4vbm9kZV9tb2R1bGVzL21zYWwvbGliLWVzNi9TY29wZVNldC5qcyIsIndlYnBhY2s6Ly9Nc2FsV3JhcHBlci8uL25vZGVfbW9kdWxlcy9tc2FsL2xpYi1lczYvdXRpbHMvU3RyaW5nVXRpbHMuanMiLCJ3ZWJwYWNrOi8vTXNhbFdyYXBwZXIvLi9ub2RlX21vZHVsZXMvbXNhbC9saWItZXM2L3V0aWxzL1VybFV0aWxzLmpzIiwid2VicGFjazovL01zYWxXcmFwcGVyLy4vbm9kZV9tb2R1bGVzL21zYWwvbGliLWVzNi9BY2Nlc3NUb2tlbktleS5qcyIsIndlYnBhY2s6Ly9Nc2FsV3JhcHBlci8uL25vZGVfbW9kdWxlcy9tc2FsL2xpYi1lczYvQWNjZXNzVG9rZW5WYWx1ZS5qcyIsIndlYnBhY2s6Ly9Nc2FsV3JhcHBlci8uL25vZGVfbW9kdWxlcy9tc2FsL2xpYi1lczYvZXJyb3IvQXV0aEVycm9yLmpzIiwid2VicGFjazovL01zYWxXcmFwcGVyLy4vbm9kZV9tb2R1bGVzL21zYWwvbGliLWVzNi9lcnJvci9DbGllbnRBdXRoRXJyb3IuanMiLCJ3ZWJwYWNrOi8vTXNhbFdyYXBwZXIvLi9ub2RlX21vZHVsZXMvbXNhbC9saWItZXM2L2Vycm9yL0NsaWVudENvbmZpZ3VyYXRpb25FcnJvci5qcyIsIndlYnBhY2s6Ly9Nc2FsV3JhcHBlci8uL25vZGVfbW9kdWxlcy9tc2FsL2xpYi1lczYvU2VydmVyUmVxdWVzdFBhcmFtZXRlcnMuanMiLCJ3ZWJwYWNrOi8vTXNhbFdyYXBwZXIvLi9ub2RlX21vZHVsZXMvbXNhbC9saWItZXM2L0F1dGhvcml0eS5qcyIsIndlYnBhY2s6Ly9Nc2FsV3JhcHBlci8uL25vZGVfbW9kdWxlcy9tc2FsL2xpYi1lczYvQXV0aGVudGljYXRpb25QYXJhbWV0ZXJzLmpzIiwid2VicGFjazovL01zYWxXcmFwcGVyLy4vbm9kZV9tb2R1bGVzL21zYWwvbGliLWVzNi9DbGllbnRJbmZvLmpzIiwid2VicGFjazovL01zYWxXcmFwcGVyLy4vbm9kZV9tb2R1bGVzL21zYWwvbGliLWVzNi91dGlscy9Ub2tlblV0aWxzLmpzIiwid2VicGFjazovL01zYWxXcmFwcGVyLy4vbm9kZV9tb2R1bGVzL21zYWwvbGliLWVzNi9JZFRva2VuLmpzIiwid2VicGFjazovL01zYWxXcmFwcGVyLy4vbm9kZV9tb2R1bGVzL21zYWwvbGliLWVzNi9BY2Nlc3NUb2tlbkNhY2hlSXRlbS5qcyIsIndlYnBhY2s6Ly9Nc2FsV3JhcHBlci8uL25vZGVfbW9kdWxlcy9tc2FsL2xpYi1lczYvU3RvcmFnZS5qcyIsIndlYnBhY2s6Ly9Nc2FsV3JhcHBlci8uL25vZGVfbW9kdWxlcy9tc2FsL2xpYi1lczYvQWNjb3VudC5qcyIsIndlYnBhY2s6Ly9Nc2FsV3JhcHBlci8uL25vZGVfbW9kdWxlcy9tc2FsL2xpYi1lczYvdXRpbHMvVGltZVV0aWxzLmpzIiwid2VicGFjazovL01zYWxXcmFwcGVyLy4vbm9kZV9tb2R1bGVzL21zYWwvbGliLWVzNi91dGlscy9SZXNwb25zZVV0aWxzLmpzIiwid2VicGFjazovL01zYWxXcmFwcGVyLy4vbm9kZV9tb2R1bGVzL21zYWwvbGliLWVzNi9YSFJDbGllbnQuanMiLCJ3ZWJwYWNrOi8vTXNhbFdyYXBwZXIvLi9ub2RlX21vZHVsZXMvbXNhbC9saWItZXM2L0xvZ2dlci5qcyIsIndlYnBhY2s6Ly9Nc2FsV3JhcHBlci8uL25vZGVfbW9kdWxlcy9tc2FsL2xpYi1lczYvQWFkQXV0aG9yaXR5LmpzIiwid2VicGFjazovL01zYWxXcmFwcGVyLy4vbm9kZV9tb2R1bGVzL21zYWwvbGliLWVzNi9CMmNBdXRob3JpdHkuanMiLCJ3ZWJwYWNrOi8vTXNhbFdyYXBwZXIvLi9ub2RlX21vZHVsZXMvbXNhbC9saWItZXM2L0F1dGhvcml0eUZhY3RvcnkuanMiLCJ3ZWJwYWNrOi8vTXNhbFdyYXBwZXIvLi9ub2RlX21vZHVsZXMvbXNhbC9saWItZXM2L0NvbmZpZ3VyYXRpb24uanMiLCJ3ZWJwYWNrOi8vTXNhbFdyYXBwZXIvLi9ub2RlX21vZHVsZXMvbXNhbC9saWItZXM2L2Vycm9yL1NlcnZlckVycm9yLmpzIiwid2VicGFjazovL01zYWxXcmFwcGVyLy4vbm9kZV9tb2R1bGVzL21zYWwvbGliLWVzNi9lcnJvci9JbnRlcmFjdGlvblJlcXVpcmVkQXV0aEVycm9yLmpzIiwid2VicGFjazovL01zYWxXcmFwcGVyLy4vbm9kZV9tb2R1bGVzL21zYWwvbGliLWVzNi9BdXRoUmVzcG9uc2UuanMiLCJ3ZWJwYWNrOi8vTXNhbFdyYXBwZXIvLi9ub2RlX21vZHVsZXMvbXNhbC9saWItZXM2L3RlbGVtZXRyeS9UZWxlbWV0cnlDb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vTXNhbFdyYXBwZXIvLi9ub2RlX21vZHVsZXMvbXNhbC9saWItZXM2L3RlbGVtZXRyeS9UZWxlbWV0cnlVdGlscy5qcyIsIndlYnBhY2s6Ly9Nc2FsV3JhcHBlci8uL25vZGVfbW9kdWxlcy9tc2FsL2xpYi1lczYvdGVsZW1ldHJ5L0RlZmF1bHRFdmVudC5qcyIsIndlYnBhY2s6Ly9Nc2FsV3JhcHBlci8uL25vZGVfbW9kdWxlcy9tc2FsL2xpYi1lczYvdGVsZW1ldHJ5L1RlbGVtZXRyeUV2ZW50LmpzIiwid2VicGFjazovL01zYWxXcmFwcGVyLy4vbm9kZV9tb2R1bGVzL21zYWwvbGliLWVzNi90ZWxlbWV0cnkvVGVsZW1ldHJ5TWFuYWdlci5qcyIsIndlYnBhY2s6Ly9Nc2FsV3JhcHBlci8uL25vZGVfbW9kdWxlcy9tc2FsL2xpYi1lczYvVXNlckFnZW50QXBwbGljYXRpb24uanMiLCJ3ZWJwYWNrOi8vTXNhbFdyYXBwZXIvLi9ub2RlX21vZHVsZXMvbXNhbC9saWItZXM2L2luZGV4LmpzIl0sIm5hbWVzIjpbInJvb3QiLCJmYWN0b3J5IiwiZXhwb3J0cyIsIm1vZHVsZSIsImRlZmluZSIsImFtZCIsIndpbmRvdyIsImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJUb2tlblJlcXVlc3RUeXBlIiwiY29uZmlndXJhdGlvbiIsIl9iYXNpY0NvbmZpZ3VyYXRpb24iLCJhdXRoIiwiY2xpZW50SWQiLCJ2YWxpZGF0ZUF1dGhvcml0eSIsImNhY2hlIiwiY2FjaGVMb2NhdGlvbiIsInN0b3JlQXV0aFN0YXRlSW5Db29raWUiLCJzeXN0ZW0iLCJsb2FkRnJhbWVUaW1lb3V0IiwiX2Jhc2ljTG9naW5SZXF1ZXN0Iiwic2NvcGVzIiwicHJvbXB0IiwiYWNxdWlyZUFjY2Vzc1Rva2VuIiwicmVxdWVzdCIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiX3Jlc29sdmUiLCJfcmVqZWN0IiwiX3JlcXVlc3RUeXBlIiwiQWNjZXNzVG9rZW4iLCJfYWNxdWlyZUFjY2Vzc1Rva2VuSW50ZXJuYWwiLCJhY3F1aXJlTG9naW5Ub2tlbiIsIkxvZ2luVG9rZW4iLCJtZXJnZWRMb2dpblJlcXVlc3QiLCJhc3NpZ24iLCJfdXNlckFnZW50QXBwbGljYXRpb24iLCJsb2dpblBvcHVwIiwidGhlbiIsImxvZ2luUmVzcG9uc2UiLCJjYXRjaCIsImVycm9yIiwiX2F1dGhSZWRpcmVjdENhbGxCYWNrIiwicmVzcG9uc2UiLCJjb25zb2xlIiwibG9nIiwidG9rZW5UeXBlIiwiX3JlcXVpcmVzSW50ZXJhY3Rpb24iLCJlcnJvck1lc3NhZ2UiLCJsZW5ndGgiLCJpbmRleE9mIiwiYWNxdWlyZVRva2VuU2lsZW50IiwidG9rZW5SZXNwb25zZSIsImVycm9yQ29kZSIsImFjcXVpcmVUb2tlblBvcHVwIiwibWVyZ2VkQ29uZmlndXJhdGlvbiIsInRoaXMiLCJNc2FsIiwiVXNlckFnZW50QXBwbGljYXRpb24iLCJoYW5kbGVSZWRpcmVjdENhbGxiYWNrIiwiTXNhbFdyYXBwZXIiLCJleHRlbmRTdGF0aWNzIiwiYiIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiQXJyYXkiLCJfX2V4dGVuZHMiLCJfXyIsImNvbnN0cnVjdG9yIiwiX19hc3NpZ24iLCJhcmd1bWVudHMiLCJhcHBseSIsIkNyeXB0b1V0aWxzIiwiY3JlYXRlTmV3R3VpZCIsImNyeXB0b09iaiIsImNyeXB0byIsImdldFJhbmRvbVZhbHVlcyIsImJ1ZmZlciIsIlVpbnQ4QXJyYXkiLCJkZWNpbWFsVG9IZXgiLCJndWlkSG9sZGVyIiwiaGV4IiwiZ3VpZFJlc3BvbnNlIiwiTWF0aCIsInJhbmRvbSIsIm51bSIsInRvU3RyaW5nIiwiYmFzZTY0RW5jb2RlIiwiaW5wdXQiLCJidG9hIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwicmVwbGFjZSIsIm1hdGNoIiwicDEiLCJTdHJpbmciLCJmcm9tQ2hhckNvZGUiLCJOdW1iZXIiLCJiYXNlNjREZWNvZGUiLCJkZWNvZGVVUklDb21wb25lbnQiLCJhdG9iIiwic3BsaXQiLCJtYXAiLCJjaGFyQ29kZUF0Iiwic2xpY2UiLCJqb2luIiwiZGVzZXJpYWxpemUiLCJxdWVyeSIsInBsIiwic2VhcmNoIiwiZGVjb2RlIiwib2JqIiwiZXhlYyIsIkNvbnN0YW50cyIsImNvbmZpZ3VyYWJsZSIsIl9wb3BVcFdpZHRoIiwic2V0Iiwid2lkdGgiLCJfcG9wVXBIZWlnaHQiLCJoZWlnaHQiLCJDYWNoZUtleXMiLCJBQURUcnVzdGVkSG9zdExpc3QiLCJTU09UeXBlcyIsIkJsYWNrbGlzdGVkRVFQYXJhbXMiLCJQcm9tcHRTdGF0ZSIsIkxPR0lOIiwiU0VMRUNUX0FDQ09VTlQiLCJDT05TRU5UIiwiTk9ORSIsIlNjb3BlU2V0IiwiaXNJbnRlcnNlY3RpbmdTY29wZXMiLCJjYWNoZWRTY29wZXMiLCJjb252ZXJ0VG9Mb3dlckNhc2UiLCJ0b0xvd2VyQ2FzZSIsImNvbnRhaW5zU2NvcGUiLCJldmVyeSIsInNjb3BlIiwicmVtb3ZlRWxlbWVudCIsImZpbHRlciIsInBhcnNlU2NvcGUiLCJzY29wZUxpc3QiLCJTdHJpbmdVdGlscyIsImlzRW1wdHkiLCJzdHIiLCJVcmxVdGlscyIsImNyZWF0ZU5hdmlnYXRlVXJsIiwic2VydmVyUmVxdWVzdFBhcmFtcyIsImNyZWF0ZU5hdmlnYXRpb25VcmxTdHJpbmciLCJhdXRoRW5kcG9pbnQiLCJhdXRob3JpdHlJbnN0YW5jZSIsIkF1dGhvcml6YXRpb25FbmRwb2ludCIsInB1c2giLCJyZXNwb25zZVR5cGUiLCJ0cmFuc2xhdGVjbGllbnRJZFVzZWRJblNjb3BlIiwicmVkaXJlY3RVcmkiLCJzdGF0ZSIsIm5vbmNlIiwieENsaWVudFNrdSIsInhDbGllbnRWZXIiLCJwcm9tcHRWYWx1ZSIsImNsYWltc1ZhbHVlIiwicXVlcnlQYXJhbWV0ZXJzIiwiZXh0cmFRdWVyeVBhcmFtZXRlcnMiLCJjb3JyZWxhdGlvbklkIiwiY2xpZW50SWRJbmRleCIsInNwbGljZSIsImdldERlZmF1bHRSZWRpcmVjdFVyaSIsImxvY2F0aW9uIiwiaHJlZiIsInJlcGxhY2VUZW5hbnRQYXRoIiwidXJsIiwidGVuYW50SWQiLCJ1cmxPYmplY3QiLCJHZXRVcmxDb21wb25lbnRzIiwicGF0aEFycmF5IiwiUGF0aFNlZ21lbnRzIiwiY29tbW9uIiwiY29uc3RydWN0QXV0aG9yaXR5VXJpRnJvbU9iamVjdCIsIkNhbm9uaWNhbGl6ZVVyaSIsIlByb3RvY29sIiwiSG9zdE5hbWVBbmRQb3J0IiwicmVnRXgiLCJSZWdFeHAiLCJ1cmxDb21wb25lbnRzIiwiQWJzb2x1dGVQYXRoIiwicGF0aFNlZ21lbnRzIiwidmFsIiwiZW5kc1dpdGgiLCJzdWZmaXgiLCJ1cmxSZW1vdmVRdWVyeVN0cmluZ1BhcmFtZXRlciIsInJlZ2V4IiwiZ2V0SGFzaEZyb21VcmwiLCJ1cmxTdHJpbmdPckZyYWdtZW50IiwiaGFzaEluZGV4MSIsImhhc2hJbmRleDIiLCJzdWJzdHJpbmciLCJhdXRob3JpdHkiLCJ1aWQiLCJ1dGlkIiwiaG9tZUFjY291bnRJZGVudGlmaWVyIiwiQWNjZXNzVG9rZW5WYWx1ZSIsImFjY2Vzc1Rva2VuIiwiaWRUb2tlbiIsImV4cGlyZXNJbiIsIkF1dGhFcnJvck1lc3NhZ2UiLCJjb2RlIiwiZGVzYyIsIl9zdXBlciIsIkF1dGhFcnJvciIsIl90aGlzIiwiY3JlYXRlVW5leHBlY3RlZEVycm9yIiwiZXJyRGVzYyIsIkVycm9yIiwiQ2xpZW50QXV0aEVycm9yTWVzc2FnZSIsIkNsaWVudEF1dGhFcnJvciIsImNyZWF0ZUVuZHBvaW50UmVzb2x1dGlvbkVycm9yIiwiZXJyRGV0YWlsIiwiY3JlYXRlTXVsdGlwbGVNYXRjaGluZ1Rva2Vuc0luQ2FjaGVFcnJvciIsImNyZWF0ZU11bHRpcGxlQXV0aG9yaXRpZXNJbkNhY2hlRXJyb3IiLCJjcmVhdGVQb3B1cFdpbmRvd0Vycm9yIiwiY3JlYXRlVG9rZW5SZW5ld2FsVGltZW91dEVycm9yIiwiY3JlYXRlSW52YWxpZElkVG9rZW5FcnJvciIsImNyZWF0ZUludmFsaWRTdGF0ZUVycm9yIiwiaW52YWxpZFN0YXRlIiwiYWN0dWFsU3RhdGUiLCJjcmVhdGVOb25jZU1pc21hdGNoRXJyb3IiLCJpbnZhbGlkTm9uY2UiLCJhY3R1YWxOb25jZSIsImNyZWF0ZUxvZ2luSW5Qcm9ncmVzc0Vycm9yIiwiY3JlYXRlQWNxdWlyZVRva2VuSW5Qcm9ncmVzc0Vycm9yIiwiY3JlYXRlVXNlckNhbmNlbGxlZEVycm9yIiwiY3JlYXRlRXJyb3JJbkNhbGxiYWNrRnVuY3Rpb24iLCJlcnJvckRlc2MiLCJjcmVhdGVVc2VyTG9naW5SZXF1aXJlZEVycm9yIiwiY3JlYXRlVXNlckRvZXNOb3RFeGlzdEVycm9yIiwiY3JlYXRlQ2xpZW50SW5mb0RlY29kaW5nRXJyb3IiLCJjYXVnaHRFcnJvciIsImNyZWF0ZUNsaWVudEluZm9Ob3RQb3B1bGF0ZWRFcnJvciIsImNyZWF0ZUlkVG9rZW5OdWxsT3JFbXB0eUVycm9yIiwiaW52YWxpZFJhd1Rva2VuU3RyaW5nIiwiY3JlYXRlSWRUb2tlblBhcnNpbmdFcnJvciIsImNhdWdodFBhcnNpbmdFcnJvciIsImNyZWF0ZVRva2VuRW5jb2RpbmdFcnJvciIsImluY29ycmVjdGx5RW5jb2RlZFRva2VuIiwiY3JlYXRlSW52YWxpZEludGVyYWN0aW9uVHlwZUVycm9yIiwiQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yTWVzc2FnZSIsImNvbmZpZ3VyYXRpb25Ob3RTZXQiLCJpbnZhbGlkQ2FjaGVMb2NhdGlvbiIsIm5vU3RvcmFnZVN1cHBvcnRlZCIsIm5vUmVkaXJlY3RDYWxsYmFja3NTZXQiLCJpbnZhbGlkQ2FsbGJhY2tPYmplY3QiLCJzY29wZXNSZXF1aXJlZCIsImVtcHR5U2NvcGVzIiwibm9uQXJyYXlTY29wZXMiLCJjbGllbnRTY29wZSIsImludmFsaWRQcm9tcHQiLCJpbnZhbGlkQXV0aG9yaXR5VHlwZSIsImF1dGhvcml0eVVyaUluc2VjdXJlIiwiYXV0aG9yaXR5VXJpSW52YWxpZFBhdGgiLCJ1bnN1cHBvcnRlZEF1dGhvcml0eVZhbGlkYXRpb24iLCJiMmNBdXRob3JpdHlVcmlJbnZhbGlkUGF0aCIsImNsYWltc1JlcXVlc3RQYXJzaW5nRXJyb3IiLCJlbXB0eVJlcXVlc3RFcnJvciIsInRlbGVtZXRyeUNvbmZpZ0Vycm9yIiwiQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yIiwiY3JlYXRlTm9TZXRDb25maWd1cmF0aW9uRXJyb3IiLCJjcmVhdGVJbnZhbGlkQ2FjaGVMb2NhdGlvbkNvbmZpZ0Vycm9yIiwiZ2l2ZW5DYWNoZUxvY2F0aW9uIiwiY2FjaGVMb2NhdGlvbkxvY2FsIiwiY2FjaGVMb2NhdGlvblNlc3Npb24iLCJjcmVhdGVOb1N0b3JhZ2VTdXBwb3J0ZWRFcnJvciIsImNyZWF0ZVJlZGlyZWN0Q2FsbGJhY2tzTm90U2V0RXJyb3IiLCJjcmVhdGVJbnZhbGlkQ2FsbGJhY2tPYmplY3RFcnJvciIsImNhbGxiYWNrT2JqZWN0IiwiY3JlYXRlRW1wdHlTY29wZXNBcnJheUVycm9yIiwic2NvcGVzVmFsdWUiLCJjcmVhdGVTY29wZXNOb25BcnJheUVycm9yIiwiY3JlYXRlQ2xpZW50SWRTaW5nbGVTY29wZUVycm9yIiwiY3JlYXRlU2NvcGVzUmVxdWlyZWRFcnJvciIsImNyZWF0ZUludmFsaWRQcm9tcHRFcnJvciIsImNyZWF0ZUNsYWltc1JlcXVlc3RQYXJzaW5nRXJyb3IiLCJjbGFpbXNSZXF1ZXN0UGFyc2VFcnJvciIsImNyZWF0ZUVtcHR5UmVxdWVzdEVycm9yIiwiX2EiLCJjcmVhdGVUZWxlbWV0cnlDb25maWdFcnJvciIsImNvbmZpZyIsInJlcXVpcmVkS2V5cyIsImFwcGxpY2F0aW9uTmFtZSIsImFwcGxpY2F0aW9uVmVyc2lvbiIsInRlbGVtZXRyeUVtaXR0ZXIiLCJrZXlzIiwicmVkdWNlIiwiY29uY2F0IiwiQXV0aG9yaXR5VHlwZSIsIlNlcnZlclJlcXVlc3RQYXJhbWV0ZXJzIiwiQ2Fub25pY2FsQXV0aG9yaXR5IiwicG9wdWxhdGVRdWVyeVBhcmFtcyIsImFjY291bnQiLCJhZGFsSWRUb2tlbk9iamVjdCIsImVRUGFyYW1zIiwidmFsaWRhdGVQcm9tcHRQYXJhbWV0ZXIiLCJjbGFpbXNSZXF1ZXN0IiwiSlNPTiIsInBhcnNlIiwiZSIsInZhbGlkYXRlQ2xhaW1zUmVxdWVzdCIsImlzU1NPUGFyYW0iLCJjb25zdHJ1Y3RVbmlmaWVkQ2FjaGVRdWVyeVBhcmFtZXRlciIsImFkZEhpbnRQYXJhbWV0ZXJzIiwic2FuaXRpemVFUVBhcmFtcyIsImdlbmVyYXRlUXVlcnlQYXJhbWV0ZXJzU3RyaW5nIiwiaWRUb2tlbk9iamVjdCIsInNzb1R5cGUiLCJzc29EYXRhIiwic2VydmVyUmVxUGFyYW0iLCJzaWQiLCJ1c2VyTmFtZSIsImxvZ2luSGludCIsInVwbiIsImFkZFNTT1BhcmFtZXRlciIsInFQYXJhbXMiLCJzc29QYXJhbSIsImhvbWVBY2NvdW50SWQiLCJjb25zdW1lcnNVdGlkIiwiY2xhaW1zIiwiZm9yRWFjaCIsInBhcmFtIiwicGFyYW1zU3RyaW5nIiwiQ2xpZW50SW5mbyIsInJhd0NsaWVudEluZm8iLCJkZWNvZGVkQ2xpZW50SW5mbyIsImNsaWVudEluZm8iLCJfdWlkIiwiX3V0aWQiLCJUb2tlblV0aWxzIiwiZGVjb2RlSnd0Iiwiand0VG9rZW4iLCJtYXRjaGVzIiwiaGVhZGVyIiwiSldTUGF5bG9hZCIsIkpXU1NpZyIsImV4dHJhY3RJZFRva2VuIiwiZW5jb2RlZElkVG9rZW4iLCJkZWNvZGVkVG9rZW4iLCJiYXNlNjRJZFRva2VuIiwiYmFzZTY0RGVjb2RlZCIsImVyciIsInJhd0lkVG9rZW4iLCJpc3N1ZXIiLCJvYmplY3RJZCIsInN1YmplY3QiLCJ2ZXJzaW9uIiwicHJlZmVycmVkTmFtZSIsImV4cGlyYXRpb24iLCJob21lT2JqZWN0SWQiLCJBY2Nlc3NUb2tlbkNhY2hlSXRlbSIsIlN0b3JhZ2UiLCJpbnN0YW5jZSIsImxvY2FsU3RvcmFnZVN1cHBvcnRlZCIsInNlc3Npb25TdG9yYWdlU3VwcG9ydGVkIiwic2V0SXRlbSIsImVuYWJsZUNvb2tpZVN0b3JhZ2UiLCJzZXRJdGVtQ29va2llIiwiZ2V0SXRlbSIsImdldEl0ZW1Db29raWUiLCJyZW1vdmVJdGVtIiwiY2xlYXIiLCJnZXRBbGxBY2Nlc3NUb2tlbnMiLCJhY2Nlc3NUb2tlbkNhY2hlSXRlbSIsInJlc3VsdHMiLCJzdG9yYWdlIiwicmVtb3ZlQWNxdWlyZVRva2VuRW50cmllcyIsInNwbGl0S2V5IiwicmVzb3VyY2VEZWxpbWl0ZXIiLCJzdGF0ZV8xIiwidG9rZW5SZW5ld2FsSW5Qcm9ncmVzcyIsInJlbmV3U3RhdHVzIiwic3RhdGVMb2dpbiIsInN0YXRlQWNxdWlyZVRva2VuIiwiY2xlYXJDb29raWUiLCJzdGF0ZVZhbHVlIiwidG9rZW5SZW5ld1N0YXR1c0luUHJvZ3Jlc3MiLCJyZXNldENhY2hlSXRlbXMiLCJtc2FsIiwiY05hbWUiLCJjVmFsdWUiLCJleHBpcmVzIiwiY29va2llU3RyIiwiZ2V0Q29va2llRXhwaXJhdGlvblRpbWUiLCJkb2N1bWVudCIsImNvb2tpZSIsImNhIiwiY2hhckF0IiwiY29va2llTGlmZURheXMiLCJ0b2RheSIsIkRhdGUiLCJnZXRUaW1lIiwidG9VVENTdHJpbmciLCJub25jZUlkVG9rZW4iLCJsb2dpblJlcXVlc3QiLCJnZW5lcmF0ZUFjcXVpcmVUb2tlbkFjY291bnRLZXkiLCJhY2NvdW50SWQiLCJnZW5lcmF0ZUF1dGhvcml0eUtleSIsIkFjY291bnQiLCJhY2NvdW50SWRlbnRpZmllciIsImlkVG9rZW5DbGFpbXMiLCJlbnZpcm9ubWVudCIsImNyZWF0ZUFjY291bnQiLCJjb21wYXJlQWNjb3VudHMiLCJhMSIsImEyIiwiVGltZVV0aWxzIiwicGFyc2VFeHBpcmVzSW4iLCJwYXJzZUludCIsIm5vdyIsInJvdW5kIiwiUmVzcG9uc2VVdGlscyIsInNldFJlc3BvbnNlSWRUb2tlbiIsIm9yaWdpbmFsUmVzcG9uc2UiLCJpZFRva2VuT2JqIiwiZXhwIiwiZXhwaXJlc09uIiwidW5pcXVlSWQiLCJYaHJDbGllbnQiLCJzZW5kUmVxdWVzdEFzeW5jIiwibWV0aG9kIiwiZW5hYmxlQ2FjaGluZyIsInhociIsIlhNTEh0dHBSZXF1ZXN0Iiwib3BlbiIsIm9ubG9hZCIsImV2Iiwic3RhdHVzIiwiaGFuZGxlRXJyb3IiLCJyZXNwb25zZVRleHQiLCJqc29uUmVzcG9uc2UiLCJvbmVycm9yIiwic2VuZCIsIkxvZ0xldmVsIiwiQXV0aG9yaXR5IiwiSXNWYWxpZGF0aW9uRW5hYmxlZCIsInZhbGlkYXRlQXNVcmkiLCJDYW5vbmljYWxBdXRob3JpdHlVcmxDb21wb25lbnRzIiwidmFsaWRhdGVSZXNvbHZlZCIsInRlbmFudERpc2NvdmVyeVJlc3BvbnNlIiwiVGVuYW50IiwiRW5kU2Vzc2lvbkVuZHBvaW50IiwiSXNzdWVyIiwiY2Fub25pY2FsQXV0aG9yaXR5IiwiY2Fub25pY2FsQXV0aG9yaXR5VXJsQ29tcG9uZW50cyIsImNvbXBvbmVudHMiLCJEaXNjb3ZlckVuZHBvaW50cyIsIm9wZW5JZENvbmZpZ3VyYXRpb25FbmRwb2ludCIsImF1dGhvcml6YXRpb25fZW5kcG9pbnQiLCJlbmRfc2Vzc2lvbl9lbmRwb2ludCIsInJlc29sdmVFbmRwb2ludHNBc3luYyIsIkdldE9wZW5JZENvbmZpZ3VyYXRpb25FbmRwb2ludEFzeW5jIiwib3BlbklkQ29uZmlndXJhdGlvbkVuZHBvaW50UmVzcG9uc2UiLCJBYWRBdXRob3JpdHkiLCJBYWRJbnN0YW5jZURpc2NvdmVyeUVuZHBvaW50IiwiQWFkIiwicmVzdWx0UHJvbWlzZSIsIkRlZmF1bHRPcGVuSWRDb25maWd1cmF0aW9uRW5kcG9pbnQiLCJob3N0IiwiSXNJblRydXN0ZWRIb3N0TGlzdCIsIkFhZEluc3RhbmNlRGlzY292ZXJ5RW5kcG9pbnRVcmwiLCJ0ZW5hbnRfZGlzY292ZXJ5X2VuZHBvaW50IiwiQjJjQXV0aG9yaXR5IiwiQjJDIiwiQjJDX1BSRUZJWCIsIkF1dGhvcml0eUZhY3RvcnkiLCJEZXRlY3RBdXRob3JpdHlGcm9tVXJsIiwiYXV0aG9yaXR5VXJsIiwiQWRmcyIsIkNyZWF0ZUluc3RhbmNlIiwiTG9nZ2VyIiwibG9jYWxDYWxsYmFjayIsIm9wdGlvbnMiLCJsZXZlbCIsIkluZm8iLCJfYiIsIl9jIiwicGlpTG9nZ2luZ0VuYWJsZWQiLCJsb2dNZXNzYWdlIiwibG9nTGV2ZWwiLCJjb250YWluc1BpaSIsInRpbWVzdGFtcCIsImV4ZWN1dGVDYWxsYmFjayIsIm1lc3NhZ2UiLCJlcnJvclBpaSIsIndhcm5pbmciLCJXYXJuaW5nIiwid2FybmluZ1BpaSIsImluZm8iLCJpbmZvUGlpIiwidmVyYm9zZSIsIlZlcmJvc2UiLCJ2ZXJib3NlUGlpIiwiaXNQaWlMb2dnaW5nRW5hYmxlZCIsIkRFRkFVTFRfQVVUSF9PUFRJT05TIiwicG9zdExvZ291dFJlZGlyZWN0VXJpIiwibmF2aWdhdGVUb0xvZ2luUmVxdWVzdFVybCIsIkRFRkFVTFRfQ0FDSEVfT1BUSU9OUyIsIkRFRkFVTFRfU1lTVEVNX09QVElPTlMiLCJsb2dnZXIiLCJ0b2tlblJlbmV3YWxPZmZzZXRTZWNvbmRzIiwibmF2aWdhdGVGcmFtZVdhaXQiLCJERUZBVUxUX0ZSQU1FV09SS19PUFRJT05TIiwiaXNBbmd1bGFyIiwidW5wcm90ZWN0ZWRSZXNvdXJjZXMiLCJwcm90ZWN0ZWRSZXNvdXJjZU1hcCIsIk1hcCIsIlNlcnZlckVycm9yTWVzc2FnZSIsIlNlcnZlckVycm9yIiwiY3JlYXRlU2VydmVyVW5hdmFpbGFibGVFcnJvciIsImNyZWF0ZVVua25vd25TZXJ2ZXJFcnJvciIsIkludGVyYWN0aW9uUmVxdWlyZWRBdXRoRXJyb3JNZXNzYWdlIiwiSW50ZXJhY3Rpb25SZXF1aXJlZEF1dGhFcnJvciIsImlzSW50ZXJhY3Rpb25SZXF1aXJlZEVycm9yIiwiZXJyb3JTdHJpbmciLCJpbnRlcmFjdGlvblJlcXVpcmVkQ29kZXMiLCJjcmVhdGVMb2dpblJlcXVpcmVkQXV0aEVycm9yIiwiY3JlYXRlSW50ZXJhY3Rpb25SZXF1aXJlZEF1dGhFcnJvciIsImNyZWF0ZUNvbnNlbnRSZXF1aXJlZEF1dGhFcnJvciIsImJ1aWxkUmVzcG9uc2VTdGF0ZU9ubHkiLCJhY2NvdW50U3RhdGUiLCJFVkVOVF9OQU1FX0tFWSIsIlNUQVJUX1RJTUVfS0VZIiwiRUxBUFNFRF9USU1FX0tFWSIsIlRFTEVNRVRSWV9CTE9CX0VWRU5UX05BTUVTIiwiTXNhbENvcnJlbGF0aW9uSWRDb25zdFN0cktleSIsIkFwaVRlbGVtSWRDb25zdFN0cktleSIsIkFwaUlkQ29uc3RTdHJLZXkiLCJCcm9rZXJBcHBDb25zdFN0cktleSIsIkNhY2hlRXZlbnRDb3VudENvbnN0U3RyS2V5IiwiSHR0cEV2ZW50Q291bnRUZWxlbWV0cnlCYXRjaEtleSIsIklkcENvbnN0U3RyS2V5IiwiSXNTaWxlbnRUZWxlbWV0cnlCYXRjaEtleSIsIklzU3VjY2Vzc2Z1bENvbnN0U3RyS2V5IiwiUmVzcG9uc2VUaW1lQ29uc3RTdHJLZXkiLCJUZW5hbnRJZENvbnN0U3RyS2V5IiwiVWlFdmVudENvdW50VGVsZW1ldHJ5QmF0Y2hLZXkiLCJwcmVwZW5kRXZlbnROYW1lUHJlZml4IiwiRGVmYXVsdEV2ZW50IiwicGxhdGZvcm0iLCJldmVudENvdW50IiwiZXZlbnQiLCJzZGsiLCJzZGtWZXJzaW9uIiwiZ2V0RXZlbnRDb3VudCIsImV2ZW50TmFtZSIsIlRlbGVtZXRyeUV2ZW50Iiwic3RhcnRUaW1lc3RhbXAiLCJldmVudElkIiwic2V0RWxhcHNlZFRpbWUiLCJ0aW1lIiwic3RvcCIsImNyZWF0ZUV2ZW50S2V5IiwidGVsZW1ldHJ5Q29ycmVsYXRpb25JZCIsIlRlbGVtZXRyeU1hbmFnZXIiLCJjb21wbGV0ZWRFdmVudHMiLCJpblByb2dyZXNzRXZlbnRzIiwiZXZlbnRDb3VudEJ5Q29ycmVsYXRpb25JZCIsIm9ubHlTZW5kRmFpbHVyZVRlbGVtZXRyeSIsInRlbGVtZXRyeVBsYXRmb3JtIiwic3RhcnRFdmVudCIsImV2ZW50S2V5Iiwic3RvcEV2ZW50IiwiaW5jcmVtZW50RXZlbnRDb3VudCIsImZsdXNoIiwib3JwaGFuZWRFdmVudHMiLCJnZXRPcnBoYW5lZEV2ZW50cyIsImV2ZW50c1RvRmx1c2giLCJldmVudENvdW50c1RvRmx1c2giLCJkZWZhdWx0RXZlbnQiLCJldmVudHNXaXRoRGVmYXVsdEV2ZW50IiwibWVtbyIsImV2ZW50XzEiLCJERUZBVUxUX0FVVEhPUklUWSIsIlJlc3BvbnNlVHlwZXMiLCJyZXNvbHZlVG9rZW5Pbmx5SWZPdXRPZklmcmFtZSIsInRhcmdldCIsInByb3BlcnR5S2V5IiwiZGVzY3JpcHRvciIsInRva2VuQWNxdWlzaXRpb25NZXRob2QiLCJhcmdzIiwiX2kiLCJpc0luSWZyYW1lIiwiX2QiLCJmcmFtZXdvcmsiLCJhdXRoUmVzcG9uc2VDYWxsYmFjayIsInRva2VuUmVjZWl2ZWRDYWxsYmFjayIsImVycm9yUmVjZWl2ZWRDYWxsYmFjayIsInJlZGlyZWN0Q2FsbGJhY2tzU2V0IiwiaW5Db29raWUiLCJ0ZWxlbWV0cnlNYW5hZ2VyIiwiZ2V0VGVsZW1ldHJ5TWFuYWdlckZyb21Db25maWciLCJ0ZWxlbWV0cnkiLCJsb2dpbkluUHJvZ3Jlc3MiLCJhY3F1aXJlVG9rZW5JblByb2dyZXNzIiwiY2FjaGVTdG9yYWdlIiwib3BlbmVkV2luZG93cyIsImFjdGl2ZVJlbmV3YWxzIiwicmVuZXdTdGF0ZXMiLCJjYWxsYmFja01hcHBlZFRvUmVuZXdTdGF0ZXMiLCJwcm9taXNlTWFwcGVkVG9SZW5ld1N0YXRlcyIsInVybEhhc2giLCJoYXNoIiwidXJsQ29udGFpbnNIYXNoIiwiaGFuZGxlQXV0aGVudGljYXRpb25SZXNwb25zZSIsImdldEF1dGhvcml0eUluc3RhbmNlIiwiYXV0aE9yVG9rZW5DYWxsYmFjayIsImNhY2hlZEhhc2giLCJwcm9jZXNzQ2FsbEJhY2siLCJhdXRoUmVzcG9uc2VIYW5kbGVyIiwiaW50ZXJhY3Rpb25UeXBlIiwiaW50ZXJhY3Rpb25UeXBlUmVkaXJlY3QiLCJpbnRlcmFjdGlvblR5cGVQb3B1cCIsImF1dGhFcnJvckhhbmRsZXIiLCJhdXRoRXJyIiwibG9naW5SZWRpcmVjdCIsImFjcXVpcmVUb2tlbkludGVyYWN0aXZlIiwiYWNxdWlyZVRva2VuUmVkaXJlY3QiLCJpc0xvZ2luQ2FsbCIsInRocm93bkVycm9yIiwic3RhdGVPbmx5UmVzcG9uc2UiLCJnZXRBY2NvdW50U3RhdGUiLCJhcHBlbmRTY29wZXMiLCJ2YWxpZGF0ZUlucHV0U2NvcGUiLCJnZXRBY2NvdW50IiwiYWNxdWlyZVRva2VuSGVscGVyIiwiZXh0cmFjdEFEQUxJZFRva2VuIiwidG9rZW5SZXF1ZXN0IiwiYnVpbGRJRFRva2VuUmVxdWVzdCIsInNpbGVudExvZ2luIiwic2VydmVyQXV0aGVudGljYXRpb25SZXF1ZXN0IiwicG9wVXBXaW5kb3ciLCJhY3F1aXJlVG9rZW5BdXRob3JpdHkiLCJvcGVuV2luZG93IiwibG9naW5TdGFydFBhZ2UiLCJnZXRUb2tlblR5cGUiLCJhbmd1bGFyTG9naW5SZXF1ZXN0IiwiZ2V0UmVkaXJlY3RVcmkiLCJ1cGRhdGVDYWNoZUVudHJpZXMiLCJ1cmxOYXZpZ2F0ZSIsInJlc3BvbnNlX21vZGVfZnJhZ21lbnQiLCJyZXF1ZXN0VHlwZSIsImxvZ2luIiwicmVuZXdUb2tlbiIsInJlZ2lzdGVyQ2FsbGJhY2siLCJuYXZpZ2F0ZVdpbmRvdyIsImNsb3NlIiwiYWRhbElkVG9rZW4iLCJjYWNoZVJlc3VsdFJlc3BvbnNlIiwidXNlckNvbnRhaW5lZENsYWltcyIsImZvcmNlUmVmcmVzaCIsImdldENhY2hlZFRva2VuIiwicmVuZXdJZFRva2VuIiwidGl0bGUiLCJpbnRlcnZhbCIsInBvcHVwV2luZG93Iiwib3BlblBvcHVwIiwicG9wVXBXaWR0aCIsInBvcFVwSGVpZ2h0IiwibXNhbEVycm9yIiwibXNhbEVycm9yRGVzY3JpcHRpb24iLCJwb2xsVGltZXIiLCJzZXRJbnRlcnZhbCIsImNsb3NlZCIsImNsZWFySW50ZXJ2YWwiLCJicm9hZGNhc3QiLCJwb3BVcFdpbmRvd0xvY2F0aW9uIiwid2luTGVmdCIsInNjcmVlbkxlZnQiLCJzY3JlZW5YIiwid2luVG9wIiwic2NyZWVuVG9wIiwic2NyZWVuWSIsImlubmVyV2lkdGgiLCJkb2N1bWVudEVsZW1lbnQiLCJjbGllbnRXaWR0aCIsImJvZHkiLCJpbm5lckhlaWdodCIsImNsaWVudEhlaWdodCIsImxlZnQiLCJ0b3BfMSIsImZvY3VzIiwicGFyZW50IiwicGFyZW50SXNNc2FsIiwibG9hZElmcmFtZVRpbWVvdXQiLCJmcmFtZU5hbWUiLCJleHBlY3RlZFN0YXRlIiwibG9hZEZyYW1lIiwic2V0VGltZW91dCIsInRva2VuUmVuZXdTdGF0dXNDYW5jZWxsZWQiLCJmcmFtZUNoZWNrIiwiZnJhbWVIYW5kbGUiLCJhZGRIaWRkZW5JRnJhbWUiLCJzcmMiLCJpZnJhbWVJZCIsImFkYWxGcmFtZSIsImdldEVsZW1lbnRCeUlkIiwiY3JlYXRlRWxlbWVudCIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsImlmciIsInNldEF0dHJpYnV0ZSIsInN0eWxlIiwidmlzaWJpbGl0eSIsInBvc2l0aW9uIiwiYm9yZGVyIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJhcHBlbmRDaGlsZCIsImluc2VydEFkamFjZW50SFRNTCIsImZyYW1lcyIsImxvZ291dCIsImNsZWFyQ2FjaGUiLCJnZXRQb3N0TG9nb3V0UmVkaXJlY3RVcmkiLCJhY2Nlc3NUb2tlbkl0ZW1zIiwic3RyaW5naWZ5IiwiY2xlYXJDYWNoZUZvclNjb3BlIiwidG9rZW4iLCJpc0NhbGxiYWNrIiwidXJsU3RyaW5nIiwicGFyYW1ldGVycyIsImRlc2VyaWFsaXplSGFzaCIsImVycm9yRGVzY3JpcHRpb24iLCJzdGF0ZUluZm8iLCJwYXJlbnRDYWxsYmFjayIsImdldFJlc3BvbnNlU3RhdGUiLCJzYXZlVG9rZW5Gcm9tSGFzaCIsInNlbGYiLCJpc1BvcHVwIiwiaXNXaW5kb3dPcGVuZXJNc2FsIiwib3BlbmVyIiwidG9rZW5SZXNwb25zZUNhbGxiYWNrIiwidXJsRnJhZ21lbnQiLCJzdGF0ZVJlc3BvbnNlIiwidW5rbm93biIsInN0YXRlTWF0Y2giLCJzaWxlbnRBdXRoZW50aWNhdGlvblN0YXRlIiwic3RhdGVzSW5QYXJlbnRDb250ZXh0IiwidG9rZW5DYWNoZUl0ZW1zIiwiZmlsdGVyZWRJdGVtcyIsImNhY2hlSXRlbSIsImF1dGhvcml0eUxpc3QiLCJnZXRVbmlxdWVBdXRob3JpdHkiLCJleHBpcmVkIiwib2Zmc2V0IiwiYVN0YXRlIiwiYWNjZXNzVG9rZW5DYWNoZUl0ZW1zIiwiZmxhZ3MiLCJlbGVtZW50IiwicHJvbXB0X25vbmUiLCJzYXZlQWNjZXNzVG9rZW4iLCJhY2Nlc3NUb2tlblJlc3BvbnNlIiwiY2xpZW50T2JqIiwiY29uc2VudGVkU2NvcGVzIiwiYWNjZXNzVG9rZW5LZXkiLCJhY2Nlc3NUb2tlblZhbHVlIiwiaGFzaFBhcmFtcyIsImF1dGhvcml0eUtleSIsImFjcXVpcmVUb2tlbkFjY291bnRLZXkiLCJsb2dpbkVycm9yIiwibm9fYWNjb3VudCIsImhhc2hFcnIiLCJoYXNoRXJyRGVzYyIsInNlc3Npb25TdGF0ZSIsIm1zYWxTZXNzaW9uU3RhdGUiLCJpZFRva2VuS2V5IiwiYXV0aG9yaXR5S2V5XzEiLCJhY2NvdW50S2V5IiwiYWNxdWlyZVRva2VuQWNjb3VudEtleV9ub2FjY291bnQiLCJjYWNoZWRBY2NvdW50IiwiYWNxdWlyZVRva2VuQWNjb3VudCIsIm1zYWxDbGllbnRJbmZvIiwidG9rZW5SZW5ld1N0YXR1c0NvbXBsZXRlZCIsInNwbGl0SW5kZXgiLCJnZXRBbGxBY2NvdW50cyIsImFjY291bnRzIiwiZ2V0VW5pcXVlQWNjb3VudHMiLCJ1bmlxdWVBY2NvdW50cyIsImluZGV4IiwiaXNBcnJheSIsImdldFNjb3BlRnJvbVN0YXRlIiwiZXh0cmFTY29wZXNUb0NvbnNlbnQiLCJkYXRhIiwiZXZ0IiwiQ3VzdG9tRXZlbnQiLCJkZXRhaWwiLCJkaXNwYXRjaEV2ZW50IiwiZ2V0Q2FjaGVkVG9rZW5JbnRlcm5hbCIsImFjY291bnRPYmplY3QiLCJuZXdBdXRob3JpdHkiLCJnZXRTY29wZXNGb3JFbmRwb2ludCIsImVuZHBvaW50Iiwic2l6ZSIsImZyb20iLCJnZXRIb3N0RnJvbVVyaSIsImdldExvZ2luSW5Qcm9ncmVzcyIsInNldGxvZ2luSW5Qcm9ncmVzcyIsImdldEFjcXVpcmVUb2tlbkluUHJvZ3Jlc3MiLCJzZXRBY3F1aXJlVG9rZW5JblByb2dyZXNzIiwiZ2V0TG9nZ2VyIiwiZ2V0Q3VycmVudENvbmZpZ3VyYXRpb24iLCJ1cmkiLCJleHRyYWN0ZWRVcmkiLCJzaWxlbnRDYWxsIiwic2V0QWNjb3VudENhY2hlIiwiZ2V0QWNjb3VudElkIiwic2V0QXV0aG9yaXR5Q2FjaGUiLCJkZWNvcmF0b3JzIiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiUmVmbGVjdCIsImRlY29yYXRlIl0sIm1hcHBpbmdzIjoiQ0FBQSxTQUEyQ0EsRUFBTUMsR0FDMUIsaUJBQVpDLFNBQTBDLGlCQUFYQyxPQUN4Q0EsT0FBT0QsUUFBVUQsSUFDUSxtQkFBWEcsUUFBeUJBLE9BQU9DLElBQzlDRCxPQUFPLGNBQWUsR0FBSUgsR0FDQSxpQkFBWkMsUUFDZEEsUUFBcUIsWUFBSUQsSUFFekJELEVBQWtCLFlBQUlDLElBUnhCLENBU0dLLFFBQVEsV0FDWCxPLFlDVEUsSUFBSUMsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFPRixFQUFpQkUsR0FBVVAsUUFHbkMsSUFBSUMsRUFBU0ksRUFBaUJFLEdBQVksQ0FDekNDLEVBQUdELEVBQ0hFLEdBQUcsRUFDSFQsUUFBUyxJQVVWLE9BTkFVLEVBQVFILEdBQVVJLEtBQUtWLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNNLEdBRy9ETCxFQUFPUSxHQUFJLEVBR0pSLEVBQU9ELFFBMERmLE9BckRBTSxFQUFvQk0sRUFBSUYsRUFHeEJKLEVBQW9CTyxFQUFJUixFQUd4QkMsRUFBb0JRLEVBQUksU0FBU2QsRUFBU2UsRUFBTUMsR0FDM0NWLEVBQW9CVyxFQUFFakIsRUFBU2UsSUFDbENHLE9BQU9DLGVBQWVuQixFQUFTZSxFQUFNLENBQUVLLFlBQVksRUFBTUMsSUFBS0wsS0FLaEVWLEVBQW9CZ0IsRUFBSSxTQUFTdEIsR0FDWCxvQkFBWHVCLFFBQTBCQSxPQUFPQyxhQUMxQ04sT0FBT0MsZUFBZW5CLEVBQVN1QixPQUFPQyxZQUFhLENBQUVDLE1BQU8sV0FFN0RQLE9BQU9DLGVBQWVuQixFQUFTLGFBQWMsQ0FBRXlC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QixFQUFLVCxHb0M4M0R4RCxDQUFtQixDQUNmNmtCLElBQ0R6Z0IsRUFBcUJ0RCxVQUFXLHFCQUFzQixNQUNsRHNELEVBbDNEOEIsR0N2RXpDIiwiZmlsZSI6Ik1zYWxXcmFwcGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoXCJNc2FsV3JhcHBlclwiLCBbXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJNc2FsV3JhcHBlclwiXSA9IGZhY3RvcnkoKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJNc2FsV3JhcHBlclwiXSA9IGZhY3RvcnkoKTtcbn0pKHdpbmRvdywgZnVuY3Rpb24oKSB7XG5yZXR1cm4gIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiaW1wb3J0ICogYXMgTXNhbCBmcm9tIFwibXNhbFwiO1xyXG5cclxuZW51bSBUb2tlblJlcXVlc3RUeXBlIHtcclxuICAgIExvZ2luVG9rZW4sXHJcbiAgICBBY2Nlc3NUb2tlblxyXG59XHJcblxyXG5jbGFzcyBNc2FsV3JhcHBlciB7XHJcbiAgICBwcml2YXRlIF91c2VyQWdlbnRBcHBsaWNhdGlvbjogTXNhbC5Vc2VyQWdlbnRBcHBsaWNhdGlvbjtcclxuICAgIHByaXZhdGUgX3Jlc29sdmU6ICh2YWx1ZT86IE1zYWwuQXV0aFJlc3BvbnNlKSA9PiB2b2lkO1xyXG4gICAgcHJpdmF0ZSBfcmVqZWN0OiAodmFsdWU/OiBhbnkpID0+IHZvaWQ7XHJcbiAgICBwcml2YXRlIF9yZXF1ZXN0VHlwZTogVG9rZW5SZXF1ZXN0VHlwZTtcclxuXHJcbiAgICBwcml2YXRlIF9iYXNpY0NvbmZpZ3VyYXRpb246IE1zYWwuQ29uZmlndXJhdGlvbiA9IHtcclxuICAgICAgICBhdXRoOiB7XHJcbiAgICAgICAgICAgIGNsaWVudElkOiBudWxsLFxyXG4gICAgICAgICAgICB2YWxpZGF0ZUF1dGhvcml0eTogdHJ1ZVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY2FjaGU6IHtcclxuICAgICAgICAgICAgY2FjaGVMb2NhdGlvbjogXCJsb2NhbFN0b3JhZ2VcIixcclxuICAgICAgICAgICAgc3RvcmVBdXRoU3RhdGVJbkNvb2tpZTogZmFsc2VcclxuICAgICAgICB9LFxyXG4gICAgICAgIHN5c3RlbToge1xyXG4gICAgICAgICAgICBsb2FkRnJhbWVUaW1lb3V0OiAzMDAwMFxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBwcml2YXRlIF9iYXNpY0xvZ2luUmVxdWVzdDogTXNhbC5BdXRoZW50aWNhdGlvblBhcmFtZXRlcnMgPSB7XHJcbiAgICAgICAgc2NvcGVzOiBbXCJvcGVuaWRcIl0sXHJcbiAgICAgICAgcHJvbXB0OiBcImxvZ2luXCJcclxuICAgIH1cclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihjb25maWd1cmF0aW9uOiBNc2FsLkNvbmZpZ3VyYXRpb24pIHtcclxuICAgICAgICBpZiAoIWNvbmZpZ3VyYXRpb24uYXV0aC5jbGllbnRJZClcclxuICAgICAgICAgICAgdGhyb3cgXCJDbGllbnRJZCBoYXMgdG8gYmUgc2V0XCI7XHJcblxyXG4gICAgICAgIGNvbnN0IG1lcmdlZENvbmZpZ3VyYXRpb24gPSBPYmplY3QuYXNzaWduKHRoaXMuX2Jhc2ljQ29uZmlndXJhdGlvbiwgY29uZmlndXJhdGlvbik7XHJcbiAgICAgICAgdGhpcy5fdXNlckFnZW50QXBwbGljYXRpb24gPSBuZXcgTXNhbC5Vc2VyQWdlbnRBcHBsaWNhdGlvbihtZXJnZWRDb25maWd1cmF0aW9uKTtcclxuICAgICAgICB0aGlzLl91c2VyQWdlbnRBcHBsaWNhdGlvbi5oYW5kbGVSZWRpcmVjdENhbGxiYWNrKHRoaXMuX2F1dGhSZWRpcmVjdENhbGxCYWNrKTtcclxuICAgIH07XHJcblxyXG4gICAgYWNxdWlyZUFjY2Vzc1Rva2VuID0gKHJlcXVlc3Q6IE1zYWwuQXV0aGVudGljYXRpb25QYXJhbWV0ZXJzKTogUHJvbWlzZTxNc2FsLkF1dGhSZXNwb25zZT4gPT4ge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX3Jlc29sdmUgPSByZXNvbHZlO1xyXG4gICAgICAgICAgICB0aGlzLl9yZWplY3QgPSByZWplY3Q7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9yZXF1ZXN0VHlwZSA9IFRva2VuUmVxdWVzdFR5cGUuQWNjZXNzVG9rZW47XHJcbiAgICAgICAgICAgIHRoaXMuX2FjcXVpcmVBY2Nlc3NUb2tlbkludGVybmFsKHJlcXVlc3QpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICBhY3F1aXJlTG9naW5Ub2tlbiA9IChyZXF1ZXN0PzogTXNhbC5BdXRoZW50aWNhdGlvblBhcmFtZXRlcnMpOiBQcm9taXNlPE1zYWwuQXV0aFJlc3BvbnNlPiA9PiB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fcmVzb2x2ZSA9IHJlc29sdmU7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlamVjdCA9IHJlamVjdDtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX3JlcXVlc3RUeXBlID0gVG9rZW5SZXF1ZXN0VHlwZS5Mb2dpblRva2VuO1xyXG4gICAgICAgICAgICBjb25zdCBtZXJnZWRMb2dpblJlcXVlc3QgPSBPYmplY3QuYXNzaWduKHRoaXMuX2Jhc2ljTG9naW5SZXF1ZXN0LCByZXF1ZXN0KTtcclxuICAgICAgICAgICAgdGhpcy5fdXNlckFnZW50QXBwbGljYXRpb25cclxuICAgICAgICAgICAgICAgIC5sb2dpblBvcHVwKG1lcmdlZExvZ2luUmVxdWVzdClcclxuICAgICAgICAgICAgICAgIC50aGVuKChsb2dpblJlc3BvbnNlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fcmVzb2x2ZShsb2dpblJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fcmVqZWN0KGVycm9yKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICBwcml2YXRlIF9hdXRoUmVkaXJlY3RDYWxsQmFjayA9IChlcnJvcjogTXNhbC5BdXRoRXJyb3IsIHJlc3BvbnNlPzogTXNhbC5BdXRoUmVzcG9uc2UpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIkF1dGhvcml6YXRpb24gcmVkaXJlY3QgZmlyZWRcIik7XHJcbiAgICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAocmVzcG9uc2UudG9rZW5UeXBlID09PSBcImlkX3Rva2VuXCIpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9yZXF1ZXN0VHlwZSA9PT0gVG9rZW5SZXF1ZXN0VHlwZS5BY2Nlc3NUb2tlbilcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9hY3F1aXJlQWNjZXNzVG9rZW5JbnRlcm5hbCh7IHNjb3BlczogcmVzcG9uc2Uuc2NvcGVzIH0pO1xyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3Jlc29sdmUocmVzcG9uc2UpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLnRva2VuVHlwZSA9PT0gXCJhY2Nlc3NfdG9rZW5cIikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcmVzb2x2ZShyZXNwb25zZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInRva2VuIHR5cGUgaXM6XCIgKyByZXNwb25zZS50b2tlblR5cGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBwcml2YXRlIF9yZXF1aXJlc0ludGVyYWN0aW9uID0gKGVycm9yTWVzc2FnZSkgPT4ge1xyXG4gICAgICAgIGlmICghZXJyb3JNZXNzYWdlIHx8ICFlcnJvck1lc3NhZ2UubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc29sZS5sb2coZXJyb3JNZXNzYWdlKTtcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICBlcnJvck1lc3NhZ2UuaW5kZXhPZihcImNvbnNlbnRfcmVxdWlyZWRcIikgIT09IC0xIHx8XHJcbiAgICAgICAgICAgIGVycm9yTWVzc2FnZS5pbmRleE9mKFwiaW50ZXJhY3Rpb25fcmVxdWlyZWRcIikgIT09IC0xIHx8XHJcbiAgICAgICAgICAgIGVycm9yTWVzc2FnZS5pbmRleE9mKFwibG9naW5fcmVxdWlyZWRcIikgIT09IC0xXHJcbiAgICAgICAgKTtcclxuICAgIH07XHJcblxyXG4gICAgcHJpdmF0ZSBfYWNxdWlyZUFjY2Vzc1Rva2VuSW50ZXJuYWwgPSAocmVxdWVzdDogTXNhbC5BdXRoZW50aWNhdGlvblBhcmFtZXRlcnMpID0+IHtcclxuICAgICAgICB0aGlzLl91c2VyQWdlbnRBcHBsaWNhdGlvblxyXG4gICAgICAgICAgICAubG9naW5Qb3B1cCh0aGlzLl9iYXNpY0xvZ2luUmVxdWVzdClcclxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fdXNlckFnZW50QXBwbGljYXRpb25cclxuICAgICAgICAgICAgICAgICAgICAuYWNxdWlyZVRva2VuU2lsZW50KHJlcXVlc3QpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHRva2VuUmVzcG9uc2UpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fcmVzb2x2ZSh0b2tlblJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX3JlcXVpcmVzSW50ZXJhY3Rpb24oZXJyb3IuZXJyb3JDb2RlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fdXNlckFnZW50QXBwbGljYXRpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYWNxdWlyZVRva2VuUG9wdXAocmVxdWVzdClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbigodG9rZW5SZXNwb25zZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9yZXNvbHZlKHRva2VuUmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9yZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3JlamVjdChlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3JlamVjdChlcnJvcik7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgIH07XHJcbn1cclxuXHJcbmV4cG9ydCB7IENvbmZpZ3VyYXRpb24sIEF1dGhlbnRpY2F0aW9uUGFyYW1ldGVycyB9IGZyb20gXCJtc2FsXCI7XHJcbmV4cG9ydCBkZWZhdWx0IE1zYWxXcmFwcGVyOyIsIi8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5Db3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlXHJcbnRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlXHJcbkxpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcblxyXG5USElTIENPREUgSVMgUFJPVklERUQgT04gQU4gKkFTIElTKiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbktJTkQsIEVJVEhFUiBFWFBSRVNTIE9SIElNUExJRUQsIElOQ0xVRElORyBXSVRIT1VUIExJTUlUQVRJT04gQU5ZIElNUExJRURcclxuV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIFRJVExFLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSxcclxuTUVSQ0hBTlRBQkxJVFkgT1IgTk9OLUlORlJJTkdFTUVOVC5cclxuXHJcblNlZSB0aGUgQXBhY2hlIFZlcnNpb24gMi4wIExpY2Vuc2UgZm9yIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9uc1xyXG5hbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXHJcbi8qIGdsb2JhbCBSZWZsZWN0LCBQcm9taXNlICovXHJcblxyXG52YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uKGQsIGIpIHtcclxuICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2V4dGVuZHMoZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG59XHJcblxyXG5leHBvcnQgdmFyIF9fYXNzaWduID0gZnVuY3Rpb24oKSB7XHJcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gX19hc3NpZ24odCkge1xyXG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpIHRbcF0gPSBzW3BdO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdDtcclxuICAgIH1cclxuICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZXN0KHMsIGUpIHtcclxuICAgIHZhciB0ID0ge307XHJcbiAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkgJiYgZS5pbmRleE9mKHApIDwgMClcclxuICAgICAgICB0W3BdID0gc1twXTtcclxuICAgIGlmIChzICE9IG51bGwgJiYgdHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPT09IFwiZnVuY3Rpb25cIilcclxuICAgICAgICBmb3IgKHZhciBpID0gMCwgcCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocyk7IGkgPCBwLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChlLmluZGV4T2YocFtpXSkgPCAwICYmIE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChzLCBwW2ldKSlcclxuICAgICAgICAgICAgICAgIHRbcFtpXV0gPSBzW3BbaV1dO1xyXG4gICAgICAgIH1cclxuICAgIHJldHVybiB0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcGFyYW0ocGFyYW1JbmRleCwgZGVjb3JhdG9yKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwga2V5KSB7IGRlY29yYXRvcih0YXJnZXQsIGtleSwgcGFyYW1JbmRleCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpIHtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0ZXIodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XHJcbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHJlc3VsdC52YWx1ZSk7IH0pLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cclxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZ2VuZXJhdG9yKHRoaXNBcmcsIGJvZHkpIHtcclxuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGc7XHJcbiAgICByZXR1cm4gZyA9IHsgbmV4dDogdmVyYigwKSwgXCJ0aHJvd1wiOiB2ZXJiKDEpLCBcInJldHVyblwiOiB2ZXJiKDIpIH0sIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiAoZ1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KSwgZztcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc3RlcChvcCkge1xyXG4gICAgICAgIGlmIChmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtcclxuICAgICAgICB3aGlsZSAoXykgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xyXG4gICAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gW29wWzBdICYgMiwgdC52YWx1ZV07XHJcbiAgICAgICAgICAgIHN3aXRjaCAob3BbMF0pIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OiBfLmxhYmVsKys7IHJldHVybiB7IHZhbHVlOiBvcFsxXSwgZG9uZTogZmFsc2UgfTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNTogXy5sYWJlbCsrOyB5ID0gb3BbMV07IG9wID0gWzBdOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodCA9IF8udHJ5cywgdCA9IHQubGVuZ3RoID4gMCAmJiB0W3QubGVuZ3RoIC0gMV0pICYmIChvcFswXSA9PT0gNiB8fCBvcFswXSA9PT0gMikpIHsgXyA9IDA7IGNvbnRpbnVlOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHsgXy5sYWJlbCA9IHRbMV07IHQgPSBvcDsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiBfLmxhYmVsIDwgdFsyXSkgeyBfLmxhYmVsID0gdFsyXTsgXy5vcHMucHVzaChvcCk7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkgeyBvcCA9IFs2LCBlXTsgeSA9IDA7IH0gZmluYWxseSB7IGYgPSB0ID0gMDsgfVxyXG4gICAgICAgIGlmIChvcFswXSAmIDUpIHRocm93IG9wWzFdOyByZXR1cm4geyB2YWx1ZTogb3BbMF0gPyBvcFsxXSA6IHZvaWQgMCwgZG9uZTogdHJ1ZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19leHBvcnRTdGFyKG0sIGV4cG9ydHMpIHtcclxuICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fdmFsdWVzKG8pIHtcclxuICAgIHZhciBtID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXSwgaSA9IDA7XHJcbiAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwO1xyXG4gICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVhZChvLCBuKSB7XHJcbiAgICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl07XHJcbiAgICBpZiAoIW0pIHJldHVybiBvO1xyXG4gICAgdmFyIGkgPSBtLmNhbGwobyksIHIsIGFyID0gW10sIGU7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHdoaWxlICgobiA9PT0gdm9pZCAwIHx8IG4tLSA+IDApICYmICEociA9IGkubmV4dCgpKS5kb25lKSBhci5wdXNoKHIudmFsdWUpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGVycm9yKSB7IGUgPSB7IGVycm9yOiBlcnJvciB9OyB9XHJcbiAgICBmaW5hbGx5IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAociAmJiAhci5kb25lICYmIChtID0gaVtcInJldHVyblwiXSkpIG0uY2FsbChpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZmluYWxseSB7IGlmIChlKSB0aHJvdyBlLmVycm9yOyB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZCgpIHtcclxuICAgIGZvciAodmFyIGFyID0gW10sIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgIGFyID0gYXIuY29uY2F0KF9fcmVhZChhcmd1bWVudHNbaV0pKTtcclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkQXJyYXlzKCkge1xyXG4gICAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSBzICs9IGFyZ3VtZW50c1tpXS5sZW5ndGg7XHJcbiAgICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspXHJcbiAgICAgICAgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspXHJcbiAgICAgICAgICAgIHJba10gPSBhW2pdO1xyXG4gICAgcmV0dXJuIHI7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdCh2KSB7XHJcbiAgICByZXR1cm4gdGhpcyBpbnN0YW5jZW9mIF9fYXdhaXQgPyAodGhpcy52ID0gdiwgdGhpcykgOiBuZXcgX19hd2FpdCh2KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNHZW5lcmF0b3IodGhpc0FyZywgX2FyZ3VtZW50cywgZ2VuZXJhdG9yKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIGcgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSksIGksIHEgPSBbXTtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpZiAoZ1tuXSkgaVtuXSA9IGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoYSwgYikgeyBxLnB1c2goW24sIHYsIGEsIGJdKSA+IDEgfHwgcmVzdW1lKG4sIHYpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gcmVzdW1lKG4sIHYpIHsgdHJ5IHsgc3RlcChnW25dKHYpKTsgfSBjYXRjaCAoZSkgeyBzZXR0bGUocVswXVszXSwgZSk7IH0gfVxyXG4gICAgZnVuY3Rpb24gc3RlcChyKSB7IHIudmFsdWUgaW5zdGFuY2VvZiBfX2F3YWl0ID8gUHJvbWlzZS5yZXNvbHZlKHIudmFsdWUudikudGhlbihmdWxmaWxsLCByZWplY3QpIDogc2V0dGxlKHFbMF1bMl0sIHIpOyB9XHJcbiAgICBmdW5jdGlvbiBmdWxmaWxsKHZhbHVlKSB7IHJlc3VtZShcIm5leHRcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiByZWplY3QodmFsdWUpIHsgcmVzdW1lKFwidGhyb3dcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUoZiwgdikgeyBpZiAoZih2KSwgcS5zaGlmdCgpLCBxLmxlbmd0aCkgcmVzdW1lKHFbMF1bMF0sIHFbMF1bMV0pOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jRGVsZWdhdG9yKG8pIHtcclxuICAgIHZhciBpLCBwO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiLCBmdW5jdGlvbiAoZSkgeyB0aHJvdyBlOyB9KSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobiwgZikgeyBpW25dID0gb1tuXSA/IGZ1bmN0aW9uICh2KSB7IHJldHVybiAocCA9ICFwKSA/IHsgdmFsdWU6IF9fYXdhaXQob1tuXSh2KSksIGRvbmU6IG4gPT09IFwicmV0dXJuXCIgfSA6IGYgPyBmKHYpIDogdjsgfSA6IGY7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNWYWx1ZXMobykge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBtID0gb1tTeW1ib2wuYXN5bmNJdGVyYXRvcl0sIGk7XHJcbiAgICByZXR1cm4gbSA/IG0uY2FsbChvKSA6IChvID0gdHlwZW9mIF9fdmFsdWVzID09PSBcImZ1bmN0aW9uXCIgPyBfX3ZhbHVlcyhvKSA6IG9bU3ltYm9sLml0ZXJhdG9yXSgpLCBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaSk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaVtuXSA9IG9bbl0gJiYgZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdiA9IG9bbl0odiksIHNldHRsZShyZXNvbHZlLCByZWplY3QsIHYuZG9uZSwgdi52YWx1ZSk7IH0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCBkLCB2KSB7IFByb21pc2UucmVzb2x2ZSh2KS50aGVuKGZ1bmN0aW9uKHYpIHsgcmVzb2x2ZSh7IHZhbHVlOiB2LCBkb25lOiBkIH0pOyB9LCByZWplY3QpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ha2VUZW1wbGF0ZU9iamVjdChjb29rZWQsIHJhdykge1xyXG4gICAgaWYgKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkoY29va2VkLCBcInJhd1wiLCB7IHZhbHVlOiByYXcgfSk7IH0gZWxzZSB7IGNvb2tlZC5yYXcgPSByYXc7IH1cclxuICAgIHJldHVybiBjb29rZWQ7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnRTdGFyKG1vZCkge1xyXG4gICAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDtcclxuICAgIHZhciByZXN1bHQgPSB7fTtcclxuICAgIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayBpbiBtb2QpIGlmIChPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtb2QsIGspKSByZXN1bHRba10gPSBtb2Rba107XHJcbiAgICByZXN1bHQuZGVmYXVsdCA9IG1vZDtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydERlZmF1bHQobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IGRlZmF1bHQ6IG1vZCB9O1xyXG59XHJcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXHJcbi8qKlxyXG4gKiBAaGlkZGVuXHJcbiAqL1xyXG52YXIgQ3J5cHRvVXRpbHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBDcnlwdG9VdGlscygpIHtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIG5ldyByYW5kb20gR1VJRCAtIHVzZWQgdG8gcG9wdWxhdGUgc3RhdGU/XHJcbiAgICAgKiBAcmV0dXJucyBzdHJpbmcgKEdVSUQpXHJcbiAgICAgKi9cclxuICAgIENyeXB0b1V0aWxzLmNyZWF0ZU5ld0d1aWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8gUkZDNDEyMjogVGhlIHZlcnNpb24gNCBVVUlEIGlzIG1lYW50IGZvciBnZW5lcmF0aW5nIFVVSURzIGZyb20gdHJ1bHktcmFuZG9tIG9yXHJcbiAgICAgICAgLy8gcHNldWRvLXJhbmRvbSBudW1iZXJzLlxyXG4gICAgICAgIC8vIFRoZSBhbGdvcml0aG0gaXMgYXMgZm9sbG93czpcclxuICAgICAgICAvLyAgICAgU2V0IHRoZSB0d28gbW9zdCBzaWduaWZpY2FudCBiaXRzIChiaXRzIDYgYW5kIDcpIG9mIHRoZVxyXG4gICAgICAgIC8vICAgICAgICBjbG9ja19zZXFfaGlfYW5kX3Jlc2VydmVkIHRvIHplcm8gYW5kIG9uZSwgcmVzcGVjdGl2ZWx5LlxyXG4gICAgICAgIC8vICAgICBTZXQgdGhlIGZvdXIgbW9zdCBzaWduaWZpY2FudCBiaXRzIChiaXRzIDEyIHRocm91Z2ggMTUpIG9mIHRoZVxyXG4gICAgICAgIC8vICAgICAgICB0aW1lX2hpX2FuZF92ZXJzaW9uIGZpZWxkIHRvIHRoZSA0LWJpdCB2ZXJzaW9uIG51bWJlciBmcm9tXHJcbiAgICAgICAgLy8gICAgICAgIFNlY3Rpb24gNC4xLjMuIFZlcnNpb240XHJcbiAgICAgICAgLy8gICAgIFNldCBhbGwgdGhlIG90aGVyIGJpdHMgdG8gcmFuZG9tbHkgKG9yIHBzZXVkby1yYW5kb21seSkgY2hvc2VuXHJcbiAgICAgICAgLy8gICAgIHZhbHVlcy5cclxuICAgICAgICAvLyBVVUlEICAgICAgICAgICAgICAgICAgID0gdGltZS1sb3cgXCItXCIgdGltZS1taWQgXCItXCJ0aW1lLWhpZ2gtYW5kLXZlcnNpb24gXCItXCJjbG9jay1zZXEtcmVzZXJ2ZWQgYW5kIGxvdygyaGV4T2N0ZXQpXCItXCIgbm9kZVxyXG4gICAgICAgIC8vIHRpbWUtbG93ICAgICAgICAgICAgICAgPSA0aGV4T2N0ZXRcclxuICAgICAgICAvLyB0aW1lLW1pZCAgICAgICAgICAgICAgID0gMmhleE9jdGV0XHJcbiAgICAgICAgLy8gdGltZS1oaWdoLWFuZC12ZXJzaW9uICA9IDJoZXhPY3RldFxyXG4gICAgICAgIC8vIGNsb2NrLXNlcS1hbmQtcmVzZXJ2ZWQgPSBoZXhPY3RldDpcclxuICAgICAgICAvLyBjbG9jay1zZXEtbG93ICAgICAgICAgID0gaGV4T2N0ZXRcclxuICAgICAgICAvLyBub2RlICAgICAgICAgICAgICAgICAgID0gNmhleE9jdGV0XHJcbiAgICAgICAgLy8gRm9ybWF0OiB4eHh4eHh4eC14eHh4LTR4eHgteXh4eC14eHh4eHh4eHh4eHhcclxuICAgICAgICAvLyB5IGNvdWxkIGJlIDEwMDAsIDEwMDEsIDEwMTAsIDEwMTEgc2luY2UgbW9zdCBzaWduaWZpY2FudCB0d28gYml0cyBuZWVkcyB0byBiZSAxMFxyXG4gICAgICAgIC8vIHkgdmFsdWVzIGFyZSA4LCA5LCBBLCBCXHJcbiAgICAgICAgdmFyIGNyeXB0b09iaiA9IHdpbmRvdy5jcnlwdG87IC8vIGZvciBJRSAxMVxyXG4gICAgICAgIGlmIChjcnlwdG9PYmogJiYgY3J5cHRvT2JqLmdldFJhbmRvbVZhbHVlcykge1xyXG4gICAgICAgICAgICB2YXIgYnVmZmVyID0gbmV3IFVpbnQ4QXJyYXkoMTYpO1xyXG4gICAgICAgICAgICBjcnlwdG9PYmouZ2V0UmFuZG9tVmFsdWVzKGJ1ZmZlcik7XHJcbiAgICAgICAgICAgIC8vYnVmZmVyWzZdIGFuZCBidWZmZXJbN10gcmVwcmVzZW50cyB0aGUgdGltZV9oaV9hbmRfdmVyc2lvbiBmaWVsZC4gV2Ugd2lsbCBzZXQgdGhlIGZvdXIgbW9zdCBzaWduaWZpY2FudCBiaXRzICg0IHRocm91Z2ggNykgb2YgYnVmZmVyWzZdIHRvIHJlcHJlc2VudCBkZWNpbWFsIG51bWJlciA0IChVVUlEIHZlcnNpb24gbnVtYmVyKS5cclxuICAgICAgICAgICAgYnVmZmVyWzZdIHw9IDB4NDA7IC8vYnVmZmVyWzZdIHwgMDEwMDAwMDAgd2lsbCBzZXQgdGhlIDYgYml0IHRvIDEuXHJcbiAgICAgICAgICAgIGJ1ZmZlcls2XSAmPSAweDRmOyAvL2J1ZmZlcls2XSAmIDAxMDAxMTExIHdpbGwgc2V0IHRoZSA0LCA1LCBhbmQgNyBiaXQgdG8gMCBzdWNoIHRoYXQgYml0cyA0LTcgPT0gMDEwMCA9IFwiNFwiLlxyXG4gICAgICAgICAgICAvL2J1ZmZlcls4XSByZXByZXNlbnRzIHRoZSBjbG9ja19zZXFfaGlfYW5kX3Jlc2VydmVkIGZpZWxkLiBXZSB3aWxsIHNldCB0aGUgdHdvIG1vc3Qgc2lnbmlmaWNhbnQgYml0cyAoNiBhbmQgNykgb2YgdGhlIGNsb2NrX3NlcV9oaV9hbmRfcmVzZXJ2ZWQgdG8gemVybyBhbmQgb25lLCByZXNwZWN0aXZlbHkuXHJcbiAgICAgICAgICAgIGJ1ZmZlcls4XSB8PSAweDgwOyAvL2J1ZmZlcls4XSB8IDEwMDAwMDAwIHdpbGwgc2V0IHRoZSA3IGJpdCB0byAxLlxyXG4gICAgICAgICAgICBidWZmZXJbOF0gJj0gMHhiZjsgLy9idWZmZXJbOF0gJiAxMDExMTExMSB3aWxsIHNldCB0aGUgNiBiaXQgdG8gMC5cclxuICAgICAgICAgICAgcmV0dXJuIENyeXB0b1V0aWxzLmRlY2ltYWxUb0hleChidWZmZXJbMF0pICsgQ3J5cHRvVXRpbHMuZGVjaW1hbFRvSGV4KGJ1ZmZlclsxXSlcclxuICAgICAgICAgICAgICAgICsgQ3J5cHRvVXRpbHMuZGVjaW1hbFRvSGV4KGJ1ZmZlclsyXSkgKyBDcnlwdG9VdGlscy5kZWNpbWFsVG9IZXgoYnVmZmVyWzNdKVxyXG4gICAgICAgICAgICAgICAgKyBcIi1cIiArIENyeXB0b1V0aWxzLmRlY2ltYWxUb0hleChidWZmZXJbNF0pICsgQ3J5cHRvVXRpbHMuZGVjaW1hbFRvSGV4KGJ1ZmZlcls1XSlcclxuICAgICAgICAgICAgICAgICsgXCItXCIgKyBDcnlwdG9VdGlscy5kZWNpbWFsVG9IZXgoYnVmZmVyWzZdKSArIENyeXB0b1V0aWxzLmRlY2ltYWxUb0hleChidWZmZXJbN10pXHJcbiAgICAgICAgICAgICAgICArIFwiLVwiICsgQ3J5cHRvVXRpbHMuZGVjaW1hbFRvSGV4KGJ1ZmZlcls4XSkgKyBDcnlwdG9VdGlscy5kZWNpbWFsVG9IZXgoYnVmZmVyWzldKVxyXG4gICAgICAgICAgICAgICAgKyBcIi1cIiArIENyeXB0b1V0aWxzLmRlY2ltYWxUb0hleChidWZmZXJbMTBdKSArIENyeXB0b1V0aWxzLmRlY2ltYWxUb0hleChidWZmZXJbMTFdKVxyXG4gICAgICAgICAgICAgICAgKyBDcnlwdG9VdGlscy5kZWNpbWFsVG9IZXgoYnVmZmVyWzEyXSkgKyBDcnlwdG9VdGlscy5kZWNpbWFsVG9IZXgoYnVmZmVyWzEzXSlcclxuICAgICAgICAgICAgICAgICsgQ3J5cHRvVXRpbHMuZGVjaW1hbFRvSGV4KGJ1ZmZlclsxNF0pICsgQ3J5cHRvVXRpbHMuZGVjaW1hbFRvSGV4KGJ1ZmZlclsxNV0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdmFyIGd1aWRIb2xkZXIgPSBcInh4eHh4eHh4LXh4eHgtNHh4eC15eHh4LXh4eHh4eHh4eHh4eFwiO1xyXG4gICAgICAgICAgICB2YXIgaGV4ID0gXCIwMTIzNDU2Nzg5YWJjZGVmXCI7XHJcbiAgICAgICAgICAgIHZhciByID0gMDtcclxuICAgICAgICAgICAgdmFyIGd1aWRSZXNwb25zZSA9IFwiXCI7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMzY7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGd1aWRIb2xkZXJbaV0gIT09IFwiLVwiICYmIGd1aWRIb2xkZXJbaV0gIT09IFwiNFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZWFjaCB4IGFuZCB5IG5lZWRzIHRvIGJlIHJhbmRvbVxyXG4gICAgICAgICAgICAgICAgICAgIHIgPSBNYXRoLnJhbmRvbSgpICogMTYgfCAwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGd1aWRIb2xkZXJbaV0gPT09IFwieFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZ3VpZFJlc3BvbnNlICs9IGhleFtyXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGd1aWRIb2xkZXJbaV0gPT09IFwieVwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY2xvY2stc2VxLWFuZC1yZXNlcnZlZCBmaXJzdCBoZXggaXMgZmlsdGVyZWQgYW5kIHJlbWFpbmluZyBoZXggdmFsdWVzIGFyZSByYW5kb21cclxuICAgICAgICAgICAgICAgICAgICByICY9IDB4MzsgLy8gYml0IGFuZCB3aXRoIDAwMTEgdG8gc2V0IHBvcyAyIHRvIHplcm8gPzA/P1xyXG4gICAgICAgICAgICAgICAgICAgIHIgfD0gMHg4OyAvLyBzZXQgcG9zIDMgdG8gMSBhcyAxPz8/XHJcbiAgICAgICAgICAgICAgICAgICAgZ3VpZFJlc3BvbnNlICs9IGhleFtyXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGd1aWRSZXNwb25zZSArPSBndWlkSG9sZGVyW2ldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBndWlkUmVzcG9uc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogRGVjaW1hbCB0byBIZXhcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gbnVtXHJcbiAgICAgKi9cclxuICAgIENyeXB0b1V0aWxzLmRlY2ltYWxUb0hleCA9IGZ1bmN0aW9uIChudW0pIHtcclxuICAgICAgICB2YXIgaGV4ID0gbnVtLnRvU3RyaW5nKDE2KTtcclxuICAgICAgICB3aGlsZSAoaGV4Lmxlbmd0aCA8IDIpIHtcclxuICAgICAgICAgICAgaGV4ID0gXCIwXCIgKyBoZXg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBoZXg7XHJcbiAgICB9O1xyXG4gICAgLy8gU2VlOiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvV2luZG93QmFzZTY0L0Jhc2U2NF9lbmNvZGluZ19hbmRfZGVjb2RpbmcjU29sdXRpb25fNF8lRTIlODAlOTNfZXNjYXBpbmdfdGhlX3N0cmluZ19iZWZvcmVfZW5jb2RpbmdfaXRcclxuICAgIC8qKlxyXG4gICAgICogZW5jb2Rpbmcgc3RyaW5nIHRvIGJhc2U2NCAtIHBsYXRmb3JtIHNwZWNpZmljIGNoZWNrXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGlucHV0XHJcbiAgICAgKi9cclxuICAgIENyeXB0b1V0aWxzLmJhc2U2NEVuY29kZSA9IGZ1bmN0aW9uIChpbnB1dCkge1xyXG4gICAgICAgIHJldHVybiBidG9hKGVuY29kZVVSSUNvbXBvbmVudChpbnB1dCkucmVwbGFjZSgvJShbMC05QS1GXXsyfSkvZywgZnVuY3Rpb24gdG9Tb2xpZEJ5dGVzKG1hdGNoLCBwMSkge1xyXG4gICAgICAgICAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShOdW1iZXIoXCIweFwiICsgcDEpKTtcclxuICAgICAgICB9KSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBkZWNvZGluZyBiYXNlNjQgdG9rZW4gLSBwbGF0Zm9ybSBzcGVjaWZpYyBjaGVja1xyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBiYXNlNjRJZFRva2VuXHJcbiAgICAgKi9cclxuICAgIENyeXB0b1V0aWxzLmJhc2U2NERlY29kZSA9IGZ1bmN0aW9uIChpbnB1dCkge1xyXG4gICAgICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQoYXRvYihpbnB1dCkuc3BsaXQoXCJcIikubWFwKGZ1bmN0aW9uIChjKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBcIiVcIiArIChcIjAwXCIgKyBjLmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpKS5zbGljZSgtMik7XHJcbiAgICAgICAgfSkuam9pbihcIlwiKSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBkZXNlcmlhbGl6ZSBhIHN0cmluZ1xyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBxdWVyeVxyXG4gICAgICovXHJcbiAgICBDcnlwdG9VdGlscy5kZXNlcmlhbGl6ZSA9IGZ1bmN0aW9uIChxdWVyeSkge1xyXG4gICAgICAgIHZhciBtYXRjaDsgLy8gUmVnZXggZm9yIHJlcGxhY2luZyBhZGRpdGlvbiBzeW1ib2wgd2l0aCBhIHNwYWNlXHJcbiAgICAgICAgdmFyIHBsID0gL1xcKy9nO1xyXG4gICAgICAgIHZhciBzZWFyY2ggPSAvKFteJj1dKyk9KFteJl0qKS9nO1xyXG4gICAgICAgIHZhciBkZWNvZGUgPSBmdW5jdGlvbiAocykgeyByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KHMucmVwbGFjZShwbCwgXCIgXCIpKTsgfTtcclxuICAgICAgICB2YXIgb2JqID0ge307XHJcbiAgICAgICAgbWF0Y2ggPSBzZWFyY2guZXhlYyhxdWVyeSk7XHJcbiAgICAgICAgd2hpbGUgKG1hdGNoKSB7XHJcbiAgICAgICAgICAgIG9ialtkZWNvZGUobWF0Y2hbMV0pXSA9IGRlY29kZShtYXRjaFsyXSk7XHJcbiAgICAgICAgICAgIG1hdGNoID0gc2VhcmNoLmV4ZWMocXVlcnkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb2JqO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBDcnlwdG9VdGlscztcclxufSgpKTtcclxuZXhwb3J0IHsgQ3J5cHRvVXRpbHMgfTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Q3J5cHRvVXRpbHMuanMubWFwIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cclxuLyoqXHJcbiAqIEBoaWRkZW5cclxuICogQ29uc3RhbnRzXHJcbiAqL1xyXG52YXIgQ29uc3RhbnRzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gQ29uc3RhbnRzKCkge1xyXG4gICAgfVxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbnN0YW50cywgXCJlcnJvckRlc2NyaXB0aW9uXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIFwiZXJyb3JfZGVzY3JpcHRpb25cIjsgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29uc3RhbnRzLCBcImVycm9yXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIFwiZXJyb3JcIjsgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29uc3RhbnRzLCBcInNjb3BlXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIFwic2NvcGVcIjsgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29uc3RhbnRzLCBcImNsaWVudEluZm9cIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gXCJjbGllbnRfaW5mb1wiOyB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb25zdGFudHMsIFwiY2xpZW50SWRcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gXCJjbGllbnRJZFwiOyB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb25zdGFudHMsIFwiaWRUb2tlblwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBcImlkX3Rva2VuXCI7IH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbnN0YW50cywgXCJhZGFsSWRUb2tlblwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBcImFkYWwuaWR0b2tlblwiOyB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb25zdGFudHMsIFwiYWNjZXNzVG9rZW5cIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gXCJhY2Nlc3NfdG9rZW5cIjsgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29uc3RhbnRzLCBcImV4cGlyZXNJblwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBcImV4cGlyZXNfaW5cIjsgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29uc3RhbnRzLCBcInNlc3Npb25TdGF0ZVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBcInNlc3Npb25fc3RhdGVcIjsgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29uc3RhbnRzLCBcImNsYWltc1wiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBcImNsYWltc1wiOyB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb25zdGFudHMsIFwibXNhbENsaWVudEluZm9cIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gXCJtc2FsLmNsaWVudC5pbmZvXCI7IH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbnN0YW50cywgXCJtc2FsRXJyb3JcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gXCJtc2FsLmVycm9yXCI7IH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbnN0YW50cywgXCJtc2FsRXJyb3JEZXNjcmlwdGlvblwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBcIm1zYWwuZXJyb3IuZGVzY3JpcHRpb25cIjsgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29uc3RhbnRzLCBcIm1zYWxTZXNzaW9uU3RhdGVcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gXCJtc2FsLnNlc3Npb24uc3RhdGVcIjsgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29uc3RhbnRzLCBcInRva2VuS2V5c1wiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBcIm1zYWwudG9rZW4ua2V5c1wiOyB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb25zdGFudHMsIFwiYWNjZXNzVG9rZW5LZXlcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gXCJtc2FsLmFjY2Vzcy50b2tlbi5rZXlcIjsgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29uc3RhbnRzLCBcImV4cGlyYXRpb25LZXlcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gXCJtc2FsLmV4cGlyYXRpb24ua2V5XCI7IH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbnN0YW50cywgXCJzdGF0ZUxvZ2luXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIFwibXNhbC5zdGF0ZS5sb2dpblwiOyB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb25zdGFudHMsIFwic3RhdGVBY3F1aXJlVG9rZW5cIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gXCJtc2FsLnN0YXRlLmFjcXVpcmVUb2tlblwiOyB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb25zdGFudHMsIFwic3RhdGVSZW5ld1wiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBcIm1zYWwuc3RhdGUucmVuZXdcIjsgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29uc3RhbnRzLCBcIm5vbmNlSWRUb2tlblwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBcIm1zYWwubm9uY2UuaWR0b2tlblwiOyB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb25zdGFudHMsIFwidXNlck5hbWVcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gXCJtc2FsLnVzZXJuYW1lXCI7IH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbnN0YW50cywgXCJpZFRva2VuS2V5XCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIFwibXNhbC5pZHRva2VuXCI7IH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbnN0YW50cywgXCJsb2dpblJlcXVlc3RcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gXCJtc2FsLmxvZ2luLnJlcXVlc3RcIjsgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29uc3RhbnRzLCBcImxvZ2luRXJyb3JcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gXCJtc2FsLmxvZ2luLmVycm9yXCI7IH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbnN0YW50cywgXCJyZW5ld1N0YXR1c1wiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBcIm1zYWwudG9rZW4ucmVuZXcuc3RhdHVzXCI7IH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbnN0YW50cywgXCJ1cmxIYXNoXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIFwibXNhbC51cmxIYXNoXCI7IH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbnN0YW50cywgXCJhbmd1bGFyTG9naW5SZXF1ZXN0XCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIFwibXNhbC5hbmd1bGFyLmxvZ2luLnJlcXVlc3RcIjsgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29uc3RhbnRzLCBcIm1zYWxcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gXCJtc2FsXCI7IH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbnN0YW50cywgXCJub19hY2NvdW50XCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIFwiTk9fQUNDT1VOVFwiOyB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb25zdGFudHMsIFwiY29uc3VtZXJzVXRpZFwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBcIjkxODgwNDBkLTZjNjctNGM1Yi1iMTEyLTM2YTMwNGI2NmRhZFwiOyB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb25zdGFudHMsIFwidXBuXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIFwidXBuXCI7IH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbnN0YW50cywgXCJwcm9tcHRfc2VsZWN0X2FjY291bnRcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gXCImcHJvbXB0PXNlbGVjdF9hY2NvdW50XCI7IH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbnN0YW50cywgXCJwcm9tcHRfbm9uZVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBcIiZwcm9tcHQ9bm9uZVwiOyB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb25zdGFudHMsIFwicHJvbXB0XCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIFwicHJvbXB0XCI7IH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbnN0YW50cywgXCJyZXNwb25zZV9tb2RlX2ZyYWdtZW50XCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIFwiJnJlc3BvbnNlX21vZGU9ZnJhZ21lbnRcIjsgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29uc3RhbnRzLCBcInJlc291cmNlRGVsaW1pdGVyXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIFwifFwiOyB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb25zdGFudHMsIFwidG9rZW5SZW5ld1N0YXR1c0NhbmNlbGxlZFwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBcIkNhbmNlbGVkXCI7IH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbnN0YW50cywgXCJ0b2tlblJlbmV3U3RhdHVzQ29tcGxldGVkXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIFwiQ29tcGxldGVkXCI7IH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbnN0YW50cywgXCJ0b2tlblJlbmV3U3RhdHVzSW5Qcm9ncmVzc1wiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBcIkluIFByb2dyZXNzXCI7IH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbnN0YW50cywgXCJwb3BVcFdpZHRoXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMuX3BvcFVwV2lkdGg7IH0sXHJcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAod2lkdGgpIHtcclxuICAgICAgICAgICAgdGhpcy5fcG9wVXBXaWR0aCA9IHdpZHRoO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbnN0YW50cywgXCJwb3BVcEhlaWdodFwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLl9wb3BVcEhlaWdodDsgfSxcclxuICAgICAgICBzZXQ6IGZ1bmN0aW9uIChoZWlnaHQpIHtcclxuICAgICAgICAgICAgdGhpcy5fcG9wVXBIZWlnaHQgPSBoZWlnaHQ7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29uc3RhbnRzLCBcImxvZ2luXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIFwiTE9HSU5cIjsgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29uc3RhbnRzLCBcInJlbmV3VG9rZW5cIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gXCJSRU5FV19UT0tFTlwiOyB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb25zdGFudHMsIFwidW5rbm93blwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBcIlVOS05PV05cIjsgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29uc3RhbnRzLCBcImhvbWVBY2NvdW50SWRlbnRpZmllclwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBcImhvbWVBY2NvdW50SWRlbnRpZmllclwiOyB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb25zdGFudHMsIFwiY29tbW9uXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIFwiY29tbW9uXCI7IH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbnN0YW50cywgXCJvcGVuaWRTY29wZVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBcIm9wZW5pZFwiOyB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb25zdGFudHMsIFwicHJvZmlsZVNjb3BlXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIFwicHJvZmlsZVwiOyB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb25zdGFudHMsIFwiY2FjaGVMb2NhdGlvbkxvY2FsXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIFwibG9jYWxTdG9yYWdlXCI7IH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbnN0YW50cywgXCJjYWNoZUxvY2F0aW9uU2Vzc2lvblwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBcInNlc3Npb25TdG9yYWdlXCI7IH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbnN0YW50cywgXCJpbnRlcmFjdGlvblR5cGVSZWRpcmVjdFwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBcInJlZGlyZWN0SW50ZXJhY3Rpb25cIjsgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29uc3RhbnRzLCBcImludGVyYWN0aW9uVHlwZVBvcHVwXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIFwicG9wdXBJbnRlcmFjdGlvblwiOyB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIENvbnN0YW50cy5fcG9wVXBXaWR0aCA9IDQ4MztcclxuICAgIENvbnN0YW50cy5fcG9wVXBIZWlnaHQgPSA2MDA7XHJcbiAgICByZXR1cm4gQ29uc3RhbnRzO1xyXG59KCkpO1xyXG5leHBvcnQgeyBDb25zdGFudHMgfTtcclxuLyoqXHJcbiAqIEBoaWRkZW5cclxuICogQ2FjaGVLZXlzIGZvciAnYXV0aG9yaXR5JyBhbmQgJ2FjY291bnQnXHJcbiAqL1xyXG5leHBvcnQgdmFyIENhY2hlS2V5cyA9IHtcclxuICAgIEFVVEhPUklUWTogXCJtc2FsLmF1dGhvcml0eVwiLFxyXG4gICAgQUNRVUlSRV9UT0tFTl9BQ0NPVU5UOiBcIm1zYWwuYWNxdWlyZVRva2VuQWNjb3VudFwiXHJcbn07XHJcbmV4cG9ydCB2YXIgQUFEVHJ1c3RlZEhvc3RMaXN0ID0ge1xyXG4gICAgXCJsb2dpbi53aW5kb3dzLm5ldFwiOiBcImxvZ2luLndpbmRvd3MubmV0XCIsXHJcbiAgICBcImxvZ2luLmNoaW5hY2xvdWRhcGkuY25cIjogXCJsb2dpbi5jaGluYWNsb3VkYXBpLmNuXCIsXHJcbiAgICBcImxvZ2luLmNsb3VkZ292YXBpLnVzXCI6IFwibG9naW4uY2xvdWRnb3ZhcGkudXNcIixcclxuICAgIFwibG9naW4ubWljcm9zb2Z0b25saW5lLmNvbVwiOiBcImxvZ2luLm1pY3Jvc29mdG9ubGluZS5jb21cIixcclxuICAgIFwibG9naW4ubWljcm9zb2Z0b25saW5lLmRlXCI6IFwibG9naW4ubWljcm9zb2Z0b25saW5lLmRlXCIsXHJcbiAgICBcImxvZ2luLm1pY3Jvc29mdG9ubGluZS51c1wiOiBcImxvZ2luLm1pY3Jvc29mdG9ubGluZS51c1wiXHJcbn07XHJcbi8qKlxyXG4gKiBAaGlkZGVuXHJcbiAqIFNTTyBUeXBlcyAtIGdlbmVyYXRlZCB0byBwb3B1bGF0ZSBoaW50c1xyXG4gKi9cclxuZXhwb3J0IHZhciBTU09UeXBlcyA9IHtcclxuICAgIEFDQ09VTlQ6IFwiYWNjb3VudFwiLFxyXG4gICAgU0lEOiBcInNpZFwiLFxyXG4gICAgTE9HSU5fSElOVDogXCJsb2dpbl9oaW50XCIsXHJcbiAgICBJRF9UT0tFTjogXCJpZF90b2tlblwiLFxyXG4gICAgRE9NQUlOX0hJTlQ6IFwiZG9tYWluX2hpbnRcIixcclxuICAgIE9SR0FOSVpBVElPTlM6IFwib3JnYW5pemF0aW9uc1wiLFxyXG4gICAgQ09OU1VNRVJTOiBcImNvbnN1bWVyc1wiLFxyXG4gICAgQUNDT1VOVF9JRDogXCJhY2NvdW50SWRlbnRpZmllclwiLFxyXG4gICAgSE9NRUFDQ09VTlRfSUQ6IFwiaG9tZUFjY291bnRJZGVudGlmaWVyXCIsXHJcbiAgICBMT0dJTl9SRVE6IFwibG9naW5fcmVxXCIsXHJcbiAgICBET01BSU5fUkVROiBcImRvbWFpbl9yZXFcIlxyXG59O1xyXG4vKipcclxuICogQGhpZGRlblxyXG4gKi9cclxuZXhwb3J0IHZhciBCbGFja2xpc3RlZEVRUGFyYW1zID0gW1xyXG4gICAgU1NPVHlwZXMuU0lELFxyXG4gICAgU1NPVHlwZXMuTE9HSU5fSElOVFxyXG5dO1xyXG4vKipcclxuICogd2UgY29uc2lkZXJlZCBtYWtpbmcgdGhpcyBcImVudW1cIiBpbiB0aGUgcmVxdWVzdCBpbnN0ZWFkIG9mIHN0cmluZywgaG93ZXZlciBpdCBsb29rcyBsaWtlIHRoZSBhbGxvd2VkIGxpc3Qgb2ZcclxuICogcHJvbXB0IHZhbHVlcyBrZXB0IGNoYW5naW5nIG92ZXIgcGFzdCBjb3VwbGUgb2YgeWVhcnMuIFRoZXJlIGFyZSBzb21lIHVuZG9jdW1lbnRlZCBwcm9tcHQgdmFsdWVzIGZvciBzb21lXHJcbiAqIGludGVybmFsIHBhcnRuZXJzIHRvbywgaGVuY2UgdGhlIGNob2ljZSBvZiBnZW5lcmljIFwic3RyaW5nXCIgdHlwZSBpbnN0ZWFkIG9mIHRoZSBcImVudW1cIlxyXG4gKiBAaGlkZGVuXHJcbiAqL1xyXG5leHBvcnQgdmFyIFByb21wdFN0YXRlID0ge1xyXG4gICAgTE9HSU46IFwibG9naW5cIixcclxuICAgIFNFTEVDVF9BQ0NPVU5UOiBcInNlbGVjdF9hY2NvdW50XCIsXHJcbiAgICBDT05TRU5UOiBcImNvbnNlbnRcIixcclxuICAgIE5PTkU6IFwibm9uZVwiLFxyXG59O1xyXG4vKipcclxuICogTVNBTCBKUyBMaWJyYXJ5IFZlcnNpb25cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBsaWJyYXJ5VmVyc2lvbigpIHtcclxuICAgIHJldHVybiBcIjEuMS4zXCI7XHJcbn1cclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Q29uc3RhbnRzLmpzLm1hcCIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXHJcbnZhciBTY29wZVNldCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFNjb3BlU2V0KCkge1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICogQ2hlY2sgaWYgdGhlcmUgYXJlIGR1cCBzY29wZXMgaW4gYSBnaXZlbiByZXF1ZXN0XHJcbiAgICpcclxuICAgKiBAcGFyYW0gY2FjaGVkU2NvcGVzXHJcbiAgICogQHBhcmFtIHNjb3Blc1xyXG4gICAqL1xyXG4gICAgLy8gVE9ETzogUmVuYW1lIHRoaXMsIGludGVyc2VjdGluZyBzY29wZXMgaXNuJ3QgYSBncmVhdCBuYW1lIGZvciBkdXBsaWNhdGUgY2hlY2tlclxyXG4gICAgU2NvcGVTZXQuaXNJbnRlcnNlY3RpbmdTY29wZXMgPSBmdW5jdGlvbiAoY2FjaGVkU2NvcGVzLCBzY29wZXMpIHtcclxuICAgICAgICBjYWNoZWRTY29wZXMgPSB0aGlzLmNvbnZlcnRUb0xvd2VyQ2FzZShjYWNoZWRTY29wZXMpO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2NvcGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChjYWNoZWRTY29wZXMuaW5kZXhPZihzY29wZXNbaV0udG9Mb3dlckNhc2UoKSkgPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQ2hlY2sgaWYgYSBnaXZlbiBzY29wZSBpcyBwcmVzZW50IGluIHRoZSByZXF1ZXN0XHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGNhY2hlZFNjb3Blc1xyXG4gICAgICogQHBhcmFtIHNjb3Blc1xyXG4gICAgICovXHJcbiAgICBTY29wZVNldC5jb250YWluc1Njb3BlID0gZnVuY3Rpb24gKGNhY2hlZFNjb3Blcywgc2NvcGVzKSB7XHJcbiAgICAgICAgY2FjaGVkU2NvcGVzID0gdGhpcy5jb252ZXJ0VG9Mb3dlckNhc2UoY2FjaGVkU2NvcGVzKTtcclxuICAgICAgICByZXR1cm4gc2NvcGVzLmV2ZXJ5KGZ1bmN0aW9uICh2YWx1ZSkgeyByZXR1cm4gY2FjaGVkU2NvcGVzLmluZGV4T2YodmFsdWUudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpKSA+PSAwOyB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIHRvTG93ZXJcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gc2NvcGVzXHJcbiAgICAgKi9cclxuICAgIC8vIFRPRE86IFJlbmFtZSB0aGlzLCB0b28gZ2VuZXJpYyBuYW1lIGZvciBhIGZ1bmN0aW9uIHRoYXQgb25seSBkZWFscyB3aXRoIHNjb3Blc1xyXG4gICAgU2NvcGVTZXQuY29udmVydFRvTG93ZXJDYXNlID0gZnVuY3Rpb24gKHNjb3Blcykge1xyXG4gICAgICAgIHJldHVybiBzY29wZXMubWFwKGZ1bmN0aW9uIChzY29wZSkgeyByZXR1cm4gc2NvcGUudG9Mb3dlckNhc2UoKTsgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiByZW1vdmUgb25lIGVsZW1lbnQgZnJvbSBhIHNjb3BlIGFycmF5XHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHNjb3Blc1xyXG4gICAgICogQHBhcmFtIHNjb3BlXHJcbiAgICAgKi9cclxuICAgIC8vIFRPRE86IFJlbmFtZSB0aGlzLCB0b28gZ2VuZXJpYyBuYW1lIGZvciBhIGZ1bmN0aW9uIHRoYXQgb25seSBkZWFscyB3aXRoIHNjb3Blc1xyXG4gICAgU2NvcGVTZXQucmVtb3ZlRWxlbWVudCA9IGZ1bmN0aW9uIChzY29wZXMsIHNjb3BlKSB7XHJcbiAgICAgICAgcmV0dXJuIHNjb3Blcy5maWx0ZXIoZnVuY3Rpb24gKHZhbHVlKSB7IHJldHVybiB2YWx1ZSAhPT0gc2NvcGU7IH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUGFyc2UgdGhlIHNjb3BlcyBpbnRvIGEgZm9ybWF0dGVkIHNjb3BlTGlzdFxyXG4gICAgICogQHBhcmFtIHNjb3Blc1xyXG4gICAgICovXHJcbiAgICBTY29wZVNldC5wYXJzZVNjb3BlID0gZnVuY3Rpb24gKHNjb3Blcykge1xyXG4gICAgICAgIHZhciBzY29wZUxpc3QgPSBcIlwiO1xyXG4gICAgICAgIGlmIChzY29wZXMpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzY29wZXMubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICAgICAgICAgIHNjb3BlTGlzdCArPSAoaSAhPT0gc2NvcGVzLmxlbmd0aCAtIDEpID8gc2NvcGVzW2ldICsgXCIgXCIgOiBzY29wZXNbaV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHNjb3BlTGlzdDtcclxuICAgIH07XHJcbiAgICByZXR1cm4gU2NvcGVTZXQ7XHJcbn0oKSk7XHJcbmV4cG9ydCB7IFNjb3BlU2V0IH07XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVNjb3BlU2V0LmpzLm1hcCIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXHJcbi8qKlxyXG4gKiBAaGlkZGVuXHJcbiAqL1xyXG52YXIgU3RyaW5nVXRpbHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBTdHJpbmdVdGlscygpIHtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQ2hlY2sgaWYgYSBzdHJpbmcgaXMgZW1wdHlcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gc3RyXHJcbiAgICAgKi9cclxuICAgIFN0cmluZ1V0aWxzLmlzRW1wdHkgPSBmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICAgICAgcmV0dXJuICh0eXBlb2Ygc3RyID09PSBcInVuZGVmaW5lZFwiIHx8ICFzdHIgfHwgMCA9PT0gc3RyLmxlbmd0aCk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFN0cmluZ1V0aWxzO1xyXG59KCkpO1xyXG5leHBvcnQgeyBTdHJpbmdVdGlscyB9O1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1TdHJpbmdVdGlscy5qcy5tYXAiLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxyXG5pbXBvcnQgeyBDb25zdGFudHMsIFNTT1R5cGVzIH0gZnJvbSBcIi4vQ29uc3RhbnRzXCI7XHJcbmltcG9ydCB7IFNjb3BlU2V0IH0gZnJvbSBcIi4uL1Njb3BlU2V0XCI7XHJcbmltcG9ydCB7IFN0cmluZ1V0aWxzIH0gZnJvbSAnLi9TdHJpbmdVdGlscyc7XHJcbi8qKlxyXG4gKiBAaGlkZGVuXHJcbiAqL1xyXG52YXIgVXJsVXRpbHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBVcmxVdGlscygpIHtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogZ2VuZXJhdGVzIHRoZSBVUkwgd2l0aCBRdWVyeVN0cmluZyBQYXJhbWV0ZXJzXHJcbiAgICAgKiBAcGFyYW0gc2NvcGVzXHJcbiAgICAgKi9cclxuICAgIFVybFV0aWxzLmNyZWF0ZU5hdmlnYXRlVXJsID0gZnVuY3Rpb24gKHNlcnZlclJlcXVlc3RQYXJhbXMpIHtcclxuICAgICAgICB2YXIgc3RyID0gdGhpcy5jcmVhdGVOYXZpZ2F0aW9uVXJsU3RyaW5nKHNlcnZlclJlcXVlc3RQYXJhbXMpO1xyXG4gICAgICAgIHZhciBhdXRoRW5kcG9pbnQgPSBzZXJ2ZXJSZXF1ZXN0UGFyYW1zLmF1dGhvcml0eUluc3RhbmNlLkF1dGhvcml6YXRpb25FbmRwb2ludDtcclxuICAgICAgICAvLyBpZiB0aGUgZW5kcG9pbnQgYWxyZWFkeSBoYXMgcXVlcnlwYXJhbXMsIGxldHMgYWRkIHRvIGl0LCBvdGhlcndpc2UgYWRkIHRoZSBmaXJzdCBvbmVcclxuICAgICAgICBpZiAoYXV0aEVuZHBvaW50LmluZGV4T2YoXCI/XCIpIDwgMCkge1xyXG4gICAgICAgICAgICBhdXRoRW5kcG9pbnQgKz0gXCI/XCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBhdXRoRW5kcG9pbnQgKz0gXCImXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciByZXF1ZXN0VXJsID0gXCJcIiArIGF1dGhFbmRwb2ludCArIHN0ci5qb2luKFwiJlwiKTtcclxuICAgICAgICByZXR1cm4gcmVxdWVzdFVybDtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEdlbmVyYXRlIHRoZSBhcnJheSBvZiBhbGwgUXVlcnlTdHJpbmdQYXJhbXMgdG8gYmUgc2VudCB0byB0aGUgc2VydmVyXHJcbiAgICAgKiBAcGFyYW0gc2NvcGVzXHJcbiAgICAgKi9cclxuICAgIFVybFV0aWxzLmNyZWF0ZU5hdmlnYXRpb25VcmxTdHJpbmcgPSBmdW5jdGlvbiAoc2VydmVyUmVxdWVzdFBhcmFtcykge1xyXG4gICAgICAgIHZhciBzY29wZXMgPSBzZXJ2ZXJSZXF1ZXN0UGFyYW1zLnNjb3BlcztcclxuICAgICAgICBpZiAoc2NvcGVzLmluZGV4T2Yoc2VydmVyUmVxdWVzdFBhcmFtcy5jbGllbnRJZCkgPT09IC0xKSB7XHJcbiAgICAgICAgICAgIHNjb3Blcy5wdXNoKHNlcnZlclJlcXVlc3RQYXJhbXMuY2xpZW50SWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgc3RyID0gW107XHJcbiAgICAgICAgc3RyLnB1c2goXCJyZXNwb25zZV90eXBlPVwiICsgc2VydmVyUmVxdWVzdFBhcmFtcy5yZXNwb25zZVR5cGUpO1xyXG4gICAgICAgIHRoaXMudHJhbnNsYXRlY2xpZW50SWRVc2VkSW5TY29wZShzY29wZXMsIHNlcnZlclJlcXVlc3RQYXJhbXMuY2xpZW50SWQpO1xyXG4gICAgICAgIHN0ci5wdXNoKFwic2NvcGU9XCIgKyBlbmNvZGVVUklDb21wb25lbnQoU2NvcGVTZXQucGFyc2VTY29wZShzY29wZXMpKSk7XHJcbiAgICAgICAgc3RyLnB1c2goXCJjbGllbnRfaWQ9XCIgKyBlbmNvZGVVUklDb21wb25lbnQoc2VydmVyUmVxdWVzdFBhcmFtcy5jbGllbnRJZCkpO1xyXG4gICAgICAgIHN0ci5wdXNoKFwicmVkaXJlY3RfdXJpPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KHNlcnZlclJlcXVlc3RQYXJhbXMucmVkaXJlY3RVcmkpKTtcclxuICAgICAgICBzdHIucHVzaChcInN0YXRlPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KHNlcnZlclJlcXVlc3RQYXJhbXMuc3RhdGUpKTtcclxuICAgICAgICBzdHIucHVzaChcIm5vbmNlPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KHNlcnZlclJlcXVlc3RQYXJhbXMubm9uY2UpKTtcclxuICAgICAgICBzdHIucHVzaChcImNsaWVudF9pbmZvPTFcIik7XHJcbiAgICAgICAgc3RyLnB1c2goXCJ4LWNsaWVudC1TS1U9XCIgKyBzZXJ2ZXJSZXF1ZXN0UGFyYW1zLnhDbGllbnRTa3UpO1xyXG4gICAgICAgIHN0ci5wdXNoKFwieC1jbGllbnQtVmVyPVwiICsgc2VydmVyUmVxdWVzdFBhcmFtcy54Q2xpZW50VmVyKTtcclxuICAgICAgICBpZiAoc2VydmVyUmVxdWVzdFBhcmFtcy5wcm9tcHRWYWx1ZSkge1xyXG4gICAgICAgICAgICBzdHIucHVzaChcInByb21wdD1cIiArIGVuY29kZVVSSUNvbXBvbmVudChzZXJ2ZXJSZXF1ZXN0UGFyYW1zLnByb21wdFZhbHVlKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzZXJ2ZXJSZXF1ZXN0UGFyYW1zLmNsYWltc1ZhbHVlKSB7XHJcbiAgICAgICAgICAgIHN0ci5wdXNoKFwiY2xhaW1zPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KHNlcnZlclJlcXVlc3RQYXJhbXMuY2xhaW1zVmFsdWUpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHNlcnZlclJlcXVlc3RQYXJhbXMucXVlcnlQYXJhbWV0ZXJzKSB7XHJcbiAgICAgICAgICAgIHN0ci5wdXNoKHNlcnZlclJlcXVlc3RQYXJhbXMucXVlcnlQYXJhbWV0ZXJzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHNlcnZlclJlcXVlc3RQYXJhbXMuZXh0cmFRdWVyeVBhcmFtZXRlcnMpIHtcclxuICAgICAgICAgICAgc3RyLnB1c2goc2VydmVyUmVxdWVzdFBhcmFtcy5leHRyYVF1ZXJ5UGFyYW1ldGVycyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHN0ci5wdXNoKFwiY2xpZW50LXJlcXVlc3QtaWQ9XCIgKyBlbmNvZGVVUklDb21wb25lbnQoc2VydmVyUmVxdWVzdFBhcmFtcy5jb3JyZWxhdGlvbklkKSk7XHJcbiAgICAgICAgcmV0dXJuIHN0cjtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIGFwcGVuZCB0aGUgcmVxdWlyZWQgc2NvcGVzOiBodHRwczovL29wZW5pZC5uZXQvc3BlY3Mvb3BlbmlkLWNvbm5lY3QtYmFzaWMtMV8wLmh0bWwjU2NvcGVzXHJcbiAgICAgKiBAcGFyYW0gc2NvcGVzXHJcbiAgICAgKi9cclxuICAgIFVybFV0aWxzLnRyYW5zbGF0ZWNsaWVudElkVXNlZEluU2NvcGUgPSBmdW5jdGlvbiAoc2NvcGVzLCBjbGllbnRJZCkge1xyXG4gICAgICAgIHZhciBjbGllbnRJZEluZGV4ID0gc2NvcGVzLmluZGV4T2YoY2xpZW50SWQpO1xyXG4gICAgICAgIGlmIChjbGllbnRJZEluZGV4ID49IDApIHtcclxuICAgICAgICAgICAgc2NvcGVzLnNwbGljZShjbGllbnRJZEluZGV4LCAxKTtcclxuICAgICAgICAgICAgaWYgKHNjb3Blcy5pbmRleE9mKFwib3BlbmlkXCIpID09PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgc2NvcGVzLnB1c2goXCJvcGVuaWRcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHNjb3Blcy5pbmRleE9mKFwicHJvZmlsZVwiKSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgICAgIHNjb3Blcy5wdXNoKFwicHJvZmlsZVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgY3VycmVudCB3aW5kb3cgVVJMIGFzIHJlZGlyZWN0IHVyaVxyXG4gICAgICovXHJcbiAgICBVcmxVdGlscy5nZXREZWZhdWx0UmVkaXJlY3RVcmkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHdpbmRvdy5sb2NhdGlvbi5ocmVmLnNwbGl0KFwiP1wiKVswXS5zcGxpdChcIiNcIilbMF07XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBHaXZlbiBhIHVybCBsaWtlIGh0dHBzOi8vYTpiL2NvbW1vbi9kP2U9ZiNnLCBhbmQgYSB0ZW5hbnRJZCwgcmV0dXJucyBodHRwczovL2E6Yi90ZW5hbnRJZC9kXHJcbiAgICAgKiBAcGFyYW0gaHJlZiBUaGUgdXJsXHJcbiAgICAgKiBAcGFyYW0gdGVuYW50SWQgVGhlIHRlbmFudCBpZCB0byByZXBsYWNlXHJcbiAgICAgKi9cclxuICAgIFVybFV0aWxzLnJlcGxhY2VUZW5hbnRQYXRoID0gZnVuY3Rpb24gKHVybCwgdGVuYW50SWQpIHtcclxuICAgICAgICB1cmwgPSB1cmwudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICB2YXIgdXJsT2JqZWN0ID0gdGhpcy5HZXRVcmxDb21wb25lbnRzKHVybCk7XHJcbiAgICAgICAgdmFyIHBhdGhBcnJheSA9IHVybE9iamVjdC5QYXRoU2VnbWVudHM7XHJcbiAgICAgICAgaWYgKHRlbmFudElkICYmIChwYXRoQXJyYXkubGVuZ3RoICE9PSAwICYmIChwYXRoQXJyYXlbMF0gPT09IENvbnN0YW50cy5jb21tb24gfHwgcGF0aEFycmF5WzBdID09PSBTU09UeXBlcy5PUkdBTklaQVRJT05TKSkpIHtcclxuICAgICAgICAgICAgcGF0aEFycmF5WzBdID0gdGVuYW50SWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdEF1dGhvcml0eVVyaUZyb21PYmplY3QodXJsT2JqZWN0LCBwYXRoQXJyYXkpO1xyXG4gICAgfTtcclxuICAgIFVybFV0aWxzLmNvbnN0cnVjdEF1dGhvcml0eVVyaUZyb21PYmplY3QgPSBmdW5jdGlvbiAodXJsT2JqZWN0LCBwYXRoQXJyYXkpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5DYW5vbmljYWxpemVVcmkodXJsT2JqZWN0LlByb3RvY29sICsgXCIvL1wiICsgdXJsT2JqZWN0Lkhvc3ROYW1lQW5kUG9ydCArIFwiL1wiICsgcGF0aEFycmF5LmpvaW4oXCIvXCIpKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFBhcnNlcyBvdXQgdGhlIGNvbXBvbmVudHMgZnJvbSBhIHVybCBzdHJpbmcuXHJcbiAgICAgKiBAcmV0dXJucyBBbiBvYmplY3Qgd2l0aCB0aGUgdmFyaW91cyBjb21wb25lbnRzLiBQbGVhc2UgY2FjaGUgdGhpcyB2YWx1ZSBpbnN0ZWQgb2YgY2FsbGluZyB0aGlzIG11bHRpcGxlIHRpbWVzIG9uIHRoZSBzYW1lIHVybC5cclxuICAgICAqL1xyXG4gICAgVXJsVXRpbHMuR2V0VXJsQ29tcG9uZW50cyA9IGZ1bmN0aW9uICh1cmwpIHtcclxuICAgICAgICBpZiAoIXVybCkge1xyXG4gICAgICAgICAgICB0aHJvdyBcIlVybCByZXF1aXJlZFwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBodHRwczovL2dpc3QuZ2l0aHViLmNvbS9jdXJ0aXN6LzExMTM5YjJjZmNhZWY0YTI2MWUwXHJcbiAgICAgICAgdmFyIHJlZ0V4ID0gUmVnRXhwKFwiXigoW146Lz8jXSspOik/KC8vKFteLz8jXSopKT8oW14/I10qKShcXFxcPyhbXiNdKikpPygjKC4qKSk/XCIpO1xyXG4gICAgICAgIHZhciBtYXRjaCA9IHVybC5tYXRjaChyZWdFeCk7XHJcbiAgICAgICAgaWYgKCFtYXRjaCB8fCBtYXRjaC5sZW5ndGggPCA2KSB7XHJcbiAgICAgICAgICAgIHRocm93IFwiVmFsaWQgdXJsIHJlcXVpcmVkXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciB1cmxDb21wb25lbnRzID0ge1xyXG4gICAgICAgICAgICBQcm90b2NvbDogbWF0Y2hbMV0sXHJcbiAgICAgICAgICAgIEhvc3ROYW1lQW5kUG9ydDogbWF0Y2hbNF0sXHJcbiAgICAgICAgICAgIEFic29sdXRlUGF0aDogbWF0Y2hbNV1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBwYXRoU2VnbWVudHMgPSB1cmxDb21wb25lbnRzLkFic29sdXRlUGF0aC5zcGxpdChcIi9cIik7XHJcbiAgICAgICAgcGF0aFNlZ21lbnRzID0gcGF0aFNlZ21lbnRzLmZpbHRlcihmdW5jdGlvbiAodmFsKSB7IHJldHVybiB2YWwgJiYgdmFsLmxlbmd0aCA+IDA7IH0pOyAvLyByZW1vdmUgZW1wdHkgZWxlbWVudHNcclxuICAgICAgICB1cmxDb21wb25lbnRzLlBhdGhTZWdtZW50cyA9IHBhdGhTZWdtZW50cztcclxuICAgICAgICByZXR1cm4gdXJsQ29tcG9uZW50cztcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEdpdmVuIGEgdXJsIG9yIHBhdGgsIGFwcGVuZCBhIHRyYWlsaW5nIHNsYXNoIGlmIG9uZSBkb2VzbnQgZXhpc3RcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdXJsXHJcbiAgICAgKi9cclxuICAgIFVybFV0aWxzLkNhbm9uaWNhbGl6ZVVyaSA9IGZ1bmN0aW9uICh1cmwpIHtcclxuICAgICAgICBpZiAodXJsKSB7XHJcbiAgICAgICAgICAgIHVybCA9IHVybC50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodXJsICYmICFVcmxVdGlscy5lbmRzV2l0aCh1cmwsIFwiL1wiKSkge1xyXG4gICAgICAgICAgICB1cmwgKz0gXCIvXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB1cmw7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBDaGVja3MgdG8gc2VlIGlmIHRoZSB1cmwgZW5kcyB3aXRoIHRoZSBzdWZmaXhcclxuICAgICAqIFJlcXVpcmVkIGJlY2F1c2Ugd2UgYXJlIGNvbXBpbGluZyBmb3IgZXM1IGluc3RlYWQgb2YgZXM2XHJcbiAgICAgKiBAcGFyYW0gdXJsXHJcbiAgICAgKiBAcGFyYW0gc3RyXHJcbiAgICAgKi9cclxuICAgIC8vIFRPRE86IFJlbmFtZSB0aGlzLCBub3QgY2xlYXIgd2hhdCBpdCBpcyBzdXBwb3NlZCB0byBkb1xyXG4gICAgVXJsVXRpbHMuZW5kc1dpdGggPSBmdW5jdGlvbiAodXJsLCBzdWZmaXgpIHtcclxuICAgICAgICBpZiAoIXVybCB8fCAhc3VmZml4KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHVybC5pbmRleE9mKHN1ZmZpeCwgdXJsLmxlbmd0aCAtIHN1ZmZpeC5sZW5ndGgpICE9PSAtMTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFV0aWxzIGZ1bmN0aW9uIHRvIHJlbW92ZSB0aGUgbG9naW5faGludCBhbmQgZG9tYWluX2hpbnQgZnJvbSB0aGUgaS9wIGV4dHJhUXVlcnlQYXJhbWV0ZXJzXHJcbiAgICAgKiBAcGFyYW0gdXJsXHJcbiAgICAgKiBAcGFyYW0gbmFtZVxyXG4gICAgICovXHJcbiAgICBVcmxVdGlscy51cmxSZW1vdmVRdWVyeVN0cmluZ1BhcmFtZXRlciA9IGZ1bmN0aW9uICh1cmwsIG5hbWUpIHtcclxuICAgICAgICBpZiAoU3RyaW5nVXRpbHMuaXNFbXB0eSh1cmwpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB1cmw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciByZWdleCA9IG5ldyBSZWdFeHAoXCIoXFxcXCZcIiArIG5hbWUgKyBcIj0pW15cXCZdK1wiKTtcclxuICAgICAgICB1cmwgPSB1cmwucmVwbGFjZShyZWdleCwgXCJcIik7XHJcbiAgICAgICAgLy8gbmFtZT12YWx1ZSZcclxuICAgICAgICByZWdleCA9IG5ldyBSZWdFeHAoXCIoXCIgKyBuYW1lICsgXCI9KVteXFwmXSsmXCIpO1xyXG4gICAgICAgIHVybCA9IHVybC5yZXBsYWNlKHJlZ2V4LCBcIlwiKTtcclxuICAgICAgICAvLyBuYW1lPXZhbHVlXHJcbiAgICAgICAgcmVnZXggPSBuZXcgUmVnRXhwKFwiKFwiICsgbmFtZSArIFwiPSlbXlxcJl0rXCIpO1xyXG4gICAgICAgIHVybCA9IHVybC5yZXBsYWNlKHJlZ2V4LCBcIlwiKTtcclxuICAgICAgICByZXR1cm4gdXJsO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQGhpZGRlblxyXG4gICAgICogQGlnbm9yZVxyXG4gICAgICpcclxuICAgICAqIFJldHVybnMgdGhlIGFuY2hvciBwYXJ0KCMpIG9mIHRoZSBVUkxcclxuICAgICAqL1xyXG4gICAgVXJsVXRpbHMuZ2V0SGFzaEZyb21VcmwgPSBmdW5jdGlvbiAodXJsU3RyaW5nT3JGcmFnbWVudCkge1xyXG4gICAgICAgIHZhciBoYXNoSW5kZXgxID0gdXJsU3RyaW5nT3JGcmFnbWVudC5pbmRleE9mKFwiI1wiKTtcclxuICAgICAgICB2YXIgaGFzaEluZGV4MiA9IHVybFN0cmluZ09yRnJhZ21lbnQuaW5kZXhPZihcIiMvXCIpO1xyXG4gICAgICAgIGlmIChoYXNoSW5kZXgyID4gLTEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHVybFN0cmluZ09yRnJhZ21lbnQuc3Vic3RyaW5nKGhhc2hJbmRleDIgKyAyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoaGFzaEluZGV4MSA+IC0xKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB1cmxTdHJpbmdPckZyYWdtZW50LnN1YnN0cmluZyhoYXNoSW5kZXgxICsgMSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB1cmxTdHJpbmdPckZyYWdtZW50O1xyXG4gICAgfTtcclxuICAgIHJldHVybiBVcmxVdGlscztcclxufSgpKTtcclxuZXhwb3J0IHsgVXJsVXRpbHMgfTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VXJsVXRpbHMuanMubWFwIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cclxuaW1wb3J0IHsgQ3J5cHRvVXRpbHMgfSBmcm9tIFwiLi91dGlscy9DcnlwdG9VdGlsc1wiO1xyXG5pbXBvcnQgeyBVcmxVdGlscyB9IGZyb20gXCIuL3V0aWxzL1VybFV0aWxzXCI7XHJcbi8qKlxyXG4gKiBAaGlkZGVuXHJcbiAqL1xyXG52YXIgQWNjZXNzVG9rZW5LZXkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBBY2Nlc3NUb2tlbktleShhdXRob3JpdHksIGNsaWVudElkLCBzY29wZXMsIHVpZCwgdXRpZCkge1xyXG4gICAgICAgIHRoaXMuYXV0aG9yaXR5ID0gVXJsVXRpbHMuQ2Fub25pY2FsaXplVXJpKGF1dGhvcml0eSk7XHJcbiAgICAgICAgdGhpcy5jbGllbnRJZCA9IGNsaWVudElkO1xyXG4gICAgICAgIHRoaXMuc2NvcGVzID0gc2NvcGVzO1xyXG4gICAgICAgIHRoaXMuaG9tZUFjY291bnRJZGVudGlmaWVyID0gQ3J5cHRvVXRpbHMuYmFzZTY0RW5jb2RlKHVpZCkgKyBcIi5cIiArIENyeXB0b1V0aWxzLmJhc2U2NEVuY29kZSh1dGlkKTtcclxuICAgIH1cclxuICAgIHJldHVybiBBY2Nlc3NUb2tlbktleTtcclxufSgpKTtcclxuZXhwb3J0IHsgQWNjZXNzVG9rZW5LZXkgfTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9QWNjZXNzVG9rZW5LZXkuanMubWFwIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cclxuLyoqXHJcbiAqIEBoaWRkZW5cclxuICovXHJcbnZhciBBY2Nlc3NUb2tlblZhbHVlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gQWNjZXNzVG9rZW5WYWx1ZShhY2Nlc3NUb2tlbiwgaWRUb2tlbiwgZXhwaXJlc0luLCBob21lQWNjb3VudElkZW50aWZpZXIpIHtcclxuICAgICAgICB0aGlzLmFjY2Vzc1Rva2VuID0gYWNjZXNzVG9rZW47XHJcbiAgICAgICAgdGhpcy5pZFRva2VuID0gaWRUb2tlbjtcclxuICAgICAgICB0aGlzLmV4cGlyZXNJbiA9IGV4cGlyZXNJbjtcclxuICAgICAgICB0aGlzLmhvbWVBY2NvdW50SWRlbnRpZmllciA9IGhvbWVBY2NvdW50SWRlbnRpZmllcjtcclxuICAgIH1cclxuICAgIHJldHVybiBBY2Nlc3NUb2tlblZhbHVlO1xyXG59KCkpO1xyXG5leHBvcnQgeyBBY2Nlc3NUb2tlblZhbHVlIH07XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUFjY2Vzc1Rva2VuVmFsdWUuanMubWFwIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cclxuaW1wb3J0ICogYXMgdHNsaWJfMSBmcm9tIFwidHNsaWJcIjtcclxuZXhwb3J0IHZhciBBdXRoRXJyb3JNZXNzYWdlID0ge1xyXG4gICAgdW5leHBlY3RlZEVycm9yOiB7XHJcbiAgICAgICAgY29kZTogXCJ1bmV4cGVjdGVkX2Vycm9yXCIsXHJcbiAgICAgICAgZGVzYzogXCJVbmV4cGVjdGVkIGVycm9yIGluIGF1dGhlbnRpY2F0aW9uLlwiXHJcbiAgICB9XHJcbn07XHJcbi8qKlxyXG4qIEdlbmVyYWwgZXJyb3IgY2xhc3MgdGhyb3duIGJ5IHRoZSBNU0FMLmpzIGxpYnJhcnkuXHJcbiovXHJcbnZhciBBdXRoRXJyb3IgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICB0c2xpYl8xLl9fZXh0ZW5kcyhBdXRoRXJyb3IsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBBdXRoRXJyb3IoZXJyb3JDb2RlLCBlcnJvck1lc3NhZ2UpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBlcnJvck1lc3NhZ2UpIHx8IHRoaXM7XHJcbiAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKF90aGlzLCBBdXRoRXJyb3IucHJvdG90eXBlKTtcclxuICAgICAgICBfdGhpcy5lcnJvckNvZGUgPSBlcnJvckNvZGU7XHJcbiAgICAgICAgX3RoaXMuZXJyb3JNZXNzYWdlID0gZXJyb3JNZXNzYWdlO1xyXG4gICAgICAgIF90aGlzLm5hbWUgPSBcIkF1dGhFcnJvclwiO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIEF1dGhFcnJvci5jcmVhdGVVbmV4cGVjdGVkRXJyb3IgPSBmdW5jdGlvbiAoZXJyRGVzYykge1xyXG4gICAgICAgIHJldHVybiBuZXcgQXV0aEVycm9yKEF1dGhFcnJvck1lc3NhZ2UudW5leHBlY3RlZEVycm9yLmNvZGUsIEF1dGhFcnJvck1lc3NhZ2UudW5leHBlY3RlZEVycm9yLmRlc2MgKyBcIjogXCIgKyBlcnJEZXNjKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gQXV0aEVycm9yO1xyXG59KEVycm9yKSk7XHJcbmV4cG9ydCB7IEF1dGhFcnJvciB9O1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1BdXRoRXJyb3IuanMubWFwIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cclxuaW1wb3J0ICogYXMgdHNsaWJfMSBmcm9tIFwidHNsaWJcIjtcclxuaW1wb3J0IHsgQXV0aEVycm9yIH0gZnJvbSBcIi4vQXV0aEVycm9yXCI7XHJcbmltcG9ydCB7IFN0cmluZ1V0aWxzIH0gZnJvbSBcIi4uL3V0aWxzL1N0cmluZ1V0aWxzXCI7XHJcbmV4cG9ydCB2YXIgQ2xpZW50QXV0aEVycm9yTWVzc2FnZSA9IHtcclxuICAgIG11bHRpcGxlTWF0Y2hpbmdUb2tlbnM6IHtcclxuICAgICAgICBjb2RlOiBcIm11bHRpcGxlX21hdGNoaW5nX3Rva2Vuc1wiLFxyXG4gICAgICAgIGRlc2M6IFwiVGhlIGNhY2hlIGNvbnRhaW5zIG11bHRpcGxlIHRva2VucyBzYXRpc2Z5aW5nIHRoZSByZXF1aXJlbWVudHMuIFwiICtcclxuICAgICAgICAgICAgXCJDYWxsIEFjcXVpcmVUb2tlbiBhZ2FpbiBwcm92aWRpbmcgbW9yZSByZXF1aXJlbWVudHMgbGlrZSBhdXRob3JpdHkuXCJcclxuICAgIH0sXHJcbiAgICBtdWx0aXBsZUNhY2hlQXV0aG9yaXRpZXM6IHtcclxuICAgICAgICBjb2RlOiBcIm11bHRpcGxlX2F1dGhvcml0aWVzXCIsXHJcbiAgICAgICAgZGVzYzogXCJNdWx0aXBsZSBhdXRob3JpdGllcyBmb3VuZCBpbiB0aGUgY2FjaGUuIFBhc3MgYXV0aG9yaXR5IGluIHRoZSBBUEkgb3ZlcmxvYWQuXCJcclxuICAgIH0sXHJcbiAgICBlbmRwb2ludFJlc29sdXRpb25FcnJvcjoge1xyXG4gICAgICAgIGNvZGU6IFwiZW5kcG9pbnRzX3Jlc29sdXRpb25fZXJyb3JcIixcclxuICAgICAgICBkZXNjOiBcIkVycm9yOiBjb3VsZCBub3QgcmVzb2x2ZSBlbmRwb2ludHMuIFBsZWFzZSBjaGVjayBuZXR3b3JrIGFuZCB0cnkgYWdhaW4uXCJcclxuICAgIH0sXHJcbiAgICBwb3BVcFdpbmRvd0Vycm9yOiB7XHJcbiAgICAgICAgY29kZTogXCJwb3B1cF93aW5kb3dfZXJyb3JcIixcclxuICAgICAgICBkZXNjOiBcIkVycm9yIG9wZW5pbmcgcG9wdXAgd2luZG93LiBUaGlzIGNhbiBoYXBwZW4gaWYgeW91IGFyZSB1c2luZyBJRSBvciBpZiBwb3B1cHMgYXJlIGJsb2NrZWQgaW4gdGhlIGJyb3dzZXIuXCJcclxuICAgIH0sXHJcbiAgICB0b2tlblJlbmV3YWxFcnJvcjoge1xyXG4gICAgICAgIGNvZGU6IFwidG9rZW5fcmVuZXdhbF9lcnJvclwiLFxyXG4gICAgICAgIGRlc2M6IFwiVG9rZW4gcmVuZXdhbCBvcGVyYXRpb24gZmFpbGVkIGR1ZSB0byB0aW1lb3V0LlwiXHJcbiAgICB9LFxyXG4gICAgaW52YWxpZElkVG9rZW46IHtcclxuICAgICAgICBjb2RlOiBcImludmFsaWRfaWRfdG9rZW5cIixcclxuICAgICAgICBkZXNjOiBcIkludmFsaWQgSUQgdG9rZW4gZm9ybWF0LlwiXHJcbiAgICB9LFxyXG4gICAgaW52YWxpZFN0YXRlRXJyb3I6IHtcclxuICAgICAgICBjb2RlOiBcImludmFsaWRfc3RhdGVfZXJyb3JcIixcclxuICAgICAgICBkZXNjOiBcIkludmFsaWQgc3RhdGUuXCJcclxuICAgIH0sXHJcbiAgICBub25jZU1pc21hdGNoRXJyb3I6IHtcclxuICAgICAgICBjb2RlOiBcIm5vbmNlX21pc21hdGNoX2Vycm9yXCIsXHJcbiAgICAgICAgZGVzYzogXCJOb25jZSBpcyBub3QgbWF0Y2hpbmcsIE5vbmNlIHJlY2VpdmVkOiBcIlxyXG4gICAgfSxcclxuICAgIGxvZ2luUHJvZ3Jlc3NFcnJvcjoge1xyXG4gICAgICAgIGNvZGU6IFwibG9naW5fcHJvZ3Jlc3NfZXJyb3JcIixcclxuICAgICAgICBkZXNjOiBcIkxvZ2luX0luX1Byb2dyZXNzOiBFcnJvciBkdXJpbmcgbG9naW4gY2FsbCAtIGxvZ2luIGlzIGFscmVhZHkgaW4gcHJvZ3Jlc3MuXCJcclxuICAgIH0sXHJcbiAgICBhY3F1aXJlVG9rZW5Qcm9ncmVzc0Vycm9yOiB7XHJcbiAgICAgICAgY29kZTogXCJhY3F1aXJldG9rZW5fcHJvZ3Jlc3NfZXJyb3JcIixcclxuICAgICAgICBkZXNjOiBcIkFjcXVpcmVUb2tlbl9Jbl9Qcm9ncmVzczogRXJyb3IgZHVyaW5nIGxvZ2luIGNhbGwgLSBsb2dpbiBpcyBhbHJlYWR5IGluIHByb2dyZXNzLlwiXHJcbiAgICB9LFxyXG4gICAgdXNlckNhbmNlbGxlZEVycm9yOiB7XHJcbiAgICAgICAgY29kZTogXCJ1c2VyX2NhbmNlbGxlZFwiLFxyXG4gICAgICAgIGRlc2M6IFwiVXNlciBjYW5jZWxsZWQgdGhlIGZsb3cuXCJcclxuICAgIH0sXHJcbiAgICBjYWxsYmFja0Vycm9yOiB7XHJcbiAgICAgICAgY29kZTogXCJjYWxsYmFja19lcnJvclwiLFxyXG4gICAgICAgIGRlc2M6IFwiRXJyb3Igb2NjdXJyZWQgaW4gdG9rZW4gcmVjZWl2ZWQgY2FsbGJhY2sgZnVuY3Rpb24uXCJcclxuICAgIH0sXHJcbiAgICB1c2VyTG9naW5SZXF1aXJlZEVycm9yOiB7XHJcbiAgICAgICAgY29kZTogXCJ1c2VyX2xvZ2luX2Vycm9yXCIsXHJcbiAgICAgICAgZGVzYzogXCJVc2VyIGxvZ2luIGlzIHJlcXVpcmVkLlwiXHJcbiAgICB9LFxyXG4gICAgdXNlckRvZXNOb3RFeGlzdEVycm9yOiB7XHJcbiAgICAgICAgY29kZTogXCJ1c2VyX25vbl9leGlzdGVudFwiLFxyXG4gICAgICAgIGRlc2M6IFwiVXNlciBvYmplY3QgZG9lcyBub3QgZXhpc3QuIFBsZWFzZSBjYWxsIGEgbG9naW4gQVBJLlwiXHJcbiAgICB9LFxyXG4gICAgY2xpZW50SW5mb0RlY29kaW5nRXJyb3I6IHtcclxuICAgICAgICBjb2RlOiBcImNsaWVudF9pbmZvX2RlY29kaW5nX2Vycm9yXCIsXHJcbiAgICAgICAgZGVzYzogXCJUaGUgY2xpZW50IGluZm8gY291bGQgbm90IGJlIHBhcnNlZC9kZWNvZGVkIGNvcnJlY3RseS4gUGxlYXNlIHJldmlldyB0aGUgdHJhY2UgdG8gZGV0ZXJtaW5lIHRoZSByb290IGNhdXNlLlwiXHJcbiAgICB9LFxyXG4gICAgY2xpZW50SW5mb05vdFBvcHVsYXRlZEVycm9yOiB7XHJcbiAgICAgICAgY29kZTogXCJjbGllbnRfaW5mb19ub3RfcG9wdWxhdGVkX2Vycm9yXCIsXHJcbiAgICAgICAgZGVzYzogXCJUaGUgc2VydmljZSBkaWQgbm90IHBvcHVsYXRlIGNsaWVudF9pbmZvIGluIHRoZSByZXNwb25zZSwgUGxlYXNlIHZlcmlmeSB3aXRoIHRoZSBzZXJ2aWNlIHRlYW1cIlxyXG4gICAgfSxcclxuICAgIG51bGxPckVtcHR5SWRUb2tlbjoge1xyXG4gICAgICAgIGNvZGU6IFwibnVsbF9vcl9lbXB0eV9pZF90b2tlblwiLFxyXG4gICAgICAgIGRlc2M6IFwiVGhlIGlkVG9rZW4gaXMgbnVsbCBvciBlbXB0eS4gUGxlYXNlIHJldmlldyB0aGUgdHJhY2UgdG8gZGV0ZXJtaW5lIHRoZSByb290IGNhdXNlLlwiXHJcbiAgICB9LFxyXG4gICAgaWRUb2tlbk5vdFBhcnNlZDoge1xyXG4gICAgICAgIGNvZGU6IFwiaWRfdG9rZW5fcGFyc2luZ19lcnJvclwiLFxyXG4gICAgICAgIGRlc2M6IFwiSUQgdG9rZW4gY2Fubm90IGJlIHBhcnNlZC4gUGxlYXNlIHJldmlldyBzdGFjayB0cmFjZSB0byBkZXRlcm1pbmUgcm9vdCBjYXVzZS5cIlxyXG4gICAgfSxcclxuICAgIHRva2VuRW5jb2RpbmdFcnJvcjoge1xyXG4gICAgICAgIGNvZGU6IFwidG9rZW5fZW5jb2RpbmdfZXJyb3JcIixcclxuICAgICAgICBkZXNjOiBcIlRoZSB0b2tlbiB0byBiZSBkZWNvZGVkIGlzIG5vdCBlbmNvZGVkIGNvcnJlY3RseS5cIlxyXG4gICAgfSxcclxuICAgIGludmFsaWRJbnRlcmFjdGlvblR5cGU6IHtcclxuICAgICAgICBjb2RlOiBcImludmFsaWRfaW50ZXJhY3Rpb25fdHlwZVwiLFxyXG4gICAgICAgIGRlc2M6IFwiVGhlIGludGVyYWN0aW9uIHR5cGUgcGFzc2VkIHRvIHRoZSBoYW5kbGVyIHdhcyBpbmNvcnJlY3Qgb3IgdW5rbm93blwiXHJcbiAgICB9XHJcbn07XHJcbi8qKlxyXG4gKiBFcnJvciB0aHJvd24gd2hlbiB0aGVyZSBpcyBhbiBlcnJvciBpbiB0aGUgY2xpZW50IGNvZGUgcnVubmluZyBvbiB0aGUgYnJvd3Nlci5cclxuICovXHJcbnZhciBDbGllbnRBdXRoRXJyb3IgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICB0c2xpYl8xLl9fZXh0ZW5kcyhDbGllbnRBdXRoRXJyb3IsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBDbGllbnRBdXRoRXJyb3IoZXJyb3JDb2RlLCBlcnJvck1lc3NhZ2UpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBlcnJvckNvZGUsIGVycm9yTWVzc2FnZSkgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5uYW1lID0gXCJDbGllbnRBdXRoRXJyb3JcIjtcclxuICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YoX3RoaXMsIENsaWVudEF1dGhFcnJvci5wcm90b3R5cGUpO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIENsaWVudEF1dGhFcnJvci5jcmVhdGVFbmRwb2ludFJlc29sdXRpb25FcnJvciA9IGZ1bmN0aW9uIChlcnJEZXRhaWwpIHtcclxuICAgICAgICB2YXIgZXJyb3JNZXNzYWdlID0gQ2xpZW50QXV0aEVycm9yTWVzc2FnZS5lbmRwb2ludFJlc29sdXRpb25FcnJvci5kZXNjO1xyXG4gICAgICAgIGlmIChlcnJEZXRhaWwgJiYgIVN0cmluZ1V0aWxzLmlzRW1wdHkoZXJyRGV0YWlsKSkge1xyXG4gICAgICAgICAgICBlcnJvck1lc3NhZ2UgKz0gXCIgRGV0YWlsczogXCIgKyBlcnJEZXRhaWw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXcgQ2xpZW50QXV0aEVycm9yKENsaWVudEF1dGhFcnJvck1lc3NhZ2UuZW5kcG9pbnRSZXNvbHV0aW9uRXJyb3IuY29kZSwgZXJyb3JNZXNzYWdlKTtcclxuICAgIH07XHJcbiAgICBDbGllbnRBdXRoRXJyb3IuY3JlYXRlTXVsdGlwbGVNYXRjaGluZ1Rva2Vuc0luQ2FjaGVFcnJvciA9IGZ1bmN0aW9uIChzY29wZSkge1xyXG4gICAgICAgIHJldHVybiBuZXcgQ2xpZW50QXV0aEVycm9yKENsaWVudEF1dGhFcnJvck1lc3NhZ2UubXVsdGlwbGVNYXRjaGluZ1Rva2Vucy5jb2RlLCBcIkNhY2hlIGVycm9yIGZvciBzY29wZSBcIiArIHNjb3BlICsgXCI6IFwiICsgQ2xpZW50QXV0aEVycm9yTWVzc2FnZS5tdWx0aXBsZU1hdGNoaW5nVG9rZW5zLmRlc2MgKyBcIi5cIik7XHJcbiAgICB9O1xyXG4gICAgQ2xpZW50QXV0aEVycm9yLmNyZWF0ZU11bHRpcGxlQXV0aG9yaXRpZXNJbkNhY2hlRXJyb3IgPSBmdW5jdGlvbiAoc2NvcGUpIHtcclxuICAgICAgICByZXR1cm4gbmV3IENsaWVudEF1dGhFcnJvcihDbGllbnRBdXRoRXJyb3JNZXNzYWdlLm11bHRpcGxlQ2FjaGVBdXRob3JpdGllcy5jb2RlLCBcIkNhY2hlIGVycm9yIGZvciBzY29wZSBcIiArIHNjb3BlICsgXCI6IFwiICsgQ2xpZW50QXV0aEVycm9yTWVzc2FnZS5tdWx0aXBsZUNhY2hlQXV0aG9yaXRpZXMuZGVzYyArIFwiLlwiKTtcclxuICAgIH07XHJcbiAgICBDbGllbnRBdXRoRXJyb3IuY3JlYXRlUG9wdXBXaW5kb3dFcnJvciA9IGZ1bmN0aW9uIChlcnJEZXRhaWwpIHtcclxuICAgICAgICB2YXIgZXJyb3JNZXNzYWdlID0gQ2xpZW50QXV0aEVycm9yTWVzc2FnZS5wb3BVcFdpbmRvd0Vycm9yLmRlc2M7XHJcbiAgICAgICAgaWYgKGVyckRldGFpbCAmJiAhU3RyaW5nVXRpbHMuaXNFbXB0eShlcnJEZXRhaWwpKSB7XHJcbiAgICAgICAgICAgIGVycm9yTWVzc2FnZSArPSBcIiBEZXRhaWxzOiBcIiArIGVyckRldGFpbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ldyBDbGllbnRBdXRoRXJyb3IoQ2xpZW50QXV0aEVycm9yTWVzc2FnZS5wb3BVcFdpbmRvd0Vycm9yLmNvZGUsIGVycm9yTWVzc2FnZSk7XHJcbiAgICB9O1xyXG4gICAgQ2xpZW50QXV0aEVycm9yLmNyZWF0ZVRva2VuUmVuZXdhbFRpbWVvdXRFcnJvciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gbmV3IENsaWVudEF1dGhFcnJvcihDbGllbnRBdXRoRXJyb3JNZXNzYWdlLnRva2VuUmVuZXdhbEVycm9yLmNvZGUsIENsaWVudEF1dGhFcnJvck1lc3NhZ2UudG9rZW5SZW5ld2FsRXJyb3IuZGVzYyk7XHJcbiAgICB9O1xyXG4gICAgQ2xpZW50QXV0aEVycm9yLmNyZWF0ZUludmFsaWRJZFRva2VuRXJyb3IgPSBmdW5jdGlvbiAoaWRUb2tlbikge1xyXG4gICAgICAgIHJldHVybiBuZXcgQ2xpZW50QXV0aEVycm9yKENsaWVudEF1dGhFcnJvck1lc3NhZ2UuaW52YWxpZElkVG9rZW4uY29kZSwgQ2xpZW50QXV0aEVycm9yTWVzc2FnZS5pbnZhbGlkSWRUb2tlbi5kZXNjICsgXCIgR2l2ZW4gdG9rZW46IFwiICsgaWRUb2tlbik7XHJcbiAgICB9O1xyXG4gICAgLy9UT0RPOiBJcyB0aGlzIG5vdCBhIHNlY3VyaXR5IGZsYXcgdG8gc2VuZCB0aGUgdXNlciB0aGUgc3RhdGUgZXhwZWN0ZWQ/P1xyXG4gICAgQ2xpZW50QXV0aEVycm9yLmNyZWF0ZUludmFsaWRTdGF0ZUVycm9yID0gZnVuY3Rpb24gKGludmFsaWRTdGF0ZSwgYWN0dWFsU3RhdGUpIHtcclxuICAgICAgICByZXR1cm4gbmV3IENsaWVudEF1dGhFcnJvcihDbGllbnRBdXRoRXJyb3JNZXNzYWdlLmludmFsaWRTdGF0ZUVycm9yLmNvZGUsIENsaWVudEF1dGhFcnJvck1lc3NhZ2UuaW52YWxpZFN0YXRlRXJyb3IuZGVzYyArIFwiIFwiICsgaW52YWxpZFN0YXRlICsgXCIsIHN0YXRlIGV4cGVjdGVkIDogXCIgKyBhY3R1YWxTdGF0ZSArIFwiLlwiKTtcclxuICAgIH07XHJcbiAgICAvL1RPRE86IElzIHRoaXMgbm90IGEgc2VjdXJpdHkgZmxhdyB0byBzZW5kIHRoZSB1c2VyIHRoZSBOb25jZSBleHBlY3RlZD8/XHJcbiAgICBDbGllbnRBdXRoRXJyb3IuY3JlYXRlTm9uY2VNaXNtYXRjaEVycm9yID0gZnVuY3Rpb24gKGludmFsaWROb25jZSwgYWN0dWFsTm9uY2UpIHtcclxuICAgICAgICByZXR1cm4gbmV3IENsaWVudEF1dGhFcnJvcihDbGllbnRBdXRoRXJyb3JNZXNzYWdlLm5vbmNlTWlzbWF0Y2hFcnJvci5jb2RlLCBDbGllbnRBdXRoRXJyb3JNZXNzYWdlLm5vbmNlTWlzbWF0Y2hFcnJvci5kZXNjICsgXCIgXCIgKyBpbnZhbGlkTm9uY2UgKyBcIiwgbm9uY2UgZXhwZWN0ZWQgOiBcIiArIGFjdHVhbE5vbmNlICsgXCIuXCIpO1xyXG4gICAgfTtcclxuICAgIENsaWVudEF1dGhFcnJvci5jcmVhdGVMb2dpbkluUHJvZ3Jlc3NFcnJvciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gbmV3IENsaWVudEF1dGhFcnJvcihDbGllbnRBdXRoRXJyb3JNZXNzYWdlLmxvZ2luUHJvZ3Jlc3NFcnJvci5jb2RlLCBDbGllbnRBdXRoRXJyb3JNZXNzYWdlLmxvZ2luUHJvZ3Jlc3NFcnJvci5kZXNjKTtcclxuICAgIH07XHJcbiAgICBDbGllbnRBdXRoRXJyb3IuY3JlYXRlQWNxdWlyZVRva2VuSW5Qcm9ncmVzc0Vycm9yID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgQ2xpZW50QXV0aEVycm9yKENsaWVudEF1dGhFcnJvck1lc3NhZ2UuYWNxdWlyZVRva2VuUHJvZ3Jlc3NFcnJvci5jb2RlLCBDbGllbnRBdXRoRXJyb3JNZXNzYWdlLmFjcXVpcmVUb2tlblByb2dyZXNzRXJyb3IuZGVzYyk7XHJcbiAgICB9O1xyXG4gICAgQ2xpZW50QXV0aEVycm9yLmNyZWF0ZVVzZXJDYW5jZWxsZWRFcnJvciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gbmV3IENsaWVudEF1dGhFcnJvcihDbGllbnRBdXRoRXJyb3JNZXNzYWdlLnVzZXJDYW5jZWxsZWRFcnJvci5jb2RlLCBDbGllbnRBdXRoRXJyb3JNZXNzYWdlLnVzZXJDYW5jZWxsZWRFcnJvci5kZXNjKTtcclxuICAgIH07XHJcbiAgICBDbGllbnRBdXRoRXJyb3IuY3JlYXRlRXJyb3JJbkNhbGxiYWNrRnVuY3Rpb24gPSBmdW5jdGlvbiAoZXJyb3JEZXNjKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBDbGllbnRBdXRoRXJyb3IoQ2xpZW50QXV0aEVycm9yTWVzc2FnZS5jYWxsYmFja0Vycm9yLmNvZGUsIENsaWVudEF1dGhFcnJvck1lc3NhZ2UuY2FsbGJhY2tFcnJvci5kZXNjICsgXCIgXCIgKyBlcnJvckRlc2MgKyBcIi5cIik7XHJcbiAgICB9O1xyXG4gICAgQ2xpZW50QXV0aEVycm9yLmNyZWF0ZVVzZXJMb2dpblJlcXVpcmVkRXJyb3IgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBDbGllbnRBdXRoRXJyb3IoQ2xpZW50QXV0aEVycm9yTWVzc2FnZS51c2VyTG9naW5SZXF1aXJlZEVycm9yLmNvZGUsIENsaWVudEF1dGhFcnJvck1lc3NhZ2UudXNlckxvZ2luUmVxdWlyZWRFcnJvci5kZXNjKTtcclxuICAgIH07XHJcbiAgICBDbGllbnRBdXRoRXJyb3IuY3JlYXRlVXNlckRvZXNOb3RFeGlzdEVycm9yID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgQ2xpZW50QXV0aEVycm9yKENsaWVudEF1dGhFcnJvck1lc3NhZ2UudXNlckRvZXNOb3RFeGlzdEVycm9yLmNvZGUsIENsaWVudEF1dGhFcnJvck1lc3NhZ2UudXNlckRvZXNOb3RFeGlzdEVycm9yLmRlc2MpO1xyXG4gICAgfTtcclxuICAgIENsaWVudEF1dGhFcnJvci5jcmVhdGVDbGllbnRJbmZvRGVjb2RpbmdFcnJvciA9IGZ1bmN0aW9uIChjYXVnaHRFcnJvcikge1xyXG4gICAgICAgIHJldHVybiBuZXcgQ2xpZW50QXV0aEVycm9yKENsaWVudEF1dGhFcnJvck1lc3NhZ2UuY2xpZW50SW5mb0RlY29kaW5nRXJyb3IuY29kZSwgQ2xpZW50QXV0aEVycm9yTWVzc2FnZS5jbGllbnRJbmZvRGVjb2RpbmdFcnJvci5kZXNjICsgXCIgRmFpbGVkIHdpdGggZXJyb3I6IFwiICsgY2F1Z2h0RXJyb3IpO1xyXG4gICAgfTtcclxuICAgIENsaWVudEF1dGhFcnJvci5jcmVhdGVDbGllbnRJbmZvTm90UG9wdWxhdGVkRXJyb3IgPSBmdW5jdGlvbiAoY2F1Z2h0RXJyb3IpIHtcclxuICAgICAgICByZXR1cm4gbmV3IENsaWVudEF1dGhFcnJvcihDbGllbnRBdXRoRXJyb3JNZXNzYWdlLmNsaWVudEluZm9Ob3RQb3B1bGF0ZWRFcnJvci5jb2RlLCBDbGllbnRBdXRoRXJyb3JNZXNzYWdlLmNsaWVudEluZm9Ob3RQb3B1bGF0ZWRFcnJvci5kZXNjICsgXCIgRmFpbGVkIHdpdGggZXJyb3I6IFwiICsgY2F1Z2h0RXJyb3IpO1xyXG4gICAgfTtcclxuICAgIENsaWVudEF1dGhFcnJvci5jcmVhdGVJZFRva2VuTnVsbE9yRW1wdHlFcnJvciA9IGZ1bmN0aW9uIChpbnZhbGlkUmF3VG9rZW5TdHJpbmcpIHtcclxuICAgICAgICByZXR1cm4gbmV3IENsaWVudEF1dGhFcnJvcihDbGllbnRBdXRoRXJyb3JNZXNzYWdlLm51bGxPckVtcHR5SWRUb2tlbi5jb2RlLCBDbGllbnRBdXRoRXJyb3JNZXNzYWdlLm51bGxPckVtcHR5SWRUb2tlbi5kZXNjICsgXCIgUmF3IElEIFRva2VuIFZhbHVlOiBcIiArIGludmFsaWRSYXdUb2tlblN0cmluZyk7XHJcbiAgICB9O1xyXG4gICAgQ2xpZW50QXV0aEVycm9yLmNyZWF0ZUlkVG9rZW5QYXJzaW5nRXJyb3IgPSBmdW5jdGlvbiAoY2F1Z2h0UGFyc2luZ0Vycm9yKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBDbGllbnRBdXRoRXJyb3IoQ2xpZW50QXV0aEVycm9yTWVzc2FnZS5pZFRva2VuTm90UGFyc2VkLmNvZGUsIENsaWVudEF1dGhFcnJvck1lc3NhZ2UuaWRUb2tlbk5vdFBhcnNlZC5kZXNjICsgXCIgRmFpbGVkIHdpdGggZXJyb3I6IFwiICsgY2F1Z2h0UGFyc2luZ0Vycm9yKTtcclxuICAgIH07XHJcbiAgICBDbGllbnRBdXRoRXJyb3IuY3JlYXRlVG9rZW5FbmNvZGluZ0Vycm9yID0gZnVuY3Rpb24gKGluY29ycmVjdGx5RW5jb2RlZFRva2VuKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBDbGllbnRBdXRoRXJyb3IoQ2xpZW50QXV0aEVycm9yTWVzc2FnZS50b2tlbkVuY29kaW5nRXJyb3IuY29kZSwgQ2xpZW50QXV0aEVycm9yTWVzc2FnZS50b2tlbkVuY29kaW5nRXJyb3IuZGVzYyArIFwiIEF0dGVtcHRlZCB0byBkZWNvZGU6IFwiICsgaW5jb3JyZWN0bHlFbmNvZGVkVG9rZW4pO1xyXG4gICAgfTtcclxuICAgIENsaWVudEF1dGhFcnJvci5jcmVhdGVJbnZhbGlkSW50ZXJhY3Rpb25UeXBlRXJyb3IgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBDbGllbnRBdXRoRXJyb3IoQ2xpZW50QXV0aEVycm9yTWVzc2FnZS5pbnZhbGlkSW50ZXJhY3Rpb25UeXBlLmNvZGUsIENsaWVudEF1dGhFcnJvck1lc3NhZ2UuaW52YWxpZEludGVyYWN0aW9uVHlwZS5kZXNjKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gQ2xpZW50QXV0aEVycm9yO1xyXG59KEF1dGhFcnJvcikpO1xyXG5leHBvcnQgeyBDbGllbnRBdXRoRXJyb3IgfTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Q2xpZW50QXV0aEVycm9yLmpzLm1hcCIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXHJcbmltcG9ydCAqIGFzIHRzbGliXzEgZnJvbSBcInRzbGliXCI7XHJcbmltcG9ydCB7IENvbnN0YW50cyB9IGZyb20gXCIuLi91dGlscy9Db25zdGFudHNcIjtcclxuaW1wb3J0IHsgQ2xpZW50QXV0aEVycm9yIH0gZnJvbSBcIi4vQ2xpZW50QXV0aEVycm9yXCI7XHJcbmV4cG9ydCB2YXIgQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yTWVzc2FnZSA9IHtcclxuICAgIGNvbmZpZ3VyYXRpb25Ob3RTZXQ6IHtcclxuICAgICAgICBjb2RlOiBcIm5vX2NvbmZpZ19zZXRcIixcclxuICAgICAgICBkZXNjOiBcIkNvbmZpZ3VyYXRpb24gaGFzIG5vdCBiZWVuIHNldC4gUGxlYXNlIGNhbGwgdGhlIFVzZXJBZ2VudEFwcGxpY2F0aW9uIGNvbnN0cnVjdG9yIHdpdGggYSB2YWxpZCBDb25maWd1cmF0aW9uIG9iamVjdC5cIlxyXG4gICAgfSxcclxuICAgIGludmFsaWRDYWNoZUxvY2F0aW9uOiB7XHJcbiAgICAgICAgY29kZTogXCJpbnZhbGlkX2NhY2hlX2xvY2F0aW9uXCIsXHJcbiAgICAgICAgZGVzYzogXCJUaGUgY2FjaGUgbG9jYXRpb24gcHJvdmlkZWQgaXMgbm90IHZhbGlkLlwiXHJcbiAgICB9LFxyXG4gICAgbm9TdG9yYWdlU3VwcG9ydGVkOiB7XHJcbiAgICAgICAgY29kZTogXCJicm93c2VyX3N0b3JhZ2Vfbm90X3N1cHBvcnRlZFwiLFxyXG4gICAgICAgIGRlc2M6IFwibG9jYWxTdG9yYWdlIGFuZCBzZXNzaW9uU3RvcmFnZSBhcmUgbm90IHN1cHBvcnRlZC5cIlxyXG4gICAgfSxcclxuICAgIG5vUmVkaXJlY3RDYWxsYmFja3NTZXQ6IHtcclxuICAgICAgICBjb2RlOiBcIm5vX3JlZGlyZWN0X2NhbGxiYWNrc1wiLFxyXG4gICAgICAgIGRlc2M6IFwiTm8gcmVkaXJlY3QgY2FsbGJhY2tzIGhhdmUgYmVlbiBzZXQuIFBsZWFzZSBjYWxsIHNldFJlZGlyZWN0Q2FsbGJhY2tzKCkgd2l0aCB0aGUgYXBwcm9wcmlhdGUgZnVuY3Rpb24gYXJndW1lbnRzIGJlZm9yZSBjb250aW51aW5nLiBcIiArXHJcbiAgICAgICAgICAgIFwiTW9yZSBpbmZvcm1hdGlvbiBpcyBhdmFpbGFibGUgaGVyZTogaHR0cHM6Ly9naXRodWIuY29tL0F6dXJlQUQvbWljcm9zb2Z0LWF1dGhlbnRpY2F0aW9uLWxpYnJhcnktZm9yLWpzL3dpa2kvTVNBTC1iYXNpY3MuXCJcclxuICAgIH0sXHJcbiAgICBpbnZhbGlkQ2FsbGJhY2tPYmplY3Q6IHtcclxuICAgICAgICBjb2RlOiBcImludmFsaWRfY2FsbGJhY2tfb2JqZWN0XCIsXHJcbiAgICAgICAgZGVzYzogXCJUaGUgb2JqZWN0IHBhc3NlZCBmb3IgdGhlIGNhbGxiYWNrIHdhcyBpbnZhbGlkLiBcIiArXHJcbiAgICAgICAgICAgIFwiTW9yZSBpbmZvcm1hdGlvbiBpcyBhdmFpbGFibGUgaGVyZTogaHR0cHM6Ly9naXRodWIuY29tL0F6dXJlQUQvbWljcm9zb2Z0LWF1dGhlbnRpY2F0aW9uLWxpYnJhcnktZm9yLWpzL3dpa2kvTVNBTC1iYXNpY3MuXCJcclxuICAgIH0sXHJcbiAgICBzY29wZXNSZXF1aXJlZDoge1xyXG4gICAgICAgIGNvZGU6IFwic2NvcGVzX3JlcXVpcmVkXCIsXHJcbiAgICAgICAgZGVzYzogXCJTY29wZXMgYXJlIHJlcXVpcmVkIHRvIG9idGFpbiBhbiBhY2Nlc3MgdG9rZW4uXCJcclxuICAgIH0sXHJcbiAgICBlbXB0eVNjb3Blczoge1xyXG4gICAgICAgIGNvZGU6IFwiZW1wdHlfaW5wdXRfc2NvcGVzX2Vycm9yXCIsXHJcbiAgICAgICAgZGVzYzogXCJTY29wZXMgY2Fubm90IGJlIHBhc3NlZCBhcyBlbXB0eSBhcnJheS5cIlxyXG4gICAgfSxcclxuICAgIG5vbkFycmF5U2NvcGVzOiB7XHJcbiAgICAgICAgY29kZTogXCJub25hcnJheV9pbnB1dF9zY29wZXNfZXJyb3JcIixcclxuICAgICAgICBkZXNjOiBcIlNjb3BlcyBjYW5ub3QgYmUgcGFzc2VkIGFzIG5vbi1hcnJheS5cIlxyXG4gICAgfSxcclxuICAgIGNsaWVudFNjb3BlOiB7XHJcbiAgICAgICAgY29kZTogXCJjbGllbnRpZF9pbnB1dF9zY29wZXNfZXJyb3JcIixcclxuICAgICAgICBkZXNjOiBcIkNsaWVudCBJRCBjYW4gb25seSBiZSBwcm92aWRlZCBhcyBhIHNpbmdsZSBzY29wZS5cIlxyXG4gICAgfSxcclxuICAgIGludmFsaWRQcm9tcHQ6IHtcclxuICAgICAgICBjb2RlOiBcImludmFsaWRfcHJvbXB0X3ZhbHVlXCIsXHJcbiAgICAgICAgZGVzYzogXCJTdXBwb3J0ZWQgcHJvbXB0IHZhbHVlcyBhcmUgJ2xvZ2luJywgJ3NlbGVjdF9hY2NvdW50JywgJ2NvbnNlbnQnIGFuZCAnbm9uZSdcIixcclxuICAgIH0sXHJcbiAgICBpbnZhbGlkQXV0aG9yaXR5VHlwZToge1xyXG4gICAgICAgIGNvZGU6IFwiaW52YWxpZF9hdXRob3JpdHlfdHlwZVwiLFxyXG4gICAgICAgIGRlc2M6IFwiVGhlIGdpdmVuIGF1dGhvcml0eSBpcyBub3QgYSB2YWxpZCB0eXBlIG9mIGF1dGhvcml0eSBzdXBwb3J0ZWQgYnkgTVNBTC4gUGxlYXNlIHNlZSBoZXJlIGZvciB2YWxpZCBhdXRob3JpdGllczogPGluc2VydCBVUkwgaGVyZT4uXCJcclxuICAgIH0sXHJcbiAgICBhdXRob3JpdHlVcmlJbnNlY3VyZToge1xyXG4gICAgICAgIGNvZGU6IFwiYXV0aG9yaXR5X3VyaV9pbnNlY3VyZVwiLFxyXG4gICAgICAgIGRlc2M6IFwiQXV0aG9yaXR5IFVSSXMgbXVzdCB1c2UgaHR0cHMuXCJcclxuICAgIH0sXHJcbiAgICBhdXRob3JpdHlVcmlJbnZhbGlkUGF0aDoge1xyXG4gICAgICAgIGNvZGU6IFwiYXV0aG9yaXR5X3VyaV9pbnZhbGlkX3BhdGhcIixcclxuICAgICAgICBkZXNjOiBcIkdpdmVuIGF1dGhvcml0eSBVUkkgaXMgaW52YWxpZC5cIlxyXG4gICAgfSxcclxuICAgIHVuc3VwcG9ydGVkQXV0aG9yaXR5VmFsaWRhdGlvbjoge1xyXG4gICAgICAgIGNvZGU6IFwidW5zdXBwb3J0ZWRfYXV0aG9yaXR5X3ZhbGlkYXRpb25cIixcclxuICAgICAgICBkZXNjOiBcIlRoZSBhdXRob3JpdHkgdmFsaWRhdGlvbiBpcyBub3Qgc3VwcG9ydGVkIGZvciB0aGlzIGF1dGhvcml0eSB0eXBlLlwiXHJcbiAgICB9LFxyXG4gICAgYjJjQXV0aG9yaXR5VXJpSW52YWxpZFBhdGg6IHtcclxuICAgICAgICBjb2RlOiBcImIyY19hdXRob3JpdHlfdXJpX2ludmFsaWRfcGF0aFwiLFxyXG4gICAgICAgIGRlc2M6IFwiVGhlIGdpdmVuIFVSSSBmb3IgdGhlIEIyQyBhdXRob3JpdHkgaXMgaW52YWxpZC5cIlxyXG4gICAgfSxcclxuICAgIGNsYWltc1JlcXVlc3RQYXJzaW5nRXJyb3I6IHtcclxuICAgICAgICBjb2RlOiBcImNsYWltc19yZXF1ZXN0X3BhcnNpbmdfZXJyb3JcIixcclxuICAgICAgICBkZXNjOiBcIkNvdWxkIG5vdCBwYXJzZSB0aGUgZ2l2ZW4gY2xhaW1zIHJlcXVlc3Qgb2JqZWN0LlwiXHJcbiAgICB9LFxyXG4gICAgZW1wdHlSZXF1ZXN0RXJyb3I6IHtcclxuICAgICAgICBjb2RlOiBcImVtcHR5X3JlcXVlc3RfZXJyb3JcIixcclxuICAgICAgICBkZXNjOiBcIlJlcXVlc3Qgb2JqZWN0IGlzIHJlcXVpcmVkLlwiXHJcbiAgICB9LFxyXG4gICAgdGVsZW1ldHJ5Q29uZmlnRXJyb3I6IHtcclxuICAgICAgICBjb2RlOiBcInRlbGVtZXRyeV9jb25maWdfZXJyb3JcIixcclxuICAgICAgICBkZXNjOiBcIlRlbGVtZXRyeSBjb25maWcgaXMgbm90IGNvbmZpZ3VyZWQgd2l0aCByZXF1aXJlZCB2YWx1ZXNcIlxyXG4gICAgfVxyXG59O1xyXG4vKipcclxuICogRXJyb3IgdGhyb3duIHdoZW4gdGhlcmUgaXMgYW4gZXJyb3IgaW4gY29uZmlndXJhdGlvbiBvZiB0aGUgLmpzIGxpYnJhcnkuXHJcbiAqL1xyXG52YXIgQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWJfMS5fX2V4dGVuZHMoQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yKGVycm9yQ29kZSwgZXJyb3JNZXNzYWdlKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZXJyb3JDb2RlLCBlcnJvck1lc3NhZ2UpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMubmFtZSA9IFwiQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yXCI7XHJcbiAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKF90aGlzLCBDbGllbnRDb25maWd1cmF0aW9uRXJyb3IucHJvdG90eXBlKTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBDbGllbnRDb25maWd1cmF0aW9uRXJyb3IuY3JlYXRlTm9TZXRDb25maWd1cmF0aW9uRXJyb3IgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBDbGllbnRDb25maWd1cmF0aW9uRXJyb3IoQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yTWVzc2FnZS5jb25maWd1cmF0aW9uTm90U2V0LmNvZGUsIFwiXCIgKyBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JNZXNzYWdlLmNvbmZpZ3VyYXRpb25Ob3RTZXQuZGVzYyk7XHJcbiAgICB9O1xyXG4gICAgQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yLmNyZWF0ZUludmFsaWRDYWNoZUxvY2F0aW9uQ29uZmlnRXJyb3IgPSBmdW5jdGlvbiAoZ2l2ZW5DYWNoZUxvY2F0aW9uKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBDbGllbnRDb25maWd1cmF0aW9uRXJyb3IoQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yTWVzc2FnZS5pbnZhbGlkQ2FjaGVMb2NhdGlvbi5jb2RlLCBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JNZXNzYWdlLmludmFsaWRDYWNoZUxvY2F0aW9uLmRlc2MgKyBcIiBQcm92aWRlZCB2YWx1ZTogXCIgKyBnaXZlbkNhY2hlTG9jYXRpb24gKyBcIi4gUG9zc2libGUgdmFsdWVzIGFyZTogXCIgKyBDb25zdGFudHMuY2FjaGVMb2NhdGlvbkxvY2FsICsgXCIsIFwiICsgQ29uc3RhbnRzLmNhY2hlTG9jYXRpb25TZXNzaW9uICsgXCIuXCIpO1xyXG4gICAgfTtcclxuICAgIENsaWVudENvbmZpZ3VyYXRpb25FcnJvci5jcmVhdGVOb1N0b3JhZ2VTdXBwb3J0ZWRFcnJvciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gbmV3IENsaWVudENvbmZpZ3VyYXRpb25FcnJvcihDbGllbnRDb25maWd1cmF0aW9uRXJyb3JNZXNzYWdlLm5vU3RvcmFnZVN1cHBvcnRlZC5jb2RlLCBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JNZXNzYWdlLm5vU3RvcmFnZVN1cHBvcnRlZC5kZXNjKTtcclxuICAgIH07XHJcbiAgICBDbGllbnRDb25maWd1cmF0aW9uRXJyb3IuY3JlYXRlUmVkaXJlY3RDYWxsYmFja3NOb3RTZXRFcnJvciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gbmV3IENsaWVudENvbmZpZ3VyYXRpb25FcnJvcihDbGllbnRDb25maWd1cmF0aW9uRXJyb3JNZXNzYWdlLm5vUmVkaXJlY3RDYWxsYmFja3NTZXQuY29kZSwgQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yTWVzc2FnZS5ub1JlZGlyZWN0Q2FsbGJhY2tzU2V0LmRlc2MpO1xyXG4gICAgfTtcclxuICAgIENsaWVudENvbmZpZ3VyYXRpb25FcnJvci5jcmVhdGVJbnZhbGlkQ2FsbGJhY2tPYmplY3RFcnJvciA9IGZ1bmN0aW9uIChjYWxsYmFja09iamVjdCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yKENsaWVudENvbmZpZ3VyYXRpb25FcnJvck1lc3NhZ2UuaW52YWxpZENhbGxiYWNrT2JqZWN0LmNvZGUsIENsaWVudENvbmZpZ3VyYXRpb25FcnJvck1lc3NhZ2UuaW52YWxpZENhbGxiYWNrT2JqZWN0LmRlc2MgKyBcIiBHaXZlbiB2YWx1ZSBmb3IgY2FsbGJhY2sgZnVuY3Rpb246IFwiICsgY2FsbGJhY2tPYmplY3QpO1xyXG4gICAgfTtcclxuICAgIENsaWVudENvbmZpZ3VyYXRpb25FcnJvci5jcmVhdGVFbXB0eVNjb3Blc0FycmF5RXJyb3IgPSBmdW5jdGlvbiAoc2NvcGVzVmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gbmV3IENsaWVudENvbmZpZ3VyYXRpb25FcnJvcihDbGllbnRDb25maWd1cmF0aW9uRXJyb3JNZXNzYWdlLmVtcHR5U2NvcGVzLmNvZGUsIENsaWVudENvbmZpZ3VyYXRpb25FcnJvck1lc3NhZ2UuZW1wdHlTY29wZXMuZGVzYyArIFwiIEdpdmVuIHZhbHVlOiBcIiArIHNjb3Blc1ZhbHVlICsgXCIuXCIpO1xyXG4gICAgfTtcclxuICAgIENsaWVudENvbmZpZ3VyYXRpb25FcnJvci5jcmVhdGVTY29wZXNOb25BcnJheUVycm9yID0gZnVuY3Rpb24gKHNjb3Blc1ZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBDbGllbnRDb25maWd1cmF0aW9uRXJyb3IoQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yTWVzc2FnZS5ub25BcnJheVNjb3Blcy5jb2RlLCBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JNZXNzYWdlLm5vbkFycmF5U2NvcGVzLmRlc2MgKyBcIiBHaXZlbiB2YWx1ZTogXCIgKyBzY29wZXNWYWx1ZSArIFwiLlwiKTtcclxuICAgIH07XHJcbiAgICBDbGllbnRDb25maWd1cmF0aW9uRXJyb3IuY3JlYXRlQ2xpZW50SWRTaW5nbGVTY29wZUVycm9yID0gZnVuY3Rpb24gKHNjb3Blc1ZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBDbGllbnRDb25maWd1cmF0aW9uRXJyb3IoQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yTWVzc2FnZS5jbGllbnRTY29wZS5jb2RlLCBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JNZXNzYWdlLmNsaWVudFNjb3BlLmRlc2MgKyBcIiBHaXZlbiB2YWx1ZTogXCIgKyBzY29wZXNWYWx1ZSArIFwiLlwiKTtcclxuICAgIH07XHJcbiAgICBDbGllbnRDb25maWd1cmF0aW9uRXJyb3IuY3JlYXRlU2NvcGVzUmVxdWlyZWRFcnJvciA9IGZ1bmN0aW9uIChzY29wZXNWYWx1ZSkge1xyXG4gICAgICAgIHJldHVybiBuZXcgQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yKENsaWVudENvbmZpZ3VyYXRpb25FcnJvck1lc3NhZ2Uuc2NvcGVzUmVxdWlyZWQuY29kZSwgQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yTWVzc2FnZS5zY29wZXNSZXF1aXJlZC5kZXNjICsgXCIgR2l2ZW4gdmFsdWU6IFwiICsgc2NvcGVzVmFsdWUpO1xyXG4gICAgfTtcclxuICAgIENsaWVudENvbmZpZ3VyYXRpb25FcnJvci5jcmVhdGVJbnZhbGlkUHJvbXB0RXJyb3IgPSBmdW5jdGlvbiAocHJvbXB0VmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gbmV3IENsaWVudENvbmZpZ3VyYXRpb25FcnJvcihDbGllbnRDb25maWd1cmF0aW9uRXJyb3JNZXNzYWdlLmludmFsaWRQcm9tcHQuY29kZSwgQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yTWVzc2FnZS5pbnZhbGlkUHJvbXB0LmRlc2MgKyBcIiBHaXZlbiB2YWx1ZTogXCIgKyBwcm9tcHRWYWx1ZSk7XHJcbiAgICB9O1xyXG4gICAgQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yLmNyZWF0ZUNsYWltc1JlcXVlc3RQYXJzaW5nRXJyb3IgPSBmdW5jdGlvbiAoY2xhaW1zUmVxdWVzdFBhcnNlRXJyb3IpIHtcclxuICAgICAgICByZXR1cm4gbmV3IENsaWVudENvbmZpZ3VyYXRpb25FcnJvcihDbGllbnRDb25maWd1cmF0aW9uRXJyb3JNZXNzYWdlLmNsYWltc1JlcXVlc3RQYXJzaW5nRXJyb3IuY29kZSwgQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yTWVzc2FnZS5jbGFpbXNSZXF1ZXN0UGFyc2luZ0Vycm9yLmRlc2MgKyBcIiBHaXZlbiB2YWx1ZTogXCIgKyBjbGFpbXNSZXF1ZXN0UGFyc2VFcnJvcik7XHJcbiAgICB9O1xyXG4gICAgQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yLmNyZWF0ZUVtcHR5UmVxdWVzdEVycm9yID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfYSA9IENsaWVudENvbmZpZ3VyYXRpb25FcnJvck1lc3NhZ2UuZW1wdHlSZXF1ZXN0RXJyb3IsIGNvZGUgPSBfYS5jb2RlLCBkZXNjID0gX2EuZGVzYztcclxuICAgICAgICByZXR1cm4gbmV3IENsaWVudENvbmZpZ3VyYXRpb25FcnJvcihjb2RlLCBkZXNjKTtcclxuICAgIH07XHJcbiAgICBDbGllbnRDb25maWd1cmF0aW9uRXJyb3IuY3JlYXRlVGVsZW1ldHJ5Q29uZmlnRXJyb3IgPSBmdW5jdGlvbiAoY29uZmlnKSB7XHJcbiAgICAgICAgdmFyIF9hID0gQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yTWVzc2FnZS50ZWxlbWV0cnlDb25maWdFcnJvciwgY29kZSA9IF9hLmNvZGUsIGRlc2MgPSBfYS5kZXNjO1xyXG4gICAgICAgIHZhciByZXF1aXJlZEtleXMgPSB7XHJcbiAgICAgICAgICAgIGFwcGxpY2F0aW9uTmFtZTogXCJzdHJpbmdcIixcclxuICAgICAgICAgICAgYXBwbGljYXRpb25WZXJzaW9uOiBcInN0cmluZ1wiLFxyXG4gICAgICAgICAgICB0ZWxlbWV0cnlFbWl0dGVyOiBcImZ1bmN0aW9uXCJcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBtaXNzaW5nS2V5cyA9IE9iamVjdC5rZXlzKHJlcXVpcmVkS2V5cylcclxuICAgICAgICAgICAgLnJlZHVjZShmdW5jdGlvbiAoa2V5cywga2V5KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjb25maWdba2V5XSA/IGtleXMgOiBrZXlzLmNvbmNhdChba2V5ICsgXCIgKFwiICsgcmVxdWlyZWRLZXlzW2tleV0gKyBcIilcIl0pO1xyXG4gICAgICAgIH0sIFtdKTtcclxuICAgICAgICByZXR1cm4gbmV3IENsaWVudENvbmZpZ3VyYXRpb25FcnJvcihjb2RlLCBkZXNjICsgXCIgbWlzaW5nIHZhbHVlczogXCIgKyBtaXNzaW5nS2V5cy5qb2luKFwiLFwiKSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIENsaWVudENvbmZpZ3VyYXRpb25FcnJvcjtcclxufShDbGllbnRBdXRoRXJyb3IpKTtcclxuZXhwb3J0IHsgQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yIH07XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNsaWVudENvbmZpZ3VyYXRpb25FcnJvci5qcy5tYXAiLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxyXG5pbXBvcnQgeyBDcnlwdG9VdGlscyB9IGZyb20gXCIuL3V0aWxzL0NyeXB0b1V0aWxzXCI7XHJcbmltcG9ydCB7IHZhbGlkYXRlQ2xhaW1zUmVxdWVzdCB9IGZyb20gXCIuL0F1dGhlbnRpY2F0aW9uUGFyYW1ldGVyc1wiO1xyXG5pbXBvcnQgeyBTU09UeXBlcywgQ29uc3RhbnRzLCBQcm9tcHRTdGF0ZSwgQmxhY2tsaXN0ZWRFUVBhcmFtcywgbGlicmFyeVZlcnNpb24gfSBmcm9tIFwiLi91dGlscy9Db25zdGFudHNcIjtcclxuaW1wb3J0IHsgQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yIH0gZnJvbSBcIi4vZXJyb3IvQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yXCI7XHJcbmltcG9ydCB7IFN0cmluZ1V0aWxzIH0gZnJvbSBcIi4vdXRpbHMvU3RyaW5nVXRpbHNcIjtcclxuLyoqXHJcbiAqIE5vbmNlOiBPSURDIE5vbmNlIGRlZmluaXRpb246IGh0dHBzOi8vb3BlbmlkLm5ldC9zcGVjcy9vcGVuaWQtY29ubmVjdC1jb3JlLTFfMC5odG1sI0lEVG9rZW5cclxuICogU3RhdGU6IE9BdXRoIFNwZWM6IGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmM2NzQ5I3NlY3Rpb24tMTAuMTJcclxuICogQGhpZGRlblxyXG4gKi9cclxudmFyIFNlcnZlclJlcXVlc3RQYXJhbWV0ZXJzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgLyoqXHJcbiAgICAgKiBDb25zdHJ1Y3RvclxyXG4gICAgICogQHBhcmFtIGF1dGhvcml0eVxyXG4gICAgICogQHBhcmFtIGNsaWVudElkXHJcbiAgICAgKiBAcGFyYW0gc2NvcGVcclxuICAgICAqIEBwYXJhbSByZXNwb25zZVR5cGVcclxuICAgICAqIEBwYXJhbSByZWRpcmVjdFVyaVxyXG4gICAgICogQHBhcmFtIHN0YXRlXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIFNlcnZlclJlcXVlc3RQYXJhbWV0ZXJzKGF1dGhvcml0eSwgY2xpZW50SWQsIHNjb3BlLCByZXNwb25zZVR5cGUsIHJlZGlyZWN0VXJpLCBzdGF0ZSkge1xyXG4gICAgICAgIHRoaXMuYXV0aG9yaXR5SW5zdGFuY2UgPSBhdXRob3JpdHk7XHJcbiAgICAgICAgdGhpcy5jbGllbnRJZCA9IGNsaWVudElkO1xyXG4gICAgICAgIGlmICghc2NvcGUpIHtcclxuICAgICAgICAgICAgdGhpcy5zY29wZXMgPSBbY2xpZW50SWRdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5zY29wZXMgPSBzY29wZS5zbGljZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm5vbmNlID0gQ3J5cHRvVXRpbHMuY3JlYXRlTmV3R3VpZCgpO1xyXG4gICAgICAgIHRoaXMuc3RhdGUgPSBzdGF0ZSAmJiAhU3RyaW5nVXRpbHMuaXNFbXB0eShzdGF0ZSkgPyBDcnlwdG9VdGlscy5jcmVhdGVOZXdHdWlkKCkgKyBcInxcIiArIHN0YXRlIDogQ3J5cHRvVXRpbHMuY3JlYXRlTmV3R3VpZCgpO1xyXG4gICAgICAgIC8vIFRPRE86IENoYW5nZSB0aGlzIHRvIHVzZXIgcGFzc2VkIHZzIGdlbmVyYXRlZCB3aXRoIHRoZSBuZXcgUFJcclxuICAgICAgICB0aGlzLmNvcnJlbGF0aW9uSWQgPSBDcnlwdG9VdGlscy5jcmVhdGVOZXdHdWlkKCk7XHJcbiAgICAgICAgLy8gdGVsZW1ldHJ5IGluZm9ybWF0aW9uXHJcbiAgICAgICAgdGhpcy54Q2xpZW50U2t1ID0gXCJNU0FMLkpTXCI7XHJcbiAgICAgICAgdGhpcy54Q2xpZW50VmVyID0gbGlicmFyeVZlcnNpb24oKTtcclxuICAgICAgICB0aGlzLnJlc3BvbnNlVHlwZSA9IHJlc3BvbnNlVHlwZTtcclxuICAgICAgICB0aGlzLnJlZGlyZWN0VXJpID0gcmVkaXJlY3RVcmk7XHJcbiAgICB9XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU2VydmVyUmVxdWVzdFBhcmFtZXRlcnMucHJvdG90eXBlLCBcImF1dGhvcml0eVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmF1dGhvcml0eUluc3RhbmNlID8gdGhpcy5hdXRob3JpdHlJbnN0YW5jZS5DYW5vbmljYWxBdXRob3JpdHkgOiBudWxsO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAaGlkZGVuXHJcbiAgICAgKiBAaWdub3JlXHJcbiAgICAgKlxyXG4gICAgICogVXRpbGl0eSB0byBwb3B1bGF0ZSBRdWVyeVBhcmFtZXRlcnMgYW5kIEV4dHJhUXVlcnlQYXJhbWV0ZXJzIHRvIFNlcnZlclJlcXVlc3RQYXJhbWVyZXJzXHJcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFxyXG4gICAgICogQHBhcmFtIHNlcnZlckF1dGhlbnRpY2F0aW9uUmVxdWVzdFxyXG4gICAgICovXHJcbiAgICBTZXJ2ZXJSZXF1ZXN0UGFyYW1ldGVycy5wcm90b3R5cGUucG9wdWxhdGVRdWVyeVBhcmFtcyA9IGZ1bmN0aW9uIChhY2NvdW50LCByZXF1ZXN0LCBhZGFsSWRUb2tlbk9iamVjdCkge1xyXG4gICAgICAgIHZhciBxdWVyeVBhcmFtZXRlcnMgPSB7fTtcclxuICAgICAgICBpZiAocmVxdWVzdCkge1xyXG4gICAgICAgICAgICAvLyBhZGQgdGhlIHByb21wdCBwYXJhbWV0ZXIgdG8gc2VydmVyUmVxdWVzdFBhcmFtZXRlcnMgaWYgcGFzc2VkXHJcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0LnByb21wdCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy52YWxpZGF0ZVByb21wdFBhcmFtZXRlcihyZXF1ZXN0LnByb21wdCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb21wdFZhbHVlID0gcmVxdWVzdC5wcm9tcHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gQWRkIGNsYWltcyBjaGFsbGVuZ2UgdG8gc2VydmVyUmVxdWVzdFBhcmFtZXRlcnMgaWYgcGFzc2VkXHJcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0LmNsYWltc1JlcXVlc3QpIHtcclxuICAgICAgICAgICAgICAgIHZhbGlkYXRlQ2xhaW1zUmVxdWVzdChyZXF1ZXN0KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xhaW1zVmFsdWUgPSByZXF1ZXN0LmNsYWltc1JlcXVlc3Q7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gaWYgdGhlIGRldmVsb3BlciBwcm92aWRlcyBvbmUgb2YgdGhlc2UsIGdpdmUgcHJlZmVyZW5jZSB0byBkZXZlbG9wZXIgY2hvaWNlXHJcbiAgICAgICAgICAgIGlmIChTZXJ2ZXJSZXF1ZXN0UGFyYW1ldGVycy5pc1NTT1BhcmFtKHJlcXVlc3QpKSB7XHJcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmNvbnN0cnVjdFVuaWZpZWRDYWNoZVF1ZXJ5UGFyYW1ldGVyKHJlcXVlc3QsIG51bGwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChhZGFsSWRUb2tlbk9iamVjdCkge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmNvbnN0cnVjdFVuaWZpZWRDYWNoZVF1ZXJ5UGFyYW1ldGVyKG51bGwsIGFkYWxJZFRva2VuT2JqZWN0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gYWRkcyBzaWQvbG9naW5faGludCBpZiBub3QgcG9wdWxhdGVkOyBwb3B1bGF0ZXMgZG9tYWluX3JlcSwgbG9naW5fcmVxIGFuZCBkb21haW5faGludFxyXG4gICAgICAgIC8vIHRoaXMubG9nZ2VyLnZlcmJvc2UoXCJDYWxsaW5nIGFkZEhpbnQgcGFyYW1ldGVyc1wiKTtcclxuICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZEhpbnRQYXJhbWV0ZXJzKGFjY291bnQsIHF1ZXJ5UGFyYW1ldGVycyk7XHJcbiAgICAgICAgLy8gc2FuaXR5IGNoZWNrIGZvciBkZXZlbG9wZXIgcGFzc2VkIGV4dHJhUXVlcnlQYXJhbWV0ZXJzXHJcbiAgICAgICAgdmFyIGVRUGFyYW1zO1xyXG4gICAgICAgIGlmIChyZXF1ZXN0KSB7XHJcbiAgICAgICAgICAgIGVRUGFyYW1zID0gdGhpcy5zYW5pdGl6ZUVRUGFyYW1zKHJlcXVlc3QpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBQb3B1bGF0ZSB0aGUgZXh0cmFRdWVyeVBhcmFtZXRlcnMgdG8gYmUgc2VudCB0byB0aGUgc2VydmVyXHJcbiAgICAgICAgdGhpcy5xdWVyeVBhcmFtZXRlcnMgPSBTZXJ2ZXJSZXF1ZXN0UGFyYW1ldGVycy5nZW5lcmF0ZVF1ZXJ5UGFyYW1ldGVyc1N0cmluZyhxdWVyeVBhcmFtZXRlcnMpO1xyXG4gICAgICAgIHRoaXMuZXh0cmFRdWVyeVBhcmFtZXRlcnMgPSBTZXJ2ZXJSZXF1ZXN0UGFyYW1ldGVycy5nZW5lcmF0ZVF1ZXJ5UGFyYW1ldGVyc1N0cmluZyhlUVBhcmFtcyk7XHJcbiAgICB9O1xyXG4gICAgLy8jcmVnaW9uIFF1ZXJ5UGFyYW0gaGVscGVyc1xyXG4gICAgLyoqXHJcbiAgICAgKiBAaGlkZGVuXHJcbiAgICAgKiBAaWdub3JlXHJcbiAgICAgKlxyXG4gICAgICogVXRpbGl0eSB0byB0ZXN0IGlmIHZhbGlkIHByb21wdCB2YWx1ZSBpcyBwYXNzZWQgaW4gdGhlIHJlcXVlc3RcclxuICAgICAqIEBwYXJhbSByZXF1ZXN0XHJcbiAgICAgKi9cclxuICAgIFNlcnZlclJlcXVlc3RQYXJhbWV0ZXJzLnByb3RvdHlwZS52YWxpZGF0ZVByb21wdFBhcmFtZXRlciA9IGZ1bmN0aW9uIChwcm9tcHQpIHtcclxuICAgICAgICBpZiAoIShbUHJvbXB0U3RhdGUuTE9HSU4sIFByb21wdFN0YXRlLlNFTEVDVF9BQ0NPVU5ULCBQcm9tcHRTdGF0ZS5DT05TRU5ULCBQcm9tcHRTdGF0ZS5OT05FXS5pbmRleE9mKHByb21wdCkgPj0gMCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yLmNyZWF0ZUludmFsaWRQcm9tcHRFcnJvcihwcm9tcHQpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIENvbnN0cnVjdHMgZXh0cmFRdWVyeVBhcmFtZXRlcnMgdG8gYmUgc2VudCB0byB0aGUgc2VydmVyIGZvciB0aGUgQXV0aGVudGljYXRpb25QYXJhbWV0ZXJzIHNldCBieSB0aGUgZGV2ZWxvcGVyXHJcbiAgICAgKiBpbiBhbnkgbG9naW4oKSBvciBhY3F1aXJlVG9rZW4oKSBjYWxsc1xyXG4gICAgICogQHBhcmFtIGlkVG9rZW5PYmplY3RcclxuICAgICAqIEBwYXJhbSBleHRyYVF1ZXJ5UGFyYW1ldGVyc1xyXG4gICAgICogQHBhcmFtIHNpZFxyXG4gICAgICogQHBhcmFtIGxvZ2luSGludFxyXG4gICAgICovXHJcbiAgICAvL1RPRE86IGNoZWNrIGhvdyB0aGlzIGJlaGF2ZXMgd2hlbiBkb21haW5faGludCBvbmx5IGlzIHNlbnQgaW4gZXh0cmFwYXJhbWV0ZXJzIGFuZCBpZFRva2VuIGhhcyBubyB1cG4uXHJcbiAgICBTZXJ2ZXJSZXF1ZXN0UGFyYW1ldGVycy5wcm90b3R5cGUuY29uc3RydWN0VW5pZmllZENhY2hlUXVlcnlQYXJhbWV0ZXIgPSBmdW5jdGlvbiAocmVxdWVzdCwgaWRUb2tlbk9iamVjdCkge1xyXG4gICAgICAgIC8vIHByZWZlcmVuY2Ugb3JkZXI6IGFjY291bnQgPiBzaWQgPiBsb2dpbl9oaW50XHJcbiAgICAgICAgdmFyIHNzb1R5cGU7XHJcbiAgICAgICAgdmFyIHNzb0RhdGE7XHJcbiAgICAgICAgdmFyIHNlcnZlclJlcVBhcmFtID0ge307XHJcbiAgICAgICAgLy8gaWYgYWNjb3VudCBpbmZvIGlzIHBhc3NlZCwgYWNjb3VudC5zaWQgPiBhY2NvdW50LmxvZ2luX2hpbnRcclxuICAgICAgICBpZiAocmVxdWVzdCkge1xyXG4gICAgICAgICAgICBpZiAocmVxdWVzdC5hY2NvdW50KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYWNjb3VudCA9IHJlcXVlc3QuYWNjb3VudDtcclxuICAgICAgICAgICAgICAgIGlmIChhY2NvdW50LnNpZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNzb1R5cGUgPSBTU09UeXBlcy5TSUQ7XHJcbiAgICAgICAgICAgICAgICAgICAgc3NvRGF0YSA9IGFjY291bnQuc2lkO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoYWNjb3VudC51c2VyTmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNzb1R5cGUgPSBTU09UeXBlcy5MT0dJTl9ISU5UO1xyXG4gICAgICAgICAgICAgICAgICAgIHNzb0RhdGEgPSBhY2NvdW50LnVzZXJOYW1lO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIHNpZCBmcm9tIHJlcXVlc3RcclxuICAgICAgICAgICAgZWxzZSBpZiAocmVxdWVzdC5zaWQpIHtcclxuICAgICAgICAgICAgICAgIHNzb1R5cGUgPSBTU09UeXBlcy5TSUQ7XHJcbiAgICAgICAgICAgICAgICBzc29EYXRhID0gcmVxdWVzdC5zaWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gbG9naW5IaW50IGZyb20gcmVxdWVzdFxyXG4gICAgICAgICAgICBlbHNlIGlmIChyZXF1ZXN0LmxvZ2luSGludCkge1xyXG4gICAgICAgICAgICAgICAgc3NvVHlwZSA9IFNTT1R5cGVzLkxPR0lOX0hJTlQ7XHJcbiAgICAgICAgICAgICAgICBzc29EYXRhID0gcmVxdWVzdC5sb2dpbkhpbnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gYWRhbElkVG9rZW4gcmV0cmlldmVkIGZyb20gY2FjaGVcclxuICAgICAgICBlbHNlIGlmIChpZFRva2VuT2JqZWN0KSB7XHJcbiAgICAgICAgICAgIGlmIChpZFRva2VuT2JqZWN0Lmhhc093blByb3BlcnR5KENvbnN0YW50cy51cG4pKSB7XHJcbiAgICAgICAgICAgICAgICBzc29UeXBlID0gU1NPVHlwZXMuSURfVE9LRU47XHJcbiAgICAgICAgICAgICAgICBzc29EYXRhID0gaWRUb2tlbk9iamVjdC51cG47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBzc29UeXBlID0gU1NPVHlwZXMuT1JHQU5JWkFUSU9OUztcclxuICAgICAgICAgICAgICAgIHNzb0RhdGEgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNlcnZlclJlcVBhcmFtID0gdGhpcy5hZGRTU09QYXJhbWV0ZXIoc3NvVHlwZSwgc3NvRGF0YSk7XHJcbiAgICAgICAgLy8gYWRkIHRoZSBIb21lQWNjb3VudElkZW50aWZpZXIgaW5mby8gZG9tYWluX2hpbnRcclxuICAgICAgICBpZiAocmVxdWVzdCAmJiByZXF1ZXN0LmFjY291bnQgJiYgcmVxdWVzdC5hY2NvdW50LmhvbWVBY2NvdW50SWRlbnRpZmllcikge1xyXG4gICAgICAgICAgICBzZXJ2ZXJSZXFQYXJhbSA9IHRoaXMuYWRkU1NPUGFyYW1ldGVyKFNTT1R5cGVzLkhPTUVBQ0NPVU5UX0lELCByZXF1ZXN0LmFjY291bnQuaG9tZUFjY291bnRJZGVudGlmaWVyLCBzZXJ2ZXJSZXFQYXJhbSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBzZXJ2ZXJSZXFQYXJhbTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEBoaWRkZW5cclxuICAgICAqXHJcbiAgICAgKiBBZGRzIGxvZ2luX2hpbnQgdG8gYXV0aG9yaXphdGlvbiBVUkwgd2hpY2ggaXMgdXNlZCB0byBwcmUtZmlsbCB0aGUgdXNlcm5hbWUgZmllbGQgb2Ygc2lnbiBpbiBwYWdlIGZvciB0aGUgdXNlciBpZiBrbm93biBhaGVhZCBvZiB0aW1lXHJcbiAgICAgKiBkb21haW5faGludCBjYW4gYmUgb25lIG9mIHVzZXJzL29yZ2FuaXphdGlvbnMgd2hpY2ggd2hlbiBhZGRlZCBza2lwcyB0aGUgZW1haWwgYmFzZWQgZGlzY292ZXJ5IHByb2Nlc3Mgb2YgdGhlIHVzZXJcclxuICAgICAqIGRvbWFpbl9yZXEgdXRpZCByZWNlaXZlZCBhcyBwYXJ0IG9mIHRoZSBjbGllbnRJbmZvXHJcbiAgICAgKiBsb2dpbl9yZXEgdWlkIHJlY2VpdmVkIGFzIHBhcnQgb2YgY2xpZW50SW5mb1xyXG4gICAgICogQWxzbyBkb2VzIGEgc2FuaXR5IGNoZWNrIGZvciBleHRyYVF1ZXJ5UGFyYW1ldGVycyBwYXNzZWQgYnkgdGhlIHVzZXIgdG8gZW5zdXJlIG5vIHJlcGVhdCBxdWVyeVBhcmFtZXRlcnNcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge0BsaW5rIEFjY291bnR9IGFjY291bnQgLSBBY2NvdW50IGZvciB3aGljaCB0aGUgdG9rZW4gaXMgcmVxdWVzdGVkXHJcbiAgICAgKiBAcGFyYW0gcXVlcnlwYXJhbXNcclxuICAgICAqIEBwYXJhbSB7QGxpbmsgU2VydmVyUmVxdWVzdFBhcmFtZXRlcnN9XHJcbiAgICAgKiBAaWdub3JlXHJcbiAgICAgKi9cclxuICAgIFNlcnZlclJlcXVlc3RQYXJhbWV0ZXJzLnByb3RvdHlwZS5hZGRIaW50UGFyYW1ldGVycyA9IGZ1bmN0aW9uIChhY2NvdW50LCBxUGFyYW1zKSB7XHJcbiAgICAgICAgLy8gVGhpcyBpcyBhIGZpbmFsIGNoZWNrIGZvciBhbGwgcXVlcnlQYXJhbXMgYWRkZWQgc28gZmFyOyBwcmVmZXJlbmNlIG9yZGVyOiBzaWQgPiBsb2dpbl9oaW50XHJcbiAgICAgICAgLy8gc2lkIGNhbm5vdCBiZSBwYXNzZWQgYWxvbmcgd2l0aCBsb2dpbl9oaW50IG9yIGRvbWFpbl9oaW50LCBoZW5jZSB3ZSBjaGVjayBib3RoIGFyZSBub3QgcG9wdWxhdGVkIHlldCBpbiBxdWVyeVBhcmFtZXRlcnNcclxuICAgICAgICBpZiAoYWNjb3VudCAmJiAhcVBhcmFtc1tTU09UeXBlcy5TSURdKSB7XHJcbiAgICAgICAgICAgIC8vIHNpZCAtIHBvcHVsYXRlIG9ubHkgaWYgbG9naW5faGludCBpcyBub3QgYWxyZWFkeSBwb3B1bGF0ZWQgYW5kIHRoZSBhY2NvdW50IGhhcyBzaWRcclxuICAgICAgICAgICAgdmFyIHBvcHVsYXRlU0lEID0gIXFQYXJhbXNbU1NPVHlwZXMuTE9HSU5fSElOVF0gJiYgYWNjb3VudC5zaWQgJiYgdGhpcy5wcm9tcHRWYWx1ZSA9PT0gUHJvbXB0U3RhdGUuTk9ORTtcclxuICAgICAgICAgICAgaWYgKHBvcHVsYXRlU0lEKSB7XHJcbiAgICAgICAgICAgICAgICBxUGFyYW1zID0gdGhpcy5hZGRTU09QYXJhbWV0ZXIoU1NPVHlwZXMuU0lELCBhY2NvdW50LnNpZCwgcVBhcmFtcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gbG9naW5faGludCAtIGFjY291bnQudXNlck5hbWVcclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcG9wdWxhdGVMb2dpbkhpbnQgPSAhcVBhcmFtc1tTU09UeXBlcy5MT0dJTl9ISU5UXSAmJiBhY2NvdW50LnVzZXJOYW1lICYmICFTdHJpbmdVdGlscy5pc0VtcHR5KGFjY291bnQudXNlck5hbWUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHBvcHVsYXRlTG9naW5IaW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcVBhcmFtcyA9IHRoaXMuYWRkU1NPUGFyYW1ldGVyKFNTT1R5cGVzLkxPR0lOX0hJTlQsIGFjY291bnQudXNlck5hbWUsIHFQYXJhbXMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBwb3B1bGF0ZVJlcVBhcmFtcyA9ICFxUGFyYW1zW1NTT1R5cGVzLkRPTUFJTl9SRVFdICYmICFxUGFyYW1zW1NTT1R5cGVzLkxPR0lOX1JFUV07XHJcbiAgICAgICAgICAgIGlmIChwb3B1bGF0ZVJlcVBhcmFtcykge1xyXG4gICAgICAgICAgICAgICAgcVBhcmFtcyA9IHRoaXMuYWRkU1NPUGFyYW1ldGVyKFNTT1R5cGVzLkhPTUVBQ0NPVU5UX0lELCBhY2NvdW50LmhvbWVBY2NvdW50SWRlbnRpZmllciwgcVBhcmFtcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHFQYXJhbXM7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBBZGQgU0lEIHRvIGV4dHJhUXVlcnlQYXJhbWV0ZXJzXHJcbiAgICAgKiBAcGFyYW0gc2lkXHJcbiAgICAgKi9cclxuICAgIFNlcnZlclJlcXVlc3RQYXJhbWV0ZXJzLnByb3RvdHlwZS5hZGRTU09QYXJhbWV0ZXIgPSBmdW5jdGlvbiAoc3NvVHlwZSwgc3NvRGF0YSwgc3NvUGFyYW0pIHtcclxuICAgICAgICBpZiAoIXNzb1BhcmFtKSB7XHJcbiAgICAgICAgICAgIHNzb1BhcmFtID0ge307XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghc3NvRGF0YSkge1xyXG4gICAgICAgICAgICByZXR1cm4gc3NvUGFyYW07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHN3aXRjaCAoc3NvVHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlIFNTT1R5cGVzLlNJRDoge1xyXG4gICAgICAgICAgICAgICAgc3NvUGFyYW1bU1NPVHlwZXMuU0lEXSA9IHNzb0RhdGE7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIFNTT1R5cGVzLklEX1RPS0VOOiB7XHJcbiAgICAgICAgICAgICAgICBzc29QYXJhbVtTU09UeXBlcy5MT0dJTl9ISU5UXSA9IHNzb0RhdGE7XHJcbiAgICAgICAgICAgICAgICBzc29QYXJhbVtTU09UeXBlcy5ET01BSU5fSElOVF0gPSBTU09UeXBlcy5PUkdBTklaQVRJT05TO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2FzZSBTU09UeXBlcy5MT0dJTl9ISU5UOiB7XHJcbiAgICAgICAgICAgICAgICBzc29QYXJhbVtTU09UeXBlcy5MT0dJTl9ISU5UXSA9IHNzb0RhdGE7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIFNTT1R5cGVzLk9SR0FOSVpBVElPTlM6IHtcclxuICAgICAgICAgICAgICAgIHNzb1BhcmFtW1NTT1R5cGVzLkRPTUFJTl9ISU5UXSA9IFNTT1R5cGVzLk9SR0FOSVpBVElPTlM7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIFNTT1R5cGVzLkNPTlNVTUVSUzoge1xyXG4gICAgICAgICAgICAgICAgc3NvUGFyYW1bU1NPVHlwZXMuRE9NQUlOX0hJTlRdID0gU1NPVHlwZXMuQ09OU1VNRVJTO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2FzZSBTU09UeXBlcy5IT01FQUNDT1VOVF9JRDoge1xyXG4gICAgICAgICAgICAgICAgdmFyIGhvbWVBY2NvdW50SWQgPSBzc29EYXRhLnNwbGl0KFwiLlwiKTtcclxuICAgICAgICAgICAgICAgIHZhciB1aWQgPSBDcnlwdG9VdGlscy5iYXNlNjREZWNvZGUoaG9tZUFjY291bnRJZFswXSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdXRpZCA9IENyeXB0b1V0aWxzLmJhc2U2NERlY29kZShob21lQWNjb3VudElkWzFdKTtcclxuICAgICAgICAgICAgICAgIC8vIFRPRE86IGRvbWFpbl9yZXEgYW5kIGxvZ2luX3JlcSBhcmUgbm90IG5lZWRlZCBhY2NvcmRpbmcgdG8gZVNUUyB0ZWFtXHJcbiAgICAgICAgICAgICAgICBzc29QYXJhbVtTU09UeXBlcy5MT0dJTl9SRVFdID0gdWlkO1xyXG4gICAgICAgICAgICAgICAgc3NvUGFyYW1bU1NPVHlwZXMuRE9NQUlOX1JFUV0gPSB1dGlkO1xyXG4gICAgICAgICAgICAgICAgaWYgKHV0aWQgPT09IENvbnN0YW50cy5jb25zdW1lcnNVdGlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3NvUGFyYW1bU1NPVHlwZXMuRE9NQUlOX0hJTlRdID0gU1NPVHlwZXMuQ09OU1VNRVJTO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3NvUGFyYW1bU1NPVHlwZXMuRE9NQUlOX0hJTlRdID0gU1NPVHlwZXMuT1JHQU5JWkFUSU9OUztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhc2UgU1NPVHlwZXMuTE9HSU5fUkVROiB7XHJcbiAgICAgICAgICAgICAgICBzc29QYXJhbVtTU09UeXBlcy5MT0dJTl9SRVFdID0gc3NvRGF0YTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhc2UgU1NPVHlwZXMuRE9NQUlOX1JFUToge1xyXG4gICAgICAgICAgICAgICAgc3NvUGFyYW1bU1NPVHlwZXMuRE9NQUlOX1JFUV0gPSBzc29EYXRhO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHNzb1BhcmFtO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQGhpZGRlblxyXG4gICAgICogQGlnbm9yZVxyXG4gICAgICogUmVtb3ZlcyB1bm5lY2Vzc2FyeSBvciBkdXBsaWNhdGUgcXVlcnkgcGFyYW1ldGVycyBmcm9tIGV4dHJhUXVlcnlQYXJhbWV0ZXJzXHJcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFxyXG4gICAgICovXHJcbiAgICBTZXJ2ZXJSZXF1ZXN0UGFyYW1ldGVycy5wcm90b3R5cGUuc2FuaXRpemVFUVBhcmFtcyA9IGZ1bmN0aW9uIChyZXF1ZXN0KSB7XHJcbiAgICAgICAgdmFyIGVRUGFyYW1zID0gcmVxdWVzdC5leHRyYVF1ZXJ5UGFyYW1ldGVycztcclxuICAgICAgICBpZiAoIWVRUGFyYW1zKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocmVxdWVzdC5jbGFpbXNSZXF1ZXN0KSB7XHJcbiAgICAgICAgICAgIC8vIHRoaXMubG9nZ2VyLndhcm5pbmcoXCJSZW1vdmVkIGR1cGxpY2F0ZSBjbGFpbXMgZnJvbSBleHRyYVF1ZXJ5UGFyYW1ldGVycy4gUGxlYXNlIHVzZSBlaXRoZXIgdGhlIGNsYWltc1JlcXVlc3QgZmllbGQgT1IgcGFzcyBhcyBleHRyYVF1ZXJ5UGFyYW1ldGVyIC0gbm90IGJvdGguXCIpO1xyXG4gICAgICAgICAgICBkZWxldGUgZVFQYXJhbXNbQ29uc3RhbnRzLmNsYWltc107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIEJsYWNrbGlzdGVkRVFQYXJhbXMuZm9yRWFjaChmdW5jdGlvbiAocGFyYW0pIHtcclxuICAgICAgICAgICAgaWYgKGVRUGFyYW1zW3BhcmFtXSkge1xyXG4gICAgICAgICAgICAgICAgLy8gdGhpcy5sb2dnZXIud2FybmluZyhcIlJlbW92ZWQgZHVwbGljYXRlIFwiICsgcGFyYW0gKyBcIiBmcm9tIGV4dHJhUXVlcnlQYXJhbWV0ZXJzLiBQbGVhc2UgdXNlIHRoZSBcIiArIHBhcmFtICsgXCIgZmllbGQgaW4gcmVxdWVzdCBvYmplY3QuXCIpO1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIGVRUGFyYW1zW3BhcmFtXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBlUVBhcmFtcztcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFV0aWxpdHkgdG8gZ2VuZXJhdGUgYSBRdWVyeVBhcmFtZXRlclN0cmluZyBmcm9tIGEgS2V5LVZhbHVlIG1hcHBpbmcgb2YgZXh0cmFRdWVyeVBhcmFtZXRlcnMgcGFzc2VkXHJcbiAgICAgKiBAcGFyYW0gZXh0cmFRdWVyeVBhcmFtZXRlcnNcclxuICAgICAqL1xyXG4gICAgU2VydmVyUmVxdWVzdFBhcmFtZXRlcnMuZ2VuZXJhdGVRdWVyeVBhcmFtZXRlcnNTdHJpbmcgPSBmdW5jdGlvbiAocXVlcnlQYXJhbWV0ZXJzKSB7XHJcbiAgICAgICAgdmFyIHBhcmFtc1N0cmluZyA9IG51bGw7XHJcbiAgICAgICAgaWYgKHF1ZXJ5UGFyYW1ldGVycykge1xyXG4gICAgICAgICAgICBPYmplY3Qua2V5cyhxdWVyeVBhcmFtZXRlcnMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHBhcmFtc1N0cmluZyA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFyYW1zU3RyaW5nID0ga2V5ICsgXCI9XCIgKyBlbmNvZGVVUklDb21wb25lbnQocXVlcnlQYXJhbWV0ZXJzW2tleV0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFyYW1zU3RyaW5nICs9IFwiJlwiICsga2V5ICsgXCI9XCIgKyBlbmNvZGVVUklDb21wb25lbnQocXVlcnlQYXJhbWV0ZXJzW2tleV0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHBhcmFtc1N0cmluZztcclxuICAgIH07XHJcbiAgICAvLyNlbmRyZWdpb25cclxuICAgIC8qKlxyXG4gICAgICogQ2hlY2sgdG8gc2VlIGlmIHRoZXJlIGFyZSBTU08gcGFyYW1zIHNldCBpbiB0aGUgUmVxdWVzdFxyXG4gICAgICogQHBhcmFtIHJlcXVlc3RcclxuICAgICAqL1xyXG4gICAgU2VydmVyUmVxdWVzdFBhcmFtZXRlcnMuaXNTU09QYXJhbSA9IGZ1bmN0aW9uIChyZXF1ZXN0KSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcXVlc3QgJiYgKHJlcXVlc3QuYWNjb3VudCB8fCByZXF1ZXN0LnNpZCB8fCByZXF1ZXN0LmxvZ2luSGludCk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFNlcnZlclJlcXVlc3RQYXJhbWV0ZXJzO1xyXG59KCkpO1xyXG5leHBvcnQgeyBTZXJ2ZXJSZXF1ZXN0UGFyYW1ldGVycyB9O1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1TZXJ2ZXJSZXF1ZXN0UGFyYW1ldGVycy5qcy5tYXAiLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxyXG5pbXBvcnQgeyBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JNZXNzYWdlIH0gZnJvbSBcIi4vZXJyb3IvQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yXCI7XHJcbmltcG9ydCB7IFhockNsaWVudCB9IGZyb20gXCIuL1hIUkNsaWVudFwiO1xyXG5pbXBvcnQgeyBVcmxVdGlscyB9IGZyb20gXCIuL3V0aWxzL1VybFV0aWxzXCI7XHJcbi8qKlxyXG4gKiBAaGlkZGVuXHJcbiAqL1xyXG5leHBvcnQgdmFyIEF1dGhvcml0eVR5cGU7XHJcbihmdW5jdGlvbiAoQXV0aG9yaXR5VHlwZSkge1xyXG4gICAgQXV0aG9yaXR5VHlwZVtBdXRob3JpdHlUeXBlW1wiQWFkXCJdID0gMF0gPSBcIkFhZFwiO1xyXG4gICAgQXV0aG9yaXR5VHlwZVtBdXRob3JpdHlUeXBlW1wiQWRmc1wiXSA9IDFdID0gXCJBZGZzXCI7XHJcbiAgICBBdXRob3JpdHlUeXBlW0F1dGhvcml0eVR5cGVbXCJCMkNcIl0gPSAyXSA9IFwiQjJDXCI7XHJcbn0pKEF1dGhvcml0eVR5cGUgfHwgKEF1dGhvcml0eVR5cGUgPSB7fSkpO1xyXG4vKipcclxuICogQGhpZGRlblxyXG4gKi9cclxudmFyIEF1dGhvcml0eSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEF1dGhvcml0eShhdXRob3JpdHksIHZhbGlkYXRlQXV0aG9yaXR5KSB7XHJcbiAgICAgICAgdGhpcy5Jc1ZhbGlkYXRpb25FbmFibGVkID0gdmFsaWRhdGVBdXRob3JpdHk7XHJcbiAgICAgICAgdGhpcy5DYW5vbmljYWxBdXRob3JpdHkgPSBhdXRob3JpdHk7XHJcbiAgICAgICAgdGhpcy52YWxpZGF0ZUFzVXJpKCk7XHJcbiAgICB9XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQXV0aG9yaXR5LnByb3RvdHlwZSwgXCJUZW5hbnRcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5DYW5vbmljYWxBdXRob3JpdHlVcmxDb21wb25lbnRzLlBhdGhTZWdtZW50c1swXTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShBdXRob3JpdHkucHJvdG90eXBlLCBcIkF1dGhvcml6YXRpb25FbmRwb2ludFwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHRoaXMudmFsaWRhdGVSZXNvbHZlZCgpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy50ZW5hbnREaXNjb3ZlcnlSZXNwb25zZS5BdXRob3JpemF0aW9uRW5kcG9pbnQucmVwbGFjZShcInt0ZW5hbnR9XCIsIHRoaXMuVGVuYW50KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShBdXRob3JpdHkucHJvdG90eXBlLCBcIkVuZFNlc3Npb25FbmRwb2ludFwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHRoaXMudmFsaWRhdGVSZXNvbHZlZCgpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy50ZW5hbnREaXNjb3ZlcnlSZXNwb25zZS5FbmRTZXNzaW9uRW5kcG9pbnQucmVwbGFjZShcInt0ZW5hbnR9XCIsIHRoaXMuVGVuYW50KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShBdXRob3JpdHkucHJvdG90eXBlLCBcIlNlbGZTaWduZWRKd3RBdWRpZW5jZVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHRoaXMudmFsaWRhdGVSZXNvbHZlZCgpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy50ZW5hbnREaXNjb3ZlcnlSZXNwb25zZS5Jc3N1ZXIucmVwbGFjZShcInt0ZW5hbnR9XCIsIHRoaXMuVGVuYW50KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIEF1dGhvcml0eS5wcm90b3R5cGUudmFsaWRhdGVSZXNvbHZlZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoIXRoaXMudGVuYW50RGlzY292ZXJ5UmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgdGhyb3cgXCJQbGVhc2UgY2FsbCBSZXNvbHZlRW5kcG9pbnRzQXN5bmMgZmlyc3RcIjtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEF1dGhvcml0eS5wcm90b3R5cGUsIFwiQ2Fub25pY2FsQXV0aG9yaXR5XCIsIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBIFVSTCB0aGF0IGlzIHRoZSBhdXRob3JpdHkgc2V0IGJ5IHRoZSBkZXZlbG9wZXJcclxuICAgICAgICAgKi9cclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2Fub25pY2FsQXV0aG9yaXR5O1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodXJsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2Fub25pY2FsQXV0aG9yaXR5ID0gVXJsVXRpbHMuQ2Fub25pY2FsaXplVXJpKHVybCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2Fub25pY2FsQXV0aG9yaXR5VXJsQ29tcG9uZW50cyA9IG51bGw7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQXV0aG9yaXR5LnByb3RvdHlwZSwgXCJDYW5vbmljYWxBdXRob3JpdHlVcmxDb21wb25lbnRzXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmNhbm9uaWNhbEF1dGhvcml0eVVybENvbXBvbmVudHMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2Fub25pY2FsQXV0aG9yaXR5VXJsQ29tcG9uZW50cyA9IFVybFV0aWxzLkdldFVybENvbXBvbmVudHModGhpcy5DYW5vbmljYWxBdXRob3JpdHkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNhbm9uaWNhbEF1dGhvcml0eVVybENvbXBvbmVudHM7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQXV0aG9yaXR5LnByb3RvdHlwZSwgXCJEZWZhdWx0T3BlbklkQ29uZmlndXJhdGlvbkVuZHBvaW50XCIsIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiAvLyBodHRwOi8vb3BlbmlkLm5ldC9zcGVjcy9vcGVuaWQtY29ubmVjdC1kaXNjb3ZlcnktMV8wLmh0bWwjUHJvdmlkZXJNZXRhZGF0YVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5DYW5vbmljYWxBdXRob3JpdHkgKyBcInYyLjAvLndlbGwta25vd24vb3BlbmlkLWNvbmZpZ3VyYXRpb25cIjtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIC8qKlxyXG4gICAgICogR2l2ZW4gYSBzdHJpbmcsIHZhbGlkYXRlIHRoYXQgaXQgaXMgb2YgdGhlIGZvcm0gaHR0cHM6Ly9kb21haW4vcGF0aFxyXG4gICAgICovXHJcbiAgICBBdXRob3JpdHkucHJvdG90eXBlLnZhbGlkYXRlQXNVcmkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGNvbXBvbmVudHM7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29tcG9uZW50cyA9IHRoaXMuQ2Fub25pY2FsQXV0aG9yaXR5VXJsQ29tcG9uZW50cztcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgdGhyb3cgQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yTWVzc2FnZS5pbnZhbGlkQXV0aG9yaXR5VHlwZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFjb21wb25lbnRzLlByb3RvY29sIHx8IGNvbXBvbmVudHMuUHJvdG9jb2wudG9Mb3dlckNhc2UoKSAhPT0gXCJodHRwczpcIikge1xyXG4gICAgICAgICAgICB0aHJvdyBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JNZXNzYWdlLmF1dGhvcml0eVVyaUluc2VjdXJlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIWNvbXBvbmVudHMuUGF0aFNlZ21lbnRzIHx8IGNvbXBvbmVudHMuUGF0aFNlZ21lbnRzLmxlbmd0aCA8IDEpIHtcclxuICAgICAgICAgICAgdGhyb3cgQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yTWVzc2FnZS5hdXRob3JpdHlVcmlJbnZhbGlkUGF0aDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBDYWxscyB0aGUgT0lEQyBlbmRwb2ludCBhbmQgcmV0dXJucyB0aGUgcmVzcG9uc2VcclxuICAgICAqL1xyXG4gICAgQXV0aG9yaXR5LnByb3RvdHlwZS5EaXNjb3ZlckVuZHBvaW50cyA9IGZ1bmN0aW9uIChvcGVuSWRDb25maWd1cmF0aW9uRW5kcG9pbnQpIHtcclxuICAgICAgICB2YXIgY2xpZW50ID0gbmV3IFhockNsaWVudCgpO1xyXG4gICAgICAgIHJldHVybiBjbGllbnQuc2VuZFJlcXVlc3RBc3luYyhvcGVuSWRDb25maWd1cmF0aW9uRW5kcG9pbnQsIFwiR0VUXCIsIC8qZW5hYmxlQ2FjaGluZzogKi8gdHJ1ZSlcclxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uRW5kcG9pbnQ6IHJlc3BvbnNlLmF1dGhvcml6YXRpb25fZW5kcG9pbnQsXHJcbiAgICAgICAgICAgICAgICBFbmRTZXNzaW9uRW5kcG9pbnQ6IHJlc3BvbnNlLmVuZF9zZXNzaW9uX2VuZHBvaW50LFxyXG4gICAgICAgICAgICAgICAgSXNzdWVyOiByZXNwb25zZS5pc3N1ZXJcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSBwcm9taXNlLlxyXG4gICAgICogQ2hlY2tzIHRvIHNlZSBpZiB0aGUgYXV0aG9yaXR5IGlzIGluIHRoZSBjYWNoZVxyXG4gICAgICogRGlzY292ZXIgZW5kcG9pbnRzIHZpYSBvcGVuaWQtY29uZmlndXJhdGlvblxyXG4gICAgICogSWYgc3VjY2Vzc2Z1bCwgY2FjaGVzIHRoZSBlbmRwb2ludCBmb3IgbGF0ZXIgdXNlIGluIE9JRENcclxuICAgICAqL1xyXG4gICAgQXV0aG9yaXR5LnByb3RvdHlwZS5yZXNvbHZlRW5kcG9pbnRzQXN5bmMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgb3BlbklkQ29uZmlndXJhdGlvbkVuZHBvaW50ID0gXCJcIjtcclxuICAgICAgICByZXR1cm4gdGhpcy5HZXRPcGVuSWRDb25maWd1cmF0aW9uRW5kcG9pbnRBc3luYygpLnRoZW4oZnVuY3Rpb24gKG9wZW5JZENvbmZpZ3VyYXRpb25FbmRwb2ludFJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgIG9wZW5JZENvbmZpZ3VyYXRpb25FbmRwb2ludCA9IG9wZW5JZENvbmZpZ3VyYXRpb25FbmRwb2ludFJlc3BvbnNlO1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuRGlzY292ZXJFbmRwb2ludHMob3BlbklkQ29uZmlndXJhdGlvbkVuZHBvaW50KTtcclxuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICh0ZW5hbnREaXNjb3ZlcnlSZXNwb25zZSkge1xyXG4gICAgICAgICAgICBfdGhpcy50ZW5hbnREaXNjb3ZlcnlSZXNwb25zZSA9IHRlbmFudERpc2NvdmVyeVJlc3BvbnNlO1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEF1dGhvcml0eTtcclxufSgpKTtcclxuZXhwb3J0IHsgQXV0aG9yaXR5IH07XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUF1dGhvcml0eS5qcy5tYXAiLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxyXG5pbXBvcnQgeyBDbGllbnRDb25maWd1cmF0aW9uRXJyb3IgfSBmcm9tIFwiLi9lcnJvci9DbGllbnRDb25maWd1cmF0aW9uRXJyb3JcIjtcclxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlQ2xhaW1zUmVxdWVzdChyZXF1ZXN0KSB7XHJcbiAgICBpZiAoIXJlcXVlc3QuY2xhaW1zUmVxdWVzdCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHZhciBjbGFpbXM7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNsYWltcyA9IEpTT04ucGFyc2UocmVxdWVzdC5jbGFpbXNSZXF1ZXN0KTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgdGhyb3cgQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yLmNyZWF0ZUNsYWltc1JlcXVlc3RQYXJzaW5nRXJyb3IoZSk7XHJcbiAgICB9XHJcbiAgICAvLyBUT0RPOiBNb3JlIHZhbGlkYXRpb24gd2lsbCBiZSBhZGRlZCB3aGVuIHRoZSBzZXJ2ZXIgdGVhbSB0ZWxscyB1cyBob3cgdGhleSBoYXZlIGFjdHVhbGx5IGltcGxlbWVudGVkIGNsYWltc1xyXG59XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUF1dGhlbnRpY2F0aW9uUGFyYW1ldGVycy5qcy5tYXAiLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxyXG5pbXBvcnQgeyBDcnlwdG9VdGlscyB9IGZyb20gXCIuL3V0aWxzL0NyeXB0b1V0aWxzXCI7XHJcbmltcG9ydCB7IENsaWVudEF1dGhFcnJvciB9IGZyb20gXCIuL2Vycm9yL0NsaWVudEF1dGhFcnJvclwiO1xyXG5pbXBvcnQgeyBTdHJpbmdVdGlscyB9IGZyb20gXCIuL3V0aWxzL1N0cmluZ1V0aWxzXCI7XHJcbi8qKlxyXG4gKiBAaGlkZGVuXHJcbiAqL1xyXG52YXIgQ2xpZW50SW5mbyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIENsaWVudEluZm8ocmF3Q2xpZW50SW5mbykge1xyXG4gICAgICAgIGlmICghcmF3Q2xpZW50SW5mbyB8fCBTdHJpbmdVdGlscy5pc0VtcHR5KHJhd0NsaWVudEluZm8pKSB7XHJcbiAgICAgICAgICAgIHRoaXMudWlkID0gXCJcIjtcclxuICAgICAgICAgICAgdGhpcy51dGlkID0gXCJcIjtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICB2YXIgZGVjb2RlZENsaWVudEluZm8gPSBDcnlwdG9VdGlscy5iYXNlNjREZWNvZGUocmF3Q2xpZW50SW5mbyk7XHJcbiAgICAgICAgICAgIHZhciBjbGllbnRJbmZvID0gSlNPTi5wYXJzZShkZWNvZGVkQ2xpZW50SW5mbyk7XHJcbiAgICAgICAgICAgIGlmIChjbGllbnRJbmZvKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2xpZW50SW5mby5oYXNPd25Qcm9wZXJ0eShcInVpZFwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudWlkID0gY2xpZW50SW5mby51aWQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoY2xpZW50SW5mby5oYXNPd25Qcm9wZXJ0eShcInV0aWRcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnV0aWQgPSBjbGllbnRJbmZvLnV0aWQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgdGhyb3cgQ2xpZW50QXV0aEVycm9yLmNyZWF0ZUNsaWVudEluZm9EZWNvZGluZ0Vycm9yKGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDbGllbnRJbmZvLnByb3RvdHlwZSwgXCJ1aWRcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdWlkID8gdGhpcy5fdWlkIDogXCJcIjtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHVpZCkge1xyXG4gICAgICAgICAgICB0aGlzLl91aWQgPSB1aWQ7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ2xpZW50SW5mby5wcm90b3R5cGUsIFwidXRpZFwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl91dGlkID8gdGhpcy5fdXRpZCA6IFwiXCI7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh1dGlkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3V0aWQgPSB1dGlkO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIENsaWVudEluZm87XHJcbn0oKSk7XHJcbmV4cG9ydCB7IENsaWVudEluZm8gfTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Q2xpZW50SW5mby5qcy5tYXAiLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxyXG5pbXBvcnQgeyBDcnlwdG9VdGlscyB9IGZyb20gXCIuL0NyeXB0b1V0aWxzXCI7XHJcbmltcG9ydCB7IFN0cmluZ1V0aWxzIH0gZnJvbSAnLi9TdHJpbmdVdGlscyc7XHJcbi8qKlxyXG4gKiBAaGlkZGVuXHJcbiAqL1xyXG52YXIgVG9rZW5VdGlscyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFRva2VuVXRpbHMoKSB7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIGRlY29kZSBhIEpXVFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBqd3RUb2tlblxyXG4gICAgICovXHJcbiAgICBUb2tlblV0aWxzLmRlY29kZUp3dCA9IGZ1bmN0aW9uIChqd3RUb2tlbikge1xyXG4gICAgICAgIGlmIChTdHJpbmdVdGlscy5pc0VtcHR5KGp3dFRva2VuKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGlkVG9rZW5QYXJ0c1JlZ2V4ID0gL14oW15cXC5cXHNdKilcXC4oW15cXC5cXHNdKylcXC4oW15cXC5cXHNdKikkLztcclxuICAgICAgICB2YXIgbWF0Y2hlcyA9IGlkVG9rZW5QYXJ0c1JlZ2V4LmV4ZWMoand0VG9rZW4pO1xyXG4gICAgICAgIGlmICghbWF0Y2hlcyB8fCBtYXRjaGVzLmxlbmd0aCA8IDQpIHtcclxuICAgICAgICAgICAgLy90aGlzLl9yZXF1ZXN0Q29udGV4dC5sb2dnZXIud2FybihcIlRoZSByZXR1cm5lZCBpZF90b2tlbiBpcyBub3QgcGFyc2VhYmxlLlwiKTtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBjcmFja2VkVG9rZW4gPSB7XHJcbiAgICAgICAgICAgIGhlYWRlcjogbWF0Y2hlc1sxXSxcclxuICAgICAgICAgICAgSldTUGF5bG9hZDogbWF0Y2hlc1syXSxcclxuICAgICAgICAgICAgSldTU2lnOiBtYXRjaGVzWzNdXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gY3JhY2tlZFRva2VuO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogRXh0cmFjdCBJZFRva2VuIGJ5IGRlY29kaW5nIHRoZSBSQVdJZFRva2VuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGVuY29kZWRJZFRva2VuXHJcbiAgICAgKi9cclxuICAgIFRva2VuVXRpbHMuZXh0cmFjdElkVG9rZW4gPSBmdW5jdGlvbiAoZW5jb2RlZElkVG9rZW4pIHtcclxuICAgICAgICAvLyBpZCB0b2tlbiB3aWxsIGJlIGRlY29kZWQgdG8gZ2V0IHRoZSB1c2VybmFtZVxyXG4gICAgICAgIHZhciBkZWNvZGVkVG9rZW4gPSB0aGlzLmRlY29kZUp3dChlbmNvZGVkSWRUb2tlbik7XHJcbiAgICAgICAgaWYgKCFkZWNvZGVkVG9rZW4pIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHZhciBiYXNlNjRJZFRva2VuID0gZGVjb2RlZFRva2VuLkpXU1BheWxvYWQ7XHJcbiAgICAgICAgICAgIHZhciBiYXNlNjREZWNvZGVkID0gQ3J5cHRvVXRpbHMuYmFzZTY0RGVjb2RlKGJhc2U2NElkVG9rZW4pO1xyXG4gICAgICAgICAgICBpZiAoIWJhc2U2NERlY29kZWQpIHtcclxuICAgICAgICAgICAgICAgIC8vdGhpcy5fcmVxdWVzdENvbnRleHQubG9nZ2VyLmluZm8oXCJUaGUgcmV0dXJuZWQgaWRfdG9rZW4gY291bGQgbm90IGJlIGJhc2U2NCB1cmwgc2FmZSBkZWNvZGVkLlwiKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIEVDTUEgc2NyaXB0IGhhcyBKU09OIGJ1aWx0LWluIHN1cHBvcnRcclxuICAgICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoYmFzZTY0RGVjb2RlZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgICAgLy90aGlzLl9yZXF1ZXN0Q29udGV4dC5sb2dnZXIuZXJyb3IoXCJUaGUgcmV0dXJuZWQgaWRfdG9rZW4gY291bGQgbm90IGJlIGRlY29kZWRcIiArIGVycik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBUb2tlblV0aWxzO1xyXG59KCkpO1xyXG5leHBvcnQgeyBUb2tlblV0aWxzIH07XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRva2VuVXRpbHMuanMubWFwIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cclxuaW1wb3J0IHsgQ2xpZW50QXV0aEVycm9yIH0gZnJvbSBcIi4vZXJyb3IvQ2xpZW50QXV0aEVycm9yXCI7XHJcbmltcG9ydCB7IFRva2VuVXRpbHMgfSBmcm9tIFwiLi91dGlscy9Ub2tlblV0aWxzXCI7XHJcbmltcG9ydCB7IFN0cmluZ1V0aWxzIH0gZnJvbSBcIi4vdXRpbHMvU3RyaW5nVXRpbHNcIjtcclxuLyoqXHJcbiAqIEBoaWRkZW5cclxuICovXHJcbnZhciBJZFRva2VuID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgLyogdHNsaW50OmRpc2FibGU6bm8tc3RyaW5nLWxpdGVyYWwgKi9cclxuICAgIGZ1bmN0aW9uIElkVG9rZW4ocmF3SWRUb2tlbikge1xyXG4gICAgICAgIGlmIChTdHJpbmdVdGlscy5pc0VtcHR5KHJhd0lkVG9rZW4pKSB7XHJcbiAgICAgICAgICAgIHRocm93IENsaWVudEF1dGhFcnJvci5jcmVhdGVJZFRva2VuTnVsbE9yRW1wdHlFcnJvcihyYXdJZFRva2VuKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgdGhpcy5yYXdJZFRva2VuID0gcmF3SWRUb2tlbjtcclxuICAgICAgICAgICAgdGhpcy5jbGFpbXMgPSBUb2tlblV0aWxzLmV4dHJhY3RJZFRva2VuKHJhd0lkVG9rZW4pO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jbGFpbXMpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNsYWltcy5oYXNPd25Qcm9wZXJ0eShcImlzc1wiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNzdWVyID0gdGhpcy5jbGFpbXNbXCJpc3NcIl07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jbGFpbXMuaGFzT3duUHJvcGVydHkoXCJvaWRcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9iamVjdElkID0gdGhpcy5jbGFpbXNbXCJvaWRcIl07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jbGFpbXMuaGFzT3duUHJvcGVydHkoXCJzdWJcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN1YmplY3QgPSB0aGlzLmNsYWltc1tcInN1YlwiXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNsYWltcy5oYXNPd25Qcm9wZXJ0eShcInRpZFwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGVuYW50SWQgPSB0aGlzLmNsYWltc1tcInRpZFwiXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNsYWltcy5oYXNPd25Qcm9wZXJ0eShcInZlclwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmVyc2lvbiA9IHRoaXMuY2xhaW1zW1widmVyXCJdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY2xhaW1zLmhhc093blByb3BlcnR5KFwicHJlZmVycmVkX3VzZXJuYW1lXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmVmZXJyZWROYW1lID0gdGhpcy5jbGFpbXNbXCJwcmVmZXJyZWRfdXNlcm5hbWVcIl07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jbGFpbXMuaGFzT3duUHJvcGVydHkoXCJuYW1lXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5uYW1lID0gdGhpcy5jbGFpbXNbXCJuYW1lXCJdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY2xhaW1zLmhhc093blByb3BlcnR5KFwibm9uY2VcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vbmNlID0gdGhpcy5jbGFpbXNbXCJub25jZVwiXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNsYWltcy5oYXNPd25Qcm9wZXJ0eShcImV4cFwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXhwaXJhdGlvbiA9IHRoaXMuY2xhaW1zW1wiZXhwXCJdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY2xhaW1zLmhhc093blByb3BlcnR5KFwiaG9tZV9vaWRcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmhvbWVPYmplY3RJZCA9IHRoaXMuY2xhaW1zW1wiaG9tZV9vaWRcIl07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jbGFpbXMuaGFzT3duUHJvcGVydHkoXCJzaWRcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNpZCA9IHRoaXMuY2xhaW1zW1wic2lkXCJdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLyogdHNsaW50OmVuYWJsZTpuby1zdHJpbmctbGl0ZXJhbCAqL1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIC8vIFRPRE86IFRoaXMgZXJyb3IgaGVyZSB3b24ndCByZWFsbHkgZXZlcnkgYmUgdGhyb3duLCBzaW5jZSBleHRyYWN0SWRUb2tlbigpIHJldHVybnMgbnVsbCBpZiB0aGUgZGVjb2RlSnd0KCkgZmFpbHMuXHJcbiAgICAgICAgICAgIC8vIE5lZWQgdG8gYWRkIGJldHRlciBlcnJvciBoYW5kbGluZyBoZXJlIHRvIGFjY291bnQgZm9yIGJlaW5nIHVuYWJsZSB0byBkZWNvZGUgand0cy5cclxuICAgICAgICAgICAgdGhyb3cgQ2xpZW50QXV0aEVycm9yLmNyZWF0ZUlkVG9rZW5QYXJzaW5nRXJyb3IoZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIElkVG9rZW47XHJcbn0oKSk7XHJcbmV4cG9ydCB7IElkVG9rZW4gfTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SWRUb2tlbi5qcy5tYXAiLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxyXG4vKipcclxuICogQGhpZGRlblxyXG4gKi9cclxudmFyIEFjY2Vzc1Rva2VuQ2FjaGVJdGVtID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gQWNjZXNzVG9rZW5DYWNoZUl0ZW0oa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMua2V5ID0ga2V5O1xyXG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcclxuICAgIH1cclxuICAgIHJldHVybiBBY2Nlc3NUb2tlbkNhY2hlSXRlbTtcclxufSgpKTtcclxuZXhwb3J0IHsgQWNjZXNzVG9rZW5DYWNoZUl0ZW0gfTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9QWNjZXNzVG9rZW5DYWNoZUl0ZW0uanMubWFwIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cclxuaW1wb3J0IHsgQ29uc3RhbnRzLCBDYWNoZUtleXMgfSBmcm9tIFwiLi91dGlscy9Db25zdGFudHNcIjtcclxuaW1wb3J0IHsgQWNjZXNzVG9rZW5DYWNoZUl0ZW0gfSBmcm9tIFwiLi9BY2Nlc3NUb2tlbkNhY2hlSXRlbVwiO1xyXG5pbXBvcnQgeyBDbGllbnRDb25maWd1cmF0aW9uRXJyb3IgfSBmcm9tIFwiLi9lcnJvci9DbGllbnRDb25maWd1cmF0aW9uRXJyb3JcIjtcclxuLyoqXHJcbiAqIEBoaWRkZW5cclxuICovXHJcbnZhciBTdG9yYWdlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gU3RvcmFnZShjYWNoZUxvY2F0aW9uKSB7XHJcbiAgICAgICAgaWYgKFN0b3JhZ2UuaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFN0b3JhZ2UuaW5zdGFuY2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY2FjaGVMb2NhdGlvbiA9IGNhY2hlTG9jYXRpb247XHJcbiAgICAgICAgdGhpcy5sb2NhbFN0b3JhZ2VTdXBwb3J0ZWQgPSB0eXBlb2Ygd2luZG93W3RoaXMuY2FjaGVMb2NhdGlvbl0gIT09IFwidW5kZWZpbmVkXCIgJiYgd2luZG93W3RoaXMuY2FjaGVMb2NhdGlvbl0gIT0gbnVsbDtcclxuICAgICAgICB0aGlzLnNlc3Npb25TdG9yYWdlU3VwcG9ydGVkID0gdHlwZW9mIHdpbmRvd1tjYWNoZUxvY2F0aW9uXSAhPT0gXCJ1bmRlZmluZWRcIiAmJiB3aW5kb3dbY2FjaGVMb2NhdGlvbl0gIT0gbnVsbDtcclxuICAgICAgICBTdG9yYWdlLmluc3RhbmNlID0gdGhpcztcclxuICAgICAgICBpZiAoIXRoaXMubG9jYWxTdG9yYWdlU3VwcG9ydGVkICYmICF0aGlzLnNlc3Npb25TdG9yYWdlU3VwcG9ydGVkKSB7XHJcbiAgICAgICAgICAgIHRocm93IENsaWVudENvbmZpZ3VyYXRpb25FcnJvci5jcmVhdGVOb1N0b3JhZ2VTdXBwb3J0ZWRFcnJvcigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gU3RvcmFnZS5pbnN0YW5jZTtcclxuICAgIH1cclxuICAgIC8vIGFkZCB2YWx1ZSB0byBzdG9yYWdlXHJcbiAgICBTdG9yYWdlLnByb3RvdHlwZS5zZXRJdGVtID0gZnVuY3Rpb24gKGtleSwgdmFsdWUsIGVuYWJsZUNvb2tpZVN0b3JhZ2UpIHtcclxuICAgICAgICBpZiAod2luZG93W3RoaXMuY2FjaGVMb2NhdGlvbl0pIHtcclxuICAgICAgICAgICAgd2luZG93W3RoaXMuY2FjaGVMb2NhdGlvbl0uc2V0SXRlbShrZXksIHZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGVuYWJsZUNvb2tpZVN0b3JhZ2UpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRJdGVtQ29va2llKGtleSwgdmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvLyBnZXQgb25lIGl0ZW0gYnkga2V5IGZyb20gc3RvcmFnZVxyXG4gICAgU3RvcmFnZS5wcm90b3R5cGUuZ2V0SXRlbSA9IGZ1bmN0aW9uIChrZXksIGVuYWJsZUNvb2tpZVN0b3JhZ2UpIHtcclxuICAgICAgICBpZiAoZW5hYmxlQ29va2llU3RvcmFnZSAmJiB0aGlzLmdldEl0ZW1Db29raWUoa2V5KSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRJdGVtQ29va2llKGtleSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh3aW5kb3dbdGhpcy5jYWNoZUxvY2F0aW9uXSkge1xyXG4gICAgICAgICAgICByZXR1cm4gd2luZG93W3RoaXMuY2FjaGVMb2NhdGlvbl0uZ2V0SXRlbShrZXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH07XHJcbiAgICAvLyByZW1vdmUgdmFsdWUgZnJvbSBzdG9yYWdlXHJcbiAgICBTdG9yYWdlLnByb3RvdHlwZS5yZW1vdmVJdGVtID0gZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgIGlmICh3aW5kb3dbdGhpcy5jYWNoZUxvY2F0aW9uXSkge1xyXG4gICAgICAgICAgICByZXR1cm4gd2luZG93W3RoaXMuY2FjaGVMb2NhdGlvbl0ucmVtb3ZlSXRlbShrZXkpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvLyBjbGVhciBzdG9yYWdlIChyZW1vdmUgYWxsIGl0ZW1zIGZyb20gaXQpXHJcbiAgICBTdG9yYWdlLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAod2luZG93W3RoaXMuY2FjaGVMb2NhdGlvbl0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHdpbmRvd1t0aGlzLmNhY2hlTG9jYXRpb25dLmNsZWFyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFN0b3JhZ2UucHJvdG90eXBlLmdldEFsbEFjY2Vzc1Rva2VucyA9IGZ1bmN0aW9uIChjbGllbnRJZCwgaG9tZUFjY291bnRJZGVudGlmaWVyKSB7XHJcbiAgICAgICAgdmFyIHJlc3VsdHMgPSBbXTtcclxuICAgICAgICB2YXIgYWNjZXNzVG9rZW5DYWNoZUl0ZW07XHJcbiAgICAgICAgdmFyIHN0b3JhZ2UgPSB3aW5kb3dbdGhpcy5jYWNoZUxvY2F0aW9uXTtcclxuICAgICAgICBpZiAoc3RvcmFnZSkge1xyXG4gICAgICAgICAgICB2YXIga2V5ID0gdm9pZCAwO1xyXG4gICAgICAgICAgICBmb3IgKGtleSBpbiBzdG9yYWdlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc3RvcmFnZS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGtleS5tYXRjaChjbGllbnRJZCkgJiYga2V5Lm1hdGNoKGhvbWVBY2NvdW50SWRlbnRpZmllcikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gdGhpcy5nZXRJdGVtKGtleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjZXNzVG9rZW5DYWNoZUl0ZW0gPSBuZXcgQWNjZXNzVG9rZW5DYWNoZUl0ZW0oSlNPTi5wYXJzZShrZXkpLCBKU09OLnBhcnNlKHZhbHVlKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2goYWNjZXNzVG9rZW5DYWNoZUl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHRzO1xyXG4gICAgfTtcclxuICAgIFN0b3JhZ2UucHJvdG90eXBlLnJlbW92ZUFjcXVpcmVUb2tlbkVudHJpZXMgPSBmdW5jdGlvbiAoc3RhdGUpIHtcclxuICAgICAgICB2YXIgc3RvcmFnZSA9IHdpbmRvd1t0aGlzLmNhY2hlTG9jYXRpb25dO1xyXG4gICAgICAgIGlmIChzdG9yYWdlKSB7XHJcbiAgICAgICAgICAgIHZhciBrZXkgPSB2b2lkIDA7XHJcbiAgICAgICAgICAgIGZvciAoa2V5IGluIHN0b3JhZ2UpIHtcclxuICAgICAgICAgICAgICAgIGlmIChzdG9yYWdlLmhhc093blByb3BlcnR5KGtleSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoKGtleS5pbmRleE9mKENhY2hlS2V5cy5BVVRIT1JJVFkpICE9PSAtMSB8fCBrZXkuaW5kZXhPZihDYWNoZUtleXMuQUNRVUlSRV9UT0tFTl9BQ0NPVU5UKSAhPT0gMSkgJiYgKCFzdGF0ZSB8fCBrZXkuaW5kZXhPZihzdGF0ZSkgIT09IC0xKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3BsaXRLZXkgPSBrZXkuc3BsaXQoQ29uc3RhbnRzLnJlc291cmNlRGVsaW1pdGVyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0YXRlXzEgPSB2b2lkIDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzcGxpdEtleS5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZV8xID0gc3BsaXRLZXlbMV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlXzEgJiYgIXRoaXMudG9rZW5SZW5ld2FsSW5Qcm9ncmVzcyhzdGF0ZV8xKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVJdGVtKGtleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUl0ZW0oQ29uc3RhbnRzLnJlbmV3U3RhdHVzICsgc3RhdGVfMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUl0ZW0oQ29uc3RhbnRzLnN0YXRlTG9naW4pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVJdGVtKENvbnN0YW50cy5zdGF0ZUFjcXVpcmVUb2tlbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEl0ZW1Db29raWUoa2V5LCBcIlwiLCAtMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jbGVhckNvb2tpZSgpO1xyXG4gICAgfTtcclxuICAgIFN0b3JhZ2UucHJvdG90eXBlLnRva2VuUmVuZXdhbEluUHJvZ3Jlc3MgPSBmdW5jdGlvbiAoc3RhdGVWYWx1ZSkge1xyXG4gICAgICAgIHZhciBzdG9yYWdlID0gd2luZG93W3RoaXMuY2FjaGVMb2NhdGlvbl07XHJcbiAgICAgICAgdmFyIHJlbmV3U3RhdHVzID0gc3RvcmFnZVtDb25zdGFudHMucmVuZXdTdGF0dXMgKyBzdGF0ZVZhbHVlXTtcclxuICAgICAgICByZXR1cm4gISghcmVuZXdTdGF0dXMgfHwgcmVuZXdTdGF0dXMgIT09IENvbnN0YW50cy50b2tlblJlbmV3U3RhdHVzSW5Qcm9ncmVzcyk7XHJcbiAgICB9O1xyXG4gICAgU3RvcmFnZS5wcm90b3R5cGUucmVzZXRDYWNoZUl0ZW1zID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBzdG9yYWdlID0gd2luZG93W3RoaXMuY2FjaGVMb2NhdGlvbl07XHJcbiAgICAgICAgaWYgKHN0b3JhZ2UpIHtcclxuICAgICAgICAgICAgdmFyIGtleSA9IHZvaWQgMDtcclxuICAgICAgICAgICAgZm9yIChrZXkgaW4gc3RvcmFnZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHN0b3JhZ2UuaGFzT3duUHJvcGVydHkoa2V5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXkuaW5kZXhPZihDb25zdGFudHMubXNhbCkgIT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlSXRlbShrZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnJlbW92ZUFjcXVpcmVUb2tlbkVudHJpZXMoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgU3RvcmFnZS5wcm90b3R5cGUuc2V0SXRlbUNvb2tpZSA9IGZ1bmN0aW9uIChjTmFtZSwgY1ZhbHVlLCBleHBpcmVzKSB7XHJcbiAgICAgICAgdmFyIGNvb2tpZVN0ciA9IGNOYW1lICsgXCI9XCIgKyBjVmFsdWUgKyBcIjtcIjtcclxuICAgICAgICBpZiAoZXhwaXJlcykge1xyXG4gICAgICAgICAgICB2YXIgZXhwaXJlVGltZSA9IHRoaXMuZ2V0Q29va2llRXhwaXJhdGlvblRpbWUoZXhwaXJlcyk7XHJcbiAgICAgICAgICAgIGNvb2tpZVN0ciArPSBcImV4cGlyZXM9XCIgKyBleHBpcmVUaW1lICsgXCI7XCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRvY3VtZW50LmNvb2tpZSA9IGNvb2tpZVN0cjtcclxuICAgIH07XHJcbiAgICBTdG9yYWdlLnByb3RvdHlwZS5nZXRJdGVtQ29va2llID0gZnVuY3Rpb24gKGNOYW1lKSB7XHJcbiAgICAgICAgdmFyIG5hbWUgPSBjTmFtZSArIFwiPVwiO1xyXG4gICAgICAgIHZhciBjYSA9IGRvY3VtZW50LmNvb2tpZS5zcGxpdChcIjtcIik7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjYS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgYyA9IGNhW2ldO1xyXG4gICAgICAgICAgICB3aGlsZSAoYy5jaGFyQXQoMCkgPT09IFwiIFwiKSB7XHJcbiAgICAgICAgICAgICAgICBjID0gYy5zdWJzdHJpbmcoMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGMuaW5kZXhPZihuYW1lKSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGMuc3Vic3RyaW5nKG5hbWUubGVuZ3RoLCBjLmxlbmd0aCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFwiXCI7XHJcbiAgICB9O1xyXG4gICAgU3RvcmFnZS5wcm90b3R5cGUuZ2V0Q29va2llRXhwaXJhdGlvblRpbWUgPSBmdW5jdGlvbiAoY29va2llTGlmZURheXMpIHtcclxuICAgICAgICB2YXIgdG9kYXkgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgIHZhciBleHByID0gbmV3IERhdGUodG9kYXkuZ2V0VGltZSgpICsgY29va2llTGlmZURheXMgKiAyNCAqIDYwICogNjAgKiAxMDAwKTtcclxuICAgICAgICByZXR1cm4gZXhwci50b1VUQ1N0cmluZygpO1xyXG4gICAgfTtcclxuICAgIFN0b3JhZ2UucHJvdG90eXBlLmNsZWFyQ29va2llID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuc2V0SXRlbUNvb2tpZShDb25zdGFudHMubm9uY2VJZFRva2VuLCBcIlwiLCAtMSk7XHJcbiAgICAgICAgdGhpcy5zZXRJdGVtQ29va2llKENvbnN0YW50cy5zdGF0ZUxvZ2luLCBcIlwiLCAtMSk7XHJcbiAgICAgICAgdGhpcy5zZXRJdGVtQ29va2llKENvbnN0YW50cy5sb2dpblJlcXVlc3QsIFwiXCIsIC0xKTtcclxuICAgICAgICB0aGlzLnNldEl0ZW1Db29raWUoQ29uc3RhbnRzLnN0YXRlQWNxdWlyZVRva2VuLCBcIlwiLCAtMSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGUgYWNxdWlyZVRva2VuQWNjb3VudEtleSB0byBjYWNoZSBhY2NvdW50IG9iamVjdFxyXG4gICAgICogQHBhcmFtIGFjY291bnRJZFxyXG4gICAgICogQHBhcmFtIHN0YXRlXHJcbiAgICAgKi9cclxuICAgIFN0b3JhZ2UuZ2VuZXJhdGVBY3F1aXJlVG9rZW5BY2NvdW50S2V5ID0gZnVuY3Rpb24gKGFjY291bnRJZCwgc3RhdGUpIHtcclxuICAgICAgICByZXR1cm4gQ2FjaGVLZXlzLkFDUVVJUkVfVE9LRU5fQUNDT1VOVCArIENvbnN0YW50cy5yZXNvdXJjZURlbGltaXRlciArXHJcbiAgICAgICAgICAgIChcIlwiICsgYWNjb3VudElkKSArIENvbnN0YW50cy5yZXNvdXJjZURlbGltaXRlciArIChcIlwiICsgc3RhdGUpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlIGF1dGhvcml0eUtleSB0byBjYWNoZSBhdXRob3JpdHlcclxuICAgICAqIEBwYXJhbSBzdGF0ZVxyXG4gICAgICovXHJcbiAgICBTdG9yYWdlLmdlbmVyYXRlQXV0aG9yaXR5S2V5ID0gZnVuY3Rpb24gKHN0YXRlKSB7XHJcbiAgICAgICAgcmV0dXJuIENhY2hlS2V5cy5BVVRIT1JJVFkgKyBDb25zdGFudHMucmVzb3VyY2VEZWxpbWl0ZXIgKyAoXCJcIiArIHN0YXRlKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gU3RvcmFnZTtcclxufSgpKTtcclxuZXhwb3J0IHsgU3RvcmFnZSB9O1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1TdG9yYWdlLmpzLm1hcCIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXHJcbmltcG9ydCB7IENyeXB0b1V0aWxzIH0gZnJvbSBcIi4vdXRpbHMvQ3J5cHRvVXRpbHNcIjtcclxuaW1wb3J0IHsgU3RyaW5nVXRpbHMgfSBmcm9tIFwiLi91dGlscy9TdHJpbmdVdGlsc1wiO1xyXG4vKipcclxuICogYWNjb3VudElkZW50aWZpZXIgICAgICAgY29tYmluYXRpb24gb2YgaWRUb2tlbi51aWQgYW5kIGlkVG9rZW4udXRpZFxyXG4gKiBob21lQWNjb3VudElkZW50aWZpZXIgICBjb21iaW5hdGlvbiBvZiBjbGllbnRJbmZvLnVpZCBhbmQgY2xpZW50SW5mby51dGlkXHJcbiAqIHVzZXJOYW1lICAgICAgICAgICAgICAgIGlkVG9rZW4ucHJlZmVycmVkX3VzZXJuYW1lXHJcbiAqIG5hbWUgICAgICAgICAgICAgICAgICAgIGlkVG9rZW4ubmFtZVxyXG4gKiBpZFRva2VuICAgICAgICAgICAgICAgICBpZFRva2VuXHJcbiAqIHNpZCAgICAgICAgICAgICAgICAgICAgIGlkVG9rZW4uc2lkIC0gc2Vzc2lvbiBpZGVudGlmaWVyXHJcbiAqIGVudmlyb25tZW50ICAgICAgICAgICAgIGlkdG9rZW4uaXNzdWVyICh0aGUgYXV0aG9yaXR5IHRoYXQgaXNzdWVzIHRoZSB0b2tlbilcclxuICovXHJcbnZhciBBY2NvdW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGFuIEFjY291bnQgT2JqZWN0XHJcbiAgICAgKiBAcHJhcmFtIGFjY291bnRJZGVudGlmaWVyXHJcbiAgICAgKiBAcGFyYW0gaG9tZUFjY291bnRJZGVudGlmaWVyXHJcbiAgICAgKiBAcGFyYW0gdXNlck5hbWVcclxuICAgICAqIEBwYXJhbSBuYW1lXHJcbiAgICAgKiBAcGFyYW0gaWRUb2tlblxyXG4gICAgICogQHBhcmFtIHNpZFxyXG4gICAgICogQHBhcmFtIGVudmlyb25tZW50XHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIEFjY291bnQoYWNjb3VudElkZW50aWZpZXIsIGhvbWVBY2NvdW50SWRlbnRpZmllciwgdXNlck5hbWUsIG5hbWUsIGlkVG9rZW5DbGFpbXMsIHNpZCwgZW52aXJvbm1lbnQpIHtcclxuICAgICAgICB0aGlzLmFjY291bnRJZGVudGlmaWVyID0gYWNjb3VudElkZW50aWZpZXI7XHJcbiAgICAgICAgdGhpcy5ob21lQWNjb3VudElkZW50aWZpZXIgPSBob21lQWNjb3VudElkZW50aWZpZXI7XHJcbiAgICAgICAgdGhpcy51c2VyTmFtZSA9IHVzZXJOYW1lO1xyXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICAgICAgLy8gd2lsbCBiZSBkZXByZWNhdGVkIHNvb25cclxuICAgICAgICB0aGlzLmlkVG9rZW4gPSBpZFRva2VuQ2xhaW1zO1xyXG4gICAgICAgIHRoaXMuaWRUb2tlbkNsYWltcyA9IGlkVG9rZW5DbGFpbXM7XHJcbiAgICAgICAgdGhpcy5zaWQgPSBzaWQ7XHJcbiAgICAgICAgdGhpcy5lbnZpcm9ubWVudCA9IGVudmlyb25tZW50O1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBAaGlkZGVuXHJcbiAgICAgKiBAcGFyYW0gaWRUb2tlblxyXG4gICAgICogQHBhcmFtIGNsaWVudEluZm9cclxuICAgICAqL1xyXG4gICAgQWNjb3VudC5jcmVhdGVBY2NvdW50ID0gZnVuY3Rpb24gKGlkVG9rZW4sIGNsaWVudEluZm8pIHtcclxuICAgICAgICAvLyBjcmVhdGUgYWNjb3VudElkZW50aWZpZXJcclxuICAgICAgICB2YXIgYWNjb3VudElkZW50aWZpZXIgPSBpZFRva2VuLm9iamVjdElkIHx8IGlkVG9rZW4uc3ViamVjdDtcclxuICAgICAgICAvLyBjcmVhdGUgaG9tZUFjY291bnRJZGVudGlmaWVyXHJcbiAgICAgICAgdmFyIHVpZCA9IGNsaWVudEluZm8gPyBjbGllbnRJbmZvLnVpZCA6IFwiXCI7XHJcbiAgICAgICAgdmFyIHV0aWQgPSBjbGllbnRJbmZvID8gY2xpZW50SW5mby51dGlkIDogXCJcIjtcclxuICAgICAgICB2YXIgaG9tZUFjY291bnRJZGVudGlmaWVyO1xyXG4gICAgICAgIGlmICghU3RyaW5nVXRpbHMuaXNFbXB0eSh1aWQpICYmICFTdHJpbmdVdGlscy5pc0VtcHR5KHV0aWQpKSB7XHJcbiAgICAgICAgICAgIGhvbWVBY2NvdW50SWRlbnRpZmllciA9IENyeXB0b1V0aWxzLmJhc2U2NEVuY29kZSh1aWQpICsgXCIuXCIgKyBDcnlwdG9VdGlscy5iYXNlNjRFbmNvZGUodXRpZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXcgQWNjb3VudChhY2NvdW50SWRlbnRpZmllciwgaG9tZUFjY291bnRJZGVudGlmaWVyLCBpZFRva2VuLnByZWZlcnJlZE5hbWUsIGlkVG9rZW4ubmFtZSwgaWRUb2tlbi5jbGFpbXMsIGlkVG9rZW4uc2lkLCBpZFRva2VuLmlzc3Vlcik7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBVdGlscyBmdW5jdGlvbiB0byBjb21wYXJlIHR3byBBY2NvdW50IG9iamVjdHMgLSB1c2VkIHRvIGNoZWNrIGlmIHRoZSBzYW1lIHVzZXIgYWNjb3VudCBpcyBsb2dnZWQgaW5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gYTE6IEFjY291bnQgb2JqZWN0XHJcbiAgICAgKiBAcGFyYW0gYTI6IEFjY291bnQgb2JqZWN0XHJcbiAgICAgKi9cclxuICAgIEFjY291bnQuY29tcGFyZUFjY291bnRzID0gZnVuY3Rpb24gKGExLCBhMikge1xyXG4gICAgICAgIGlmICghYTEgfHwgIWEyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGExLmhvbWVBY2NvdW50SWRlbnRpZmllciAmJiBhMi5ob21lQWNjb3VudElkZW50aWZpZXIpIHtcclxuICAgICAgICAgICAgaWYgKGExLmhvbWVBY2NvdW50SWRlbnRpZmllciA9PT0gYTIuaG9tZUFjY291bnRJZGVudGlmaWVyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEFjY291bnQ7XHJcbn0oKSk7XHJcbmV4cG9ydCB7IEFjY291bnQgfTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9QWNjb3VudC5qcy5tYXAiLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxyXG4vKipcclxuICogQGhpZGRlblxyXG4gKi9cclxudmFyIFRpbWVVdGlscyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFRpbWVVdGlscygpIHtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aW1lIGluIHNlY29uZHMgZm9yIGV4cGlyYXRpb24gYmFzZWQgb24gc3RyaW5nIHZhbHVlIHBhc3NlZCBpbi5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZXhwaXJlc0luXHJcbiAgICAgKi9cclxuICAgIFRpbWVVdGlscy5wYXJzZUV4cGlyZXNJbiA9IGZ1bmN0aW9uIChleHBpcmVzSW4pIHtcclxuICAgICAgICAvLyBpZiBBQUQgZGlkIG5vdCBzZW5kIFwiZXhwaXJlc19pblwiIHByb3BlcnR5LCB1c2UgZGVmYXVsdCBleHBpcmF0aW9uIG9mIDM1OTkgc2Vjb25kcywgZm9yIHNvbWUgcmVhc29uIEFBRCBzZW5kcyAzNTk5IGFzIFwiZXhwaXJlc19pblwiIHZhbHVlIGluc3RlYWQgb2YgMzYwMFxyXG4gICAgICAgIGlmICghZXhwaXJlc0luKSB7XHJcbiAgICAgICAgICAgIGV4cGlyZXNJbiA9IFwiMzU5OVwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcGFyc2VJbnQoZXhwaXJlc0luLCAxMCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiByZXR1cm4gdGhlIGN1cnJlbnQgdGltZSBpbiBVbml4IHRpbWUuIERhdGUuZ2V0VGltZSgpIHJldHVybnMgaW4gbWlsbGlzZWNvbmRzLlxyXG4gICAgICovXHJcbiAgICBUaW1lVXRpbHMubm93ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBNYXRoLnJvdW5kKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC8gMTAwMC4wKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gVGltZVV0aWxzO1xyXG59KCkpO1xyXG5leHBvcnQgeyBUaW1lVXRpbHMgfTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VGltZVV0aWxzLmpzLm1hcCIsImltcG9ydCAqIGFzIHRzbGliXzEgZnJvbSBcInRzbGliXCI7XHJcbi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXHJcbi8qKlxyXG4gKiBAaGlkZGVuXHJcbiAqL1xyXG52YXIgUmVzcG9uc2VVdGlscyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFJlc3BvbnNlVXRpbHMoKSB7XHJcbiAgICB9XHJcbiAgICBSZXNwb25zZVV0aWxzLnNldFJlc3BvbnNlSWRUb2tlbiA9IGZ1bmN0aW9uIChvcmlnaW5hbFJlc3BvbnNlLCBpZFRva2VuT2JqKSB7XHJcbiAgICAgICAgaWYgKCFvcmlnaW5hbFJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICghaWRUb2tlbk9iaikge1xyXG4gICAgICAgICAgICByZXR1cm4gb3JpZ2luYWxSZXNwb25zZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGV4cCA9IE51bWJlcihpZFRva2VuT2JqLmV4cGlyYXRpb24pO1xyXG4gICAgICAgIGlmIChleHAgJiYgIW9yaWdpbmFsUmVzcG9uc2UuZXhwaXJlc09uKSB7XHJcbiAgICAgICAgICAgIG9yaWdpbmFsUmVzcG9uc2UuZXhwaXJlc09uID0gbmV3IERhdGUoZXhwICogMTAwMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0c2xpYl8xLl9fYXNzaWduKHt9LCBvcmlnaW5hbFJlc3BvbnNlLCB7IGlkVG9rZW46IGlkVG9rZW5PYmosIGlkVG9rZW5DbGFpbXM6IGlkVG9rZW5PYmouY2xhaW1zLCB1bmlxdWVJZDogaWRUb2tlbk9iai5vYmplY3RJZCB8fCBpZFRva2VuT2JqLnN1YmplY3QsIHRlbmFudElkOiBpZFRva2VuT2JqLnRlbmFudElkIH0pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBSZXNwb25zZVV0aWxzO1xyXG59KCkpO1xyXG5leHBvcnQgeyBSZXNwb25zZVV0aWxzIH07XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVJlc3BvbnNlVXRpbHMuanMubWFwIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cclxuLyoqXHJcbiAqIFhIUiBjbGllbnQgZm9yIEpTT04gZW5kcG9pbnRzXHJcbiAqIGh0dHBzOi8vd3d3Lm5wbWpzLmNvbS9wYWNrYWdlL2FzeW5jLXByb21pc2VcclxuICogQGhpZGRlblxyXG4gKi9cclxudmFyIFhockNsaWVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFhockNsaWVudCgpIHtcclxuICAgIH1cclxuICAgIFhockNsaWVudC5wcm90b3R5cGUuc2VuZFJlcXVlc3RBc3luYyA9IGZ1bmN0aW9uICh1cmwsIG1ldGhvZCwgZW5hYmxlQ2FjaGluZykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgICAgICAgICB4aHIub3BlbihtZXRob2QsIHVybCwgLyphc3luYzogKi8gdHJ1ZSk7XHJcbiAgICAgICAgICAgIGlmIChlbmFibGVDYWNoaW5nKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiAoc2hpdmIpIGVuc3VyZSB0aGF0IHRoaXMgY2FuIGJlIGNhY2hlZFxyXG4gICAgICAgICAgICAgICAgLy8geGhyLnNldFJlcXVlc3RIZWFkZXIoXCJDYWNoZS1Db250cm9sXCIsIFwiUHVibGljXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbiAoZXYpIHtcclxuICAgICAgICAgICAgICAgIGlmICh4aHIuc3RhdHVzIDwgMjAwIHx8IHhoci5zdGF0dXMgPj0gMzAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KF90aGlzLmhhbmRsZUVycm9yKHhoci5yZXNwb25zZVRleHQpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGpzb25SZXNwb25zZSA9IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlVGV4dCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChfdGhpcy5oYW5kbGVFcnJvcih4aHIucmVzcG9uc2VUZXh0KSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKGpzb25SZXNwb25zZSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHhoci5vbmVycm9yID0gZnVuY3Rpb24gKGV2KSB7XHJcbiAgICAgICAgICAgICAgICByZWplY3QoeGhyLnN0YXR1cyk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGlmIChtZXRob2QgPT09IFwiR0VUXCIpIHtcclxuICAgICAgICAgICAgICAgIHhoci5zZW5kKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBcIm5vdCBpbXBsZW1lbnRlZFwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgWGhyQ2xpZW50LnByb3RvdHlwZS5oYW5kbGVFcnJvciA9IGZ1bmN0aW9uIChyZXNwb25zZVRleHQpIHtcclxuICAgICAgICB2YXIganNvblJlc3BvbnNlO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGpzb25SZXNwb25zZSA9IEpTT04ucGFyc2UocmVzcG9uc2VUZXh0KTtcclxuICAgICAgICAgICAgaWYgKGpzb25SZXNwb25zZS5lcnJvcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGpzb25SZXNwb25zZS5lcnJvcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRocm93IHJlc3BvbnNlVGV4dDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2VUZXh0O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4gWGhyQ2xpZW50O1xyXG59KCkpO1xyXG5leHBvcnQgeyBYaHJDbGllbnQgfTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9WEhSQ2xpZW50LmpzLm1hcCIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXHJcbmltcG9ydCB7IFN0cmluZ1V0aWxzIH0gZnJvbSBcIi4vdXRpbHMvU3RyaW5nVXRpbHNcIjtcclxuaW1wb3J0IHsgbGlicmFyeVZlcnNpb24gfSBmcm9tIFwiLi91dGlscy9Db25zdGFudHNcIjtcclxuZXhwb3J0IHZhciBMb2dMZXZlbDtcclxuKGZ1bmN0aW9uIChMb2dMZXZlbCkge1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJFcnJvclwiXSA9IDBdID0gXCJFcnJvclwiO1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJXYXJuaW5nXCJdID0gMV0gPSBcIldhcm5pbmdcIjtcclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiSW5mb1wiXSA9IDJdID0gXCJJbmZvXCI7XHJcbiAgICBMb2dMZXZlbFtMb2dMZXZlbFtcIlZlcmJvc2VcIl0gPSAzXSA9IFwiVmVyYm9zZVwiO1xyXG59KShMb2dMZXZlbCB8fCAoTG9nTGV2ZWwgPSB7fSkpO1xyXG52YXIgTG9nZ2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gTG9nZ2VyKGxvY2FsQ2FsbGJhY2ssIG9wdGlvbnMpIHtcclxuICAgICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7IG9wdGlvbnMgPSB7fTsgfVxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBoaWRkZW5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmxldmVsID0gTG9nTGV2ZWwuSW5mbztcclxuICAgICAgICB2YXIgX2EgPSBvcHRpb25zLmNvcnJlbGF0aW9uSWQsIGNvcnJlbGF0aW9uSWQgPSBfYSA9PT0gdm9pZCAwID8gXCJcIiA6IF9hLCBfYiA9IG9wdGlvbnMubGV2ZWwsIGxldmVsID0gX2IgPT09IHZvaWQgMCA/IExvZ0xldmVsLkluZm8gOiBfYiwgX2MgPSBvcHRpb25zLnBpaUxvZ2dpbmdFbmFibGVkLCBwaWlMb2dnaW5nRW5hYmxlZCA9IF9jID09PSB2b2lkIDAgPyBmYWxzZSA6IF9jO1xyXG4gICAgICAgIHRoaXMubG9jYWxDYWxsYmFjayA9IGxvY2FsQ2FsbGJhY2s7XHJcbiAgICAgICAgdGhpcy5jb3JyZWxhdGlvbklkID0gY29ycmVsYXRpb25JZDtcclxuICAgICAgICB0aGlzLmxldmVsID0gbGV2ZWw7XHJcbiAgICAgICAgdGhpcy5waWlMb2dnaW5nRW5hYmxlZCA9IHBpaUxvZ2dpbmdFbmFibGVkO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBAaGlkZGVuXHJcbiAgICAgKi9cclxuICAgIExvZ2dlci5wcm90b3R5cGUubG9nTWVzc2FnZSA9IGZ1bmN0aW9uIChsb2dMZXZlbCwgbG9nTWVzc2FnZSwgY29udGFpbnNQaWkpIHtcclxuICAgICAgICBpZiAoKGxvZ0xldmVsID4gdGhpcy5sZXZlbCkgfHwgKCF0aGlzLnBpaUxvZ2dpbmdFbmFibGVkICYmIGNvbnRhaW5zUGlpKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpLnRvVVRDU3RyaW5nKCk7XHJcbiAgICAgICAgdmFyIGxvZztcclxuICAgICAgICBpZiAoIVN0cmluZ1V0aWxzLmlzRW1wdHkodGhpcy5jb3JyZWxhdGlvbklkKSkge1xyXG4gICAgICAgICAgICBsb2cgPSB0aW1lc3RhbXAgKyBcIjpcIiArIHRoaXMuY29ycmVsYXRpb25JZCArIFwiLVwiICsgbGlicmFyeVZlcnNpb24oKSArIFwiLVwiICsgTG9nTGV2ZWxbbG9nTGV2ZWxdICsgXCIgXCIgKyBsb2dNZXNzYWdlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgbG9nID0gdGltZXN0YW1wICsgXCI6XCIgKyBsaWJyYXJ5VmVyc2lvbigpICsgXCItXCIgKyBMb2dMZXZlbFtsb2dMZXZlbF0gKyBcIiBcIiArIGxvZ01lc3NhZ2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZXhlY3V0ZUNhbGxiYWNrKGxvZ0xldmVsLCBsb2csIGNvbnRhaW5zUGlpKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEBoaWRkZW5cclxuICAgICAqL1xyXG4gICAgTG9nZ2VyLnByb3RvdHlwZS5leGVjdXRlQ2FsbGJhY2sgPSBmdW5jdGlvbiAobGV2ZWwsIG1lc3NhZ2UsIGNvbnRhaW5zUGlpKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubG9jYWxDYWxsYmFjaykge1xyXG4gICAgICAgICAgICB0aGlzLmxvY2FsQ2FsbGJhY2sobGV2ZWwsIG1lc3NhZ2UsIGNvbnRhaW5zUGlpKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAaGlkZGVuXHJcbiAgICAgKi9cclxuICAgIExvZ2dlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xyXG4gICAgICAgIHRoaXMubG9nTWVzc2FnZShMb2dMZXZlbC5FcnJvciwgbWVzc2FnZSwgZmFsc2UpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQGhpZGRlblxyXG4gICAgICovXHJcbiAgICBMb2dnZXIucHJvdG90eXBlLmVycm9yUGlpID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcclxuICAgICAgICB0aGlzLmxvZ01lc3NhZ2UoTG9nTGV2ZWwuRXJyb3IsIG1lc3NhZ2UsIHRydWUpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQGhpZGRlblxyXG4gICAgICovXHJcbiAgICBMb2dnZXIucHJvdG90eXBlLndhcm5pbmcgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xyXG4gICAgICAgIHRoaXMubG9nTWVzc2FnZShMb2dMZXZlbC5XYXJuaW5nLCBtZXNzYWdlLCBmYWxzZSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAaGlkZGVuXHJcbiAgICAgKi9cclxuICAgIExvZ2dlci5wcm90b3R5cGUud2FybmluZ1BpaSA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XHJcbiAgICAgICAgdGhpcy5sb2dNZXNzYWdlKExvZ0xldmVsLldhcm5pbmcsIG1lc3NhZ2UsIHRydWUpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQGhpZGRlblxyXG4gICAgICovXHJcbiAgICBMb2dnZXIucHJvdG90eXBlLmluZm8gPSBmdW5jdGlvbiAobWVzc2FnZSkge1xyXG4gICAgICAgIHRoaXMubG9nTWVzc2FnZShMb2dMZXZlbC5JbmZvLCBtZXNzYWdlLCBmYWxzZSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAaGlkZGVuXHJcbiAgICAgKi9cclxuICAgIExvZ2dlci5wcm90b3R5cGUuaW5mb1BpaSA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XHJcbiAgICAgICAgdGhpcy5sb2dNZXNzYWdlKExvZ0xldmVsLkluZm8sIG1lc3NhZ2UsIHRydWUpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQGhpZGRlblxyXG4gICAgICovXHJcbiAgICBMb2dnZXIucHJvdG90eXBlLnZlcmJvc2UgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xyXG4gICAgICAgIHRoaXMubG9nTWVzc2FnZShMb2dMZXZlbC5WZXJib3NlLCBtZXNzYWdlLCBmYWxzZSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAaGlkZGVuXHJcbiAgICAgKi9cclxuICAgIExvZ2dlci5wcm90b3R5cGUudmVyYm9zZVBpaSA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XHJcbiAgICAgICAgdGhpcy5sb2dNZXNzYWdlKExvZ0xldmVsLlZlcmJvc2UsIG1lc3NhZ2UsIHRydWUpO1xyXG4gICAgfTtcclxuICAgIExvZ2dlci5wcm90b3R5cGUuaXNQaWlMb2dnaW5nRW5hYmxlZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5waWlMb2dnaW5nRW5hYmxlZDtcclxuICAgIH07XHJcbiAgICByZXR1cm4gTG9nZ2VyO1xyXG59KCkpO1xyXG5leHBvcnQgeyBMb2dnZXIgfTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9TG9nZ2VyLmpzLm1hcCIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXHJcbmltcG9ydCAqIGFzIHRzbGliXzEgZnJvbSBcInRzbGliXCI7XHJcbmltcG9ydCB7IEF1dGhvcml0eSwgQXV0aG9yaXR5VHlwZSB9IGZyb20gXCIuL0F1dGhvcml0eVwiO1xyXG5pbXBvcnQgeyBYaHJDbGllbnQgfSBmcm9tIFwiLi9YSFJDbGllbnRcIjtcclxuaW1wb3J0IHsgQUFEVHJ1c3RlZEhvc3RMaXN0IH0gZnJvbSBcIi4vdXRpbHMvQ29uc3RhbnRzXCI7XHJcbi8qKlxyXG4gKiBAaGlkZGVuXHJcbiAqL1xyXG52YXIgQWFkQXV0aG9yaXR5ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWJfMS5fX2V4dGVuZHMoQWFkQXV0aG9yaXR5LCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gQWFkQXV0aG9yaXR5KGF1dGhvcml0eSwgdmFsaWRhdGVBdXRob3JpdHkpIHtcclxuICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgYXV0aG9yaXR5LCB2YWxpZGF0ZUF1dGhvcml0eSkgfHwgdGhpcztcclxuICAgIH1cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShBYWRBdXRob3JpdHkucHJvdG90eXBlLCBcIkFhZEluc3RhbmNlRGlzY292ZXJ5RW5kcG9pbnRVcmxcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gQWFkQXV0aG9yaXR5LkFhZEluc3RhbmNlRGlzY292ZXJ5RW5kcG9pbnQgKyBcIj9hcGktdmVyc2lvbj0xLjAmYXV0aG9yaXphdGlvbl9lbmRwb2ludD1cIiArIHRoaXMuQ2Fub25pY2FsQXV0aG9yaXR5ICsgXCJvYXV0aDIvdjIuMC9hdXRob3JpemVcIjtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShBYWRBdXRob3JpdHkucHJvdG90eXBlLCBcIkF1dGhvcml0eVR5cGVcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gQXV0aG9yaXR5VHlwZS5BYWQ7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSBwcm9taXNlIHdoaWNoIHJlc29sdmVzIHRvIHRoZSBPSURDIGVuZHBvaW50XHJcbiAgICAgKiBPbmx5IHJlc3BvbmRzIHdpdGggdGhlIGVuZHBvaW50XHJcbiAgICAgKi9cclxuICAgIEFhZEF1dGhvcml0eS5wcm90b3R5cGUuR2V0T3BlbklkQ29uZmlndXJhdGlvbkVuZHBvaW50QXN5bmMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgcmVzdWx0UHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoX3RoaXMuRGVmYXVsdE9wZW5JZENvbmZpZ3VyYXRpb25FbmRwb2ludCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKCF0aGlzLklzVmFsaWRhdGlvbkVuYWJsZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdFByb21pc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBob3N0ID0gdGhpcy5DYW5vbmljYWxBdXRob3JpdHlVcmxDb21wb25lbnRzLkhvc3ROYW1lQW5kUG9ydDtcclxuICAgICAgICBpZiAodGhpcy5Jc0luVHJ1c3RlZEhvc3RMaXN0KGhvc3QpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHRQcm9taXNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgY2xpZW50ID0gbmV3IFhockNsaWVudCgpO1xyXG4gICAgICAgIHJldHVybiBjbGllbnQuc2VuZFJlcXVlc3RBc3luYyh0aGlzLkFhZEluc3RhbmNlRGlzY292ZXJ5RW5kcG9pbnRVcmwsIFwiR0VUXCIsIHRydWUpXHJcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UudGVuYW50X2Rpc2NvdmVyeV9lbmRwb2ludDtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIENoZWNrcyB0byBzZWUgaWYgdGhlIGhvc3QgaXMgaW4gYSBsaXN0IG9mIHRydXN0ZWQgaG9zdHNcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBUaGUgaG9zdCB0byBsb29rIHVwXHJcbiAgICAgKi9cclxuICAgIEFhZEF1dGhvcml0eS5wcm90b3R5cGUuSXNJblRydXN0ZWRIb3N0TGlzdCA9IGZ1bmN0aW9uIChob3N0KSB7XHJcbiAgICAgICAgcmV0dXJuIEFBRFRydXN0ZWRIb3N0TGlzdFtob3N0LnRvTG93ZXJDYXNlKCldO1xyXG4gICAgfTtcclxuICAgIEFhZEF1dGhvcml0eS5BYWRJbnN0YW5jZURpc2NvdmVyeUVuZHBvaW50ID0gXCJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vY29tbW9uL2Rpc2NvdmVyeS9pbnN0YW5jZVwiO1xyXG4gICAgcmV0dXJuIEFhZEF1dGhvcml0eTtcclxufShBdXRob3JpdHkpKTtcclxuZXhwb3J0IHsgQWFkQXV0aG9yaXR5IH07XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUFhZEF1dGhvcml0eS5qcy5tYXAiLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxyXG5pbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gXCJ0c2xpYlwiO1xyXG5pbXBvcnQgeyBBYWRBdXRob3JpdHkgfSBmcm9tIFwiLi9BYWRBdXRob3JpdHlcIjtcclxuaW1wb3J0IHsgQXV0aG9yaXR5VHlwZSB9IGZyb20gXCIuL0F1dGhvcml0eVwiO1xyXG5pbXBvcnQgeyBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JNZXNzYWdlIH0gZnJvbSBcIi4vZXJyb3IvQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yXCI7XHJcbmltcG9ydCB7IFVybFV0aWxzIH0gZnJvbSBcIi4vdXRpbHMvVXJsVXRpbHNcIjtcclxuLyoqXHJcbiAqIEBoaWRkZW5cclxuICovXHJcbnZhciBCMmNBdXRob3JpdHkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICB0c2xpYl8xLl9fZXh0ZW5kcyhCMmNBdXRob3JpdHksIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBCMmNBdXRob3JpdHkoYXV0aG9yaXR5LCB2YWxpZGF0ZUF1dGhvcml0eSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGF1dGhvcml0eSwgdmFsaWRhdGVBdXRob3JpdHkpIHx8IHRoaXM7XHJcbiAgICAgICAgdmFyIHVybENvbXBvbmVudHMgPSBVcmxVdGlscy5HZXRVcmxDb21wb25lbnRzKGF1dGhvcml0eSk7XHJcbiAgICAgICAgdmFyIHBhdGhTZWdtZW50cyA9IHVybENvbXBvbmVudHMuUGF0aFNlZ21lbnRzO1xyXG4gICAgICAgIGlmIChwYXRoU2VnbWVudHMubGVuZ3RoIDwgMykge1xyXG4gICAgICAgICAgICB0aHJvdyBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JNZXNzYWdlLmIyY0F1dGhvcml0eVVyaUludmFsaWRQYXRoO1xyXG4gICAgICAgIH1cclxuICAgICAgICBfdGhpcy5DYW5vbmljYWxBdXRob3JpdHkgPSBcImh0dHBzOi8vXCIgKyB1cmxDb21wb25lbnRzLkhvc3ROYW1lQW5kUG9ydCArIFwiL1wiICsgcGF0aFNlZ21lbnRzWzBdICsgXCIvXCIgKyBwYXRoU2VnbWVudHNbMV0gKyBcIi9cIiArIHBhdGhTZWdtZW50c1syXSArIFwiL1wiO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShCMmNBdXRob3JpdHkucHJvdG90eXBlLCBcIkF1dGhvcml0eVR5cGVcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gQXV0aG9yaXR5VHlwZS5CMkM7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSBwcm9taXNlIHdpdGggdGhlIFRlbmFudERpc2NvdmVyeUVuZHBvaW50XHJcbiAgICAgKi9cclxuICAgIEIyY0F1dGhvcml0eS5wcm90b3R5cGUuR2V0T3BlbklkQ29uZmlndXJhdGlvbkVuZHBvaW50QXN5bmMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgcmVzdWx0UHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoX3RoaXMuRGVmYXVsdE9wZW5JZENvbmZpZ3VyYXRpb25FbmRwb2ludCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKCF0aGlzLklzVmFsaWRhdGlvbkVuYWJsZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdFByb21pc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLklzSW5UcnVzdGVkSG9zdExpc3QodGhpcy5DYW5vbmljYWxBdXRob3JpdHlVcmxDb21wb25lbnRzLkhvc3ROYW1lQW5kUG9ydCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdFByb21pc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZWplY3QoQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yTWVzc2FnZS51bnN1cHBvcnRlZEF1dGhvcml0eVZhbGlkYXRpb24pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEIyY0F1dGhvcml0eS5CMkNfUFJFRklYID0gXCJ0ZnBcIjtcclxuICAgIHJldHVybiBCMmNBdXRob3JpdHk7XHJcbn0oQWFkQXV0aG9yaXR5KSk7XHJcbmV4cG9ydCB7IEIyY0F1dGhvcml0eSB9O1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1CMmNBdXRob3JpdHkuanMubWFwIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cclxuLyoqXHJcbiAqIEBoaWRkZW5cclxuICovXHJcbmltcG9ydCB7IEFhZEF1dGhvcml0eSB9IGZyb20gXCIuL0FhZEF1dGhvcml0eVwiO1xyXG5pbXBvcnQgeyBCMmNBdXRob3JpdHkgfSBmcm9tIFwiLi9CMmNBdXRob3JpdHlcIjtcclxuaW1wb3J0IHsgQXV0aG9yaXR5VHlwZSB9IGZyb20gXCIuL0F1dGhvcml0eVwiO1xyXG5pbXBvcnQgeyBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JNZXNzYWdlIH0gZnJvbSBcIi4vZXJyb3IvQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yXCI7XHJcbmltcG9ydCB7IFVybFV0aWxzIH0gZnJvbSBcIi4vdXRpbHMvVXJsVXRpbHNcIjtcclxuaW1wb3J0IHsgU3RyaW5nVXRpbHMgfSBmcm9tIFwiLi91dGlscy9TdHJpbmdVdGlsc1wiO1xyXG52YXIgQXV0aG9yaXR5RmFjdG9yeSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEF1dGhvcml0eUZhY3RvcnkoKSB7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICogUGFyc2UgdGhlIHVybCBhbmQgZGV0ZXJtaW5lIHRoZSB0eXBlIG9mIGF1dGhvcml0eVxyXG4gICAgKi9cclxuICAgIEF1dGhvcml0eUZhY3RvcnkuRGV0ZWN0QXV0aG9yaXR5RnJvbVVybCA9IGZ1bmN0aW9uIChhdXRob3JpdHlVcmwpIHtcclxuICAgICAgICBhdXRob3JpdHlVcmwgPSBVcmxVdGlscy5DYW5vbmljYWxpemVVcmkoYXV0aG9yaXR5VXJsKTtcclxuICAgICAgICB2YXIgY29tcG9uZW50cyA9IFVybFV0aWxzLkdldFVybENvbXBvbmVudHMoYXV0aG9yaXR5VXJsKTtcclxuICAgICAgICB2YXIgcGF0aFNlZ21lbnRzID0gY29tcG9uZW50cy5QYXRoU2VnbWVudHM7XHJcbiAgICAgICAgc3dpdGNoIChwYXRoU2VnbWVudHNbMF0pIHtcclxuICAgICAgICAgICAgY2FzZSBcInRmcFwiOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEF1dGhvcml0eVR5cGUuQjJDO1xyXG4gICAgICAgICAgICBjYXNlIFwiYWRmc1wiOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEF1dGhvcml0eVR5cGUuQWRmcztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHJldHVybiBBdXRob3JpdHlUeXBlLkFhZDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAqIENyZWF0ZSBhbiBhdXRob3JpdHkgb2JqZWN0IG9mIHRoZSBjb3JyZWN0IHR5cGUgYmFzZWQgb24gdGhlIHVybFxyXG4gICAgKiBQZXJmb3JtcyBiYXNpYyBhdXRob3JpdHkgdmFsaWRhdGlvbiAtIGNoZWNrcyB0byBzZWUgaWYgdGhlIGF1dGhvcml0eSBpcyBvZiBhIHZhbGlkIHR5cGUgKGVnIGFhZCwgYjJjKVxyXG4gICAgKi9cclxuICAgIEF1dGhvcml0eUZhY3RvcnkuQ3JlYXRlSW5zdGFuY2UgPSBmdW5jdGlvbiAoYXV0aG9yaXR5VXJsLCB2YWxpZGF0ZUF1dGhvcml0eSkge1xyXG4gICAgICAgIGlmIChTdHJpbmdVdGlscy5pc0VtcHR5KGF1dGhvcml0eVVybCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciB0eXBlID0gQXV0aG9yaXR5RmFjdG9yeS5EZXRlY3RBdXRob3JpdHlGcm9tVXJsKGF1dGhvcml0eVVybCk7XHJcbiAgICAgICAgLy8gRGVwZW5kaW5nIG9uIGFib3ZlIGRldGVjdGlvbiwgY3JlYXRlIHRoZSByaWdodCB0eXBlLlxyXG4gICAgICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlIEF1dGhvcml0eVR5cGUuQjJDOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBCMmNBdXRob3JpdHkoYXV0aG9yaXR5VXJsLCB2YWxpZGF0ZUF1dGhvcml0eSk7XHJcbiAgICAgICAgICAgIGNhc2UgQXV0aG9yaXR5VHlwZS5BYWQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEFhZEF1dGhvcml0eShhdXRob3JpdHlVcmwsIHZhbGlkYXRlQXV0aG9yaXR5KTtcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHRocm93IENsaWVudENvbmZpZ3VyYXRpb25FcnJvck1lc3NhZ2UuaW52YWxpZEF1dGhvcml0eVR5cGU7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHJldHVybiBBdXRob3JpdHlGYWN0b3J5O1xyXG59KCkpO1xyXG5leHBvcnQgeyBBdXRob3JpdHlGYWN0b3J5IH07XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUF1dGhvcml0eUZhY3RvcnkuanMubWFwIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cclxuaW1wb3J0ICogYXMgdHNsaWJfMSBmcm9tIFwidHNsaWJcIjtcclxuaW1wb3J0IHsgTG9nZ2VyIH0gZnJvbSBcIi4vTG9nZ2VyXCI7XHJcbmltcG9ydCB7IFVybFV0aWxzIH0gZnJvbSBcIi4vdXRpbHMvVXJsVXRpbHNcIjtcclxuLyoqXHJcbiAqIERlZmF1bHRzIGZvciB0aGUgQ29uZmlndXJhdGlvbiBPcHRpb25zXHJcbiAqL1xyXG52YXIgRlJBTUVfVElNRU9VVCA9IDYwMDA7XHJcbnZhciBPRkZTRVQgPSAzMDA7XHJcbnZhciBOQVZJR0FURV9GUkFNRV9XQUlUID0gNTAwO1xyXG52YXIgREVGQVVMVF9BVVRIX09QVElPTlMgPSB7XHJcbiAgICBjbGllbnRJZDogXCJcIixcclxuICAgIGF1dGhvcml0eTogbnVsbCxcclxuICAgIHZhbGlkYXRlQXV0aG9yaXR5OiB0cnVlLFxyXG4gICAgcmVkaXJlY3RVcmk6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIFVybFV0aWxzLmdldERlZmF1bHRSZWRpcmVjdFVyaSgpOyB9LFxyXG4gICAgcG9zdExvZ291dFJlZGlyZWN0VXJpOiBmdW5jdGlvbiAoKSB7IHJldHVybiBVcmxVdGlscy5nZXREZWZhdWx0UmVkaXJlY3RVcmkoKTsgfSxcclxuICAgIG5hdmlnYXRlVG9Mb2dpblJlcXVlc3RVcmw6IHRydWVcclxufTtcclxudmFyIERFRkFVTFRfQ0FDSEVfT1BUSU9OUyA9IHtcclxuICAgIGNhY2hlTG9jYXRpb246IFwic2Vzc2lvblN0b3JhZ2VcIixcclxuICAgIHN0b3JlQXV0aFN0YXRlSW5Db29raWU6IGZhbHNlXHJcbn07XHJcbnZhciBERUZBVUxUX1NZU1RFTV9PUFRJT05TID0ge1xyXG4gICAgbG9nZ2VyOiBuZXcgTG9nZ2VyKG51bGwpLFxyXG4gICAgbG9hZEZyYW1lVGltZW91dDogRlJBTUVfVElNRU9VVCxcclxuICAgIHRva2VuUmVuZXdhbE9mZnNldFNlY29uZHM6IE9GRlNFVCxcclxuICAgIG5hdmlnYXRlRnJhbWVXYWl0OiBOQVZJR0FURV9GUkFNRV9XQUlUXHJcbn07XHJcbnZhciBERUZBVUxUX0ZSQU1FV09SS19PUFRJT05TID0ge1xyXG4gICAgaXNBbmd1bGFyOiBmYWxzZSxcclxuICAgIHVucHJvdGVjdGVkUmVzb3VyY2VzOiBuZXcgQXJyYXkoKSxcclxuICAgIHByb3RlY3RlZFJlc291cmNlTWFwOiBuZXcgTWFwKClcclxufTtcclxuLyoqXHJcbiAqIE1TQUwgZnVuY3Rpb24gdGhhdCBzZXRzIHRoZSBkZWZhdWx0IG9wdGlvbnMgd2hlbiBub3QgZXhwbGljaXRseSBjb25maWd1cmVkIGZyb20gYXBwIGRldmVsb3BlclxyXG4gKlxyXG4gKiBAcGFyYW0gVEF1dGhPcHRpb25zXHJcbiAqIEBwYXJhbSBUQ2FjaGVPcHRpb25zXHJcbiAqIEBwYXJhbSBUU3lzdGVtT3B0aW9uc1xyXG4gKiBAcGFyYW0gVEZyYW1ld29ya09wdGlvbnNcclxuICpcclxuICogQHJldHVybnMgVENvbmZpZ3VyYXRpb24gb2JqZWN0XHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gYnVpbGRDb25maWd1cmF0aW9uKF9hKSB7XHJcbiAgICB2YXIgYXV0aCA9IF9hLmF1dGgsIF9iID0gX2EuY2FjaGUsIGNhY2hlID0gX2IgPT09IHZvaWQgMCA/IHt9IDogX2IsIF9jID0gX2Euc3lzdGVtLCBzeXN0ZW0gPSBfYyA9PT0gdm9pZCAwID8ge30gOiBfYywgX2QgPSBfYS5mcmFtZXdvcmssIGZyYW1ld29yayA9IF9kID09PSB2b2lkIDAgPyB7fSA6IF9kO1xyXG4gICAgdmFyIG92ZXJsYXllZENvbmZpZyA9IHtcclxuICAgICAgICBhdXRoOiB0c2xpYl8xLl9fYXNzaWduKHt9LCBERUZBVUxUX0FVVEhfT1BUSU9OUywgYXV0aCksXHJcbiAgICAgICAgY2FjaGU6IHRzbGliXzEuX19hc3NpZ24oe30sIERFRkFVTFRfQ0FDSEVfT1BUSU9OUywgY2FjaGUpLFxyXG4gICAgICAgIHN5c3RlbTogdHNsaWJfMS5fX2Fzc2lnbih7fSwgREVGQVVMVF9TWVNURU1fT1BUSU9OUywgc3lzdGVtKSxcclxuICAgICAgICBmcmFtZXdvcms6IHRzbGliXzEuX19hc3NpZ24oe30sIERFRkFVTFRfRlJBTUVXT1JLX09QVElPTlMsIGZyYW1ld29yaylcclxuICAgIH07XHJcbiAgICByZXR1cm4gb3ZlcmxheWVkQ29uZmlnO1xyXG59XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNvbmZpZ3VyYXRpb24uanMubWFwIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cclxuaW1wb3J0ICogYXMgdHNsaWJfMSBmcm9tIFwidHNsaWJcIjtcclxuaW1wb3J0IHsgQXV0aEVycm9yIH0gZnJvbSBcIi4vQXV0aEVycm9yXCI7XHJcbmV4cG9ydCB2YXIgU2VydmVyRXJyb3JNZXNzYWdlID0ge1xyXG4gICAgc2VydmVyVW5hdmFpbGFibGU6IHtcclxuICAgICAgICBjb2RlOiBcInNlcnZlcl91bmF2YWlsYWJsZVwiLFxyXG4gICAgICAgIGRlc2M6IFwiU2VydmVyIGlzIHRlbXBvcmFyaWx5IHVuYXZhaWxhYmxlLlwiXHJcbiAgICB9LFxyXG4gICAgdW5rbm93blNlcnZlckVycm9yOiB7XHJcbiAgICAgICAgY29kZTogXCJ1bmtub3duX3NlcnZlcl9lcnJvclwiXHJcbiAgICB9LFxyXG59O1xyXG4vKipcclxuICogRXJyb3IgdGhyb3duIHdoZW4gdGhlcmUgaXMgYW4gZXJyb3Igd2l0aCB0aGUgc2VydmVyIGNvZGUsIGZvciBleGFtcGxlLCB1bmF2YWlsYWJpbGl0eS5cclxuICovXHJcbnZhciBTZXJ2ZXJFcnJvciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIHRzbGliXzEuX19leHRlbmRzKFNlcnZlckVycm9yLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gU2VydmVyRXJyb3IoZXJyb3JDb2RlLCBlcnJvck1lc3NhZ2UpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBlcnJvckNvZGUsIGVycm9yTWVzc2FnZSkgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5uYW1lID0gXCJTZXJ2ZXJFcnJvclwiO1xyXG4gICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihfdGhpcywgU2VydmVyRXJyb3IucHJvdG90eXBlKTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBTZXJ2ZXJFcnJvci5jcmVhdGVTZXJ2ZXJVbmF2YWlsYWJsZUVycm9yID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgU2VydmVyRXJyb3IoU2VydmVyRXJyb3JNZXNzYWdlLnNlcnZlclVuYXZhaWxhYmxlLmNvZGUsIFNlcnZlckVycm9yTWVzc2FnZS5zZXJ2ZXJVbmF2YWlsYWJsZS5kZXNjKTtcclxuICAgIH07XHJcbiAgICBTZXJ2ZXJFcnJvci5jcmVhdGVVbmtub3duU2VydmVyRXJyb3IgPSBmdW5jdGlvbiAoZXJyb3JEZXNjKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBTZXJ2ZXJFcnJvcihTZXJ2ZXJFcnJvck1lc3NhZ2UudW5rbm93blNlcnZlckVycm9yLmNvZGUsIGVycm9yRGVzYyk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFNlcnZlckVycm9yO1xyXG59KEF1dGhFcnJvcikpO1xyXG5leHBvcnQgeyBTZXJ2ZXJFcnJvciB9O1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1TZXJ2ZXJFcnJvci5qcy5tYXAiLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxyXG5pbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gXCJ0c2xpYlwiO1xyXG5pbXBvcnQgeyBTZXJ2ZXJFcnJvciB9IGZyb20gXCIuL1NlcnZlckVycm9yXCI7XHJcbmV4cG9ydCB2YXIgSW50ZXJhY3Rpb25SZXF1aXJlZEF1dGhFcnJvck1lc3NhZ2UgPSB7XHJcbiAgICBpbnRlcmFjdGlvblJlcXVpcmVkOiB7XHJcbiAgICAgICAgY29kZTogXCJpbnRlcmFjdGlvbl9yZXF1aXJlZFwiXHJcbiAgICB9LFxyXG4gICAgY29uc2VudFJlcXVpcmVkOiB7XHJcbiAgICAgICAgY29kZTogXCJjb25zZW50X3JlcXVpcmVkXCJcclxuICAgIH0sXHJcbiAgICBsb2dpblJlcXVpcmVkOiB7XHJcbiAgICAgICAgY29kZTogXCJsb2dpbl9yZXF1aXJlZFwiXHJcbiAgICB9LFxyXG59O1xyXG4vKipcclxuICogRXJyb3IgdGhyb3duIHdoZW4gdGhlIHVzZXIgaXMgcmVxdWlyZWQgdG8gcGVyZm9ybSBhbiBpbnRlcmFjdGl2ZSB0b2tlbiByZXF1ZXN0LlxyXG4gKi9cclxudmFyIEludGVyYWN0aW9uUmVxdWlyZWRBdXRoRXJyb3IgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICB0c2xpYl8xLl9fZXh0ZW5kcyhJbnRlcmFjdGlvblJlcXVpcmVkQXV0aEVycm9yLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gSW50ZXJhY3Rpb25SZXF1aXJlZEF1dGhFcnJvcihlcnJvckNvZGUsIGVycm9yTWVzc2FnZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGVycm9yQ29kZSwgZXJyb3JNZXNzYWdlKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLm5hbWUgPSBcIkludGVyYWN0aW9uUmVxdWlyZWRBdXRoRXJyb3JcIjtcclxuICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YoX3RoaXMsIEludGVyYWN0aW9uUmVxdWlyZWRBdXRoRXJyb3IucHJvdG90eXBlKTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBJbnRlcmFjdGlvblJlcXVpcmVkQXV0aEVycm9yLmlzSW50ZXJhY3Rpb25SZXF1aXJlZEVycm9yID0gZnVuY3Rpb24gKGVycm9yU3RyaW5nKSB7XHJcbiAgICAgICAgdmFyIGludGVyYWN0aW9uUmVxdWlyZWRDb2RlcyA9IFtcclxuICAgICAgICAgICAgSW50ZXJhY3Rpb25SZXF1aXJlZEF1dGhFcnJvck1lc3NhZ2UuaW50ZXJhY3Rpb25SZXF1aXJlZC5jb2RlLFxyXG4gICAgICAgICAgICBJbnRlcmFjdGlvblJlcXVpcmVkQXV0aEVycm9yTWVzc2FnZS5jb25zZW50UmVxdWlyZWQuY29kZSxcclxuICAgICAgICAgICAgSW50ZXJhY3Rpb25SZXF1aXJlZEF1dGhFcnJvck1lc3NhZ2UubG9naW5SZXF1aXJlZC5jb2RlXHJcbiAgICAgICAgXTtcclxuICAgICAgICByZXR1cm4gZXJyb3JTdHJpbmcgJiYgaW50ZXJhY3Rpb25SZXF1aXJlZENvZGVzLmluZGV4T2YoZXJyb3JTdHJpbmcpID4gLTE7XHJcbiAgICB9O1xyXG4gICAgSW50ZXJhY3Rpb25SZXF1aXJlZEF1dGhFcnJvci5jcmVhdGVMb2dpblJlcXVpcmVkQXV0aEVycm9yID0gZnVuY3Rpb24gKGVycm9yRGVzYykge1xyXG4gICAgICAgIHJldHVybiBuZXcgSW50ZXJhY3Rpb25SZXF1aXJlZEF1dGhFcnJvcihJbnRlcmFjdGlvblJlcXVpcmVkQXV0aEVycm9yTWVzc2FnZS5sb2dpblJlcXVpcmVkLmNvZGUsIGVycm9yRGVzYyk7XHJcbiAgICB9O1xyXG4gICAgSW50ZXJhY3Rpb25SZXF1aXJlZEF1dGhFcnJvci5jcmVhdGVJbnRlcmFjdGlvblJlcXVpcmVkQXV0aEVycm9yID0gZnVuY3Rpb24gKGVycm9yRGVzYykge1xyXG4gICAgICAgIHJldHVybiBuZXcgSW50ZXJhY3Rpb25SZXF1aXJlZEF1dGhFcnJvcihJbnRlcmFjdGlvblJlcXVpcmVkQXV0aEVycm9yTWVzc2FnZS5pbnRlcmFjdGlvblJlcXVpcmVkLmNvZGUsIGVycm9yRGVzYyk7XHJcbiAgICB9O1xyXG4gICAgSW50ZXJhY3Rpb25SZXF1aXJlZEF1dGhFcnJvci5jcmVhdGVDb25zZW50UmVxdWlyZWRBdXRoRXJyb3IgPSBmdW5jdGlvbiAoZXJyb3JEZXNjKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBJbnRlcmFjdGlvblJlcXVpcmVkQXV0aEVycm9yKEludGVyYWN0aW9uUmVxdWlyZWRBdXRoRXJyb3JNZXNzYWdlLmNvbnNlbnRSZXF1aXJlZC5jb2RlLCBlcnJvckRlc2MpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBJbnRlcmFjdGlvblJlcXVpcmVkQXV0aEVycm9yO1xyXG59KFNlcnZlckVycm9yKSk7XHJcbmV4cG9ydCB7IEludGVyYWN0aW9uUmVxdWlyZWRBdXRoRXJyb3IgfTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SW50ZXJhY3Rpb25SZXF1aXJlZEF1dGhFcnJvci5qcy5tYXAiLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxyXG5leHBvcnQgZnVuY3Rpb24gYnVpbGRSZXNwb25zZVN0YXRlT25seShzdGF0ZSkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICB1bmlxdWVJZDogXCJcIixcclxuICAgICAgICB0ZW5hbnRJZDogXCJcIixcclxuICAgICAgICB0b2tlblR5cGU6IFwiXCIsXHJcbiAgICAgICAgaWRUb2tlbjogbnVsbCxcclxuICAgICAgICBpZFRva2VuQ2xhaW1zOiBudWxsLFxyXG4gICAgICAgIGFjY2Vzc1Rva2VuOiBcIlwiLFxyXG4gICAgICAgIHNjb3BlczogbnVsbCxcclxuICAgICAgICBleHBpcmVzT246IG51bGwsXHJcbiAgICAgICAgYWNjb3VudDogbnVsbCxcclxuICAgICAgICBhY2NvdW50U3RhdGU6IHN0YXRlXHJcbiAgICB9O1xyXG59XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUF1dGhSZXNwb25zZS5qcy5tYXAiLCJleHBvcnQgdmFyIEVWRU5UX05BTUVfUFJFRklYID0gXCJtc2FsLlwiO1xyXG5leHBvcnQgdmFyIEVWRU5UX05BTUVfS0VZID0gXCJldmVudF9uYW1lXCI7XHJcbmV4cG9ydCB2YXIgU1RBUlRfVElNRV9LRVkgPSBcInN0YXJ0X3RpbWVcIjtcclxuZXhwb3J0IHZhciBFTEFQU0VEX1RJTUVfS0VZID0gXCJlbGFwc2VkX3RpbWVcIjtcclxuZXhwb3J0IHZhciBURUxFTUVUUllfQkxPQl9FVkVOVF9OQU1FUyA9IHtcclxuICAgIE1zYWxDb3JyZWxhdGlvbklkQ29uc3RTdHJLZXk6IFwiTWljcm9zb2Z0Lk1TQUwuY29ycmVsYXRpb25faWRcIixcclxuICAgIEFwaVRlbGVtSWRDb25zdFN0cktleTogXCJtc2FsLmFwaV90ZWxlbV9pZFwiLFxyXG4gICAgQXBpSWRDb25zdFN0cktleTogXCJtc2FsLmFwaV9pZFwiLFxyXG4gICAgQnJva2VyQXBwQ29uc3RTdHJLZXk6IFwiTWljcm9zb2Z0X01TQUxfYnJva2VyX2FwcFwiLFxyXG4gICAgQ2FjaGVFdmVudENvdW50Q29uc3RTdHJLZXk6IFwiTWljcm9zb2Z0X01TQUxfY2FjaGVfZXZlbnRfY291bnRcIixcclxuICAgIEh0dHBFdmVudENvdW50VGVsZW1ldHJ5QmF0Y2hLZXk6IFwiTWljcm9zb2Z0X01TQUxfaHR0cF9ldmVudF9jb3VudFwiLFxyXG4gICAgSWRwQ29uc3RTdHJLZXk6IFwiTWljcm9zb2Z0X01TQUxfaWRwXCIsXHJcbiAgICBJc1NpbGVudFRlbGVtZXRyeUJhdGNoS2V5OiBcIlwiLFxyXG4gICAgSXNTdWNjZXNzZnVsQ29uc3RTdHJLZXk6IFwiTWljcm9zb2Z0X01TQUxfaXNfc3VjY2Vzc2Z1bFwiLFxyXG4gICAgUmVzcG9uc2VUaW1lQ29uc3RTdHJLZXk6IFwiTWljcm9zb2Z0X01TQUxfcmVzcG9uc2VfdGltZVwiLFxyXG4gICAgVGVuYW50SWRDb25zdFN0cktleTogXCJNaWNyb3NvZnRfTVNBTF90ZW5hbnRfaWRcIixcclxuICAgIFVpRXZlbnRDb3VudFRlbGVtZXRyeUJhdGNoS2V5OiBcIk1pY3Jvc29mdF9NU0FMX3VpX2V2ZW50X2NvdW50XCJcclxufTtcclxuLy8gVGhpcyBpcyB1c2VkIHRvIHJlcGxhY2UgdGhlIHJlYWwgdGVuYW50IGluIHRlbGVtZXRyeSBpbmZvXHJcbmV4cG9ydCB2YXIgVEVOQU5UX1BMQUNFSE9MREVSID0gXCI8dGVuYW50PlwiO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1UZWxlbWV0cnlDb25zdGFudHMuanMubWFwIiwiaW1wb3J0IHsgQjJjQXV0aG9yaXR5IH0gZnJvbSBcIi4uL0IyY0F1dGhvcml0eVwiO1xyXG5pbXBvcnQgeyBBQURUcnVzdGVkSG9zdExpc3QgfSBmcm9tIFwiLi4vdXRpbHMvQ29uc3RhbnRzXCI7XHJcbmltcG9ydCB7IFRFTkFOVF9QTEFDRUhPTERFUiwgRVZFTlRfTkFNRV9QUkVGSVggfSBmcm9tIFwiLi9UZWxlbWV0cnlDb25zdGFudHNcIjtcclxuaW1wb3J0IHsgQ3J5cHRvVXRpbHMgfSBmcm9tIFwiLi4vdXRpbHMvQ3J5cHRvVXRpbHNcIjtcclxuaW1wb3J0IHsgVXJsVXRpbHMgfSBmcm9tIFwiLi4vdXRpbHMvVXJsVXRpbHNcIjtcclxuZXhwb3J0IHZhciBzY3J1YlRlbmFudEZyb21VcmkgPSBmdW5jdGlvbiAodXJpKSB7XHJcbiAgICB2YXIgdXJsID0gVXJsVXRpbHMuR2V0VXJsQ29tcG9uZW50cyh1cmkpO1xyXG4gICAgLy8gdmFsaWRhdGUgdHJ1c3RlZCBob3N0XHJcbiAgICBpZiAoIUFBRFRydXN0ZWRIb3N0TGlzdFt1cmwuSG9zdE5hbWVBbmRQb3J0LnRvTG9jYWxlTG93ZXJDYXNlKCldKSB7XHJcbiAgICAgICAgLy8gU2hvdWxkIHRoaXMgcmV0dXJuIG51bGwgb3Igd2hhdCB3YXMgcGFzc2VkP1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgdmFyIHBhdGhQYXJhbXMgPSB1cmwuUGF0aFNlZ21lbnRzO1xyXG4gICAgaWYgKHBhdGhQYXJhbXMgJiYgcGF0aFBhcmFtcy5sZW5ndGggPj0gMikge1xyXG4gICAgICAgIHZhciB0ZW5hbnRQb3NpdGlvbiA9IHBhdGhQYXJhbXNbMV0gPT09IEIyY0F1dGhvcml0eS5CMkNfUFJFRklYID8gMiA6IDE7XHJcbiAgICAgICAgaWYgKHRlbmFudFBvc2l0aW9uIDwgcGF0aFBhcmFtcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgcGF0aFBhcmFtc1t0ZW5hbnRQb3NpdGlvbl0gPSBURU5BTlRfUExBQ0VIT0xERVI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHVybC5Qcm90b2NvbCArIFwiLy9cIiArIHVybC5Ib3N0TmFtZUFuZFBvcnQgKyBcIi9cIiArIHBhdGhQYXJhbXMuam9pbihcIi9cIik7XHJcbn07XHJcbmV4cG9ydCB2YXIgaGFzaFBlcnNvbmFsSWRlbnRpZmllciA9IGZ1bmN0aW9uICh2YWx1ZVRvSGFzaCkge1xyXG4gICAgLy8gVE9ETyBzaGEyNTYgdGhpc1xyXG4gICAgLy8gQ3VycmVudCB0ZXN0IHJ1bm5lciBpcyBiZWluZyBmdW5ueSB3aXRoIG5vZGUgbGlicyB0aGF0IGFyZSB3ZWJwYWNrZWQgYW55d2F5XHJcbiAgICAvLyBuZWVkIGEgZGlmZmVyZW50IHNvbHV0aW9uXHJcbiAgICByZXR1cm4gQ3J5cHRvVXRpbHMuYmFzZTY0RW5jb2RlKHZhbHVlVG9IYXNoKTtcclxufTtcclxuZXhwb3J0IHZhciBwcmVwZW5kRXZlbnROYW1lUHJlZml4ID0gZnVuY3Rpb24gKHN1ZmZpeCkgeyByZXR1cm4gXCJcIiArIEVWRU5UX05BTUVfUFJFRklYICsgKHN1ZmZpeCB8fCBcIlwiKTsgfTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VGVsZW1ldHJ5VXRpbHMuanMubWFwIiwiaW1wb3J0ICogYXMgdHNsaWJfMSBmcm9tIFwidHNsaWJcIjtcclxuaW1wb3J0IHsgVEVMRU1FVFJZX0JMT0JfRVZFTlRfTkFNRVMgfSBmcm9tIFwiLi9UZWxlbWV0cnlDb25zdGFudHNcIjtcclxuaW1wb3J0IFRlbGVtZXRyeUV2ZW50IGZyb20gXCIuL1RlbGVtZXRyeUV2ZW50XCI7XHJcbmltcG9ydCB7IHByZXBlbmRFdmVudE5hbWVQcmVmaXggfSBmcm9tIFwiLi9UZWxlbWV0cnlVdGlsc1wiO1xyXG52YXIgRGVmYXVsdEV2ZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWJfMS5fX2V4dGVuZHMoRGVmYXVsdEV2ZW50LCBfc3VwZXIpO1xyXG4gICAgLy8gVE9ETyBQbGF0Zm9ybSBUeXBlXHJcbiAgICBmdW5jdGlvbiBEZWZhdWx0RXZlbnQocGxhdGZvcm0sIGNvcnJlbGF0aW9uSWQsIGNsaWVudElkLCBldmVudENvdW50KSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcHJlcGVuZEV2ZW50TmFtZVByZWZpeChcImRlZmF1bHRfZXZlbnRcIiksIGNvcnJlbGF0aW9uSWQpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuZXZlbnRbcHJlcGVuZEV2ZW50TmFtZVByZWZpeChcImNsaWVudF9pZFwiKV0gPSBjbGllbnRJZDtcclxuICAgICAgICBfdGhpcy5ldmVudFtwcmVwZW5kRXZlbnROYW1lUHJlZml4KFwic2RrX3BsYWZvcm1cIildID0gcGxhdGZvcm0uc2RrO1xyXG4gICAgICAgIF90aGlzLmV2ZW50W3ByZXBlbmRFdmVudE5hbWVQcmVmaXgoXCJzZGtfdmVyc2lvblwiKV0gPSBwbGF0Zm9ybS5zZGtWZXJzaW9uO1xyXG4gICAgICAgIF90aGlzLmV2ZW50W3ByZXBlbmRFdmVudE5hbWVQcmVmaXgoXCJhcHBsaWNhdGlvbl9uYW1lXCIpXSA9IHBsYXRmb3JtLmFwcGxpY2F0aW9uTmFtZTtcclxuICAgICAgICBfdGhpcy5ldmVudFtwcmVwZW5kRXZlbnROYW1lUHJlZml4KFwiYXBwbGljYXRpb25fdmVyc2lvblwiKV0gPSBwbGF0Zm9ybS5hcHBsaWNhdGlvblZlcnNpb247XHJcbiAgICAgICAgX3RoaXMuZXZlbnRbXCJcIiArIFRFTEVNRVRSWV9CTE9CX0VWRU5UX05BTUVTLlVpRXZlbnRDb3VudFRlbGVtZXRyeUJhdGNoS2V5XSA9IF90aGlzLmdldEV2ZW50Q291bnQocHJlcGVuZEV2ZW50TmFtZVByZWZpeChcInVpX2V2ZW50XCIpLCBldmVudENvdW50KTtcclxuICAgICAgICBfdGhpcy5ldmVudFtcIlwiICsgVEVMRU1FVFJZX0JMT0JfRVZFTlRfTkFNRVMuSHR0cEV2ZW50Q291bnRUZWxlbWV0cnlCYXRjaEtleV0gPSBfdGhpcy5nZXRFdmVudENvdW50KHByZXBlbmRFdmVudE5hbWVQcmVmaXgoXCJodHRwX2V2ZW50XCIpLCBldmVudENvdW50KTtcclxuICAgICAgICBfdGhpcy5ldmVudFtcIlwiICsgVEVMRU1FVFJZX0JMT0JfRVZFTlRfTkFNRVMuQ2FjaGVFdmVudENvdW50Q29uc3RTdHJLZXldID0gX3RoaXMuZ2V0RXZlbnRDb3VudChwcmVwZW5kRXZlbnROYW1lUHJlZml4KFwiY2FjaGVfZXZlbnRcIiksIGV2ZW50Q291bnQpO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgICAgICAvLy8gRGV2aWNlIGlkP1xyXG4gICAgfVxyXG4gICAgRGVmYXVsdEV2ZW50LnByb3RvdHlwZS5nZXRFdmVudENvdW50ID0gZnVuY3Rpb24gKGV2ZW50TmFtZSwgZXZlbnRDb3VudCkge1xyXG4gICAgICAgIGlmICghZXZlbnRDb3VudFtldmVudE5hbWVdKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZXZlbnRDb3VudFtldmVudE5hbWVdO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBEZWZhdWx0RXZlbnQ7XHJcbn0oVGVsZW1ldHJ5RXZlbnQpKTtcclxuZXhwb3J0IGRlZmF1bHQgRGVmYXVsdEV2ZW50O1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1EZWZhdWx0RXZlbnQuanMubWFwIiwiaW1wb3J0ICogYXMgdHNsaWJfMSBmcm9tIFwidHNsaWJcIjtcclxuaW1wb3J0IHsgVEVMRU1FVFJZX0JMT0JfRVZFTlRfTkFNRVMgfSBmcm9tIFwiLi9UZWxlbWV0cnlDb25zdGFudHNcIjtcclxuaW1wb3J0IHsgRVZFTlRfTkFNRV9LRVksIFNUQVJUX1RJTUVfS0VZLCBFTEFQU0VEX1RJTUVfS0VZIH0gZnJvbSBcIi4vVGVsZW1ldHJ5Q29uc3RhbnRzXCI7XHJcbmltcG9ydCB7IHByZXBlbmRFdmVudE5hbWVQcmVmaXggfSBmcm9tIFwiLi9UZWxlbWV0cnlVdGlsc1wiO1xyXG5pbXBvcnQgeyBDcnlwdG9VdGlscyB9IGZyb20gXCIuLi91dGlscy9DcnlwdG9VdGlsc1wiO1xyXG52YXIgVGVsZW1ldHJ5RXZlbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBUZWxlbWV0cnlFdmVudChldmVudE5hbWUsIGNvcnJlbGF0aW9uSWQpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgdGhpcy5zdGFydFRpbWVzdGFtcCA9IERhdGUubm93KCk7XHJcbiAgICAgICAgdGhpcy5ldmVudElkID0gQ3J5cHRvVXRpbHMuY3JlYXRlTmV3R3VpZCgpO1xyXG4gICAgICAgIHRoaXMuZXZlbnQgPSAoX2EgPSB7fSxcclxuICAgICAgICAgICAgX2FbcHJlcGVuZEV2ZW50TmFtZVByZWZpeChFVkVOVF9OQU1FX0tFWSldID0gZXZlbnROYW1lLFxyXG4gICAgICAgICAgICBfYVtwcmVwZW5kRXZlbnROYW1lUHJlZml4KFNUQVJUX1RJTUVfS0VZKV0gPSB0aGlzLnN0YXJ0VGltZXN0YW1wLFxyXG4gICAgICAgICAgICBfYVtwcmVwZW5kRXZlbnROYW1lUHJlZml4KEVMQVBTRURfVElNRV9LRVkpXSA9IC0xLFxyXG4gICAgICAgICAgICBfYVtcIlwiICsgVEVMRU1FVFJZX0JMT0JfRVZFTlRfTkFNRVMuTXNhbENvcnJlbGF0aW9uSWRDb25zdFN0cktleV0gPSBjb3JyZWxhdGlvbklkLFxyXG4gICAgICAgICAgICBfYSk7XHJcbiAgICB9XHJcbiAgICBUZWxlbWV0cnlFdmVudC5wcm90b3R5cGUuc2V0RWxhcHNlZFRpbWUgPSBmdW5jdGlvbiAodGltZSkge1xyXG4gICAgICAgIHRoaXMuZXZlbnRbcHJlcGVuZEV2ZW50TmFtZVByZWZpeChFTEFQU0VEX1RJTUVfS0VZKV0gPSB0aW1lO1xyXG4gICAgfTtcclxuICAgIFRlbGVtZXRyeUV2ZW50LnByb3RvdHlwZS5zdG9wID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIFNldCBkdXJhdGlvbiBvZiBldmVudFxyXG4gICAgICAgIHRoaXMuc2V0RWxhcHNlZFRpbWUoK0RhdGUubm93KCkgLSArdGhpcy5zdGFydFRpbWVzdGFtcCk7XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFRlbGVtZXRyeUV2ZW50LnByb3RvdHlwZSwgXCJ0ZWxlbWV0cnlDb3JyZWxhdGlvbklkXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXZlbnRbXCJcIiArIFRFTEVNRVRSWV9CTE9CX0VWRU5UX05BTUVTLk1zYWxDb3JyZWxhdGlvbklkQ29uc3RTdHJLZXldO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgdGhpcy5ldmVudFtcIlwiICsgVEVMRU1FVFJZX0JMT0JfRVZFTlRfTkFNRVMuTXNhbENvcnJlbGF0aW9uSWRDb25zdFN0cktleV0gPSB2YWx1ZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShUZWxlbWV0cnlFdmVudC5wcm90b3R5cGUsIFwiZXZlbnROYW1lXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXZlbnRbcHJlcGVuZEV2ZW50TmFtZVByZWZpeChFVkVOVF9OQU1FX0tFWSldO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgVGVsZW1ldHJ5RXZlbnQucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2Fzc2lnbih7fSwgdGhpcy5ldmVudCwgeyBldmVudElkOiB0aGlzLmV2ZW50SWQgfSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFRlbGVtZXRyeUV2ZW50O1xyXG59KCkpO1xyXG5leHBvcnQgZGVmYXVsdCBUZWxlbWV0cnlFdmVudDtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VGVsZW1ldHJ5RXZlbnQuanMubWFwIiwiaW1wb3J0IERlZmF1bHRFdmVudCBmcm9tIFwiLi9EZWZhdWx0RXZlbnRcIjtcclxuLy8gZm9yIHVzZSBpbiBjYWNoZSBldmVudHNcclxudmFyIE1TQUxfQ0FDSEVfRVZFTlRfVkFMVUVfUFJFRklYID0gXCJtc2FsLnRva2VuXCI7XHJcbnZhciBNU0FMX0NBQ0hFX0VWRU5UX05BTUUgPSBcIm1zYWwuY2FjaGVfZXZlbnRcIjtcclxudmFyIGNyZWF0ZUV2ZW50S2V5ID0gZnVuY3Rpb24gKGV2ZW50KSB7IHJldHVybiAoZXZlbnQudGVsZW1ldHJ5Q29ycmVsYXRpb25JZCArIFwiLVwiICsgZXZlbnQuZXZlbnRJZCArIFwiLVwiICsgZXZlbnQuZXZlbnROYW1lKTsgfTtcclxudmFyIFRlbGVtZXRyeU1hbmFnZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBUZWxlbWV0cnlNYW5hZ2VyKGNvbmZpZywgdGVsZW1ldHJ5RW1pdHRlcikge1xyXG4gICAgICAgIC8vIGNvcnJlbGF0aW9uIElkIHRvIGxpc3Qgb2YgZXZlbnRzXHJcbiAgICAgICAgdGhpcy5jb21wbGV0ZWRFdmVudHMgPSB7fTtcclxuICAgICAgICAvLyBldmVudCBrZXkgdG8gZXZlbnRcclxuICAgICAgICB0aGlzLmluUHJvZ3Jlc3NFdmVudHMgPSB7fTtcclxuICAgICAgICAvLyBjb3JyZWxhdGlvbiBpZCB0byBtYXAgb2YgZXZlbnRuYW1lIHRvIGNvdW50XHJcbiAgICAgICAgdGhpcy5ldmVudENvdW50QnlDb3JyZWxhdGlvbklkID0ge307XHJcbiAgICAgICAgLy9JbXBsZW1lbnQgYWZ0ZXIgQVBJIEVWRU5UXHJcbiAgICAgICAgdGhpcy5vbmx5U2VuZEZhaWx1cmVUZWxlbWV0cnkgPSBmYWxzZTtcclxuICAgICAgICAvLyBUT0RPIFRIUk9XIGlmIGJhZCBvcHRpb25zXHJcbiAgICAgICAgdGhpcy50ZWxlbWV0cnlQbGF0Zm9ybSA9IGNvbmZpZy5wbGF0Zm9ybTtcclxuICAgICAgICB0aGlzLmNsaWVudElkID0gY29uZmlnLmNsaWVudElkO1xyXG4gICAgICAgIHRoaXMub25seVNlbmRGYWlsdXJlVGVsZW1ldHJ5ID0gY29uZmlnLm9ubHlTZW5kRmFpbHVyZVRlbGVtZXRyeTtcclxuICAgICAgICAvLyBUT0RPLCB3aGVuIGkgZ2V0IHRvIHdpcmluZyB0aGlzIHRocm91Z2gsIHRoaW5rIGFib3V0IHdoYXQgaXQgbWVhbnMgaWZcclxuICAgICAgICAvLyBhIGRldmVsb3BlciBkb2VzIG5vdCBpbXBsZW1lbnQgdGVsZW0gYXQgYWxsLCB3ZSBzdGlsbCBpbnN0cnVtZW50LCBidXQgdGVsZW1ldHJ5RW1pdHRlciBjYW4gYmVcclxuICAgICAgICAvLyBvcHRpb25hbD9cclxuICAgICAgICB0aGlzLnRlbGVtZXRyeUVtaXR0ZXIgPSB0ZWxlbWV0cnlFbWl0dGVyO1xyXG4gICAgfVxyXG4gICAgVGVsZW1ldHJ5TWFuYWdlci5wcm90b3R5cGUuc3RhcnRFdmVudCA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIGlmICghdGhpcy50ZWxlbWV0cnlFbWl0dGVyKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGV2ZW50S2V5ID0gY3JlYXRlRXZlbnRLZXkoZXZlbnQpO1xyXG4gICAgICAgIHRoaXMuaW5Qcm9ncmVzc0V2ZW50c1tldmVudEtleV0gPSBldmVudDtcclxuICAgIH07XHJcbiAgICBUZWxlbWV0cnlNYW5hZ2VyLnByb3RvdHlwZS5zdG9wRXZlbnQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICB2YXIgZXZlbnRLZXkgPSBjcmVhdGVFdmVudEtleShldmVudCk7XHJcbiAgICAgICAgaWYgKCF0aGlzLnRlbGVtZXRyeUVtaXR0ZXIgfHwgIXRoaXMuaW5Qcm9ncmVzc0V2ZW50c1tldmVudEtleV0pIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBldmVudC5zdG9wKCk7XHJcbiAgICAgICAgdGhpcy5pbmNyZW1lbnRFdmVudENvdW50KGV2ZW50KTtcclxuICAgICAgICB2YXIgY29tcGxldGVkRXZlbnRzID0gdGhpcy5jb21wbGV0ZWRFdmVudHNbZXZlbnQudGVsZW1ldHJ5Q29ycmVsYXRpb25JZF07XHJcbiAgICAgICAgdGhpcy5jb21wbGV0ZWRFdmVudHNbZXZlbnQudGVsZW1ldHJ5Q29ycmVsYXRpb25JZF0gPSAoY29tcGxldGVkRXZlbnRzIHx8IFtdKS5jb25jYXQoW2V2ZW50XSk7XHJcbiAgICAgICAgZGVsZXRlIHRoaXMuaW5Qcm9ncmVzc0V2ZW50c1tldmVudEtleV07XHJcbiAgICB9O1xyXG4gICAgVGVsZW1ldHJ5TWFuYWdlci5wcm90b3R5cGUuZmx1c2ggPSBmdW5jdGlvbiAoY29ycmVsYXRpb25JZCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgLy8gSWYgdGhlcmUgaXMgb25seSB1bmZpbmlzaGVkIGV2ZW50cyBzaG91bGQgdGhpcyBzdGlsbCByZXR1cm4gdGhlbT9cclxuICAgICAgICBpZiAoIXRoaXMudGVsZW1ldHJ5RW1pdHRlciB8fCAhdGhpcy5jb21wbGV0ZWRFdmVudHNbY29ycmVsYXRpb25JZF0pIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgb3JwaGFuZWRFdmVudHMgPSB0aGlzLmdldE9ycGhhbmVkRXZlbnRzKGNvcnJlbGF0aW9uSWQpO1xyXG4gICAgICAgIG9ycGhhbmVkRXZlbnRzLmZvckVhY2goZnVuY3Rpb24gKGV2ZW50KSB7IHJldHVybiBfdGhpcy5pbmNyZW1lbnRFdmVudENvdW50KGV2ZW50KTsgfSk7XHJcbiAgICAgICAgdmFyIGV2ZW50c1RvRmx1c2ggPSB0aGlzLmNvbXBsZXRlZEV2ZW50c1tjb3JyZWxhdGlvbklkXS5jb25jYXQob3JwaGFuZWRFdmVudHMpO1xyXG4gICAgICAgIGRlbGV0ZSB0aGlzLmNvbXBsZXRlZEV2ZW50c1tjb3JyZWxhdGlvbklkXTtcclxuICAgICAgICB2YXIgZXZlbnRDb3VudHNUb0ZsdXNoID0gdGhpcy5ldmVudENvdW50QnlDb3JyZWxhdGlvbklkW2NvcnJlbGF0aW9uSWRdO1xyXG4gICAgICAgIGRlbGV0ZSB0aGlzLmV2ZW50Q291bnRCeUNvcnJlbGF0aW9uSWRbY29ycmVsYXRpb25JZF07XHJcbiAgICAgICAgLy8gVE9ETyBhZGQgZnVuY2l0b25hbGl0eSBmb3Igb25seUZsdXNoRmFpbHVyZXMgYWZ0ZXIgaW1wbGVtZW50aW5nIGFwaSBldmVudD8gPz9cclxuICAgICAgICBpZiAoIWV2ZW50c1RvRmx1c2ggfHwgIWV2ZW50c1RvRmx1c2gubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGRlZmF1bHRFdmVudCA9IG5ldyBEZWZhdWx0RXZlbnQodGhpcy50ZWxlbWV0cnlQbGF0Zm9ybSwgY29ycmVsYXRpb25JZCwgdGhpcy5jbGllbnRJZCwgZXZlbnRDb3VudHNUb0ZsdXNoKTtcclxuICAgICAgICB2YXIgZXZlbnRzV2l0aERlZmF1bHRFdmVudCA9IGV2ZW50c1RvRmx1c2guY29uY2F0KFtkZWZhdWx0RXZlbnRdKTtcclxuICAgICAgICB0aGlzLnRlbGVtZXRyeUVtaXR0ZXIoZXZlbnRzV2l0aERlZmF1bHRFdmVudC5tYXAoZnVuY3Rpb24gKGUpIHsgcmV0dXJuIGUuZ2V0KCk7IH0pKTtcclxuICAgIH07XHJcbiAgICBUZWxlbWV0cnlNYW5hZ2VyLnByb3RvdHlwZS5pbmNyZW1lbnRFdmVudENvdW50ID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIC8vIFRPRE8sIG5hbWUgY2FjaGUgZXZlbnQgZGlmZmVyZW50P1xyXG4gICAgICAgIC8vIGlmIHR5cGUgaXMgY2FjaGUgZXZlbnQsIGNoYW5nZSBuYW1lXHJcbiAgICAgICAgdmFyIGV2ZW50TmFtZSA9IGV2ZW50LmV2ZW50TmFtZTtcclxuICAgICAgICB2YXIgZXZlbnRDb3VudCA9IHRoaXMuZXZlbnRDb3VudEJ5Q29ycmVsYXRpb25JZFtldmVudC50ZWxlbWV0cnlDb3JyZWxhdGlvbklkXTtcclxuICAgICAgICBpZiAoIWV2ZW50Q291bnQpIHtcclxuICAgICAgICAgICAgdGhpcy5ldmVudENvdW50QnlDb3JyZWxhdGlvbklkW2V2ZW50LnRlbGVtZXRyeUNvcnJlbGF0aW9uSWRdID0gKF9hID0ge30sXHJcbiAgICAgICAgICAgICAgICBfYVtldmVudE5hbWVdID0gMSxcclxuICAgICAgICAgICAgICAgIF9hKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGV2ZW50Q291bnRbZXZlbnROYW1lXSA9IGV2ZW50Q291bnRbZXZlbnROYW1lXSA/IGV2ZW50Q291bnRbZXZlbnROYW1lXSArIDEgOiAxO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBUZWxlbWV0cnlNYW5hZ2VyLnByb3RvdHlwZS5nZXRPcnBoYW5lZEV2ZW50cyA9IGZ1bmN0aW9uIChjb3JyZWxhdGlvbklkKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gT2JqZWN0LmtleXModGhpcy5pblByb2dyZXNzRXZlbnRzKVxyXG4gICAgICAgICAgICAucmVkdWNlKGZ1bmN0aW9uIChtZW1vLCBldmVudEtleSkge1xyXG4gICAgICAgICAgICBpZiAoZXZlbnRLZXkuaW5kZXhPZihjb3JyZWxhdGlvbklkKSAhPT0gLTEpIHtcclxuICAgICAgICAgICAgICAgIHZhciBldmVudF8xID0gX3RoaXMuaW5Qcm9ncmVzc0V2ZW50c1tldmVudEtleV07XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgX3RoaXMuaW5Qcm9ncmVzc0V2ZW50c1tldmVudEtleV07XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbWVtby5jb25jYXQoW2V2ZW50XzFdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gbWVtbztcclxuICAgICAgICB9LCBbXSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFRlbGVtZXRyeU1hbmFnZXI7XHJcbn0oKSk7XHJcbmV4cG9ydCBkZWZhdWx0IFRlbGVtZXRyeU1hbmFnZXI7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRlbGVtZXRyeU1hbmFnZXIuanMubWFwIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cclxuaW1wb3J0ICogYXMgdHNsaWJfMSBmcm9tIFwidHNsaWJcIjtcclxuaW1wb3J0IHsgQWNjZXNzVG9rZW5LZXkgfSBmcm9tIFwiLi9BY2Nlc3NUb2tlbktleVwiO1xyXG5pbXBvcnQgeyBBY2Nlc3NUb2tlblZhbHVlIH0gZnJvbSBcIi4vQWNjZXNzVG9rZW5WYWx1ZVwiO1xyXG5pbXBvcnQgeyBTZXJ2ZXJSZXF1ZXN0UGFyYW1ldGVycyB9IGZyb20gXCIuL1NlcnZlclJlcXVlc3RQYXJhbWV0ZXJzXCI7XHJcbmltcG9ydCB7IENsaWVudEluZm8gfSBmcm9tIFwiLi9DbGllbnRJbmZvXCI7XHJcbmltcG9ydCB7IENvbnN0YW50cywgbGlicmFyeVZlcnNpb24gfSBmcm9tIFwiLi91dGlscy9Db25zdGFudHNcIjtcclxuaW1wb3J0IHsgSWRUb2tlbiB9IGZyb20gXCIuL0lkVG9rZW5cIjtcclxuaW1wb3J0IHsgU3RvcmFnZSB9IGZyb20gXCIuL1N0b3JhZ2VcIjtcclxuaW1wb3J0IHsgQWNjb3VudCB9IGZyb20gXCIuL0FjY291bnRcIjtcclxuaW1wb3J0IHsgU2NvcGVTZXQgfSBmcm9tIFwiLi9TY29wZVNldFwiO1xyXG5pbXBvcnQgeyBTdHJpbmdVdGlscyB9IGZyb20gXCIuL3V0aWxzL1N0cmluZ1V0aWxzXCI7XHJcbmltcG9ydCB7IENyeXB0b1V0aWxzIH0gZnJvbSBcIi4vdXRpbHMvQ3J5cHRvVXRpbHNcIjtcclxuaW1wb3J0IHsgVG9rZW5VdGlscyB9IGZyb20gXCIuL3V0aWxzL1Rva2VuVXRpbHNcIjtcclxuaW1wb3J0IHsgVGltZVV0aWxzIH0gZnJvbSBcIi4vdXRpbHMvVGltZVV0aWxzXCI7XHJcbmltcG9ydCB7IFVybFV0aWxzIH0gZnJvbSBcIi4vdXRpbHMvVXJsVXRpbHNcIjtcclxuaW1wb3J0IHsgUmVzcG9uc2VVdGlscyB9IGZyb20gXCIuL3V0aWxzL1Jlc3BvbnNlVXRpbHNcIjtcclxuaW1wb3J0IHsgQXV0aG9yaXR5RmFjdG9yeSB9IGZyb20gXCIuL0F1dGhvcml0eUZhY3RvcnlcIjtcclxuaW1wb3J0IHsgYnVpbGRDb25maWd1cmF0aW9uIH0gZnJvbSBcIi4vQ29uZmlndXJhdGlvblwiO1xyXG5pbXBvcnQgeyBDbGllbnRDb25maWd1cmF0aW9uRXJyb3IgfSBmcm9tIFwiLi9lcnJvci9DbGllbnRDb25maWd1cmF0aW9uRXJyb3JcIjtcclxuaW1wb3J0IHsgQXV0aEVycm9yIH0gZnJvbSBcIi4vZXJyb3IvQXV0aEVycm9yXCI7XHJcbmltcG9ydCB7IENsaWVudEF1dGhFcnJvciwgQ2xpZW50QXV0aEVycm9yTWVzc2FnZSB9IGZyb20gXCIuL2Vycm9yL0NsaWVudEF1dGhFcnJvclwiO1xyXG5pbXBvcnQgeyBTZXJ2ZXJFcnJvciB9IGZyb20gXCIuL2Vycm9yL1NlcnZlckVycm9yXCI7XHJcbmltcG9ydCB7IEludGVyYWN0aW9uUmVxdWlyZWRBdXRoRXJyb3IgfSBmcm9tIFwiLi9lcnJvci9JbnRlcmFjdGlvblJlcXVpcmVkQXV0aEVycm9yXCI7XHJcbmltcG9ydCB7IGJ1aWxkUmVzcG9uc2VTdGF0ZU9ubHkgfSBmcm9tIFwiLi9BdXRoUmVzcG9uc2VcIjtcclxuaW1wb3J0IFRlbGVtZXRyeU1hbmFnZXIgZnJvbSBcIi4vdGVsZW1ldHJ5L1RlbGVtZXRyeU1hbmFnZXJcIjtcclxuLy8gZGVmYXVsdCBhdXRob3JpdHlcclxudmFyIERFRkFVTFRfQVVUSE9SSVRZID0gXCJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vY29tbW9uXCI7XHJcbi8qKlxyXG4gKiBAaGlkZGVuXHJcbiAqIEBpZ25vcmVcclxuICogcmVzcG9uc2VfdHlwZSBmcm9tIE9wZW5JRENvbm5lY3RcclxuICogUmVmZXJlbmNlczogaHR0cHM6Ly9vcGVuaWQubmV0L3NwZWNzL29hdXRoLXYyLW11bHRpcGxlLXJlc3BvbnNlLXR5cGVzLTFfMC5odG1sICYgaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzY3NDkjc2VjdGlvbi00LjIuMVxyXG4gKiBTaW5jZSB3ZSBzdXBwb3J0IG9ubHkgaW1wbGljaXQgZmxvdyBpbiB0aGlzIGxpYnJhcnksIHdlIHJlc3RyaWN0IHRoZSByZXNwb25zZV90eXBlIHN1cHBvcnQgdG8gb25seSAndG9rZW4nIGFuZCAnaWRfdG9rZW4nXHJcbiAqXHJcbiAqL1xyXG52YXIgUmVzcG9uc2VUeXBlcyA9IHtcclxuICAgIGlkX3Rva2VuOiBcImlkX3Rva2VuXCIsXHJcbiAgICB0b2tlbjogXCJ0b2tlblwiLFxyXG4gICAgaWRfdG9rZW5fdG9rZW46IFwiaWRfdG9rZW4gdG9rZW5cIlxyXG59O1xyXG4vKipcclxuICogQGhpZGRlblxyXG4gKiBAaWdub3JlXHJcbiAqIEEgd3JhcHBlciB0byBoYW5kbGUgdGhlIHRva2VuIHJlc3BvbnNlL2Vycm9yIHdpdGhpbiB0aGUgaUZyYW1lIGFsd2F5c1xyXG4gKlxyXG4gKiBAcGFyYW0gdGFyZ2V0XHJcbiAqIEBwYXJhbSBwcm9wZXJ0eUtleVxyXG4gKiBAcGFyYW0gZGVzY3JpcHRvclxyXG4gKi9cclxudmFyIHJlc29sdmVUb2tlbk9ubHlJZk91dE9mSWZyYW1lID0gZnVuY3Rpb24gKHRhcmdldCwgcHJvcGVydHlLZXksIGRlc2NyaXB0b3IpIHtcclxuICAgIHZhciB0b2tlbkFjcXVpc2l0aW9uTWV0aG9kID0gZGVzY3JpcHRvci52YWx1ZTtcclxuICAgIGRlc2NyaXB0b3IudmFsdWUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGFyZ3MgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmlzSW5JZnJhbWUoKVxyXG4gICAgICAgICAgICA/IG5ldyBQcm9taXNlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgOiB0b2tlbkFjcXVpc2l0aW9uTWV0aG9kLmFwcGx5KHRoaXMsIGFyZ3MpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBkZXNjcmlwdG9yO1xyXG59O1xyXG4vKipcclxuICogVXNlckFnZW50QXBwbGljYXRpb24gY2xhc3NcclxuICpcclxuICogT2JqZWN0IEluc3RhbmNlIHRoYXQgdGhlIGRldmVsb3BlciBjYW4gdXNlIHRvIG1ha2UgbG9naW5YWCBPUiBhY3F1aXJlVG9rZW5YWCBmdW5jdGlvbnNcclxuICovXHJcbnZhciBVc2VyQWdlbnRBcHBsaWNhdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIC8qKlxyXG4gICAgICogQGNvbnN0cnVjdG9yXHJcbiAgICAgKiBDb25zdHJ1Y3RvciBmb3IgdGhlIFVzZXJBZ2VudEFwcGxpY2F0aW9uIHVzZWQgdG8gaW5zdGFudGlhdGUgdGhlIFVzZXJBZ2VudEFwcGxpY2F0aW9uIG9iamVjdFxyXG4gICAgICpcclxuICAgICAqIEltcG9ydGFudCBhdHRyaWJ1dGVzIGluIHRoZSBDb25maWd1cmF0aW9uIG9iamVjdCBmb3IgYXV0aCBhcmU6XHJcbiAgICAgKiAtIGNsaWVudElEOiB0aGUgYXBwbGljYXRpb24gSUQgb2YgeW91ciBhcHBsaWNhdGlvbi5cclxuICAgICAqIFlvdSBjYW4gb2J0YWluIG9uZSBieSByZWdpc3RlcmluZyB5b3VyIGFwcGxpY2F0aW9uIHdpdGggb3VyIEFwcGxpY2F0aW9uIHJlZ2lzdHJhdGlvbiBwb3J0YWwgOiBodHRwczovL3BvcnRhbC5henVyZS5jb20vI2JsYWRlL01pY3Jvc29mdF9BQURfSUFNL0FjdGl2ZURpcmVjdG9yeU1lbnVCbGFkZS9SZWdpc3RlcmVkQXBwc1ByZXZpZXdcclxuICAgICAqIC0gYXV0aG9yaXR5OiB0aGUgYXV0aG9yaXR5IFVSTCBmb3IgeW91ciBhcHBsaWNhdGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBJbiBBenVyZSBBRCwgYXV0aG9yaXR5IGlzIGEgVVJMIGluZGljYXRpbmcgdGhlIEF6dXJlIGFjdGl2ZSBkaXJlY3RvcnkgdGhhdCBNU0FMIHVzZXMgdG8gb2J0YWluIHRva2Vucy5cclxuICAgICAqIEl0IGlzIG9mIHRoZSBmb3JtIGh0dHBzOi8vbG9naW4ubWljcm9zb2Z0b25saW5lLmNvbS8mbHQ7RW50ZXJfdGhlX1RlbmFudF9JbmZvX0hlcmUmZ3Q7LlxyXG4gICAgICogSWYgeW91ciBhcHBsaWNhdGlvbiBzdXBwb3J0cyBBY2NvdW50cyBpbiBvbmUgb3JnYW5pemF0aW9uYWwgZGlyZWN0b3J5LCByZXBsYWNlIFwiRW50ZXJfdGhlX1RlbmFudF9JbmZvX0hlcmVcIiB2YWx1ZSB3aXRoIHRoZSBUZW5hbnQgSWQgb3IgVGVuYW50IG5hbWUgKGZvciBleGFtcGxlLCBjb250b3NvLm1pY3Jvc29mdC5jb20pLlxyXG4gICAgICogSWYgeW91ciBhcHBsaWNhdGlvbiBzdXBwb3J0cyBBY2NvdW50cyBpbiBhbnkgb3JnYW5pemF0aW9uYWwgZGlyZWN0b3J5LCByZXBsYWNlIFwiRW50ZXJfdGhlX1RlbmFudF9JbmZvX0hlcmVcIiB2YWx1ZSB3aXRoIG9yZ2FuaXphdGlvbnMuXHJcbiAgICAgKiBJZiB5b3VyIGFwcGxpY2F0aW9uIHN1cHBvcnRzIEFjY291bnRzIGluIGFueSBvcmdhbml6YXRpb25hbCBkaXJlY3RvcnkgYW5kIHBlcnNvbmFsIE1pY3Jvc29mdCBhY2NvdW50cywgcmVwbGFjZSBcIkVudGVyX3RoZV9UZW5hbnRfSW5mb19IZXJlXCIgdmFsdWUgd2l0aCBjb21tb24uXHJcbiAgICAgKiBUbyByZXN0cmljdCBzdXBwb3J0IHRvIFBlcnNvbmFsIE1pY3Jvc29mdCBhY2NvdW50cyBvbmx5LCByZXBsYWNlIFwiRW50ZXJfdGhlX1RlbmFudF9JbmZvX0hlcmVcIiB2YWx1ZSB3aXRoIGNvbnN1bWVycy5cclxuICAgICAqXHJcbiAgICAgKlxyXG4gICAgICogSW4gQXp1cmUgQjJDLCBhdXRob3JpdHkgaXMgb2YgdGhlIGZvcm0gaHR0cHM6Ly8mbHQ7aW5zdGFuY2UmZ3Q7L3RmcC8mbHQ7dGVuYW50Jmd0Oy8mbHQ7cG9saWN5TmFtZSZndDsvXHJcbiAgXHJcbiAgICAgKiBAcGFyYW0ge0BsaW5rIChDb25maWd1cmF0aW9uOnR5cGUpfSBjb25maWd1cmF0aW9uIG9iamVjdCBmb3IgdGhlIE1TQUwgVXNlckFnZW50QXBwbGljYXRpb24gaW5zdGFuY2VcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gVXNlckFnZW50QXBwbGljYXRpb24oY29uZmlndXJhdGlvbikge1xyXG4gICAgICAgIC8vIGNhbGxiYWNrcyBmb3IgdG9rZW4vZXJyb3JcclxuICAgICAgICB0aGlzLmF1dGhSZXNwb25zZUNhbGxiYWNrID0gbnVsbDtcclxuICAgICAgICB0aGlzLnRva2VuUmVjZWl2ZWRDYWxsYmFjayA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5lcnJvclJlY2VpdmVkQ2FsbGJhY2sgPSBudWxsO1xyXG4gICAgICAgIC8vIFNldCB0aGUgQ29uZmlndXJhdGlvblxyXG4gICAgICAgIHRoaXMuY29uZmlnID0gYnVpbGRDb25maWd1cmF0aW9uKGNvbmZpZ3VyYXRpb24pO1xyXG4gICAgICAgIC8vIFNldCB0aGUgY2FsbGJhY2sgYm9vbGVhblxyXG4gICAgICAgIHRoaXMucmVkaXJlY3RDYWxsYmFja3NTZXQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmxvZ2dlciA9IHRoaXMuY29uZmlnLnN5c3RlbS5sb2dnZXI7XHJcbiAgICAgICAgdGhpcy5jbGllbnRJZCA9IHRoaXMuY29uZmlnLmF1dGguY2xpZW50SWQ7XHJcbiAgICAgICAgdGhpcy5pbkNvb2tpZSA9IHRoaXMuY29uZmlnLmNhY2hlLnN0b3JlQXV0aFN0YXRlSW5Db29raWU7XHJcbiAgICAgICAgdGhpcy50ZWxlbWV0cnlNYW5hZ2VyID0gdGhpcy5nZXRUZWxlbWV0cnlNYW5hZ2VyRnJvbUNvbmZpZyh0aGlzLmNvbmZpZy5zeXN0ZW0udGVsZW1ldHJ5LCB0aGlzLmNsaWVudElkKTtcclxuICAgICAgICAvLyBpZiBubyBhdXRob3JpdHkgaXMgcGFzc2VkLCBzZXQgdGhlIGRlZmF1bHQ6IFwiaHR0cHM6Ly9sb2dpbi5taWNyb3NvZnRvbmxpbmUuY29tL2NvbW1vblwiXHJcbiAgICAgICAgdGhpcy5hdXRob3JpdHkgPSB0aGlzLmNvbmZpZy5hdXRoLmF1dGhvcml0eSB8fCBERUZBVUxUX0FVVEhPUklUWTtcclxuICAgICAgICAvLyB0cmFjayBsb2dpbiBhbmQgYWNxdWlyZVRva2VuIGluIHByb2dyZXNzXHJcbiAgICAgICAgdGhpcy5sb2dpbkluUHJvZ3Jlc3MgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmFjcXVpcmVUb2tlbkluUHJvZ3Jlc3MgPSBmYWxzZTtcclxuICAgICAgICAvLyBjYWNoZSBrZXlzIG1zYWwgLSB0eXBlc2NyaXB0IHRocm93cyBhbiBlcnJvciBpZiBhbnkgdmFsdWUgb3RoZXIgdGhhbiBcImxvY2FsU3RvcmFnZVwiIG9yIFwic2Vzc2lvblN0b3JhZ2VcIiBpcyBwYXNzZWRcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICB0aGlzLmNhY2hlU3RvcmFnZSA9IG5ldyBTdG9yYWdlKHRoaXMuY29uZmlnLmNhY2hlLmNhY2hlTG9jYXRpb24pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICB0aHJvdyBDbGllbnRDb25maWd1cmF0aW9uRXJyb3IuY3JlYXRlSW52YWxpZENhY2hlTG9jYXRpb25Db25maWdFcnJvcih0aGlzLmNvbmZpZy5jYWNoZS5jYWNoZUxvY2F0aW9uKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gSW5pdGlhbGl6ZSB3aW5kb3cgaGFuZGxpbmcgY29kZVxyXG4gICAgICAgIHdpbmRvdy5vcGVuZWRXaW5kb3dzID0gW107XHJcbiAgICAgICAgd2luZG93LmFjdGl2ZVJlbmV3YWxzID0ge307XHJcbiAgICAgICAgd2luZG93LnJlbmV3U3RhdGVzID0gW107XHJcbiAgICAgICAgd2luZG93LmNhbGxiYWNrTWFwcGVkVG9SZW5ld1N0YXRlcyA9IHt9O1xyXG4gICAgICAgIHdpbmRvdy5wcm9taXNlTWFwcGVkVG9SZW5ld1N0YXRlcyA9IHt9O1xyXG4gICAgICAgIHdpbmRvdy5tc2FsID0gdGhpcztcclxuICAgICAgICB2YXIgdXJsSGFzaCA9IHdpbmRvdy5sb2NhdGlvbi5oYXNoO1xyXG4gICAgICAgIHZhciB1cmxDb250YWluc0hhc2ggPSB0aGlzLnVybENvbnRhaW5zSGFzaCh1cmxIYXNoKTtcclxuICAgICAgICAvLyBPbiB0aGUgc2VydmVyIDMwMiAtIFJlZGlyZWN0LCBoYW5kbGUgdGhpc1xyXG4gICAgICAgIGlmICghdGhpcy5jb25maWcuZnJhbWV3b3JrLmlzQW5ndWxhcikge1xyXG4gICAgICAgICAgICBpZiAodXJsQ29udGFpbnNIYXNoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUF1dGhlbnRpY2F0aW9uUmVzcG9uc2UodXJsSGFzaCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVXNlckFnZW50QXBwbGljYXRpb24ucHJvdG90eXBlLCBcImF1dGhvcml0eVwiLCB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogTWV0aG9kIHRvIG1hbmFnZSB0aGUgYXV0aG9yaXR5IFVSTC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IGF1dGhvcml0eVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hdXRob3JpdHlJbnN0YW5jZS5DYW5vbmljYWxBdXRob3JpdHk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBzZXR0ZXIgZm9yIHRoZSBhdXRob3JpdHkgVVJMXHJcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGF1dGhvcml0eVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIC8vIElmIHRoZSBkZXZlbG9wZXIgcGFzc2VzIGFuIGF1dGhvcml0eSwgY3JlYXRlIGFuIGluc3RhbmNlXHJcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXV0aG9yaXR5SW5zdGFuY2UgPSBBdXRob3JpdHlGYWN0b3J5LkNyZWF0ZUluc3RhbmNlKHZhbCwgdGhpcy5jb25maWcuYXV0aC52YWxpZGF0ZUF1dGhvcml0eSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICAvKipcclxuICAgICAqIEdldCB0aGUgY3VycmVudCBhdXRob3JpdHkgaW5zdGFuY2UgZnJvbSB0aGUgTVNBTCBjb25maWd1cmF0aW9uIG9iamVjdFxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIHtAbGluayBBdXRob3JpdHl9IGF1dGhvcml0eSBpbnN0YW5jZVxyXG4gICAgICovXHJcbiAgICBVc2VyQWdlbnRBcHBsaWNhdGlvbi5wcm90b3R5cGUuZ2V0QXV0aG9yaXR5SW5zdGFuY2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYXV0aG9yaXR5SW5zdGFuY2U7XHJcbiAgICB9O1xyXG4gICAgVXNlckFnZW50QXBwbGljYXRpb24ucHJvdG90eXBlLmhhbmRsZVJlZGlyZWN0Q2FsbGJhY2sgPSBmdW5jdGlvbiAoYXV0aE9yVG9rZW5DYWxsYmFjaywgZXJyb3JSZWNlaXZlZENhbGxiYWNrKSB7XHJcbiAgICAgICAgaWYgKCFhdXRoT3JUb2tlbkNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVkaXJlY3RDYWxsYmFja3NTZXQgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhyb3cgQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yLmNyZWF0ZUludmFsaWRDYWxsYmFja09iamVjdEVycm9yKGF1dGhPclRva2VuQ2FsbGJhY2spO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBTZXQgY2FsbGJhY2tzXHJcbiAgICAgICAgaWYgKGVycm9yUmVjZWl2ZWRDYWxsYmFjaykge1xyXG4gICAgICAgICAgICB0aGlzLnRva2VuUmVjZWl2ZWRDYWxsYmFjayA9IGF1dGhPclRva2VuQ2FsbGJhY2s7XHJcbiAgICAgICAgICAgIHRoaXMuZXJyb3JSZWNlaXZlZENhbGxiYWNrID0gZXJyb3JSZWNlaXZlZENhbGxiYWNrO1xyXG4gICAgICAgICAgICB0aGlzLmxvZ2dlci53YXJuaW5nKFwiVGhpcyBvdmVybG9hZCBmb3IgY2FsbGJhY2sgaXMgZGVwcmVjYXRlZCAtIHBsZWFzZSBjaGFuZ2UgdGhlIGZvcm1hdCBvZiB0aGUgY2FsbGJhY2tzIHRvIGEgc2luZ2xlIGNhbGxiYWNrIGFzIHNob3duOiAoZXJyOiBBdXRoRXJyb3IsIHJlc3BvbnNlOiBBdXRoUmVzcG9uc2UpLlwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXV0aFJlc3BvbnNlQ2FsbGJhY2sgPSBhdXRoT3JUb2tlbkNhbGxiYWNrO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnJlZGlyZWN0Q2FsbGJhY2tzU2V0ID0gdHJ1ZTtcclxuICAgICAgICAvLyBPbiB0aGUgc2VydmVyIDMwMiAtIFJlZGlyZWN0LCBoYW5kbGUgdGhpc1xyXG4gICAgICAgIGlmICghdGhpcy5jb25maWcuZnJhbWV3b3JrLmlzQW5ndWxhcikge1xyXG4gICAgICAgICAgICB2YXIgY2FjaGVkSGFzaCA9IHRoaXMuY2FjaGVTdG9yYWdlLmdldEl0ZW0oQ29uc3RhbnRzLnVybEhhc2gpO1xyXG4gICAgICAgICAgICBpZiAoY2FjaGVkSGFzaCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzQ2FsbEJhY2soY2FjaGVkSGFzaCwgbnVsbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgVXNlckFnZW50QXBwbGljYXRpb24ucHJvdG90eXBlLmF1dGhSZXNwb25zZUhhbmRsZXIgPSBmdW5jdGlvbiAoaW50ZXJhY3Rpb25UeXBlLCByZXNwb25zZSwgcmVzb2x2ZSkge1xyXG4gICAgICAgIGlmIChpbnRlcmFjdGlvblR5cGUgPT09IENvbnN0YW50cy5pbnRlcmFjdGlvblR5cGVSZWRpcmVjdCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5lcnJvclJlY2VpdmVkQ2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudG9rZW5SZWNlaXZlZENhbGxiYWNrKHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLmF1dGhSZXNwb25zZUNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmF1dGhSZXNwb25zZUNhbGxiYWNrKG51bGwsIHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChpbnRlcmFjdGlvblR5cGUgPT09IENvbnN0YW50cy5pbnRlcmFjdGlvblR5cGVQb3B1cCkge1xyXG4gICAgICAgICAgICByZXNvbHZlKHJlc3BvbnNlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRocm93IENsaWVudEF1dGhFcnJvci5jcmVhdGVJbnZhbGlkSW50ZXJhY3Rpb25UeXBlRXJyb3IoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgVXNlckFnZW50QXBwbGljYXRpb24ucHJvdG90eXBlLmF1dGhFcnJvckhhbmRsZXIgPSBmdW5jdGlvbiAoaW50ZXJhY3Rpb25UeXBlLCBhdXRoRXJyLCByZXNwb25zZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgaWYgKGludGVyYWN0aW9uVHlwZSA9PT0gQ29uc3RhbnRzLmludGVyYWN0aW9uVHlwZVJlZGlyZWN0KSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmVycm9yUmVjZWl2ZWRDYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lcnJvclJlY2VpdmVkQ2FsbGJhY2soYXV0aEVyciwgcmVzcG9uc2UuYWNjb3VudFN0YXRlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYXV0aFJlc3BvbnNlQ2FsbGJhY2soYXV0aEVyciwgcmVzcG9uc2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGludGVyYWN0aW9uVHlwZSA9PT0gQ29uc3RhbnRzLmludGVyYWN0aW9uVHlwZVBvcHVwKSB7XHJcbiAgICAgICAgICAgIHJlamVjdChhdXRoRXJyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRocm93IENsaWVudEF1dGhFcnJvci5jcmVhdGVJbnZhbGlkSW50ZXJhY3Rpb25UeXBlRXJyb3IoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLy8jZW5kcmVnaW9uXHJcbiAgICAvKipcclxuICAgICAqIFVzZSB3aGVuIGluaXRpYXRpbmcgdGhlIGxvZ2luIHByb2Nlc3MgYnkgcmVkaXJlY3RpbmcgdGhlIHVzZXIncyBicm93c2VyIHRvIHRoZSBhdXRob3JpemF0aW9uIGVuZHBvaW50LlxyXG4gICAgICogQHBhcmFtIHtAbGluayAoQXV0aGVudGljYXRpb25QYXJhbWV0ZXJzOnR5cGUpfVxyXG4gICAgICovXHJcbiAgICBVc2VyQWdlbnRBcHBsaWNhdGlvbi5wcm90b3R5cGUubG9naW5SZWRpcmVjdCA9IGZ1bmN0aW9uIChyZXF1ZXN0KSB7XHJcbiAgICAgICAgLy8gVGhyb3cgZXJyb3IgaWYgY2FsbGJhY2tzIGFyZSBub3Qgc2V0IGJlZm9yZSByZWRpcmVjdFxyXG4gICAgICAgIGlmICghdGhpcy5yZWRpcmVjdENhbGxiYWNrc1NldCkge1xyXG4gICAgICAgICAgICB0aHJvdyBDbGllbnRDb25maWd1cmF0aW9uRXJyb3IuY3JlYXRlUmVkaXJlY3RDYWxsYmFja3NOb3RTZXRFcnJvcigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmFjcXVpcmVUb2tlbkludGVyYWN0aXZlKENvbnN0YW50cy5pbnRlcmFjdGlvblR5cGVSZWRpcmVjdCwgdHJ1ZSwgcmVxdWVzdCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBVc2Ugd2hlbiB5b3Ugd2FudCB0byBvYnRhaW4gYW4gYWNjZXNzX3Rva2VuIGZvciB5b3VyIEFQSSBieSByZWRpcmVjdGluZyB0aGUgdXNlcidzIGJyb3dzZXIgd2luZG93IHRvIHRoZSBhdXRob3JpemF0aW9uIGVuZHBvaW50LlxyXG4gICAgICogQHBhcmFtIHtAbGluayAoQXV0aGVudGljYXRpb25QYXJhbWV0ZXJzOnR5cGUpfVxyXG4gICAgICpcclxuICAgICAqIFRvIHJlbmV3IGlkVG9rZW4sIHBsZWFzZSBwYXNzIGNsaWVudElkIGFzIHRoZSBvbmx5IHNjb3BlIGluIHRoZSBBdXRoZW50aWNhdGlvbiBQYXJhbWV0ZXJzXHJcbiAgICAgKi9cclxuICAgIFVzZXJBZ2VudEFwcGxpY2F0aW9uLnByb3RvdHlwZS5hY3F1aXJlVG9rZW5SZWRpcmVjdCA9IGZ1bmN0aW9uIChyZXF1ZXN0KSB7XHJcbiAgICAgICAgaWYgKCFyZXF1ZXN0KSB7XHJcbiAgICAgICAgICAgIHRocm93IENsaWVudENvbmZpZ3VyYXRpb25FcnJvci5jcmVhdGVFbXB0eVJlcXVlc3RFcnJvcigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBUaHJvdyBlcnJvciBpZiBjYWxsYmFja3MgYXJlIG5vdCBzZXQgYmVmb3JlIHJlZGlyZWN0XHJcbiAgICAgICAgaWYgKCF0aGlzLnJlZGlyZWN0Q2FsbGJhY2tzU2V0KSB7XHJcbiAgICAgICAgICAgIHRocm93IENsaWVudENvbmZpZ3VyYXRpb25FcnJvci5jcmVhdGVSZWRpcmVjdENhbGxiYWNrc05vdFNldEVycm9yKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuYWNxdWlyZVRva2VuSW50ZXJhY3RpdmUoQ29uc3RhbnRzLmludGVyYWN0aW9uVHlwZVJlZGlyZWN0LCBmYWxzZSwgcmVxdWVzdCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBVc2Ugd2hlbiBpbml0aWF0aW5nIHRoZSBsb2dpbiBwcm9jZXNzIHZpYSBvcGVuaW5nIGEgcG9wdXAgd2luZG93IGluIHRoZSB1c2VyJ3MgYnJvd3NlclxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7QGxpbmsgKEF1dGhlbnRpY2F0aW9uUGFyYW1ldGVyczp0eXBlKX1cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZS48QXV0aFJlc3BvbnNlPn0gLSBhIHByb21pc2UgdGhhdCBpcyBmdWxmaWxsZWQgd2hlbiB0aGlzIGZ1bmN0aW9uIGhhcyBjb21wbGV0ZWQsIG9yIHJlamVjdGVkIGlmIGFuIGVycm9yIHdhcyByYWlzZWQuIFJldHVybnMgdGhlIHtAbGluayBBdXRoUmVzcG9uc2V9IG9iamVjdFxyXG4gICAgICovXHJcbiAgICBVc2VyQWdlbnRBcHBsaWNhdGlvbi5wcm90b3R5cGUubG9naW5Qb3B1cCA9IGZ1bmN0aW9uIChyZXF1ZXN0KSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICBfdGhpcy5hY3F1aXJlVG9rZW5JbnRlcmFjdGl2ZShDb25zdGFudHMuaW50ZXJhY3Rpb25UeXBlUG9wdXAsIHRydWUsIHJlcXVlc3QsIHJlc29sdmUsIHJlamVjdCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBVc2Ugd2hlbiB5b3Ugd2FudCB0byBvYnRhaW4gYW4gYWNjZXNzX3Rva2VuIGZvciB5b3VyIEFQSSB2aWEgb3BlbmluZyBhIHBvcHVwIHdpbmRvdyBpbiB0aGUgdXNlcidzIGJyb3dzZXJcclxuICAgICAqIEBwYXJhbSB7QGxpbmsgQXV0aGVudGljYXRpb25QYXJhbWV0ZXJzfVxyXG4gICAgICpcclxuICAgICAqIFRvIHJlbmV3IGlkVG9rZW4sIHBsZWFzZSBwYXNzIGNsaWVudElkIGFzIHRoZSBvbmx5IHNjb3BlIGluIHRoZSBBdXRoZW50aWNhdGlvbiBQYXJhbWV0ZXJzXHJcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZS48QXV0aFJlc3BvbnNlPn0gLSBhIHByb21pc2UgdGhhdCBpcyBmdWxmaWxsZWQgd2hlbiB0aGlzIGZ1bmN0aW9uIGhhcyBjb21wbGV0ZWQsIG9yIHJlamVjdGVkIGlmIGFuIGVycm9yIHdhcyByYWlzZWQuIFJldHVybnMgdGhlIHtAbGluayBBdXRoUmVzcG9uc2V9IG9iamVjdFxyXG4gICAgICovXHJcbiAgICBVc2VyQWdlbnRBcHBsaWNhdGlvbi5wcm90b3R5cGUuYWNxdWlyZVRva2VuUG9wdXAgPSBmdW5jdGlvbiAocmVxdWVzdCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgaWYgKCFyZXF1ZXN0KSB7XHJcbiAgICAgICAgICAgIHRocm93IENsaWVudENvbmZpZ3VyYXRpb25FcnJvci5jcmVhdGVFbXB0eVJlcXVlc3RFcnJvcigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICBfdGhpcy5hY3F1aXJlVG9rZW5JbnRlcmFjdGl2ZShDb25zdGFudHMuaW50ZXJhY3Rpb25UeXBlUG9wdXAsIGZhbHNlLCByZXF1ZXN0LCByZXNvbHZlLCByZWplY3QpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8vI3JlZ2lvbiBBY3F1aXJlIFRva2VuXHJcbiAgICAvKipcclxuICAgICAqIFVzZSB3aGVuIGluaXRpYXRpbmcgdGhlIGxvZ2luIHByb2Nlc3Mgb3Igd2hlbiB5b3Ugd2FudCB0byBvYnRhaW4gYW4gYWNjZXNzX3Rva2VuIGZvciB5b3VyIEFQSSxcclxuICAgICAqIGVpdGhlciBieSByZWRpcmVjdGluZyB0aGUgdXNlcidzIGJyb3dzZXIgd2luZG93IHRvIHRoZSBhdXRob3JpemF0aW9uIGVuZHBvaW50IG9yIHZpYSBvcGVuaW5nIGEgcG9wdXAgd2luZG93IGluIHRoZSB1c2VyJ3MgYnJvd3Nlci5cclxuICAgICAqIEBwYXJhbSB7QGxpbmsgKEF1dGhlbnRpY2F0aW9uUGFyYW1ldGVyczp0eXBlKX1cclxuICAgICAqXHJcbiAgICAgKiBUbyByZW5ldyBpZFRva2VuLCBwbGVhc2UgcGFzcyBjbGllbnRJZCBhcyB0aGUgb25seSBzY29wZSBpbiB0aGUgQXV0aGVudGljYXRpb24gUGFyYW1ldGVyc1xyXG4gICAgICovXHJcbiAgICBVc2VyQWdlbnRBcHBsaWNhdGlvbi5wcm90b3R5cGUuYWNxdWlyZVRva2VuSW50ZXJhY3RpdmUgPSBmdW5jdGlvbiAoaW50ZXJhY3Rpb25UeXBlLCBpc0xvZ2luQ2FsbCwgcmVxdWVzdCwgcmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAvLyBJZiBhbHJlYWR5IGluIHByb2dyZXNzLCBkbyBub3QgcHJvY2VlZFxyXG4gICAgICAgIGlmICh0aGlzLmxvZ2luSW5Qcm9ncmVzcyB8fCB0aGlzLmFjcXVpcmVUb2tlbkluUHJvZ3Jlc3MpIHtcclxuICAgICAgICAgICAgdmFyIHRocm93bkVycm9yID0gdGhpcy5sb2dpbkluUHJvZ3Jlc3MgPyBDbGllbnRBdXRoRXJyb3IuY3JlYXRlTG9naW5JblByb2dyZXNzRXJyb3IoKSA6IENsaWVudEF1dGhFcnJvci5jcmVhdGVBY3F1aXJlVG9rZW5JblByb2dyZXNzRXJyb3IoKTtcclxuICAgICAgICAgICAgdmFyIHN0YXRlT25seVJlc3BvbnNlID0gYnVpbGRSZXNwb25zZVN0YXRlT25seSh0aGlzLmdldEFjY291bnRTdGF0ZShyZXF1ZXN0ICYmIHJlcXVlc3Quc3RhdGUpKTtcclxuICAgICAgICAgICAgdGhpcy5hdXRoRXJyb3JIYW5kbGVyKGludGVyYWN0aW9uVHlwZSwgdGhyb3duRXJyb3IsIHN0YXRlT25seVJlc3BvbnNlLCByZWplY3QpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGlmIGV4dHJhU2NvcGVzVG9Db25zZW50IGlzIHBhc3NlZCBpbiBsb2dpbkNhbGwsIGFwcGVuZCB0aGVtIHRvIHRoZSBsb2dpbiByZXF1ZXN0XHJcbiAgICAgICAgdmFyIHNjb3BlcyA9IGlzTG9naW5DYWxsID8gdGhpcy5hcHBlbmRTY29wZXMocmVxdWVzdCkgOiByZXF1ZXN0LnNjb3BlcztcclxuICAgICAgICAvLyBWYWxpZGF0ZSBhbmQgZmlsdGVyIHNjb3BlcyAodGhlIHZhbGlkYXRlIGZ1bmN0aW9uIHdpbGwgdGhyb3cgaWYgdmFsaWRhdGlvbiBmYWlscylcclxuICAgICAgICB0aGlzLnZhbGlkYXRlSW5wdXRTY29wZShzY29wZXMsICFpc0xvZ2luQ2FsbCk7XHJcbiAgICAgICAgLy8gR2V0IHRoZSBhY2NvdW50IG9iamVjdCBpZiBhIHNlc3Npb24gZXhpc3RzXHJcbiAgICAgICAgdmFyIGFjY291bnQgPSAocmVxdWVzdCAmJiByZXF1ZXN0LmFjY291bnQgJiYgIWlzTG9naW5DYWxsKSA/IHJlcXVlc3QuYWNjb3VudCA6IHRoaXMuZ2V0QWNjb3VudCgpO1xyXG4gICAgICAgIC8vIElmIG5vIHNlc3Npb24gZXhpc3RzLCBwcm9tcHQgdGhlIHVzZXIgdG8gbG9naW4uXHJcbiAgICAgICAgaWYgKCFhY2NvdW50ICYmICFTZXJ2ZXJSZXF1ZXN0UGFyYW1ldGVycy5pc1NTT1BhcmFtKHJlcXVlc3QpKSB7XHJcbiAgICAgICAgICAgIGlmIChpc0xvZ2luQ2FsbCkge1xyXG4gICAgICAgICAgICAgICAgLy8gZXh0cmFjdCBBREFMIGlkX3Rva2VuIGlmIGV4aXN0c1xyXG4gICAgICAgICAgICAgICAgdmFyIGFkYWxJZFRva2VuID0gdGhpcy5leHRyYWN0QURBTElkVG9rZW4oKTtcclxuICAgICAgICAgICAgICAgIC8vIHNpbGVudCBsb2dpbiBpZiBBREFMIGlkX3Rva2VuIGlzIHJldHJpZXZlZCBzdWNjZXNzZnVsbHkgLSBTU09cclxuICAgICAgICAgICAgICAgIGlmIChhZGFsSWRUb2tlbiAmJiAhc2NvcGVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIuaW5mbyhcIkFEQUwncyBpZFRva2VuIGV4aXN0cy4gRXh0cmFjdGluZyBsb2dpbiBpbmZvcm1hdGlvbiBmcm9tIEFEQUwncyBpZFRva2VuIFwiKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdG9rZW5SZXF1ZXN0ID0gdGhpcy5idWlsZElEVG9rZW5SZXF1ZXN0KHJlcXVlc3QpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2lsZW50TG9naW4gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWNxdWlyZVRva2VuU2lsZW50KHRva2VuUmVxdWVzdCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2lsZW50TG9naW4gPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMubG9nZ2VyLmluZm8oXCJVbmlmaWVkIGNhY2hlIGNhbGwgaXMgc3VjY2Vzc2Z1bFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuYXV0aFJlc3BvbnNlSGFuZGxlcihpbnRlcmFjdGlvblR5cGUsIHJlc3BvbnNlLCByZXNvbHZlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zaWxlbnRMb2dpbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5sb2dnZXIuZXJyb3IoXCJFcnJvciBvY2N1cnJlZCBkdXJpbmcgdW5pZmllZCBjYWNoZSBBVFM6IFwiICsgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBwcm9jZWVkIHRvIGxvZ2luIHNpbmNlIEFUUyBmYWlsZWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuYWNxdWlyZVRva2VuSGVscGVyKG51bGwsIGludGVyYWN0aW9uVHlwZSwgaXNMb2dpbkNhbGwsIHJlcXVlc3QsIHNjb3BlcywgcmVzb2x2ZSwgcmVqZWN0KTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIE5vIEFEQUwgdG9rZW4gZm91bmQsIHByb2NlZWQgdG8gbG9naW5cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWNxdWlyZVRva2VuSGVscGVyKG51bGwsIGludGVyYWN0aW9uVHlwZSwgaXNMb2dpbkNhbGwsIHJlcXVlc3QsIHNjb3BlcywgcmVzb2x2ZSwgcmVqZWN0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBBY3F1aXJlVG9rZW4gY2FsbCwgYnV0IG5vIGFjY291bnQgb3IgY29udGV4dCBnaXZlbiwgc28gdGhyb3cgZXJyb3JcclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5pbmZvKFwiVXNlciBsb2dpbiBpcyByZXF1aXJlZFwiKTtcclxuICAgICAgICAgICAgICAgIHRocm93IENsaWVudEF1dGhFcnJvci5jcmVhdGVVc2VyTG9naW5SZXF1aXJlZEVycm9yKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gVXNlciBzZXNzaW9uIGV4aXN0c1xyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmFjcXVpcmVUb2tlbkhlbHBlcihhY2NvdW50LCBpbnRlcmFjdGlvblR5cGUsIGlzTG9naW5DYWxsLCByZXF1ZXN0LCBzY29wZXMsIHJlc29sdmUsIHJlamVjdCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQGhpZGRlblxyXG4gICAgICogQGlnbm9yZVxyXG4gICAgICogSGVscGVyIGZ1bmN0aW9uIHRvIGFjcXVpcmVUb2tlblxyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgVXNlckFnZW50QXBwbGljYXRpb24ucHJvdG90eXBlLmFjcXVpcmVUb2tlbkhlbHBlciA9IGZ1bmN0aW9uIChhY2NvdW50LCBpbnRlcmFjdGlvblR5cGUsIGlzTG9naW5DYWxsLCByZXF1ZXN0LCBzY29wZXMsIHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgLy8gVHJhY2sgdGhlIGFjcXVpcmVUb2tlbiBwcm9ncmVzc1xyXG4gICAgICAgIGlmIChpc0xvZ2luQ2FsbCkge1xyXG4gICAgICAgICAgICB0aGlzLmxvZ2luSW5Qcm9ncmVzcyA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmFjcXVpcmVUb2tlbkluUHJvZ3Jlc3MgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgc2NvcGUgPSBzY29wZXMgPyBzY29wZXMuam9pbihcIiBcIikudG9Mb3dlckNhc2UoKSA6IHRoaXMuY2xpZW50SWQudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICB2YXIgc2VydmVyQXV0aGVudGljYXRpb25SZXF1ZXN0O1xyXG4gICAgICAgIHZhciBhY3F1aXJlVG9rZW5BdXRob3JpdHkgPSAoIWlzTG9naW5DYWxsICYmIHJlcXVlc3QgJiYgcmVxdWVzdC5hdXRob3JpdHkpID8gQXV0aG9yaXR5RmFjdG9yeS5DcmVhdGVJbnN0YW5jZShyZXF1ZXN0LmF1dGhvcml0eSwgdGhpcy5jb25maWcuYXV0aC52YWxpZGF0ZUF1dGhvcml0eSkgOiB0aGlzLmF1dGhvcml0eUluc3RhbmNlO1xyXG4gICAgICAgIHZhciBwb3BVcFdpbmRvdztcclxuICAgICAgICBpZiAoaW50ZXJhY3Rpb25UeXBlID09PSBDb25zdGFudHMuaW50ZXJhY3Rpb25UeXBlUG9wdXApIHtcclxuICAgICAgICAgICAgLy8gR2VuZXJhdGUgYSBwb3B1cCB3aW5kb3dcclxuICAgICAgICAgICAgcG9wVXBXaW5kb3cgPSB0aGlzLm9wZW5XaW5kb3coXCJhYm91dDpibGFua1wiLCBcIl9ibGFua1wiLCAxLCB0aGlzLCByZXNvbHZlLCByZWplY3QpO1xyXG4gICAgICAgICAgICBpZiAoIXBvcFVwV2luZG93KSB7XHJcbiAgICAgICAgICAgICAgICAvLyBXZSBwYXNzIHJlamVjdCBpbiBvcGVuV2luZG93LCB3ZSByZWplY3QgdGhlcmUgZHVyaW5nIGFuIGVycm9yXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgYWNxdWlyZVRva2VuQXV0aG9yaXR5LnJlc29sdmVFbmRwb2ludHNBc3luYygpLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvLyBPbiBGdWxmaWxsbWVudFxyXG4gICAgICAgICAgICB2YXIgcmVzcG9uc2VUeXBlID0gaXNMb2dpbkNhbGwgPyBSZXNwb25zZVR5cGVzLmlkX3Rva2VuIDogX3RoaXMuZ2V0VG9rZW5UeXBlKGFjY291bnQsIHNjb3BlcywgZmFsc2UpO1xyXG4gICAgICAgICAgICB2YXIgbG9naW5TdGFydFBhZ2U7XHJcbiAgICAgICAgICAgIGlmIChpc0xvZ2luQ2FsbCkge1xyXG4gICAgICAgICAgICAgICAgLy8gaWYgdGhlIHVzZXIgc2V0cyB0aGUgbG9naW4gc3RhcnQgcGFnZSAtIGFuZ3VsYXIgb25seT8/XHJcbiAgICAgICAgICAgICAgICBsb2dpblN0YXJ0UGFnZSA9IF90aGlzLmNhY2hlU3RvcmFnZS5nZXRJdGVtKENvbnN0YW50cy5hbmd1bGFyTG9naW5SZXF1ZXN0KTtcclxuICAgICAgICAgICAgICAgIGlmICghbG9naW5TdGFydFBhZ2UgfHwgbG9naW5TdGFydFBhZ2UgPT09IFwiXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBsb2dpblN0YXJ0UGFnZSA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuY2FjaGVTdG9yYWdlLnNldEl0ZW0oQ29uc3RhbnRzLmFuZ3VsYXJMb2dpblJlcXVlc3QsIFwiXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNlcnZlckF1dGhlbnRpY2F0aW9uUmVxdWVzdCA9IG5ldyBTZXJ2ZXJSZXF1ZXN0UGFyYW1ldGVycyhhY3F1aXJlVG9rZW5BdXRob3JpdHksIF90aGlzLmNsaWVudElkLCBzY29wZXMsIHJlc3BvbnNlVHlwZSwgX3RoaXMuZ2V0UmVkaXJlY3RVcmkoKSwgcmVxdWVzdCAmJiByZXF1ZXN0LnN0YXRlKTtcclxuICAgICAgICAgICAgX3RoaXMudXBkYXRlQ2FjaGVFbnRyaWVzKHNlcnZlckF1dGhlbnRpY2F0aW9uUmVxdWVzdCwgYWNjb3VudCwgbG9naW5TdGFydFBhZ2UpO1xyXG4gICAgICAgICAgICAvLyBwb3B1bGF0ZSBRdWVyeVBhcmFtZXRlcnMgKHNpZC9sb2dpbl9oaW50L2RvbWFpbl9oaW50KSBhbmQgYW55IG90aGVyIGV4dHJhUXVlcnlQYXJhbWV0ZXJzIHNldCBieSB0aGUgZGV2ZWxvcGVyXHJcbiAgICAgICAgICAgIHNlcnZlckF1dGhlbnRpY2F0aW9uUmVxdWVzdC5wb3B1bGF0ZVF1ZXJ5UGFyYW1zKGFjY291bnQsIHJlcXVlc3QpO1xyXG4gICAgICAgICAgICAvLyBDb25zdHJ1Y3QgdXJsTmF2aWdhdGVcclxuICAgICAgICAgICAgdmFyIHVybE5hdmlnYXRlID0gVXJsVXRpbHMuY3JlYXRlTmF2aWdhdGVVcmwoc2VydmVyQXV0aGVudGljYXRpb25SZXF1ZXN0KSArIENvbnN0YW50cy5yZXNwb25zZV9tb2RlX2ZyYWdtZW50O1xyXG4gICAgICAgICAgICAvLyBzZXQgc3RhdGUgaW4gY2FjaGVcclxuICAgICAgICAgICAgaWYgKGludGVyYWN0aW9uVHlwZSA9PT0gQ29uc3RhbnRzLmludGVyYWN0aW9uVHlwZVJlZGlyZWN0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWlzTG9naW5DYWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuY2FjaGVTdG9yYWdlLnNldEl0ZW0oQ29uc3RhbnRzLnN0YXRlQWNxdWlyZVRva2VuLCBzZXJ2ZXJBdXRoZW50aWNhdGlvblJlcXVlc3Quc3RhdGUsIF90aGlzLmluQ29va2llKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChpbnRlcmFjdGlvblR5cGUgPT09IENvbnN0YW50cy5pbnRlcmFjdGlvblR5cGVQb3B1cCkge1xyXG4gICAgICAgICAgICAgICAgd2luZG93LnJlbmV3U3RhdGVzLnB1c2goc2VydmVyQXV0aGVudGljYXRpb25SZXF1ZXN0LnN0YXRlKTtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0VHlwZSA9IGlzTG9naW5DYWxsID8gQ29uc3RhbnRzLmxvZ2luIDogQ29uc3RhbnRzLnJlbmV3VG9rZW47XHJcbiAgICAgICAgICAgICAgICAvLyBSZWdpc3RlciBjYWxsYmFjayB0byBjYXB0dXJlIHJlc3VsdHMgZnJvbSBzZXJ2ZXJcclxuICAgICAgICAgICAgICAgIF90aGlzLnJlZ2lzdGVyQ2FsbGJhY2soc2VydmVyQXV0aGVudGljYXRpb25SZXF1ZXN0LnN0YXRlLCBzY29wZSwgcmVzb2x2ZSwgcmVqZWN0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRocm93IENsaWVudEF1dGhFcnJvci5jcmVhdGVJbnZhbGlkSW50ZXJhY3Rpb25UeXBlRXJyb3IoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBwcm9tcHQgdXNlciBmb3IgaW50ZXJhY3Rpb25cclxuICAgICAgICAgICAgX3RoaXMubmF2aWdhdGVXaW5kb3codXJsTmF2aWdhdGUsIHBvcFVwV2luZG93KTtcclxuICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XHJcbiAgICAgICAgICAgIF90aGlzLmxvZ2dlci53YXJuaW5nKFwiY291bGQgbm90IHJlc29sdmUgZW5kcG9pbnRzXCIpO1xyXG4gICAgICAgICAgICBfdGhpcy5hdXRoRXJyb3JIYW5kbGVyKGludGVyYWN0aW9uVHlwZSwgQ2xpZW50QXV0aEVycm9yLmNyZWF0ZUVuZHBvaW50UmVzb2x1dGlvbkVycm9yKGVyci50b1N0cmluZyksIGJ1aWxkUmVzcG9uc2VTdGF0ZU9ubHkocmVxdWVzdC5zdGF0ZSksIHJlamVjdCk7XHJcbiAgICAgICAgICAgIGlmIChwb3BVcFdpbmRvdykge1xyXG4gICAgICAgICAgICAgICAgcG9wVXBXaW5kb3cuY2xvc2UoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogVXNlIHRoaXMgZnVuY3Rpb24gdG8gb2J0YWluIGEgdG9rZW4gYmVmb3JlIGV2ZXJ5IGNhbGwgdG8gdGhlIEFQSSAvIHJlc291cmNlIHByb3ZpZGVyXHJcbiAgICAgKlxyXG4gICAgICogTVNBTCByZXR1cm4ncyBhIGNhY2hlZCB0b2tlbiB3aGVuIGF2YWlsYWJsZVxyXG4gICAgICogT3IgaXQgc2VuZCdzIGEgcmVxdWVzdCB0byB0aGUgU1RTIHRvIG9idGFpbiBhIG5ldyB0b2tlbiB1c2luZyBhIGhpZGRlbiBpZnJhbWUuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtAbGluayBBdXRoZW50aWNhdGlvblBhcmFtZXRlcnN9XHJcbiAgICAgKlxyXG4gICAgICogVG8gcmVuZXcgaWRUb2tlbiwgcGxlYXNlIHBhc3MgY2xpZW50SWQgYXMgdGhlIG9ubHkgc2NvcGUgaW4gdGhlIEF1dGhlbnRpY2F0aW9uIFBhcmFtZXRlcnNcclxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlLjxBdXRoUmVzcG9uc2U+fSAtIGEgcHJvbWlzZSB0aGF0IGlzIGZ1bGZpbGxlZCB3aGVuIHRoaXMgZnVuY3Rpb24gaGFzIGNvbXBsZXRlZCwgb3IgcmVqZWN0ZWQgaWYgYW4gZXJyb3Igd2FzIHJhaXNlZC4gUmV0dXJucyB0aGUge0BsaW5rIEF1dGhSZXNwb25zZX0gb2JqZWN0XHJcbiAgICAgKlxyXG4gICAgICovXHJcbiAgICBVc2VyQWdlbnRBcHBsaWNhdGlvbi5wcm90b3R5cGUuYWNxdWlyZVRva2VuU2lsZW50ID0gZnVuY3Rpb24gKHJlcXVlc3QpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGlmICghcmVxdWVzdCkge1xyXG4gICAgICAgICAgICB0aHJvdyBDbGllbnRDb25maWd1cmF0aW9uRXJyb3IuY3JlYXRlRW1wdHlSZXF1ZXN0RXJyb3IoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgLy8gVmFsaWRhdGUgYW5kIGZpbHRlciBzY29wZXMgKHRoZSB2YWxpZGF0ZSBmdW5jdGlvbiB3aWxsIHRocm93IGlmIHZhbGlkYXRpb24gZmFpbHMpXHJcbiAgICAgICAgICAgIF90aGlzLnZhbGlkYXRlSW5wdXRTY29wZShyZXF1ZXN0LnNjb3BlcywgdHJ1ZSk7XHJcbiAgICAgICAgICAgIHZhciBzY29wZSA9IHJlcXVlc3Quc2NvcGVzLmpvaW4oXCIgXCIpLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgICAgIC8vIGlmIHRoZSBkZXZlbG9wZXIgcGFzc2VzIGFuIGFjY291bnQsIGdpdmUgdGhhdCBhY2NvdW50IHRoZSBwcmlvcml0eVxyXG4gICAgICAgICAgICB2YXIgYWNjb3VudCA9IHJlcXVlc3QuYWNjb3VudCB8fCBfdGhpcy5nZXRBY2NvdW50KCk7XHJcbiAgICAgICAgICAgIC8vIGV4dHJhY3QgaWYgdGhlcmUgaXMgYW4gYWRhbElkVG9rZW4gc3Rhc2hlZCBpbiB0aGUgY2FjaGVcclxuICAgICAgICAgICAgdmFyIGFkYWxJZFRva2VuID0gX3RoaXMuY2FjaGVTdG9yYWdlLmdldEl0ZW0oQ29uc3RhbnRzLmFkYWxJZFRva2VuKTtcclxuICAgICAgICAgICAgLy9pZiB0aGVyZSBpcyBubyBhY2NvdW50IGxvZ2dlZCBpbiBhbmQgbm8gbG9naW5faGludC9zaWQgaXMgcGFzc2VkIGluIHRoZSByZXF1ZXN0XHJcbiAgICAgICAgICAgIGlmICghYWNjb3VudCAmJiAhKHJlcXVlc3Quc2lkIHx8IHJlcXVlc3QubG9naW5IaW50KSAmJiBTdHJpbmdVdGlscy5pc0VtcHR5KGFkYWxJZFRva2VuKSkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMubG9nZ2VyLmluZm8oXCJVc2VyIGxvZ2luIGlzIHJlcXVpcmVkXCIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdChDbGllbnRBdXRoRXJyb3IuY3JlYXRlVXNlckxvZ2luUmVxdWlyZWRFcnJvcigpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgcmVzcG9uc2VUeXBlID0gX3RoaXMuZ2V0VG9rZW5UeXBlKGFjY291bnQsIHJlcXVlc3Quc2NvcGVzLCB0cnVlKTtcclxuICAgICAgICAgICAgdmFyIHNlcnZlckF1dGhlbnRpY2F0aW9uUmVxdWVzdCA9IG5ldyBTZXJ2ZXJSZXF1ZXN0UGFyYW1ldGVycyhBdXRob3JpdHlGYWN0b3J5LkNyZWF0ZUluc3RhbmNlKHJlcXVlc3QuYXV0aG9yaXR5LCBfdGhpcy5jb25maWcuYXV0aC52YWxpZGF0ZUF1dGhvcml0eSksIF90aGlzLmNsaWVudElkLCByZXF1ZXN0LnNjb3BlcywgcmVzcG9uc2VUeXBlLCBfdGhpcy5nZXRSZWRpcmVjdFVyaSgpLCByZXF1ZXN0ICYmIHJlcXVlc3Quc3RhdGUpO1xyXG4gICAgICAgICAgICAvLyBwb3B1bGF0ZSBRdWVyeVBhcmFtZXRlcnMgKHNpZC9sb2dpbl9oaW50L2RvbWFpbl9oaW50KSBhbmQgYW55IG90aGVyIGV4dHJhUXVlcnlQYXJhbWV0ZXJzIHNldCBieSB0aGUgZGV2ZWxvcGVyXHJcbiAgICAgICAgICAgIGlmIChTZXJ2ZXJSZXF1ZXN0UGFyYW1ldGVycy5pc1NTT1BhcmFtKHJlcXVlc3QpIHx8IGFjY291bnQpIHtcclxuICAgICAgICAgICAgICAgIHNlcnZlckF1dGhlbnRpY2F0aW9uUmVxdWVzdC5wb3B1bGF0ZVF1ZXJ5UGFyYW1zKGFjY291bnQsIHJlcXVlc3QpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vaWYgdXNlciBkaWRuJ3QgcGFzcyBsb2dpbl9oaW50L3NpZCBhbmQgYWRhbCdzIGlkdG9rZW4gaXMgcHJlc2VudCwgZXh0cmFjdCB0aGUgbG9naW5faGludCBmcm9tIHRoZSBhZGFsSWRUb2tlblxyXG4gICAgICAgICAgICBlbHNlIGlmICghYWNjb3VudCAmJiAhU3RyaW5nVXRpbHMuaXNFbXB0eShhZGFsSWRUb2tlbikpIHtcclxuICAgICAgICAgICAgICAgIC8vIGlmIGFkYWxJZFRva2VuIGV4aXN0cywgZXh0cmFjdCB0aGUgU1NPIGluZm8gZnJvbSB0aGUgc2FtZVxyXG4gICAgICAgICAgICAgICAgdmFyIGFkYWxJZFRva2VuT2JqZWN0ID0gVG9rZW5VdGlscy5leHRyYWN0SWRUb2tlbihhZGFsSWRUb2tlbik7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5sb2dnZXIudmVyYm9zZShcIkFEQUwncyBpZFRva2VuIGV4aXN0cy4gRXh0cmFjdGluZyBsb2dpbiBpbmZvcm1hdGlvbiBmcm9tIEFEQUwncyBpZFRva2VuIFwiKTtcclxuICAgICAgICAgICAgICAgIHNlcnZlckF1dGhlbnRpY2F0aW9uUmVxdWVzdC5wb3B1bGF0ZVF1ZXJ5UGFyYW1zKGFjY291bnQsIG51bGwsIGFkYWxJZFRva2VuT2JqZWN0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgdXNlckNvbnRhaW5lZENsYWltcyA9IHJlcXVlc3QuY2xhaW1zUmVxdWVzdCB8fCBzZXJ2ZXJBdXRoZW50aWNhdGlvblJlcXVlc3QuY2xhaW1zVmFsdWU7XHJcbiAgICAgICAgICAgIHZhciBhdXRoRXJyO1xyXG4gICAgICAgICAgICB2YXIgY2FjaGVSZXN1bHRSZXNwb25zZTtcclxuICAgICAgICAgICAgaWYgKCF1c2VyQ29udGFpbmVkQ2xhaW1zICYmICFyZXF1ZXN0LmZvcmNlUmVmcmVzaCkge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBjYWNoZVJlc3VsdFJlc3BvbnNlID0gX3RoaXMuZ2V0Q2FjaGVkVG9rZW4oc2VydmVyQXV0aGVudGljYXRpb25SZXF1ZXN0LCBhY2NvdW50KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXV0aEVyciA9IGU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gcmVzb2x2ZS9yZWplY3QgYmFzZWQgb24gY2FjaGVSZXN1bHRcclxuICAgICAgICAgICAgaWYgKGNhY2hlUmVzdWx0UmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLmxvZ2dlci5pbmZvKFwiVG9rZW4gaXMgYWxyZWFkeSBpbiBjYWNoZSBmb3Igc2NvcGU6XCIgKyBzY29wZSk7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKGNhY2hlUmVzdWx0UmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoYXV0aEVycikge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMubG9nZ2VyLmluZm9QaWkoYXV0aEVyci5lcnJvckNvZGUgKyBcIjpcIiArIGF1dGhFcnIuZXJyb3JNZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIHJlamVjdChhdXRoRXJyKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIGVsc2UgcHJvY2VlZCB3aXRoIGxvZ2luXHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmFyIGxvZ01lc3NhZ2UgPSB2b2lkIDA7XHJcbiAgICAgICAgICAgICAgICBpZiAodXNlckNvbnRhaW5lZENsYWltcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGxvZ01lc3NhZ2UgPSBcIlNraXBwZWQgY2FjaGUgbG9va3VwIHNpbmNlIGNsYWltcyB3ZXJlIGdpdmVuLlwiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAocmVxdWVzdC5mb3JjZVJlZnJlc2gpIHtcclxuICAgICAgICAgICAgICAgICAgICBsb2dNZXNzYWdlID0gXCJTa2lwcGVkIGNhY2hlIGxvb2t1cCBzaW5jZSByZXF1ZXN0LmZvcmNlUmVmcmVzaCBvcHRpb24gd2FzIHNldCB0byB0cnVlXCI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBsb2dNZXNzYWdlID0gXCJUb2tlbiBpcyBub3QgaW4gY2FjaGUgZm9yIHNjb3BlOlwiICsgc2NvcGU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5sb2dnZXIudmVyYm9zZShsb2dNZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIC8vIENhY2hlIHJlc3VsdCBjYW4gcmV0dXJuIG51bGwgaWYgY2FjaGUgaXMgZW1wdHkuIEluIHRoYXQgY2FzZSwgc2V0IGF1dGhvcml0eSB0byBkZWZhdWx0IHZhbHVlIGlmIG5vIGF1dGhvcml0eSBpcyBwYXNzZWQgdG8gdGhlIGFwaS5cclxuICAgICAgICAgICAgICAgIGlmICghc2VydmVyQXV0aGVudGljYXRpb25SZXF1ZXN0LmF1dGhvcml0eUluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VydmVyQXV0aGVudGljYXRpb25SZXF1ZXN0LmF1dGhvcml0eUluc3RhbmNlID0gcmVxdWVzdC5hdXRob3JpdHkgPyBBdXRob3JpdHlGYWN0b3J5LkNyZWF0ZUluc3RhbmNlKHJlcXVlc3QuYXV0aG9yaXR5LCBfdGhpcy5jb25maWcuYXV0aC52YWxpZGF0ZUF1dGhvcml0eSkgOiBfdGhpcy5hdXRob3JpdHlJbnN0YW5jZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIGNhY2hlIG1pc3NcclxuICAgICAgICAgICAgICAgIHJldHVybiBzZXJ2ZXJBdXRoZW50aWNhdGlvblJlcXVlc3QuYXV0aG9yaXR5SW5zdGFuY2UucmVzb2x2ZUVuZHBvaW50c0FzeW5jKClcclxuICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVmcmVzaCBhdHRlbXB0IHdpdGggaWZyYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQWxyZWFkeSByZW5ld2luZyBmb3IgdGhpcyBzY29wZSwgY2FsbGJhY2sgd2hlbiB3ZSBnZXQgdGhlIHRva2VuLlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh3aW5kb3cuYWN0aXZlUmVuZXdhbHNbc2NvcGVdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmxvZ2dlci52ZXJib3NlKFwiUmVuZXcgdG9rZW4gZm9yIHNjb3BlOiBcIiArIHNjb3BlICsgXCIgaXMgaW4gcHJvZ3Jlc3MuIFJlZ2lzdGVyaW5nIGNhbGxiYWNrXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBY3RpdmUgcmVuZXdhbHMgY29udGFpbnMgdGhlIHN0YXRlIGZvciBlYWNoIHJlbmV3YWwuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnJlZ2lzdGVyQ2FsbGJhY2sod2luZG93LmFjdGl2ZVJlbmV3YWxzW3Njb3BlXSwgc2NvcGUsIHJlc29sdmUsIHJlamVjdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVxdWVzdC5zY29wZXMgJiYgcmVxdWVzdC5zY29wZXMuaW5kZXhPZihfdGhpcy5jbGllbnRJZCkgPiAtMSAmJiByZXF1ZXN0LnNjb3Blcy5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFwcCB1c2VzIGlkVG9rZW4gdG8gc2VuZCB0byBhcGkgZW5kcG9pbnRzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBEZWZhdWx0IHNjb3BlIGlzIHRyYWNrZWQgYXMgY2xpZW50SWQgdG8gc3RvcmUgdGhpcyB0b2tlblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMubG9nZ2VyLnZlcmJvc2UoXCJyZW5ld2luZyBpZFRva2VuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2lsZW50TG9naW4gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucmVuZXdJZFRva2VuKHJlcXVlc3Quc2NvcGVzLCByZXNvbHZlLCByZWplY3QsIGFjY291bnQsIHNlcnZlckF1dGhlbnRpY2F0aW9uUmVxdWVzdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZW5ldyBhY2Nlc3MgdG9rZW5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmxvZ2dlci52ZXJib3NlKFwicmVuZXdpbmcgYWNjZXNzdG9rZW5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5yZW5ld1Rva2VuKHJlcXVlc3Quc2NvcGVzLCByZXNvbHZlLCByZWplY3QsIGFjY291bnQsIHNlcnZlckF1dGhlbnRpY2F0aW9uUmVxdWVzdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMubG9nZ2VyLndhcm5pbmcoXCJjb3VsZCBub3QgcmVzb2x2ZSBlbmRwb2ludHNcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KENsaWVudEF1dGhFcnJvci5jcmVhdGVFbmRwb2ludFJlc29sdXRpb25FcnJvcihlcnIudG9TdHJpbmcoKSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvLyNlbmRyZWdpb25cclxuICAgIC8vI3JlZ2lvbiBQb3B1cCBXaW5kb3cgQ3JlYXRpb25cclxuICAgIC8qKlxyXG4gICAgICogQGhpZGRlblxyXG4gICAgICpcclxuICAgICAqIFVzZWQgdG8gc2VuZCB0aGUgdXNlciB0byB0aGUgcmVkaXJlY3RfdXJpIGFmdGVyIGF1dGhlbnRpY2F0aW9uIGlzIGNvbXBsZXRlLiBUaGUgdXNlcidzIGJlYXJlciB0b2tlbiBpcyBhdHRhY2hlZCB0byB0aGUgVVJJIGZyYWdtZW50IGFzIGFuIGlkX3Rva2VuL2FjY2Vzc190b2tlbiBmaWVsZC5cclxuICAgICAqIFRoaXMgZnVuY3Rpb24gYWxzbyBjbG9zZXMgdGhlIHBvcHVwIHdpbmRvdyBhZnRlciByZWRpcmVjdGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdXJsTmF2aWdhdGVcclxuICAgICAqIEBwYXJhbSB0aXRsZVxyXG4gICAgICogQHBhcmFtIGludGVydmFsXHJcbiAgICAgKiBAcGFyYW0gaW5zdGFuY2VcclxuICAgICAqIEBwYXJhbSByZXNvbHZlXHJcbiAgICAgKiBAcGFyYW0gcmVqZWN0XHJcbiAgICAgKiBAaWdub3JlXHJcbiAgICAgKi9cclxuICAgIFVzZXJBZ2VudEFwcGxpY2F0aW9uLnByb3RvdHlwZS5vcGVuV2luZG93ID0gZnVuY3Rpb24gKHVybE5hdmlnYXRlLCB0aXRsZSwgaW50ZXJ2YWwsIGluc3RhbmNlLCByZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIC8vIEdlbmVyYXRlIGEgcG9wdXAgd2luZG93XHJcbiAgICAgICAgdmFyIHBvcHVwV2luZG93O1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHBvcHVwV2luZG93ID0gdGhpcy5vcGVuUG9wdXAodXJsTmF2aWdhdGUsIHRpdGxlLCBDb25zdGFudHMucG9wVXBXaWR0aCwgQ29uc3RhbnRzLnBvcFVwSGVpZ2h0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgaW5zdGFuY2UubG9naW5JblByb2dyZXNzID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGluc3RhbmNlLmFjcXVpcmVUb2tlbkluUHJvZ3Jlc3MgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5sb2dnZXIuaW5mbyhDbGllbnRBdXRoRXJyb3JNZXNzYWdlLnBvcFVwV2luZG93RXJyb3IuY29kZSArIFwiOlwiICsgQ2xpZW50QXV0aEVycm9yTWVzc2FnZS5wb3BVcFdpbmRvd0Vycm9yLmRlc2MpO1xyXG4gICAgICAgICAgICB0aGlzLmNhY2hlU3RvcmFnZS5zZXRJdGVtKENvbnN0YW50cy5tc2FsRXJyb3IsIENsaWVudEF1dGhFcnJvck1lc3NhZ2UucG9wVXBXaW5kb3dFcnJvci5jb2RlKTtcclxuICAgICAgICAgICAgdGhpcy5jYWNoZVN0b3JhZ2Uuc2V0SXRlbShDb25zdGFudHMubXNhbEVycm9yRGVzY3JpcHRpb24sIENsaWVudEF1dGhFcnJvck1lc3NhZ2UucG9wVXBXaW5kb3dFcnJvci5kZXNjKTtcclxuICAgICAgICAgICAgaWYgKHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KENsaWVudEF1dGhFcnJvci5jcmVhdGVQb3B1cFdpbmRvd0Vycm9yKCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBQdXNoIHBvcHVwIHdpbmRvdyBoYW5kbGUgb250byBzdGFjayBmb3IgdHJhY2tpbmdcclxuICAgICAgICB3aW5kb3cub3BlbmVkV2luZG93cy5wdXNoKHBvcHVwV2luZG93KTtcclxuICAgICAgICB2YXIgcG9sbFRpbWVyID0gd2luZG93LnNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy8gSWYgcG9wdXAgY2xvc2VkIG9yIGxvZ2luIGluIHByb2dyZXNzLCBjYW5jZWwgbG9naW5cclxuICAgICAgICAgICAgaWYgKHBvcHVwV2luZG93ICYmIHBvcHVwV2luZG93LmNsb3NlZCAmJiAoaW5zdGFuY2UubG9naW5JblByb2dyZXNzIHx8IGluc3RhbmNlLmFjcXVpcmVUb2tlbkluUHJvZ3Jlc3MpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KENsaWVudEF1dGhFcnJvci5jcmVhdGVVc2VyQ2FuY2VsbGVkRXJyb3IoKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbChwb2xsVGltZXIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLmNvbmZpZy5mcmFtZXdvcmsuaXNBbmd1bGFyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuYnJvYWRjYXN0KFwibXNhbDpwb3BVcENsb3NlZFwiLCBDbGllbnRBdXRoRXJyb3JNZXNzYWdlLnVzZXJDYW5jZWxsZWRFcnJvci5jb2RlICsgQ29uc3RhbnRzLnJlc291cmNlRGVsaW1pdGVyICsgQ2xpZW50QXV0aEVycm9yTWVzc2FnZS51c2VyQ2FuY2VsbGVkRXJyb3IuZGVzYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2UubG9naW5JblByb2dyZXNzID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZS5hY3F1aXJlVG9rZW5JblByb2dyZXNzID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHZhciBwb3BVcFdpbmRvd0xvY2F0aW9uID0gcG9wdXBXaW5kb3cubG9jYXRpb247XHJcbiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgcG9wdXAgaGFzaCBjaGFuZ2VzLCBjbG9zZSB0aGUgcG9wdXAgd2luZG93XHJcbiAgICAgICAgICAgICAgICBpZiAocG9wVXBXaW5kb3dMb2NhdGlvbi5ocmVmLmluZGV4T2YoX3RoaXMuZ2V0UmVkaXJlY3RVcmkoKSkgIT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwocG9sbFRpbWVyKTtcclxuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZS5sb2dpbkluUHJvZ3Jlc3MgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZS5hY3F1aXJlVG9rZW5JblByb2dyZXNzID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMubG9nZ2VyLmluZm8oXCJDbG9zaW5nIHBvcHVwIHdpbmRvd1wiKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBUT0RPOiBDaGVjayBob3cgdGhpcyBjYW4gYmUgZXh0cmFjdGVkIGZvciBhbnkgZnJhbWV3b3JrIHNwZWNpZmljIGNvZGU/XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLmNvbmZpZy5mcmFtZXdvcmsuaXNBbmd1bGFyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmJyb2FkY2FzdChcIm1zYWw6cG9wVXBIYXNoQ2hhbmdlZFwiLCBwb3BVcFdpbmRvd0xvY2F0aW9uLmhhc2gpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHdpbmRvdy5vcGVuZWRXaW5kb3dzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cub3BlbmVkV2luZG93c1tpXS5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBDcm9zcyBEb21haW4gdXJsIGNoZWNrIGVycm9yLlxyXG4gICAgICAgICAgICAgICAgLy8gV2lsbCBiZSB0aHJvd24gdW50aWwgQUFEIHJlZGlyZWN0cyB0aGUgdXNlciBiYWNrIHRvIHRoZSBhcHBcInMgcm9vdCBwYWdlIHdpdGggdGhlIHRva2VuLlxyXG4gICAgICAgICAgICAgICAgLy8gTm8gbmVlZCB0byBsb2cgb3IgdGhyb3cgdGhpcyBlcnJvciBhcyBpdCB3aWxsIGNyZWF0ZSB1bm5lY2Vzc2FyeSB0cmFmZmljLlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgaW50ZXJ2YWwpO1xyXG4gICAgICAgIHJldHVybiBwb3B1cFdpbmRvdztcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEBoaWRkZW5cclxuICAgICAqXHJcbiAgICAgKiBDb25maWd1cmVzIHBvcHVwIHdpbmRvdyBmb3IgbG9naW4uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHVybE5hdmlnYXRlXHJcbiAgICAgKiBAcGFyYW0gdGl0bGVcclxuICAgICAqIEBwYXJhbSBwb3BVcFdpZHRoXHJcbiAgICAgKiBAcGFyYW0gcG9wVXBIZWlnaHRcclxuICAgICAqIEBpZ25vcmVcclxuICAgICAqIEBoaWRkZW5cclxuICAgICAqL1xyXG4gICAgVXNlckFnZW50QXBwbGljYXRpb24ucHJvdG90eXBlLm9wZW5Qb3B1cCA9IGZ1bmN0aW9uICh1cmxOYXZpZ2F0ZSwgdGl0bGUsIHBvcFVwV2lkdGgsIHBvcFVwSGVpZ2h0KSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIGFkZGluZyB3aW5MZWZ0IGFuZCB3aW5Ub3AgdG8gYWNjb3VudCBmb3IgZHVhbCBtb25pdG9yXHJcbiAgICAgICAgICAgICAqIHVzaW5nIHNjcmVlbkxlZnQgYW5kIHNjcmVlblRvcCBmb3IgSUU4IGFuZCBlYXJsaWVyXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICB2YXIgd2luTGVmdCA9IHdpbmRvdy5zY3JlZW5MZWZ0ID8gd2luZG93LnNjcmVlbkxlZnQgOiB3aW5kb3cuc2NyZWVuWDtcclxuICAgICAgICAgICAgdmFyIHdpblRvcCA9IHdpbmRvdy5zY3JlZW5Ub3AgPyB3aW5kb3cuc2NyZWVuVG9wIDogd2luZG93LnNjcmVlblk7XHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiB3aW5kb3cuaW5uZXJXaWR0aCBkaXNwbGF5cyBicm93c2VyIHdpbmRvd1wicyBoZWlnaHQgYW5kIHdpZHRoIGV4Y2x1ZGluZyB0b29sYmFyc1xyXG4gICAgICAgICAgICAgKiB1c2luZyBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGggZm9yIElFOCBhbmQgZWFybGllclxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgdmFyIHdpZHRoID0gd2luZG93LmlubmVyV2lkdGggfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoIHx8IGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGg7XHJcbiAgICAgICAgICAgIHZhciBoZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCB8fCBkb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodDtcclxuICAgICAgICAgICAgdmFyIGxlZnQgPSAoKHdpZHRoIC8gMikgLSAocG9wVXBXaWR0aCAvIDIpKSArIHdpbkxlZnQ7XHJcbiAgICAgICAgICAgIHZhciB0b3BfMSA9ICgoaGVpZ2h0IC8gMikgLSAocG9wVXBIZWlnaHQgLyAyKSkgKyB3aW5Ub3A7XHJcbiAgICAgICAgICAgIC8vIG9wZW4gdGhlIHdpbmRvd1xyXG4gICAgICAgICAgICB2YXIgcG9wdXBXaW5kb3cgPSB3aW5kb3cub3Blbih1cmxOYXZpZ2F0ZSwgdGl0bGUsIFwid2lkdGg9XCIgKyBwb3BVcFdpZHRoICsgXCIsIGhlaWdodD1cIiArIHBvcFVwSGVpZ2h0ICsgXCIsIHRvcD1cIiArIHRvcF8xICsgXCIsIGxlZnQ9XCIgKyBsZWZ0KTtcclxuICAgICAgICAgICAgaWYgKCFwb3B1cFdpbmRvdykge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgQ2xpZW50QXV0aEVycm9yLmNyZWF0ZVBvcHVwV2luZG93RXJyb3IoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAocG9wdXBXaW5kb3cuZm9jdXMpIHtcclxuICAgICAgICAgICAgICAgIHBvcHVwV2luZG93LmZvY3VzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHBvcHVwV2luZG93O1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihcImVycm9yIG9wZW5pbmcgcG9wdXAgXCIgKyBlLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICB0aGlzLmxvZ2luSW5Qcm9ncmVzcyA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLmFjcXVpcmVUb2tlbkluUHJvZ3Jlc3MgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhyb3cgQ2xpZW50QXV0aEVycm9yLmNyZWF0ZVBvcHVwV2luZG93RXJyb3IoZS50b1N0cmluZygpKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLy8jZW5kcmVnaW9uXHJcbiAgICAvLyNyZWdpb24gSWZyYW1lIE1hbmFnZW1lbnRcclxuICAgIC8qKlxyXG4gICAgICogQGhpZGRlblxyXG4gICAgICogUmV0dXJucyB3aGV0aGVyIGN1cnJlbnQgd2luZG93IGlzIGluIGlmcmFtIGZvciB0b2tlbiByZW5ld2FsXHJcbiAgICAgKiBAaWdub3JlXHJcbiAgICAgKi9cclxuICAgIFVzZXJBZ2VudEFwcGxpY2F0aW9uLnByb3RvdHlwZS5pc0luSWZyYW1lID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB3aW5kb3cucGFyZW50ICE9PSB3aW5kb3c7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAaGlkZGVuXHJcbiAgICAgKiBSZXR1cm5zIHdoZXRoZXIgcGFyZW50IHdpbmRvdyBleGlzdHMgYW5kIGhhcyBtc2FsXHJcbiAgICAgKi9cclxuICAgIFVzZXJBZ2VudEFwcGxpY2F0aW9uLnByb3RvdHlwZS5wYXJlbnRJc01zYWwgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHdpbmRvdy5wYXJlbnQgIT09IHdpbmRvdyAmJiB3aW5kb3cucGFyZW50Lm1zYWw7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAaGlkZGVuXHJcbiAgICAgKiBDYWxsaW5nIF9sb2FkRnJhbWUgYnV0IHdpdGggYSB0aW1lb3V0IHRvIHNpZ25hbCBmYWlsdXJlIGluIGxvYWRmcmFtZVN0YXR1cy4gQ2FsbGJhY2tzIGFyZSBsZWZ0LlxyXG4gICAgICogcmVnaXN0ZXJlZCB3aGVuIG5ldHdvcmsgZXJyb3JzIG9jY3VyIGFuZCBzdWJzZXF1ZW50IHRva2VuIHJlcXVlc3RzIGZvciBzYW1lIHJlc291cmNlIGFyZSByZWdpc3RlcmVkIHRvIHRoZSBwZW5kaW5nIHJlcXVlc3QuXHJcbiAgICAgKiBAaWdub3JlXHJcbiAgICAgKi9cclxuICAgIFVzZXJBZ2VudEFwcGxpY2F0aW9uLnByb3RvdHlwZS5sb2FkSWZyYW1lVGltZW91dCA9IGZ1bmN0aW9uICh1cmxOYXZpZ2F0ZSwgZnJhbWVOYW1lLCBzY29wZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgLy9zZXQgaWZyYW1lIHNlc3Npb24gdG8gcGVuZGluZ1xyXG4gICAgICAgIHZhciBleHBlY3RlZFN0YXRlID0gd2luZG93LmFjdGl2ZVJlbmV3YWxzW3Njb3BlXTtcclxuICAgICAgICB0aGlzLmxvZ2dlci52ZXJib3NlKFwiU2V0IGxvYWRpbmcgc3RhdGUgdG8gcGVuZGluZyBmb3I6IFwiICsgc2NvcGUgKyBcIjpcIiArIGV4cGVjdGVkU3RhdGUpO1xyXG4gICAgICAgIHRoaXMuY2FjaGVTdG9yYWdlLnNldEl0ZW0oQ29uc3RhbnRzLnJlbmV3U3RhdHVzICsgZXhwZWN0ZWRTdGF0ZSwgQ29uc3RhbnRzLnRva2VuUmVuZXdTdGF0dXNJblByb2dyZXNzKTtcclxuICAgICAgICB0aGlzLmxvYWRGcmFtZSh1cmxOYXZpZ2F0ZSwgZnJhbWVOYW1lKTtcclxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKF90aGlzLmNhY2hlU3RvcmFnZS5nZXRJdGVtKENvbnN0YW50cy5yZW5ld1N0YXR1cyArIGV4cGVjdGVkU3RhdGUpID09PSBDb25zdGFudHMudG9rZW5SZW5ld1N0YXR1c0luUHJvZ3Jlc3MpIHtcclxuICAgICAgICAgICAgICAgIC8vIGZhaWwgdGhlIGlmcmFtZSBzZXNzaW9uIGlmIGl0XCJzIGluIHBlbmRpbmcgc3RhdGVcclxuICAgICAgICAgICAgICAgIF90aGlzLmxvZ2dlci52ZXJib3NlKFwiTG9hZGluZyBmcmFtZSBoYXMgdGltZWQgb3V0IGFmdGVyOiBcIiArIChfdGhpcy5jb25maWcuc3lzdGVtLmxvYWRGcmFtZVRpbWVvdXQgLyAxMDAwKSArIFwiIHNlY29uZHMgZm9yIHNjb3BlIFwiICsgc2NvcGUgKyBcIjpcIiArIGV4cGVjdGVkU3RhdGUpO1xyXG4gICAgICAgICAgICAgICAgLy8gRXJyb3IgYWZ0ZXIgdGltZW91dFxyXG4gICAgICAgICAgICAgICAgaWYgKGV4cGVjdGVkU3RhdGUgJiYgd2luZG93LmNhbGxiYWNrTWFwcGVkVG9SZW5ld1N0YXRlc1tleHBlY3RlZFN0YXRlXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5jYWxsYmFja01hcHBlZFRvUmVuZXdTdGF0ZXNbZXhwZWN0ZWRTdGF0ZV0obnVsbCwgQ2xpZW50QXV0aEVycm9yLmNyZWF0ZVRva2VuUmVuZXdhbFRpbWVvdXRFcnJvcigpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIF90aGlzLmNhY2hlU3RvcmFnZS5zZXRJdGVtKENvbnN0YW50cy5yZW5ld1N0YXR1cyArIGV4cGVjdGVkU3RhdGUsIENvbnN0YW50cy50b2tlblJlbmV3U3RhdHVzQ2FuY2VsbGVkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIHRoaXMuY29uZmlnLnN5c3RlbS5sb2FkRnJhbWVUaW1lb3V0KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEBoaWRkZW5cclxuICAgICAqIExvYWRzIGlmcmFtZSB3aXRoIGF1dGhvcml6YXRpb24gZW5kcG9pbnQgVVJMXHJcbiAgICAgKiBAaWdub3JlXHJcbiAgICAgKi9cclxuICAgIFVzZXJBZ2VudEFwcGxpY2F0aW9uLnByb3RvdHlwZS5sb2FkRnJhbWUgPSBmdW5jdGlvbiAodXJsTmF2aWdhdGUsIGZyYW1lTmFtZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgLy8gVGhpcyB0cmljayBvdmVyY29tZXMgaWZyYW1lIG5hdmlnYXRpb24gaW4gSUVcclxuICAgICAgICAvLyBJRSBkb2VzIG5vdCBsb2FkIHRoZSBwYWdlIGNvbnNpc3RlbnRseSBpbiBpZnJhbWVcclxuICAgICAgICB0aGlzLmxvZ2dlci5pbmZvKFwiTG9hZEZyYW1lOiBcIiArIGZyYW1lTmFtZSk7XHJcbiAgICAgICAgdmFyIGZyYW1lQ2hlY2sgPSBmcmFtZU5hbWU7XHJcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBmcmFtZUhhbmRsZSA9IF90aGlzLmFkZEhpZGRlbklGcmFtZShmcmFtZUNoZWNrKTtcclxuICAgICAgICAgICAgaWYgKGZyYW1lSGFuZGxlLnNyYyA9PT0gXCJcIiB8fCBmcmFtZUhhbmRsZS5zcmMgPT09IFwiYWJvdXQ6YmxhbmtcIikge1xyXG4gICAgICAgICAgICAgICAgZnJhbWVIYW5kbGUuc3JjID0gdXJsTmF2aWdhdGU7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5sb2dnZXIuaW5mb1BpaShcIkZyYW1lIE5hbWUgOiBcIiArIGZyYW1lTmFtZSArIFwiIE5hdmlnYXRlZCB0bzogXCIgKyB1cmxOYXZpZ2F0ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCB0aGlzLmNvbmZpZy5zeXN0ZW0ubmF2aWdhdGVGcmFtZVdhaXQpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQGhpZGRlblxyXG4gICAgICogQWRkcyB0aGUgaGlkZGVuIGlmcmFtZSBmb3Igc2lsZW50IHRva2VuIHJlbmV3YWwuXHJcbiAgICAgKiBAaWdub3JlXHJcbiAgICAgKi9cclxuICAgIFVzZXJBZ2VudEFwcGxpY2F0aW9uLnByb3RvdHlwZS5hZGRIaWRkZW5JRnJhbWUgPSBmdW5jdGlvbiAoaWZyYW1lSWQpIHtcclxuICAgICAgICBpZiAodHlwZW9mIGlmcmFtZUlkID09PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmxvZ2dlci5pbmZvKFwiQWRkIG1zYWwgZnJhbWUgdG8gZG9jdW1lbnQ6XCIgKyBpZnJhbWVJZCk7XHJcbiAgICAgICAgdmFyIGFkYWxGcmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlmcmFtZUlkKTtcclxuICAgICAgICBpZiAoIWFkYWxGcmFtZSkge1xyXG4gICAgICAgICAgICBpZiAoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCAmJlxyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50ICYmXHJcbiAgICAgICAgICAgICAgICAod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZihcIk1TSUUgNS4wXCIpID09PSAtMSkpIHtcclxuICAgICAgICAgICAgICAgIHZhciBpZnIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaWZyYW1lXCIpO1xyXG4gICAgICAgICAgICAgICAgaWZyLnNldEF0dHJpYnV0ZShcImlkXCIsIGlmcmFtZUlkKTtcclxuICAgICAgICAgICAgICAgIGlmci5zdHlsZS52aXNpYmlsaXR5ID0gXCJoaWRkZW5cIjtcclxuICAgICAgICAgICAgICAgIGlmci5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcclxuICAgICAgICAgICAgICAgIGlmci5zdHlsZS53aWR0aCA9IGlmci5zdHlsZS5oZWlnaHQgPSBcIjBcIjtcclxuICAgICAgICAgICAgICAgIGlmci5zdHlsZS5ib3JkZXIgPSBcIjBcIjtcclxuICAgICAgICAgICAgICAgIGFkYWxGcmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYm9keVwiKVswXS5hcHBlbmRDaGlsZChpZnIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGRvY3VtZW50LmJvZHkgJiYgZG9jdW1lbnQuYm9keS5pbnNlcnRBZGphY2VudEhUTUwpIHtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuaW5zZXJ0QWRqYWNlbnRIVE1MKFwiYmVmb3JlZW5kXCIsIFwiPGlmcmFtZSBuYW1lPSdcIiArIGlmcmFtZUlkICsgXCInIGlkPSdcIiArIGlmcmFtZUlkICsgXCInIHN0eWxlPSdkaXNwbGF5Om5vbmUnPjwvaWZyYW1lPlwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAod2luZG93LmZyYW1lcyAmJiB3aW5kb3cuZnJhbWVzW2lmcmFtZUlkXSkge1xyXG4gICAgICAgICAgICAgICAgYWRhbEZyYW1lID0gd2luZG93LmZyYW1lc1tpZnJhbWVJZF07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGFkYWxGcmFtZTtcclxuICAgIH07XHJcbiAgICAvLyNlbmRyZWdpb25cclxuICAgIC8vI3JlZ2lvbiBHZW5lcmFsIEhlbHBlcnNcclxuICAgIC8qKlxyXG4gICAgICogQGhpZGRlblxyXG4gICAgICogVXNlZCB0byByZWRpcmVjdCB0aGUgYnJvd3NlciB0byB0aGUgU1RTIGF1dGhvcml6YXRpb24gZW5kcG9pbnRcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB1cmxOYXZpZ2F0ZSAtIFVSTCBvZiB0aGUgYXV0aG9yaXphdGlvbiBlbmRwb2ludFxyXG4gICAgICovXHJcbiAgICBVc2VyQWdlbnRBcHBsaWNhdGlvbi5wcm90b3R5cGUubmF2aWdhdGVXaW5kb3cgPSBmdW5jdGlvbiAodXJsTmF2aWdhdGUsIHBvcHVwV2luZG93KSB7XHJcbiAgICAgICAgLy8gTmF2aWdhdGUgaWYgdmFsaWQgVVJMXHJcbiAgICAgICAgaWYgKHVybE5hdmlnYXRlICYmICFTdHJpbmdVdGlscy5pc0VtcHR5KHVybE5hdmlnYXRlKSkge1xyXG4gICAgICAgICAgICB2YXIgbmF2aWdhdGVXaW5kb3cgPSBwb3B1cFdpbmRvdyA/IHBvcHVwV2luZG93IDogd2luZG93O1xyXG4gICAgICAgICAgICB2YXIgbG9nTWVzc2FnZSA9IHBvcHVwV2luZG93ID8gXCJOYXZpZ2F0ZWQgUG9wdXAgd2luZG93IHRvOlwiICsgdXJsTmF2aWdhdGUgOiBcIk5hdmlnYXRlIHRvOlwiICsgdXJsTmF2aWdhdGU7XHJcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmluZm9QaWkobG9nTWVzc2FnZSk7XHJcbiAgICAgICAgICAgIG5hdmlnYXRlV2luZG93LmxvY2F0aW9uLnJlcGxhY2UodXJsTmF2aWdhdGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5sb2dnZXIuaW5mbyhcIk5hdmlnYXRlIHVybCBpcyBlbXB0eVwiKTtcclxuICAgICAgICAgICAgdGhyb3cgQXV0aEVycm9yLmNyZWF0ZVVuZXhwZWN0ZWRFcnJvcihcIk5hdmlnYXRlIHVybCBpcyBlbXB0eVwiKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAaGlkZGVuXHJcbiAgICAgKiBVc2VkIHRvIGFkZCB0aGUgZGV2ZWxvcGVyIHJlcXVlc3RlZCBjYWxsYmFjayB0byB0aGUgYXJyYXkgb2YgY2FsbGJhY2tzIGZvciB0aGUgc3BlY2lmaWVkIHNjb3Blcy4gVGhlIHVwZGF0ZWQgYXJyYXkgaXMgc3RvcmVkIG9uIHRoZSB3aW5kb3cgb2JqZWN0XHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXhwZWN0ZWRTdGF0ZSAtIFVuaXF1ZSBzdGF0ZSBpZGVudGlmaWVyIChndWlkKS5cclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzY29wZSAtIERldmVsb3BlciByZXF1ZXN0ZWQgcGVybWlzc2lvbnMuIE5vdCBhbGwgc2NvcGVzIGFyZSBndWFyYW50ZWVkIHRvIGJlIGluY2x1ZGVkIGluIHRoZSBhY2Nlc3MgdG9rZW4gcmV0dXJuZWQuXHJcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSByZXNvbHZlIC0gVGhlIHJlc29sdmUgZnVuY3Rpb24gb2YgdGhlIHByb21pc2Ugb2JqZWN0LlxyXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gcmVqZWN0IC0gVGhlIHJlamVjdCBmdW5jdGlvbiBvZiB0aGUgcHJvbWlzZSBvYmplY3QuXHJcbiAgICAgKiBAaWdub3JlXHJcbiAgICAgKi9cclxuICAgIFVzZXJBZ2VudEFwcGxpY2F0aW9uLnByb3RvdHlwZS5yZWdpc3RlckNhbGxiYWNrID0gZnVuY3Rpb24gKGV4cGVjdGVkU3RhdGUsIHNjb3BlLCByZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIC8vIHRyYWNrIGFjdGl2ZSByZW5ld2Fsc1xyXG4gICAgICAgIHdpbmRvdy5hY3RpdmVSZW5ld2Fsc1tzY29wZV0gPSBleHBlY3RlZFN0YXRlO1xyXG4gICAgICAgIC8vIGluaXRpYWxpemUgY2FsbGJhY2tzIG1hcHBlZCBhcnJheVxyXG4gICAgICAgIGlmICghd2luZG93LnByb21pc2VNYXBwZWRUb1JlbmV3U3RhdGVzW2V4cGVjdGVkU3RhdGVdKSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5wcm9taXNlTWFwcGVkVG9SZW5ld1N0YXRlc1tleHBlY3RlZFN0YXRlXSA9IFtdO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBpbmRleGluZyBvbiB0aGUgY3VycmVudCBzdGF0ZSwgcHVzaCB0aGUgY2FsbGJhY2sgcGFyYW1zIHRvIGNhbGxiYWNrcyBtYXBwZWRcclxuICAgICAgICB3aW5kb3cucHJvbWlzZU1hcHBlZFRvUmVuZXdTdGF0ZXNbZXhwZWN0ZWRTdGF0ZV0ucHVzaCh7IHJlc29sdmU6IHJlc29sdmUsIHJlamVjdDogcmVqZWN0IH0pO1xyXG4gICAgICAgIC8vIFN0b3JlIHRoZSBzZXJ2ZXIgZXNwb25zZSBpbiB0aGUgY3VycmVudCB3aW5kb3c/P1xyXG4gICAgICAgIGlmICghd2luZG93LmNhbGxiYWNrTWFwcGVkVG9SZW5ld1N0YXRlc1tleHBlY3RlZFN0YXRlXSkge1xyXG4gICAgICAgICAgICB3aW5kb3cuY2FsbGJhY2tNYXBwZWRUb1JlbmV3U3RhdGVzW2V4cGVjdGVkU3RhdGVdID1cclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChyZXNwb25zZSwgZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyByZXNldCBhY3RpdmUgcmVuZXdhbHNcclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cuYWN0aXZlUmVuZXdhbHNbc2NvcGVdID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAvLyBmb3IgYWxsIHByb21pc2VNYXBwZWR0b1JlbmV3U3RhdGVzIGZvciBhIGdpdmVuICdzdGF0ZScgLSBjYWxsIHRoZSByZWplY3QvcmVzb2x2ZSB3aXRoIGVycm9yL3Rva2VuIHJlc3BlY3RpdmVseVxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgd2luZG93LnByb21pc2VNYXBwZWRUb1JlbmV3U3RhdGVzW2V4cGVjdGVkU3RhdGVdLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cucHJvbWlzZU1hcHBlZFRvUmVuZXdTdGF0ZXNbZXhwZWN0ZWRTdGF0ZV1baV0ucmVqZWN0KGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LnByb21pc2VNYXBwZWRUb1JlbmV3U3RhdGVzW2V4cGVjdGVkU3RhdGVdW2ldLnJlc29sdmUocmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgQXV0aEVycm9yLmNyZWF0ZVVuZXhwZWN0ZWRFcnJvcihcIkVycm9yIGFuZCByZXNwb25zZSBhcmUgYm90aCBudWxsXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5sb2dnZXIud2FybmluZyhlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvLyByZXNldFxyXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5wcm9taXNlTWFwcGVkVG9SZW5ld1N0YXRlc1tleHBlY3RlZFN0YXRlXSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmNhbGxiYWNrTWFwcGVkVG9SZW5ld1N0YXRlc1tleHBlY3RlZFN0YXRlXSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvLyNlbmRyZWdpb25cclxuICAgIC8vI3JlZ2lvbiBMb2dvdXRcclxuICAgIC8qKlxyXG4gICAgICogVXNlIHRvIGxvZyBvdXQgdGhlIGN1cnJlbnQgdXNlciwgYW5kIHJlZGlyZWN0IHRoZSB1c2VyIHRvIHRoZSBwb3N0TG9nb3V0UmVkaXJlY3RVcmkuXHJcbiAgICAgKiBEZWZhdWx0IGJlaGF2aW91ciBpcyB0byByZWRpcmVjdCB0aGUgdXNlciB0byBgd2luZG93LmxvY2F0aW9uLmhyZWZgLlxyXG4gICAgICovXHJcbiAgICBVc2VyQWdlbnRBcHBsaWNhdGlvbi5wcm90b3R5cGUubG9nb3V0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5jbGVhckNhY2hlKCk7XHJcbiAgICAgICAgdGhpcy5hY2NvdW50ID0gbnVsbDtcclxuICAgICAgICB2YXIgbG9nb3V0ID0gXCJcIjtcclxuICAgICAgICBpZiAodGhpcy5nZXRQb3N0TG9nb3V0UmVkaXJlY3RVcmkoKSkge1xyXG4gICAgICAgICAgICBsb2dvdXQgPSBcInBvc3RfbG9nb3V0X3JlZGlyZWN0X3VyaT1cIiArIGVuY29kZVVSSUNvbXBvbmVudCh0aGlzLmdldFBvc3RMb2dvdXRSZWRpcmVjdFVyaSgpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5hdXRob3JpdHlJbnN0YW5jZS5yZXNvbHZlRW5kcG9pbnRzQXN5bmMoKS50aGVuKGZ1bmN0aW9uIChhdXRob3JpdHkpIHtcclxuICAgICAgICAgICAgdmFyIHVybE5hdmlnYXRlID0gYXV0aG9yaXR5LkVuZFNlc3Npb25FbmRwb2ludFxyXG4gICAgICAgICAgICAgICAgPyBhdXRob3JpdHkuRW5kU2Vzc2lvbkVuZHBvaW50ICsgXCI/XCIgKyBsb2dvdXRcclxuICAgICAgICAgICAgICAgIDogX3RoaXMuYXV0aG9yaXR5ICsgXCJvYXV0aDIvdjIuMC9sb2dvdXQ/XCIgKyBsb2dvdXQ7XHJcbiAgICAgICAgICAgIF90aGlzLm5hdmlnYXRlV2luZG93KHVybE5hdmlnYXRlKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEBoaWRkZW5cclxuICAgICAqIENsZWFyIGFsbCBhY2Nlc3MgdG9rZW5zIGluIHRoZSBjYWNoZS5cclxuICAgICAqIEBpZ25vcmVcclxuICAgICAqL1xyXG4gICAgVXNlckFnZW50QXBwbGljYXRpb24ucHJvdG90eXBlLmNsZWFyQ2FjaGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgd2luZG93LnJlbmV3U3RhdGVzID0gW107XHJcbiAgICAgICAgdmFyIGFjY2Vzc1Rva2VuSXRlbXMgPSB0aGlzLmNhY2hlU3RvcmFnZS5nZXRBbGxBY2Nlc3NUb2tlbnMoQ29uc3RhbnRzLmNsaWVudElkLCBDb25zdGFudHMuaG9tZUFjY291bnRJZGVudGlmaWVyKTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFjY2Vzc1Rva2VuSXRlbXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy5jYWNoZVN0b3JhZ2UucmVtb3ZlSXRlbShKU09OLnN0cmluZ2lmeShhY2Nlc3NUb2tlbkl0ZW1zW2ldLmtleSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNhY2hlU3RvcmFnZS5yZXNldENhY2hlSXRlbXMoKTtcclxuICAgICAgICB0aGlzLmNhY2hlU3RvcmFnZS5jbGVhckNvb2tpZSgpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQGhpZGRlblxyXG4gICAgICogQ2xlYXIgYSBnaXZlbiBhY2Nlc3MgdG9rZW4gZnJvbSB0aGUgY2FjaGUuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGFjY2Vzc1Rva2VuXHJcbiAgICAgKi9cclxuICAgIFVzZXJBZ2VudEFwcGxpY2F0aW9uLnByb3RvdHlwZS5jbGVhckNhY2hlRm9yU2NvcGUgPSBmdW5jdGlvbiAoYWNjZXNzVG9rZW4pIHtcclxuICAgICAgICB2YXIgYWNjZXNzVG9rZW5JdGVtcyA9IHRoaXMuY2FjaGVTdG9yYWdlLmdldEFsbEFjY2Vzc1Rva2VucyhDb25zdGFudHMuY2xpZW50SWQsIENvbnN0YW50cy5ob21lQWNjb3VudElkZW50aWZpZXIpO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYWNjZXNzVG9rZW5JdGVtcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgdG9rZW4gPSBhY2Nlc3NUb2tlbkl0ZW1zW2ldO1xyXG4gICAgICAgICAgICBpZiAodG9rZW4udmFsdWUuYWNjZXNzVG9rZW4gPT09IGFjY2Vzc1Rva2VuKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNhY2hlU3RvcmFnZS5yZW1vdmVJdGVtKEpTT04uc3RyaW5naWZ5KHRva2VuLmtleSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8vI2VuZHJlZ2lvblxyXG4gICAgLy8jcmVnaW9uIFJlc3BvbnNlXHJcbiAgICAvKipcclxuICAgICAqIEBoaWRkZW5cclxuICAgICAqIEBpZ25vcmVcclxuICAgICAqIENoZWNrcyBpZiB0aGUgcmVkaXJlY3QgcmVzcG9uc2UgaXMgcmVjZWl2ZWQgZnJvbSB0aGUgU1RTLiBJbiBjYXNlIG9mIHJlZGlyZWN0LCB0aGUgdXJsIGZyYWdtZW50IGhhcyBlaXRoZXIgaWRfdG9rZW4sIGFjY2Vzc190b2tlbiBvciBlcnJvci5cclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBoYXNoIC0gSGFzaCBwYXNzZWQgZnJvbSByZWRpcmVjdCBwYWdlLlxyXG4gICAgICogQHJldHVybnMge0Jvb2xlYW59IC0gdHJ1ZSBpZiByZXNwb25zZSBjb250YWlucyBpZF90b2tlbiwgYWNjZXNzX3Rva2VuIG9yIGVycm9yLCBmYWxzZSBvdGhlcndpc2UuXHJcbiAgICAgKi9cclxuICAgIFVzZXJBZ2VudEFwcGxpY2F0aW9uLnByb3RvdHlwZS5pc0NhbGxiYWNrID0gZnVuY3Rpb24gKGhhc2gpIHtcclxuICAgICAgICB0aGlzLmxvZ2dlci5pbmZvKFwiaXNDYWxsYmFjayB3aWxsIGJlIGRlcHJlY2F0ZWQgaW4gZmF2b3Igb2YgdXJsQ29udGFpbnNIYXNoIGluIE1TQUwuanMgdjIuMC5cIik7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudXJsQ29udGFpbnNIYXNoKGhhc2gpO1xyXG4gICAgfTtcclxuICAgIFVzZXJBZ2VudEFwcGxpY2F0aW9uLnByb3RvdHlwZS51cmxDb250YWluc0hhc2ggPSBmdW5jdGlvbiAodXJsU3RyaW5nKSB7XHJcbiAgICAgICAgdmFyIHBhcmFtZXRlcnMgPSB0aGlzLmRlc2VyaWFsaXplSGFzaCh1cmxTdHJpbmcpO1xyXG4gICAgICAgIHJldHVybiAocGFyYW1ldGVycy5oYXNPd25Qcm9wZXJ0eShDb25zdGFudHMuZXJyb3JEZXNjcmlwdGlvbikgfHxcclxuICAgICAgICAgICAgcGFyYW1ldGVycy5oYXNPd25Qcm9wZXJ0eShDb25zdGFudHMuZXJyb3IpIHx8XHJcbiAgICAgICAgICAgIHBhcmFtZXRlcnMuaGFzT3duUHJvcGVydHkoQ29uc3RhbnRzLmFjY2Vzc1Rva2VuKSB8fFxyXG4gICAgICAgICAgICBwYXJhbWV0ZXJzLmhhc093blByb3BlcnR5KENvbnN0YW50cy5pZFRva2VuKSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAaGlkZGVuXHJcbiAgICAgKiBVc2VkIHRvIGNhbGwgdGhlIGNvbnN0cnVjdG9yIGNhbGxiYWNrIHdpdGggdGhlIHRva2VuL2Vycm9yXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW2hhc2g9d2luZG93LmxvY2F0aW9uLmhhc2hdIC0gSGFzaCBmcmFnbWVudCBvZiBVcmwuXHJcbiAgICAgKi9cclxuICAgIFVzZXJBZ2VudEFwcGxpY2F0aW9uLnByb3RvdHlwZS5wcm9jZXNzQ2FsbEJhY2sgPSBmdW5jdGlvbiAoaGFzaCwgc3RhdGVJbmZvLCBwYXJlbnRDYWxsYmFjaykge1xyXG4gICAgICAgIHRoaXMubG9nZ2VyLmluZm8oXCJQcm9jZXNzaW5nIHRoZSBjYWxsYmFjayBmcm9tIHJlZGlyZWN0IHJlc3BvbnNlXCIpO1xyXG4gICAgICAgIC8vIGdldCB0aGUgc3RhdGUgaW5mbyBmcm9tIHRoZSBoYXNoXHJcbiAgICAgICAgaWYgKCFzdGF0ZUluZm8pIHtcclxuICAgICAgICAgICAgc3RhdGVJbmZvID0gdGhpcy5nZXRSZXNwb25zZVN0YXRlKGhhc2gpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgcmVzcG9uc2U7XHJcbiAgICAgICAgdmFyIGF1dGhFcnI7XHJcbiAgICAgICAgLy8gU2F2ZSB0aGUgdG9rZW4gaW5mbyBmcm9tIHRoZSBoYXNoXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcmVzcG9uc2UgPSB0aGlzLnNhdmVUb2tlbkZyb21IYXNoKGhhc2gsIHN0YXRlSW5mbyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgICAgYXV0aEVyciA9IGVycjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gcmVtb3ZlIGhhc2ggZnJvbSB0aGUgY2FjaGVcclxuICAgICAgICB0aGlzLmNhY2hlU3RvcmFnZS5yZW1vdmVJdGVtKENvbnN0YW50cy51cmxIYXNoKTtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBDbGVhciB0aGUgY29va2llIGluIHRoZSBoYXNoXHJcbiAgICAgICAgICAgIHRoaXMuY2FjaGVTdG9yYWdlLmNsZWFyQ29va2llKCk7XHJcbiAgICAgICAgICAgIHZhciBhY2NvdW50U3RhdGUgPSB0aGlzLmdldEFjY291bnRTdGF0ZShzdGF0ZUluZm8uc3RhdGUpO1xyXG4gICAgICAgICAgICBpZiAocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgIGlmICgoc3RhdGVJbmZvLnJlcXVlc3RUeXBlID09PSBDb25zdGFudHMucmVuZXdUb2tlbikgfHwgcmVzcG9uc2UuYWNjZXNzVG9rZW4pIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAod2luZG93LnBhcmVudCAhPT0gd2luZG93KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLnZlcmJvc2UoXCJXaW5kb3cgaXMgaW4gaWZyYW1lLCBhY3F1aXJpbmcgdG9rZW4gc2lsZW50bHlcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci52ZXJib3NlKFwiYWNxdWlyaW5nIHRva2VuIGludGVyYWN0aXZlIGluIHByb2dyZXNzXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZS50b2tlblR5cGUgPSBDb25zdGFudHMuYWNjZXNzVG9rZW47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChzdGF0ZUluZm8ucmVxdWVzdFR5cGUgPT09IENvbnN0YW50cy5sb2dpbikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLnRva2VuVHlwZSA9IENvbnN0YW50cy5pZFRva2VuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKCFwYXJlbnRDYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXV0aFJlc3BvbnNlSGFuZGxlcihDb25zdGFudHMuaW50ZXJhY3Rpb25UeXBlUmVkaXJlY3QsIHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoIXBhcmVudENhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmF1dGhFcnJvckhhbmRsZXIoQ29uc3RhbnRzLmludGVyYWN0aW9uVHlwZVJlZGlyZWN0LCBhdXRoRXJyLCBidWlsZFJlc3BvbnNlU3RhdGVPbmx5KGFjY291bnRTdGF0ZSkpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHBhcmVudENhbGxiYWNrKHJlc3BvbnNlLCBhdXRoRXJyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihcIkVycm9yIG9jY3VycmVkIGluIHRva2VuIHJlY2VpdmVkIGNhbGxiYWNrIGZ1bmN0aW9uOiBcIiArIGVycik7XHJcbiAgICAgICAgICAgIHRocm93IENsaWVudEF1dGhFcnJvci5jcmVhdGVFcnJvckluQ2FsbGJhY2tGdW5jdGlvbihlcnIudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQGhpZGRlblxyXG4gICAgICogVGhpcyBtZXRob2QgbXVzdCBiZSBjYWxsZWQgZm9yIHByb2Nlc3NpbmcgdGhlIHJlc3BvbnNlIHJlY2VpdmVkIGZyb20gdGhlIFNUUy4gSXQgZXh0cmFjdHMgdGhlIGhhc2gsIHByb2Nlc3NlcyB0aGUgdG9rZW4gb3IgZXJyb3IgaW5mb3JtYXRpb24gYW5kIHNhdmVzIGl0IGluIHRoZSBjYWNoZS4gSXQgdGhlblxyXG4gICAgICogY2FsbHMgdGhlIHJlZ2lzdGVyZWQgY2FsbGJhY2tzIGluIGNhc2Ugb2YgcmVkaXJlY3Qgb3IgcmVzb2x2ZXMgdGhlIHByb21pc2VzIHdpdGggdGhlIHJlc3VsdC5cclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbaGFzaD13aW5kb3cubG9jYXRpb24uaGFzaF0gLSBIYXNoIGZyYWdtZW50IG9mIFVybC5cclxuICAgICAqL1xyXG4gICAgVXNlckFnZW50QXBwbGljYXRpb24ucHJvdG90eXBlLmhhbmRsZUF1dGhlbnRpY2F0aW9uUmVzcG9uc2UgPSBmdW5jdGlvbiAoaGFzaCkge1xyXG4gICAgICAgIC8vIHJldHJpZXZlIHRoZSBoYXNoXHJcbiAgICAgICAgaWYgKGhhc2ggPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBoYXNoID0gd2luZG93LmxvY2F0aW9uLmhhc2g7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBzZWxmID0gbnVsbDtcclxuICAgICAgICB2YXIgaXNQb3B1cCA9IGZhbHNlO1xyXG4gICAgICAgIHZhciBpc1dpbmRvd09wZW5lck1zYWwgPSBmYWxzZTtcclxuICAgICAgICAvLyBDaGVjayBpZiB0aGUgY3VycmVudCB3aW5kb3cgb3BlbmVkIHRoZSBpRnJhbWUvcG9wdXBcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpc1dpbmRvd09wZW5lck1zYWwgPSB3aW5kb3cub3BlbmVyICYmIHdpbmRvdy5vcGVuZXIubXNhbCAmJiB3aW5kb3cub3BlbmVyLm1zYWwgIT09IHdpbmRvdy5tc2FsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICAgIC8vIGVyciA9IFNlY3VyaXR5RXJyb3I6IEJsb2NrZWQgYSBmcmFtZSB3aXRoIG9yaWdpbiBcIlt1cmxdXCIgZnJvbSBhY2Nlc3NpbmcgYSBjcm9zcy1vcmlnaW4gZnJhbWUuXHJcbiAgICAgICAgICAgIGlzV2luZG93T3BlbmVyTXNhbCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBTZXQgdGhlIHNlbGYgdG8gdGhlIHdpbmRvdyB0aGF0IGNyZWF0ZWQgdGhlIHBvcHVwL2lmcmFtZVxyXG4gICAgICAgIGlmIChpc1dpbmRvd09wZW5lck1zYWwpIHtcclxuICAgICAgICAgICAgc2VsZiA9IHdpbmRvdy5vcGVuZXIubXNhbDtcclxuICAgICAgICAgICAgaXNQb3B1cCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHdpbmRvdy5wYXJlbnQgJiYgd2luZG93LnBhcmVudC5tc2FsKSB7XHJcbiAgICAgICAgICAgIHNlbGYgPSB3aW5kb3cucGFyZW50Lm1zYWw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGlmICh3aW5kb3cucGFyZW50ICE9PSB3aW5kb3cpLCBieSB1c2luZyBzZWxmLCB3aW5kb3cucGFyZW50IGJlY29tZXMgZXF1YWwgdG8gd2luZG93IGluIGdldFJlc3BvbnNlU3RhdGUgbWV0aG9kIHNwZWNpZmljYWxseVxyXG4gICAgICAgIHZhciBzdGF0ZUluZm8gPSBzZWxmLmdldFJlc3BvbnNlU3RhdGUoaGFzaCk7XHJcbiAgICAgICAgdmFyIHRva2VuUmVzcG9uc2VDYWxsYmFjayA9IG51bGw7XHJcbiAgICAgICAgc2VsZi5sb2dnZXIuaW5mbyhcIlJldHVybmVkIGZyb20gcmVkaXJlY3QgdXJsXCIpO1xyXG4gICAgICAgIC8vIElmIHBhcmVudCB3aW5kb3cgaXMgdGhlIG1zYWwgaW5zdGFuY2Ugd2hpY2ggb3BlbmVkIHRoZSBjdXJyZW50IHdpbmRvdyAoaWZyYW1lKVxyXG4gICAgICAgIGlmICh0aGlzLnBhcmVudElzTXNhbCgpKSB7XHJcbiAgICAgICAgICAgIHRva2VuUmVzcG9uc2VDYWxsYmFjayA9IHdpbmRvdy5wYXJlbnQuY2FsbGJhY2tNYXBwZWRUb1JlbmV3U3RhdGVzW3N0YXRlSW5mby5zdGF0ZV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEN1cnJlbnQgd2luZG93IGlzIHdpbmRvdyBvcGVuZXIgKHBvcHVwKVxyXG4gICAgICAgIGVsc2UgaWYgKGlzV2luZG93T3BlbmVyTXNhbCkge1xyXG4gICAgICAgICAgICB0b2tlblJlc3BvbnNlQ2FsbGJhY2sgPSB3aW5kb3cub3BlbmVyLmNhbGxiYWNrTWFwcGVkVG9SZW5ld1N0YXRlc1tzdGF0ZUluZm8uc3RhdGVdO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBSZWRpcmVjdCBjYXNlc1xyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0b2tlblJlc3BvbnNlQ2FsbGJhY2sgPSBudWxsO1xyXG4gICAgICAgICAgICAvLyBpZiBzZXQgdG8gbmF2aWdhdGUgdG8gbG9naW5SZXF1ZXN0IHBhZ2UgcG9zdCBsb2dpblxyXG4gICAgICAgICAgICBpZiAoc2VsZi5jb25maWcuYXV0aC5uYXZpZ2F0ZVRvTG9naW5SZXF1ZXN0VXJsKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLmNhY2hlU3RvcmFnZS5zZXRJdGVtKENvbnN0YW50cy51cmxIYXNoLCBoYXNoKTtcclxuICAgICAgICAgICAgICAgIGlmICh3aW5kb3cucGFyZW50ID09PSB3aW5kb3cgJiYgIWlzUG9wdXApIHtcclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IHNlbGYuY2FjaGVTdG9yYWdlLmdldEl0ZW0oQ29uc3RhbnRzLmxvZ2luUmVxdWVzdCwgc2VsZi5pbkNvb2tpZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaGFzaCA9IFwiXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCF0aGlzLnJlZGlyZWN0Q2FsbGJhY2tzU2V0KSB7XHJcbiAgICAgICAgICAgICAgICAvLyBXZSByZWFjaGVkIHRoaXMgcG9pbnQgdG9vIGVhcmx5IC0gY2FjaGUgaGFzaCwgcmV0dXJuIGFuZCBwcm9jZXNzIGluIGhhbmRsZVJlZGlyZWN0Q2FsbGJhY2tzXHJcbiAgICAgICAgICAgICAgICBzZWxmLmNhY2hlU3RvcmFnZS5zZXRJdGVtKENvbnN0YW50cy51cmxIYXNoLCBoYXNoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBzZWxmLnByb2Nlc3NDYWxsQmFjayhoYXNoLCBzdGF0ZUluZm8sIHRva2VuUmVzcG9uc2VDYWxsYmFjayk7XHJcbiAgICAgICAgLy8gSWYgY3VycmVudCB3aW5kb3cgaXMgb3BlbmVyLCBjbG9zZSBhbGwgd2luZG93c1xyXG4gICAgICAgIGlmIChpc1dpbmRvd09wZW5lck1zYWwpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB3aW5kb3cub3BlbmVyLm9wZW5lZFdpbmRvd3MubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5vcGVuZXIub3BlbmVkV2luZG93c1tpXS5jbG9zZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQGhpZGRlblxyXG4gICAgICogUmV0dXJucyBkZXNlcmlhbGl6ZWQgcG9ydGlvbiBvZiBVUkwgaGFzaFxyXG4gICAgICogQHBhcmFtIGhhc2hcclxuICAgICAqL1xyXG4gICAgVXNlckFnZW50QXBwbGljYXRpb24ucHJvdG90eXBlLmRlc2VyaWFsaXplSGFzaCA9IGZ1bmN0aW9uICh1cmxGcmFnbWVudCkge1xyXG4gICAgICAgIHZhciBoYXNoID0gVXJsVXRpbHMuZ2V0SGFzaEZyb21VcmwodXJsRnJhZ21lbnQpO1xyXG4gICAgICAgIHJldHVybiBDcnlwdG9VdGlscy5kZXNlcmlhbGl6ZShoYXNoKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEBoaWRkZW5cclxuICAgICAqIENyZWF0ZXMgYSBzdGF0ZUluZm8gb2JqZWN0IGZyb20gdGhlIFVSTCBmcmFnbWVudCBhbmQgcmV0dXJucyBpdC5cclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBoYXNoICAtICBIYXNoIHBhc3NlZCBmcm9tIHJlZGlyZWN0IHBhZ2VcclxuICAgICAqIEByZXR1cm5zIHtUb2tlblJlc3BvbnNlfSBhbiBvYmplY3QgY3JlYXRlZCBmcm9tIHRoZSByZWRpcmVjdCByZXNwb25zZSBmcm9tIEFBRCBjb21wcmlzaW5nIG9mIHRoZSBrZXlzIC0gcGFyYW1ldGVycywgcmVxdWVzdFR5cGUsIHN0YXRlTWF0Y2gsIHN0YXRlUmVzcG9uc2UgYW5kIHZhbGlkLlxyXG4gICAgICogQGlnbm9yZVxyXG4gICAgICovXHJcbiAgICBVc2VyQWdlbnRBcHBsaWNhdGlvbi5wcm90b3R5cGUuZ2V0UmVzcG9uc2VTdGF0ZSA9IGZ1bmN0aW9uIChoYXNoKSB7XHJcbiAgICAgICAgdmFyIHBhcmFtZXRlcnMgPSB0aGlzLmRlc2VyaWFsaXplSGFzaChoYXNoKTtcclxuICAgICAgICB2YXIgc3RhdGVSZXNwb25zZTtcclxuICAgICAgICBpZiAoIXBhcmFtZXRlcnMpIHtcclxuICAgICAgICAgICAgdGhyb3cgQXV0aEVycm9yLmNyZWF0ZVVuZXhwZWN0ZWRFcnJvcihcIkhhc2ggd2FzIG5vdCBwYXJzZWQgY29ycmVjdGx5LlwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHBhcmFtZXRlcnMuaGFzT3duUHJvcGVydHkoXCJzdGF0ZVwiKSkge1xyXG4gICAgICAgICAgICBzdGF0ZVJlc3BvbnNlID0ge1xyXG4gICAgICAgICAgICAgICAgcmVxdWVzdFR5cGU6IENvbnN0YW50cy51bmtub3duLFxyXG4gICAgICAgICAgICAgICAgc3RhdGU6IHBhcmFtZXRlcnMuc3RhdGUsXHJcbiAgICAgICAgICAgICAgICBzdGF0ZU1hdGNoOiBmYWxzZVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhyb3cgQXV0aEVycm9yLmNyZWF0ZVVuZXhwZWN0ZWRFcnJvcihcIkhhc2ggZG9lcyBub3QgY29udGFpbiBzdGF0ZS5cIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGFzeW5jIGNhbGxzIGNhbiBmaXJlIGlmcmFtZSBhbmQgbG9naW4gcmVxdWVzdCBhdCB0aGUgc2FtZSB0aW1lIGlmIGRldmVsb3BlciBkb2VzIG5vdCB1c2UgdGhlIEFQSSBhcyBleHBlY3RlZFxyXG4gICAgICAgIC8vIGluY29taW5nIGNhbGxiYWNrIG5lZWRzIHRvIGJlIGxvb2tlZCB1cCB0byBmaW5kIHRoZSByZXF1ZXN0IHR5cGVcclxuICAgICAgICAvLyBsb2dpblJlZGlyZWN0XHJcbiAgICAgICAgaWYgKHN0YXRlUmVzcG9uc2Uuc3RhdGUgPT09IHRoaXMuY2FjaGVTdG9yYWdlLmdldEl0ZW0oQ29uc3RhbnRzLnN0YXRlTG9naW4sIHRoaXMuaW5Db29raWUpIHx8IHN0YXRlUmVzcG9uc2Uuc3RhdGUgPT09IHRoaXMuc2lsZW50QXV0aGVudGljYXRpb25TdGF0ZSkgeyAvLyBsb2dpblJlZGlyZWN0XHJcbiAgICAgICAgICAgIHN0YXRlUmVzcG9uc2UucmVxdWVzdFR5cGUgPSBDb25zdGFudHMubG9naW47XHJcbiAgICAgICAgICAgIHN0YXRlUmVzcG9uc2Uuc3RhdGVNYXRjaCA9IHRydWU7XHJcbiAgICAgICAgICAgIHJldHVybiBzdGF0ZVJlc3BvbnNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBhY3F1aXJlVG9rZW5SZWRpcmVjdFxyXG4gICAgICAgIGVsc2UgaWYgKHN0YXRlUmVzcG9uc2Uuc3RhdGUgPT09IHRoaXMuY2FjaGVTdG9yYWdlLmdldEl0ZW0oQ29uc3RhbnRzLnN0YXRlQWNxdWlyZVRva2VuLCB0aGlzLmluQ29va2llKSkgeyAvL2FjcXVpcmVUb2tlblJlZGlyZWN0XHJcbiAgICAgICAgICAgIHN0YXRlUmVzcG9uc2UucmVxdWVzdFR5cGUgPSBDb25zdGFudHMucmVuZXdUb2tlbjtcclxuICAgICAgICAgICAgc3RhdGVSZXNwb25zZS5zdGF0ZU1hdGNoID0gdHJ1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIHN0YXRlUmVzcG9uc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGV4dGVybmFsIGFwaSByZXF1ZXN0cyBtYXkgaGF2ZSBtYW55IHJlbmV3dG9rZW4gcmVxdWVzdHMgZm9yIGRpZmZlcmVudCByZXNvdXJjZVxyXG4gICAgICAgIGlmICghc3RhdGVSZXNwb25zZS5zdGF0ZU1hdGNoKSB7XHJcbiAgICAgICAgICAgIHN0YXRlUmVzcG9uc2UucmVxdWVzdFR5cGUgPSB3aW5kb3cucmVxdWVzdFR5cGU7XHJcbiAgICAgICAgICAgIHZhciBzdGF0ZXNJblBhcmVudENvbnRleHQgPSB3aW5kb3cucmVuZXdTdGF0ZXM7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RhdGVzSW5QYXJlbnRDb250ZXh0Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc3RhdGVzSW5QYXJlbnRDb250ZXh0W2ldID09PSBzdGF0ZVJlc3BvbnNlLnN0YXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdGVSZXNwb25zZS5zdGF0ZU1hdGNoID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gc3RhdGVSZXNwb25zZTtcclxuICAgIH07XHJcbiAgICAvLyNlbmRyZWdpb25cclxuICAgIC8vI3JlZ2lvbiBUb2tlbiBQcm9jZXNzaW5nIChFeHRyYWN0IHRvIFRva2VuUHJvY2Vzc2luZy50cylcclxuICAgIC8qKlxyXG4gICAgICogQGhpZGRlblxyXG4gICAgICogVXNlZCB0byBnZXQgdG9rZW4gZm9yIHRoZSBzcGVjaWZpZWQgc2V0IG9mIHNjb3BlcyBmcm9tIHRoZSBjYWNoZVxyXG4gICAgICogQHBhcmFtIHtAbGluayBTZXJ2ZXJSZXF1ZXN0UGFyYW1ldGVyc30gLSBSZXF1ZXN0IHNlbnQgdG8gdGhlIFNUUyB0byBvYnRhaW4gYW4gaWRfdG9rZW4vYWNjZXNzX3Rva2VuXHJcbiAgICAgKiBAcGFyYW0ge0FjY291bnR9IGFjY291bnQgLSBBY2NvdW50IGZvciB3aGljaCB0aGUgc2NvcGVzIHdlcmUgcmVxdWVzdGVkXHJcbiAgICAgKi9cclxuICAgIFVzZXJBZ2VudEFwcGxpY2F0aW9uLnByb3RvdHlwZS5nZXRDYWNoZWRUb2tlbiA9IGZ1bmN0aW9uIChzZXJ2ZXJBdXRoZW50aWNhdGlvblJlcXVlc3QsIGFjY291bnQpIHtcclxuICAgICAgICB2YXIgYWNjZXNzVG9rZW5DYWNoZUl0ZW0gPSBudWxsO1xyXG4gICAgICAgIHZhciBzY29wZXMgPSBzZXJ2ZXJBdXRoZW50aWNhdGlvblJlcXVlc3Quc2NvcGVzO1xyXG4gICAgICAgIC8vIGZpbHRlciBieSBjbGllbnRJZCBhbmQgYWNjb3VudFxyXG4gICAgICAgIHZhciB0b2tlbkNhY2hlSXRlbXMgPSB0aGlzLmNhY2hlU3RvcmFnZS5nZXRBbGxBY2Nlc3NUb2tlbnModGhpcy5jbGllbnRJZCwgYWNjb3VudCA/IGFjY291bnQuaG9tZUFjY291bnRJZGVudGlmaWVyIDogbnVsbCk7XHJcbiAgICAgICAgLy8gTm8gbWF0Y2ggZm91bmQgYWZ0ZXIgaW5pdGlhbCBmaWx0ZXJpbmdcclxuICAgICAgICBpZiAodG9rZW5DYWNoZUl0ZW1zLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGZpbHRlcmVkSXRlbXMgPSBbXTtcclxuICAgICAgICAvLyBpZiBubyBhdXRob3JpdHkgcGFzc2VkXHJcbiAgICAgICAgaWYgKCFzZXJ2ZXJBdXRoZW50aWNhdGlvblJlcXVlc3QuYXV0aG9yaXR5KSB7XHJcbiAgICAgICAgICAgIC8vIGZpbHRlciBieSBzY29wZVxyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRva2VuQ2FjaGVJdGVtcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNhY2hlSXRlbSA9IHRva2VuQ2FjaGVJdGVtc1tpXTtcclxuICAgICAgICAgICAgICAgIHZhciBjYWNoZWRTY29wZXMgPSBjYWNoZUl0ZW0ua2V5LnNjb3Blcy5zcGxpdChcIiBcIik7XHJcbiAgICAgICAgICAgICAgICBpZiAoU2NvcGVTZXQuY29udGFpbnNTY29wZShjYWNoZWRTY29wZXMsIHNjb3BlcykpIHtcclxuICAgICAgICAgICAgICAgICAgICBmaWx0ZXJlZEl0ZW1zLnB1c2goY2FjaGVJdGVtKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBpZiBvbmx5IG9uZSBjYWNoZWQgdG9rZW4gZm91bmRcclxuICAgICAgICAgICAgaWYgKGZpbHRlcmVkSXRlbXMubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICBhY2Nlc3NUb2tlbkNhY2hlSXRlbSA9IGZpbHRlcmVkSXRlbXNbMF07XHJcbiAgICAgICAgICAgICAgICBzZXJ2ZXJBdXRoZW50aWNhdGlvblJlcXVlc3QuYXV0aG9yaXR5SW5zdGFuY2UgPSBBdXRob3JpdHlGYWN0b3J5LkNyZWF0ZUluc3RhbmNlKGFjY2Vzc1Rva2VuQ2FjaGVJdGVtLmtleS5hdXRob3JpdHksIHRoaXMuY29uZmlnLmF1dGgudmFsaWRhdGVBdXRob3JpdHkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIGlmIG1vcmUgdGhhbiBvbmUgY2FjaGVkIHRva2VuIGlzIGZvdW5kXHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGZpbHRlcmVkSXRlbXMubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgQ2xpZW50QXV0aEVycm9yLmNyZWF0ZU11bHRpcGxlTWF0Y2hpbmdUb2tlbnNJbkNhY2hlRXJyb3Ioc2NvcGVzLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIGlmIG5vIG1hdGNoIGZvdW5kLCBjaGVjayBpZiB0aGVyZSB3YXMgYSBzaW5nbGUgYXV0aG9yaXR5IHVzZWRcclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYXV0aG9yaXR5TGlzdCA9IHRoaXMuZ2V0VW5pcXVlQXV0aG9yaXR5KHRva2VuQ2FjaGVJdGVtcywgXCJhdXRob3JpdHlcIik7XHJcbiAgICAgICAgICAgICAgICBpZiAoYXV0aG9yaXR5TGlzdC5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgQ2xpZW50QXV0aEVycm9yLmNyZWF0ZU11bHRpcGxlQXV0aG9yaXRpZXNJbkNhY2hlRXJyb3Ioc2NvcGVzLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgc2VydmVyQXV0aGVudGljYXRpb25SZXF1ZXN0LmF1dGhvcml0eUluc3RhbmNlID0gQXV0aG9yaXR5RmFjdG9yeS5DcmVhdGVJbnN0YW5jZShhdXRob3JpdHlMaXN0WzBdLCB0aGlzLmNvbmZpZy5hdXRoLnZhbGlkYXRlQXV0aG9yaXR5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBpZiBhbiBhdXRob3JpdHkgaXMgcGFzc2VkIGluIHRoZSBBUElcclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gZmlsdGVyIGJ5IGF1dGhvcml0eSBhbmQgc2NvcGVcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0b2tlbkNhY2hlSXRlbXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBjYWNoZUl0ZW0gPSB0b2tlbkNhY2hlSXRlbXNbaV07XHJcbiAgICAgICAgICAgICAgICB2YXIgY2FjaGVkU2NvcGVzID0gY2FjaGVJdGVtLmtleS5zY29wZXMuc3BsaXQoXCIgXCIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKFNjb3BlU2V0LmNvbnRhaW5zU2NvcGUoY2FjaGVkU2NvcGVzLCBzY29wZXMpICYmIFVybFV0aWxzLkNhbm9uaWNhbGl6ZVVyaShjYWNoZUl0ZW0ua2V5LmF1dGhvcml0eSkgPT09IHNlcnZlckF1dGhlbnRpY2F0aW9uUmVxdWVzdC5hdXRob3JpdHkpIHtcclxuICAgICAgICAgICAgICAgICAgICBmaWx0ZXJlZEl0ZW1zLnB1c2goY2FjaGVJdGVtKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBubyBtYXRjaFxyXG4gICAgICAgICAgICBpZiAoZmlsdGVyZWRJdGVtcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIGlmIG9ubHkgb25lIGNhY2hlZFRva2VuIEZvdW5kXHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGZpbHRlcmVkSXRlbXMubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICBhY2Nlc3NUb2tlbkNhY2hlSXRlbSA9IGZpbHRlcmVkSXRlbXNbMF07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBpZiBtb3JlIHRoYW4gY2FjaGVkIHRva2VuIGlzIGZvdW5kXHJcbiAgICAgICAgICAgICAgICB0aHJvdyBDbGllbnRBdXRoRXJyb3IuY3JlYXRlTXVsdGlwbGVNYXRjaGluZ1Rva2Vuc0luQ2FjaGVFcnJvcihzY29wZXMudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGFjY2Vzc1Rva2VuQ2FjaGVJdGVtICE9IG51bGwpIHtcclxuICAgICAgICAgICAgdmFyIGV4cGlyZWQgPSBOdW1iZXIoYWNjZXNzVG9rZW5DYWNoZUl0ZW0udmFsdWUuZXhwaXJlc0luKTtcclxuICAgICAgICAgICAgLy8gSWYgZXhwaXJhdGlvbiBpcyB3aXRoaW4gb2Zmc2V0LCBpdCB3aWxsIGZvcmNlIHJlbmV3XHJcbiAgICAgICAgICAgIHZhciBvZmZzZXQgPSB0aGlzLmNvbmZpZy5zeXN0ZW0udG9rZW5SZW5ld2FsT2Zmc2V0U2Vjb25kcyB8fCAzMDA7XHJcbiAgICAgICAgICAgIGlmIChleHBpcmVkICYmIChleHBpcmVkID4gVGltZVV0aWxzLm5vdygpICsgb2Zmc2V0KSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGlkVG9rZW5PYmogPSBuZXcgSWRUb2tlbihhY2Nlc3NUb2tlbkNhY2hlSXRlbS52YWx1ZS5pZFRva2VuKTtcclxuICAgICAgICAgICAgICAgIGlmICghYWNjb3VudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFjY291bnQgPSB0aGlzLmdldEFjY291bnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWFjY291bnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgQXV0aEVycm9yLmNyZWF0ZVVuZXhwZWN0ZWRFcnJvcihcIkFjY291bnQgc2hvdWxkIG5vdCBiZSBudWxsIGhlcmUuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhciBhU3RhdGUgPSB0aGlzLmdldEFjY291bnRTdGF0ZShzZXJ2ZXJBdXRoZW50aWNhdGlvblJlcXVlc3Quc3RhdGUpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHJlc3BvbnNlID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHVuaXF1ZUlkOiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHRlbmFudElkOiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHRva2VuVHlwZTogKGFjY2Vzc1Rva2VuQ2FjaGVJdGVtLnZhbHVlLmlkVG9rZW4gPT09IGFjY2Vzc1Rva2VuQ2FjaGVJdGVtLnZhbHVlLmFjY2Vzc1Rva2VuKSA/IENvbnN0YW50cy5pZFRva2VuIDogQ29uc3RhbnRzLmFjY2Vzc1Rva2VuLFxyXG4gICAgICAgICAgICAgICAgICAgIGlkVG9rZW46IGlkVG9rZW5PYmosXHJcbiAgICAgICAgICAgICAgICAgICAgaWRUb2tlbkNsYWltczogaWRUb2tlbk9iai5jbGFpbXMsXHJcbiAgICAgICAgICAgICAgICAgICAgYWNjZXNzVG9rZW46IGFjY2Vzc1Rva2VuQ2FjaGVJdGVtLnZhbHVlLmFjY2Vzc1Rva2VuLFxyXG4gICAgICAgICAgICAgICAgICAgIHNjb3BlczogYWNjZXNzVG9rZW5DYWNoZUl0ZW0ua2V5LnNjb3Blcy5zcGxpdChcIiBcIiksXHJcbiAgICAgICAgICAgICAgICAgICAgZXhwaXJlc09uOiBuZXcgRGF0ZShleHBpcmVkICogMTAwMCksXHJcbiAgICAgICAgICAgICAgICAgICAgYWNjb3VudDogYWNjb3VudCxcclxuICAgICAgICAgICAgICAgICAgICBhY2NvdW50U3RhdGU6IGFTdGF0ZSxcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBSZXNwb25zZVV0aWxzLnNldFJlc3BvbnNlSWRUb2tlbihyZXNwb25zZSwgaWRUb2tlbk9iaik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNhY2hlU3RvcmFnZS5yZW1vdmVJdGVtKEpTT04uc3RyaW5naWZ5KGZpbHRlcmVkSXRlbXNbMF0ua2V5KSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQGhpZGRlblxyXG4gICAgICogVXNlZCB0byBnZXQgYSB1bmlxdWUgbGlzdCBvZiBhdXRob3JpdHVlcyBmcm9tIHRoZSBjYWNoZVxyXG4gICAgICogQHBhcmFtIHtBcnJheTxBY2Nlc3NUb2tlbkNhY2hlSXRlbT59ICBhY2Nlc3NUb2tlbkNhY2hlSXRlbXMgLSBhY2Nlc3NUb2tlbkNhY2hlSXRlbXMgc2F2ZWQgaW4gdGhlIGNhY2hlXHJcbiAgICAgKiBAaWdub3JlXHJcbiAgICAgKi9cclxuICAgIFVzZXJBZ2VudEFwcGxpY2F0aW9uLnByb3RvdHlwZS5nZXRVbmlxdWVBdXRob3JpdHkgPSBmdW5jdGlvbiAoYWNjZXNzVG9rZW5DYWNoZUl0ZW1zLCBwcm9wZXJ0eSkge1xyXG4gICAgICAgIHZhciBhdXRob3JpdHlMaXN0ID0gW107XHJcbiAgICAgICAgdmFyIGZsYWdzID0gW107XHJcbiAgICAgICAgYWNjZXNzVG9rZW5DYWNoZUl0ZW1zLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgaWYgKGVsZW1lbnQua2V5Lmhhc093blByb3BlcnR5KHByb3BlcnR5KSAmJiAoZmxhZ3MuaW5kZXhPZihlbGVtZW50LmtleVtwcm9wZXJ0eV0pID09PSAtMSkpIHtcclxuICAgICAgICAgICAgICAgIGZsYWdzLnB1c2goZWxlbWVudC5rZXlbcHJvcGVydHldKTtcclxuICAgICAgICAgICAgICAgIGF1dGhvcml0eUxpc3QucHVzaChlbGVtZW50LmtleVtwcm9wZXJ0eV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGF1dGhvcml0eUxpc3Q7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAaGlkZGVuXHJcbiAgICAgKiBDaGVjayBpZiBBREFMIGlkX3Rva2VuIGV4aXN0cyBhbmQgcmV0dXJuIGlmIGV4aXN0cy5cclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIFVzZXJBZ2VudEFwcGxpY2F0aW9uLnByb3RvdHlwZS5leHRyYWN0QURBTElkVG9rZW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGFkYWxJZFRva2VuID0gdGhpcy5jYWNoZVN0b3JhZ2UuZ2V0SXRlbShDb25zdGFudHMuYWRhbElkVG9rZW4pO1xyXG4gICAgICAgIGlmICghU3RyaW5nVXRpbHMuaXNFbXB0eShhZGFsSWRUb2tlbikpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFRva2VuVXRpbHMuZXh0cmFjdElkVG9rZW4oYWRhbElkVG9rZW4pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEBoaWRkZW5cclxuICAgICAqIEFjcXVpcmVzIGFjY2VzcyB0b2tlbiB1c2luZyBhIGhpZGRlbiBpZnJhbWUuXHJcbiAgICAgKiBAaWdub3JlXHJcbiAgICAgKi9cclxuICAgIFVzZXJBZ2VudEFwcGxpY2F0aW9uLnByb3RvdHlwZS5yZW5ld1Rva2VuID0gZnVuY3Rpb24gKHNjb3BlcywgcmVzb2x2ZSwgcmVqZWN0LCBhY2NvdW50LCBzZXJ2ZXJBdXRoZW50aWNhdGlvblJlcXVlc3QpIHtcclxuICAgICAgICB2YXIgc2NvcGUgPSBzY29wZXMuam9pbihcIiBcIikudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICB0aGlzLmxvZ2dlci52ZXJib3NlKFwicmVuZXdUb2tlbiBpcyBjYWxsZWQgZm9yIHNjb3BlOlwiICsgc2NvcGUpO1xyXG4gICAgICAgIHZhciBmcmFtZUhhbmRsZSA9IHRoaXMuYWRkSGlkZGVuSUZyYW1lKFwibXNhbFJlbmV3RnJhbWVcIiArIHNjb3BlKTtcclxuICAgICAgICB0aGlzLnVwZGF0ZUNhY2hlRW50cmllcyhzZXJ2ZXJBdXRoZW50aWNhdGlvblJlcXVlc3QsIGFjY291bnQpO1xyXG4gICAgICAgIHRoaXMubG9nZ2VyLnZlcmJvc2UoXCJSZW5ldyB0b2tlbiBFeHBlY3RlZCBzdGF0ZTogXCIgKyBzZXJ2ZXJBdXRoZW50aWNhdGlvblJlcXVlc3Quc3RhdGUpO1xyXG4gICAgICAgIC8vIEJ1aWxkIHVybE5hdmlnYXRlIHdpdGggXCJwcm9tcHQ9bm9uZVwiIGFuZCBuYXZpZ2F0ZSB0byBVUkwgaW4gaGlkZGVuIGlGcmFtZVxyXG4gICAgICAgIHZhciB1cmxOYXZpZ2F0ZSA9IFVybFV0aWxzLnVybFJlbW92ZVF1ZXJ5U3RyaW5nUGFyYW1ldGVyKFVybFV0aWxzLmNyZWF0ZU5hdmlnYXRlVXJsKHNlcnZlckF1dGhlbnRpY2F0aW9uUmVxdWVzdCksIENvbnN0YW50cy5wcm9tcHQpICsgQ29uc3RhbnRzLnByb21wdF9ub25lO1xyXG4gICAgICAgIHdpbmRvdy5yZW5ld1N0YXRlcy5wdXNoKHNlcnZlckF1dGhlbnRpY2F0aW9uUmVxdWVzdC5zdGF0ZSk7XHJcbiAgICAgICAgd2luZG93LnJlcXVlc3RUeXBlID0gQ29uc3RhbnRzLnJlbmV3VG9rZW47XHJcbiAgICAgICAgdGhpcy5yZWdpc3RlckNhbGxiYWNrKHNlcnZlckF1dGhlbnRpY2F0aW9uUmVxdWVzdC5zdGF0ZSwgc2NvcGUsIHJlc29sdmUsIHJlamVjdCk7XHJcbiAgICAgICAgdGhpcy5sb2dnZXIuaW5mb1BpaShcIk5hdmlnYXRlIHRvOlwiICsgdXJsTmF2aWdhdGUpO1xyXG4gICAgICAgIGZyYW1lSGFuZGxlLnNyYyA9IFwiYWJvdXQ6YmxhbmtcIjtcclxuICAgICAgICB0aGlzLmxvYWRJZnJhbWVUaW1lb3V0KHVybE5hdmlnYXRlLCBcIm1zYWxSZW5ld0ZyYW1lXCIgKyBzY29wZSwgc2NvcGUpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQGhpZGRlblxyXG4gICAgICogUmVuZXdzIGlkdG9rZW4gZm9yIGFwcFwicyBvd24gYmFja2VuZCB3aGVuIGNsaWVudElkIGlzIHBhc3NlZCBhcyBhIHNpbmdsZSBzY29wZSBpbiB0aGUgc2NvcGVzIGFycmF5LlxyXG4gICAgICogQGlnbm9yZVxyXG4gICAgICovXHJcbiAgICBVc2VyQWdlbnRBcHBsaWNhdGlvbi5wcm90b3R5cGUucmVuZXdJZFRva2VuID0gZnVuY3Rpb24gKHNjb3BlcywgcmVzb2x2ZSwgcmVqZWN0LCBhY2NvdW50LCBzZXJ2ZXJBdXRoZW50aWNhdGlvblJlcXVlc3QpIHtcclxuICAgICAgICB0aGlzLmxvZ2dlci5pbmZvKFwicmVuZXdpZFRva2VuIGlzIGNhbGxlZFwiKTtcclxuICAgICAgICB2YXIgZnJhbWVIYW5kbGUgPSB0aGlzLmFkZEhpZGRlbklGcmFtZShcIm1zYWxJZFRva2VuRnJhbWVcIik7XHJcbiAgICAgICAgdGhpcy51cGRhdGVDYWNoZUVudHJpZXMoc2VydmVyQXV0aGVudGljYXRpb25SZXF1ZXN0LCBhY2NvdW50KTtcclxuICAgICAgICB0aGlzLmxvZ2dlci52ZXJib3NlKFwiUmVuZXcgSWR0b2tlbiBFeHBlY3RlZCBzdGF0ZTogXCIgKyBzZXJ2ZXJBdXRoZW50aWNhdGlvblJlcXVlc3Quc3RhdGUpO1xyXG4gICAgICAgIC8vIEJ1aWxkIHVybE5hdmlnYXRlIHdpdGggXCJwcm9tcHQ9bm9uZVwiIGFuZCBuYXZpZ2F0ZSB0byBVUkwgaW4gaGlkZGVuIGlGcmFtZVxyXG4gICAgICAgIHZhciB1cmxOYXZpZ2F0ZSA9IFVybFV0aWxzLnVybFJlbW92ZVF1ZXJ5U3RyaW5nUGFyYW1ldGVyKFVybFV0aWxzLmNyZWF0ZU5hdmlnYXRlVXJsKHNlcnZlckF1dGhlbnRpY2F0aW9uUmVxdWVzdCksIENvbnN0YW50cy5wcm9tcHQpICsgQ29uc3RhbnRzLnByb21wdF9ub25lO1xyXG4gICAgICAgIGlmICh0aGlzLnNpbGVudExvZ2luKSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0VHlwZSA9IENvbnN0YW50cy5sb2dpbjtcclxuICAgICAgICAgICAgdGhpcy5zaWxlbnRBdXRoZW50aWNhdGlvblN0YXRlID0gc2VydmVyQXV0aGVudGljYXRpb25SZXF1ZXN0LnN0YXRlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgd2luZG93LnJlcXVlc3RUeXBlID0gQ29uc3RhbnRzLnJlbmV3VG9rZW47XHJcbiAgICAgICAgICAgIHdpbmRvdy5yZW5ld1N0YXRlcy5wdXNoKHNlcnZlckF1dGhlbnRpY2F0aW9uUmVxdWVzdC5zdGF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIG5vdGU6IHNjb3BlIGhlcmUgaXMgY2xpZW50SWRcclxuICAgICAgICB0aGlzLnJlZ2lzdGVyQ2FsbGJhY2soc2VydmVyQXV0aGVudGljYXRpb25SZXF1ZXN0LnN0YXRlLCB0aGlzLmNsaWVudElkLCByZXNvbHZlLCByZWplY3QpO1xyXG4gICAgICAgIHRoaXMubG9nZ2VyLmluZm9QaWkoXCJOYXZpZ2F0ZSB0bzpcIiArIHVybE5hdmlnYXRlKTtcclxuICAgICAgICBmcmFtZUhhbmRsZS5zcmMgPSBcImFib3V0OmJsYW5rXCI7XHJcbiAgICAgICAgdGhpcy5sb2FkSWZyYW1lVGltZW91dCh1cmxOYXZpZ2F0ZSwgXCJtc2FsSWRUb2tlbkZyYW1lXCIsIHRoaXMuY2xpZW50SWQpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQGhpZGRlblxyXG4gICAgICpcclxuICAgICAqIFRoaXMgbWV0aG9kIG11c3QgYmUgY2FsbGVkIGZvciBwcm9jZXNzaW5nIHRoZSByZXNwb25zZSByZWNlaXZlZCBmcm9tIEFBRC4gSXQgZXh0cmFjdHMgdGhlIGhhc2gsIHByb2Nlc3NlcyB0aGUgdG9rZW4gb3IgZXJyb3IsIHNhdmVzIGl0IGluIHRoZSBjYWNoZSBhbmQgY2FsbHMgdGhlIHJlZ2lzdGVyZWQgY2FsbGJhY2tzIHdpdGggdGhlIHJlc3VsdC5cclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBhdXRob3JpdHkgYXV0aG9yaXR5IHJlY2VpdmVkIGluIHRoZSByZWRpcmVjdCByZXNwb25zZSBmcm9tIEFBRC5cclxuICAgICAqIEBwYXJhbSB7VG9rZW5SZXNwb25zZX0gcmVxdWVzdEluZm8gYW4gb2JqZWN0IGNyZWF0ZWQgZnJvbSB0aGUgcmVkaXJlY3QgcmVzcG9uc2UgZnJvbSBBQUQgY29tcHJpc2luZyBvZiB0aGUga2V5cyAtIHBhcmFtZXRlcnMsIHJlcXVlc3RUeXBlLCBzdGF0ZU1hdGNoLCBzdGF0ZVJlc3BvbnNlIGFuZCB2YWxpZC5cclxuICAgICAqIEBwYXJhbSB7QWNjb3VudH0gYWNjb3VudCBhY2NvdW50IG9iamVjdCBmb3Igd2hpY2ggc2NvcGVzIGFyZSBjb25zZW50ZWQgZm9yLiBUaGUgZGVmYXVsdCBhY2NvdW50IGlzIHRoZSBsb2dnZWQgaW4gYWNjb3VudC5cclxuICAgICAqIEBwYXJhbSB7Q2xpZW50SW5mb30gY2xpZW50SW5mbyBjbGllbnRJbmZvIHJlY2VpdmVkIGFzIHBhcnQgb2YgdGhlIHJlc3BvbnNlIGNvbXByaXNpbmcgb2YgZmllbGRzIHVpZCBhbmQgdXRpZC5cclxuICAgICAqIEBwYXJhbSB7SWRUb2tlbn0gaWRUb2tlbiBpZFRva2VuIHJlY2VpdmVkIGFzIHBhcnQgb2YgdGhlIHJlc3BvbnNlLlxyXG4gICAgICogQGlnbm9yZVxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgLyogdHNsaW50OmRpc2FibGU6bm8tc3RyaW5nLWxpdGVyYWwgKi9cclxuICAgIFVzZXJBZ2VudEFwcGxpY2F0aW9uLnByb3RvdHlwZS5zYXZlQWNjZXNzVG9rZW4gPSBmdW5jdGlvbiAocmVzcG9uc2UsIGF1dGhvcml0eSwgcGFyYW1ldGVycywgY2xpZW50SW5mbywgaWRUb2tlbk9iaikge1xyXG4gICAgICAgIHZhciBzY29wZTtcclxuICAgICAgICB2YXIgYWNjZXNzVG9rZW5SZXNwb25zZSA9IHRzbGliXzEuX19hc3NpZ24oe30sIHJlc3BvbnNlKTtcclxuICAgICAgICB2YXIgY2xpZW50T2JqID0gbmV3IENsaWVudEluZm8oY2xpZW50SW5mbyk7XHJcbiAgICAgICAgdmFyIGV4cGlyYXRpb247XHJcbiAgICAgICAgLy8gaWYgdGhlIHJlc3BvbnNlIGNvbnRhaW5zIFwic2NvcGVcIlxyXG4gICAgICAgIGlmIChwYXJhbWV0ZXJzLmhhc093blByb3BlcnR5KFwic2NvcGVcIikpIHtcclxuICAgICAgICAgICAgLy8gcmVhZCB0aGUgc2NvcGVzXHJcbiAgICAgICAgICAgIHNjb3BlID0gcGFyYW1ldGVyc1tcInNjb3BlXCJdO1xyXG4gICAgICAgICAgICB2YXIgY29uc2VudGVkU2NvcGVzID0gc2NvcGUuc3BsaXQoXCIgXCIpO1xyXG4gICAgICAgICAgICAvLyByZXRyaWV2ZSBhbGwgYWNjZXNzIHRva2VucyBmcm9tIHRoZSBjYWNoZSwgcmVtb3ZlIHRoZSBkdXAgc2NvcmVzXHJcbiAgICAgICAgICAgIHZhciBhY2Nlc3NUb2tlbkNhY2hlSXRlbXMgPSB0aGlzLmNhY2hlU3RvcmFnZS5nZXRBbGxBY2Nlc3NUb2tlbnModGhpcy5jbGllbnRJZCwgYXV0aG9yaXR5KTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhY2Nlc3NUb2tlbkNhY2hlSXRlbXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBhY2Nlc3NUb2tlbkNhY2hlSXRlbSA9IGFjY2Vzc1Rva2VuQ2FjaGVJdGVtc1tpXTtcclxuICAgICAgICAgICAgICAgIGlmIChhY2Nlc3NUb2tlbkNhY2hlSXRlbS5rZXkuaG9tZUFjY291bnRJZGVudGlmaWVyID09PSByZXNwb25zZS5hY2NvdW50LmhvbWVBY2NvdW50SWRlbnRpZmllcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjYWNoZWRTY29wZXMgPSBhY2Nlc3NUb2tlbkNhY2hlSXRlbS5rZXkuc2NvcGVzLnNwbGl0KFwiIFwiKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoU2NvcGVTZXQuaXNJbnRlcnNlY3RpbmdTY29wZXMoY2FjaGVkU2NvcGVzLCBjb25zZW50ZWRTY29wZXMpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2FjaGVTdG9yYWdlLnJlbW92ZUl0ZW0oSlNPTi5zdHJpbmdpZnkoYWNjZXNzVG9rZW5DYWNoZUl0ZW0ua2V5KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIEdlbmVyYXRlIGFuZCBjYWNoZSBhY2Nlc3NUb2tlbktleSBhbmQgYWNjZXNzVG9rZW5WYWx1ZVxyXG4gICAgICAgICAgICB2YXIgZXhwaXJlc0luID0gVGltZVV0aWxzLnBhcnNlRXhwaXJlc0luKHBhcmFtZXRlcnNbQ29uc3RhbnRzLmV4cGlyZXNJbl0pO1xyXG4gICAgICAgICAgICBleHBpcmF0aW9uID0gVGltZVV0aWxzLm5vdygpICsgZXhwaXJlc0luO1xyXG4gICAgICAgICAgICB2YXIgYWNjZXNzVG9rZW5LZXkgPSBuZXcgQWNjZXNzVG9rZW5LZXkoYXV0aG9yaXR5LCB0aGlzLmNsaWVudElkLCBzY29wZSwgY2xpZW50T2JqLnVpZCwgY2xpZW50T2JqLnV0aWQpO1xyXG4gICAgICAgICAgICB2YXIgYWNjZXNzVG9rZW5WYWx1ZSA9IG5ldyBBY2Nlc3NUb2tlblZhbHVlKHBhcmFtZXRlcnNbQ29uc3RhbnRzLmFjY2Vzc1Rva2VuXSwgaWRUb2tlbk9iai5yYXdJZFRva2VuLCBleHBpcmF0aW9uLnRvU3RyaW5nKCksIGNsaWVudEluZm8pO1xyXG4gICAgICAgICAgICB0aGlzLmNhY2hlU3RvcmFnZS5zZXRJdGVtKEpTT04uc3RyaW5naWZ5KGFjY2Vzc1Rva2VuS2V5KSwgSlNPTi5zdHJpbmdpZnkoYWNjZXNzVG9rZW5WYWx1ZSkpO1xyXG4gICAgICAgICAgICBhY2Nlc3NUb2tlblJlc3BvbnNlLmFjY2Vzc1Rva2VuID0gcGFyYW1ldGVyc1tDb25zdGFudHMuYWNjZXNzVG9rZW5dO1xyXG4gICAgICAgICAgICBhY2Nlc3NUb2tlblJlc3BvbnNlLnNjb3BlcyA9IGNvbnNlbnRlZFNjb3BlcztcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gaWYgdGhlIHJlc3BvbnNlIGRvZXMgbm90IGNvbnRhaW4gXCJzY29wZVwiIC0gc2NvcGUgaXMgdXN1YWxseSBjbGllbnRfaWQgYW5kIHRoZSB0b2tlbiB3aWxsIGJlIGlkX3Rva2VuXHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHNjb3BlID0gdGhpcy5jbGllbnRJZDtcclxuICAgICAgICAgICAgLy8gR2VuZXJhdGUgYW5kIGNhY2hlIGFjY2Vzc1Rva2VuS2V5IGFuZCBhY2Nlc3NUb2tlblZhbHVlXHJcbiAgICAgICAgICAgIHZhciBhY2Nlc3NUb2tlbktleSA9IG5ldyBBY2Nlc3NUb2tlbktleShhdXRob3JpdHksIHRoaXMuY2xpZW50SWQsIHNjb3BlLCBjbGllbnRPYmoudWlkLCBjbGllbnRPYmoudXRpZCk7XHJcbiAgICAgICAgICAgIGV4cGlyYXRpb24gPSBOdW1iZXIoaWRUb2tlbk9iai5leHBpcmF0aW9uKTtcclxuICAgICAgICAgICAgdmFyIGFjY2Vzc1Rva2VuVmFsdWUgPSBuZXcgQWNjZXNzVG9rZW5WYWx1ZShwYXJhbWV0ZXJzW0NvbnN0YW50cy5pZFRva2VuXSwgcGFyYW1ldGVyc1tDb25zdGFudHMuaWRUb2tlbl0sIGV4cGlyYXRpb24udG9TdHJpbmcoKSwgY2xpZW50SW5mbyk7XHJcbiAgICAgICAgICAgIHRoaXMuY2FjaGVTdG9yYWdlLnNldEl0ZW0oSlNPTi5zdHJpbmdpZnkoYWNjZXNzVG9rZW5LZXkpLCBKU09OLnN0cmluZ2lmeShhY2Nlc3NUb2tlblZhbHVlKSk7XHJcbiAgICAgICAgICAgIGFjY2Vzc1Rva2VuUmVzcG9uc2Uuc2NvcGVzID0gW3Njb3BlXTtcclxuICAgICAgICAgICAgYWNjZXNzVG9rZW5SZXNwb25zZS5hY2Nlc3NUb2tlbiA9IHBhcmFtZXRlcnNbQ29uc3RhbnRzLmlkVG9rZW5dO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZXhwaXJhdGlvbikge1xyXG4gICAgICAgICAgICBhY2Nlc3NUb2tlblJlc3BvbnNlLmV4cGlyZXNPbiA9IG5ldyBEYXRlKGV4cGlyYXRpb24gKiAxMDAwKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKFwiQ291bGQgbm90IHBhcnNlIGV4cGlyZXNJbiBwYXJhbWV0ZXJcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBhY2Nlc3NUb2tlblJlc3BvbnNlO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQGhpZGRlblxyXG4gICAgICogU2F2ZXMgdG9rZW4gb3IgZXJyb3IgcmVjZWl2ZWQgaW4gdGhlIHJlc3BvbnNlIGZyb20gQUFEIGluIHRoZSBjYWNoZS4gSW4gY2FzZSBvZiBpZF90b2tlbiwgaXQgYWxzbyBjcmVhdGVzIHRoZSBhY2NvdW50IG9iamVjdC5cclxuICAgICAqIEBpZ25vcmVcclxuICAgICAqL1xyXG4gICAgVXNlckFnZW50QXBwbGljYXRpb24ucHJvdG90eXBlLnNhdmVUb2tlbkZyb21IYXNoID0gZnVuY3Rpb24gKGhhc2gsIHN0YXRlSW5mbykge1xyXG4gICAgICAgIHRoaXMubG9nZ2VyLmluZm8oXCJTdGF0ZSBzdGF0dXM6XCIgKyBzdGF0ZUluZm8uc3RhdGVNYXRjaCArIFwiOyBSZXF1ZXN0IHR5cGU6XCIgKyBzdGF0ZUluZm8ucmVxdWVzdFR5cGUpO1xyXG4gICAgICAgIHRoaXMuY2FjaGVTdG9yYWdlLnNldEl0ZW0oQ29uc3RhbnRzLm1zYWxFcnJvciwgXCJcIik7XHJcbiAgICAgICAgdGhpcy5jYWNoZVN0b3JhZ2Uuc2V0SXRlbShDb25zdGFudHMubXNhbEVycm9yRGVzY3JpcHRpb24sIFwiXCIpO1xyXG4gICAgICAgIHZhciByZXNwb25zZSA9IHtcclxuICAgICAgICAgICAgdW5pcXVlSWQ6IFwiXCIsXHJcbiAgICAgICAgICAgIHRlbmFudElkOiBcIlwiLFxyXG4gICAgICAgICAgICB0b2tlblR5cGU6IFwiXCIsXHJcbiAgICAgICAgICAgIGlkVG9rZW46IG51bGwsXHJcbiAgICAgICAgICAgIGlkVG9rZW5DbGFpbXM6IG51bGwsXHJcbiAgICAgICAgICAgIGFjY2Vzc1Rva2VuOiBudWxsLFxyXG4gICAgICAgICAgICBzY29wZXM6IFtdLFxyXG4gICAgICAgICAgICBleHBpcmVzT246IG51bGwsXHJcbiAgICAgICAgICAgIGFjY291bnQ6IG51bGwsXHJcbiAgICAgICAgICAgIGFjY291bnRTdGF0ZTogXCJcIixcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBlcnJvcjtcclxuICAgICAgICB2YXIgaGFzaFBhcmFtcyA9IHRoaXMuZGVzZXJpYWxpemVIYXNoKGhhc2gpO1xyXG4gICAgICAgIHZhciBhdXRob3JpdHlLZXkgPSBcIlwiO1xyXG4gICAgICAgIHZhciBhY3F1aXJlVG9rZW5BY2NvdW50S2V5ID0gXCJcIjtcclxuICAgICAgICB2YXIgaWRUb2tlbk9iaiA9IG51bGw7XHJcbiAgICAgICAgLy8gSWYgc2VydmVyIHJldHVybnMgYW4gZXJyb3JcclxuICAgICAgICBpZiAoaGFzaFBhcmFtcy5oYXNPd25Qcm9wZXJ0eShDb25zdGFudHMuZXJyb3JEZXNjcmlwdGlvbikgfHwgaGFzaFBhcmFtcy5oYXNPd25Qcm9wZXJ0eShDb25zdGFudHMuZXJyb3IpKSB7XHJcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmluZm9QaWkoXCJFcnJvciA6XCIgKyBoYXNoUGFyYW1zW0NvbnN0YW50cy5lcnJvcl0gKyBcIjsgRXJyb3IgZGVzY3JpcHRpb246XCIgKyBoYXNoUGFyYW1zW0NvbnN0YW50cy5lcnJvckRlc2NyaXB0aW9uXSk7XHJcbiAgICAgICAgICAgIHRoaXMuY2FjaGVTdG9yYWdlLnNldEl0ZW0oQ29uc3RhbnRzLm1zYWxFcnJvciwgaGFzaFBhcmFtc1tDb25zdGFudHMuZXJyb3JdKTtcclxuICAgICAgICAgICAgdGhpcy5jYWNoZVN0b3JhZ2Uuc2V0SXRlbShDb25zdGFudHMubXNhbEVycm9yRGVzY3JpcHRpb24sIGhhc2hQYXJhbXNbQ29uc3RhbnRzLmVycm9yRGVzY3JpcHRpb25dKTtcclxuICAgICAgICAgICAgLy8gbG9naW5cclxuICAgICAgICAgICAgaWYgKHN0YXRlSW5mby5yZXF1ZXN0VHlwZSA9PT0gQ29uc3RhbnRzLmxvZ2luKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2luSW5Qcm9ncmVzcyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jYWNoZVN0b3JhZ2Uuc2V0SXRlbShDb25zdGFudHMubG9naW5FcnJvciwgaGFzaFBhcmFtc1tDb25zdGFudHMuZXJyb3JEZXNjcmlwdGlvbl0gKyBcIjpcIiArIGhhc2hQYXJhbXNbQ29uc3RhbnRzLmVycm9yXSk7XHJcbiAgICAgICAgICAgICAgICBhdXRob3JpdHlLZXkgPSBTdG9yYWdlLmdlbmVyYXRlQXV0aG9yaXR5S2V5KHN0YXRlSW5mby5zdGF0ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gYWNxdWlyZVRva2VuXHJcbiAgICAgICAgICAgIGlmIChzdGF0ZUluZm8ucmVxdWVzdFR5cGUgPT09IENvbnN0YW50cy5yZW5ld1Rva2VuKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFjcXVpcmVUb2tlbkluUHJvZ3Jlc3MgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGF1dGhvcml0eUtleSA9IFN0b3JhZ2UuZ2VuZXJhdGVBdXRob3JpdHlLZXkoc3RhdGVJbmZvLnN0YXRlKTtcclxuICAgICAgICAgICAgICAgIHZhciBhY2NvdW50ID0gdGhpcy5nZXRBY2NvdW50KCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgYWNjb3VudElkID0gdm9pZCAwO1xyXG4gICAgICAgICAgICAgICAgaWYgKGFjY291bnQgJiYgIVN0cmluZ1V0aWxzLmlzRW1wdHkoYWNjb3VudC5ob21lQWNjb3VudElkZW50aWZpZXIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWNjb3VudElkID0gYWNjb3VudC5ob21lQWNjb3VudElkZW50aWZpZXI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBhY2NvdW50SWQgPSBDb25zdGFudHMubm9fYWNjb3VudDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGFjcXVpcmVUb2tlbkFjY291bnRLZXkgPSBTdG9yYWdlLmdlbmVyYXRlQWNxdWlyZVRva2VuQWNjb3VudEtleShhY2NvdW50SWQsIHN0YXRlSW5mby5zdGF0ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIF9hID0gQ29uc3RhbnRzLmVycm9yLCBoYXNoRXJyID0gaGFzaFBhcmFtc1tfYV0sIF9iID0gQ29uc3RhbnRzLmVycm9yRGVzY3JpcHRpb24sIGhhc2hFcnJEZXNjID0gaGFzaFBhcmFtc1tfYl07XHJcbiAgICAgICAgICAgIGlmIChJbnRlcmFjdGlvblJlcXVpcmVkQXV0aEVycm9yLmlzSW50ZXJhY3Rpb25SZXF1aXJlZEVycm9yKGhhc2hFcnIpIHx8XHJcbiAgICAgICAgICAgICAgICBJbnRlcmFjdGlvblJlcXVpcmVkQXV0aEVycm9yLmlzSW50ZXJhY3Rpb25SZXF1aXJlZEVycm9yKGhhc2hFcnJEZXNjKSkge1xyXG4gICAgICAgICAgICAgICAgZXJyb3IgPSBuZXcgSW50ZXJhY3Rpb25SZXF1aXJlZEF1dGhFcnJvcihoYXNoUGFyYW1zW0NvbnN0YW50cy5lcnJvcl0sIGhhc2hQYXJhbXNbQ29uc3RhbnRzLmVycm9yRGVzY3JpcHRpb25dKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGVycm9yID0gbmV3IFNlcnZlckVycm9yKGhhc2hQYXJhbXNbQ29uc3RhbnRzLmVycm9yXSwgaGFzaFBhcmFtc1tDb25zdGFudHMuZXJyb3JEZXNjcmlwdGlvbl0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIElmIHRoZSBzZXJ2ZXIgcmV0dXJucyBcIlN1Y2Nlc3NcIlxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBWZXJpZnkgdGhlIHN0YXRlIGZyb20gcmVkaXJlY3QgYW5kIHJlY29yZCB0b2tlbnMgdG8gc3RvcmFnZSBpZiBleGlzdHNcclxuICAgICAgICAgICAgaWYgKHN0YXRlSW5mby5zdGF0ZU1hdGNoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5pbmZvKFwiU3RhdGUgaXMgcmlnaHRcIik7XHJcbiAgICAgICAgICAgICAgICBpZiAoaGFzaFBhcmFtcy5oYXNPd25Qcm9wZXJ0eShDb25zdGFudHMuc2Vzc2lvblN0YXRlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FjaGVTdG9yYWdlLnNldEl0ZW0oQ29uc3RhbnRzLm1zYWxTZXNzaW9uU3RhdGUsIGhhc2hQYXJhbXNbQ29uc3RhbnRzLnNlc3Npb25TdGF0ZV0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmVzcG9uc2UuYWNjb3VudFN0YXRlID0gdGhpcy5nZXRBY2NvdW50U3RhdGUoc3RhdGVJbmZvLnN0YXRlKTtcclxuICAgICAgICAgICAgICAgIHZhciBjbGllbnRJbmZvID0gXCJcIjtcclxuICAgICAgICAgICAgICAgIC8vIFByb2Nlc3MgYWNjZXNzX3Rva2VuXHJcbiAgICAgICAgICAgICAgICBpZiAoaGFzaFBhcmFtcy5oYXNPd25Qcm9wZXJ0eShDb25zdGFudHMuYWNjZXNzVG9rZW4pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIuaW5mbyhcIkZyYWdtZW50IGhhcyBhY2Nlc3MgdG9rZW5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3F1aXJlVG9rZW5JblByb2dyZXNzID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gcmV0cmlldmUgdGhlIGlkX3Rva2VuIGZyb20gcmVzcG9uc2UgaWYgcHJlc2VudFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChoYXNoUGFyYW1zLmhhc093blByb3BlcnR5KENvbnN0YW50cy5pZFRva2VuKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZFRva2VuT2JqID0gbmV3IElkVG9rZW4oaGFzaFBhcmFtc1tDb25zdGFudHMuaWRUb2tlbl0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5pZFRva2VuID0gaWRUb2tlbk9iajtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuaWRUb2tlbkNsYWltcyA9IGlkVG9rZW5PYmouY2xhaW1zO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWRUb2tlbk9iaiA9IG5ldyBJZFRva2VuKHRoaXMuY2FjaGVTdG9yYWdlLmdldEl0ZW0oQ29uc3RhbnRzLmlkVG9rZW5LZXkpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBSZXNwb25zZVV0aWxzLnNldFJlc3BvbnNlSWRUb2tlbihyZXNwb25zZSwgaWRUb2tlbk9iaik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHJldHJpZXZlIHRoZSBhdXRob3JpdHkgZnJvbSBjYWNoZSBhbmQgcmVwbGFjZSB3aXRoIHRlbmFudElEXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGF1dGhvcml0eUtleV8xID0gU3RvcmFnZS5nZW5lcmF0ZUF1dGhvcml0eUtleShzdGF0ZUluZm8uc3RhdGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBhdXRob3JpdHkgPSB0aGlzLmNhY2hlU3RvcmFnZS5nZXRJdGVtKGF1dGhvcml0eUtleV8xLCB0aGlzLmluQ29va2llKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIVN0cmluZ1V0aWxzLmlzRW1wdHkoYXV0aG9yaXR5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhdXRob3JpdHkgPSBVcmxVdGlscy5yZXBsYWNlVGVuYW50UGF0aChhdXRob3JpdHksIHJlc3BvbnNlLnRlbmFudElkKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gcmV0cmlldmUgY2xpZW50X2luZm8gLSBpZiBpdCBpcyBub3QgZm91bmQsIGdlbmVyYXRlIHRoZSB1aWQgYW5kIHV0aWQgZnJvbSBpZFRva2VuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGhhc2hQYXJhbXMuaGFzT3duUHJvcGVydHkoQ29uc3RhbnRzLmNsaWVudEluZm8pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsaWVudEluZm8gPSBoYXNoUGFyYW1zW0NvbnN0YW50cy5jbGllbnRJbmZvXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLndhcm5pbmcoXCJDbGllbnRJbmZvIG5vdCByZWNlaXZlZCBpbiB0aGUgcmVzcG9uc2UgZnJvbSBBQURcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IENsaWVudEF1dGhFcnJvci5jcmVhdGVDbGllbnRJbmZvTm90UG9wdWxhdGVkRXJyb3IoXCJDbGllbnRJbmZvIG5vdCByZWNlaXZlZCBpbiB0aGUgcmVzcG9uc2UgZnJvbSB0aGUgc2VydmVyXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5hY2NvdW50ID0gQWNjb3VudC5jcmVhdGVBY2NvdW50KGlkVG9rZW5PYmosIG5ldyBDbGllbnRJbmZvKGNsaWVudEluZm8pKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYWNjb3VudEtleSA9IHZvaWQgMDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuYWNjb3VudCAmJiAhU3RyaW5nVXRpbHMuaXNFbXB0eShyZXNwb25zZS5hY2NvdW50LmhvbWVBY2NvdW50SWRlbnRpZmllcikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudEtleSA9IHJlc3BvbnNlLmFjY291bnQuaG9tZUFjY291bnRJZGVudGlmaWVyO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudEtleSA9IENvbnN0YW50cy5ub19hY2NvdW50O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBhY3F1aXJlVG9rZW5BY2NvdW50S2V5ID0gU3RvcmFnZS5nZW5lcmF0ZUFjcXVpcmVUb2tlbkFjY291bnRLZXkoYWNjb3VudEtleSwgc3RhdGVJbmZvLnN0YXRlKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYWNxdWlyZVRva2VuQWNjb3VudEtleV9ub2FjY291bnQgPSBTdG9yYWdlLmdlbmVyYXRlQWNxdWlyZVRva2VuQWNjb3VudEtleShDb25zdGFudHMubm9fYWNjb3VudCwgc3RhdGVJbmZvLnN0YXRlKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY2FjaGVkQWNjb3VudCA9IHRoaXMuY2FjaGVTdG9yYWdlLmdldEl0ZW0oYWNxdWlyZVRva2VuQWNjb3VudEtleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFjcXVpcmVUb2tlbkFjY291bnQgPSB2b2lkIDA7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgd2l0aCB0aGUgYWNjb3VudCBpbiB0aGUgQ2FjaGVcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIVN0cmluZ1V0aWxzLmlzRW1wdHkoY2FjaGVkQWNjb3VudCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWNxdWlyZVRva2VuQWNjb3VudCA9IEpTT04ucGFyc2UoY2FjaGVkQWNjb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5hY2NvdW50ICYmIGFjcXVpcmVUb2tlbkFjY291bnQgJiYgQWNjb3VudC5jb21wYXJlQWNjb3VudHMocmVzcG9uc2UuYWNjb3VudCwgYWNxdWlyZVRva2VuQWNjb3VudCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gdGhpcy5zYXZlQWNjZXNzVG9rZW4ocmVzcG9uc2UsIGF1dGhvcml0eSwgaGFzaFBhcmFtcywgY2xpZW50SW5mbywgaWRUb2tlbk9iaik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5pbmZvKFwiVGhlIHVzZXIgb2JqZWN0IHJlY2VpdmVkIGluIHRoZSByZXNwb25zZSBpcyB0aGUgc2FtZSBhcyB0aGUgb25lIHBhc3NlZCBpbiB0aGUgYWNxdWlyZVRva2VuIHJlcXVlc3RcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci53YXJuaW5nKFwiVGhlIGFjY291bnQgb2JqZWN0IGNyZWF0ZWQgZnJvbSB0aGUgcmVzcG9uc2UgaXMgbm90IHRoZSBzYW1lIGFzIHRoZSBvbmUgcGFzc2VkIGluIHRoZSBhY3F1aXJlVG9rZW4gcmVxdWVzdFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICghU3RyaW5nVXRpbHMuaXNFbXB0eSh0aGlzLmNhY2hlU3RvcmFnZS5nZXRJdGVtKGFjcXVpcmVUb2tlbkFjY291bnRLZXlfbm9hY2NvdW50KSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSB0aGlzLnNhdmVBY2Nlc3NUb2tlbihyZXNwb25zZSwgYXV0aG9yaXR5LCBoYXNoUGFyYW1zLCBjbGllbnRJbmZvLCBpZFRva2VuT2JqKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBQcm9jZXNzIGlkX3Rva2VuXHJcbiAgICAgICAgICAgICAgICBpZiAoaGFzaFBhcmFtcy5oYXNPd25Qcm9wZXJ0eShDb25zdGFudHMuaWRUb2tlbikpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5pbmZvKFwiRnJhZ21lbnQgaGFzIGlkIHRva2VuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGxvZ2luIG5vIGxvbmdlciBpbiBwcm9ncmVzc1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9naW5JblByb2dyZXNzID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gc2V0IHRoZSBpZFRva2VuXHJcbiAgICAgICAgICAgICAgICAgICAgaWRUb2tlbk9iaiA9IG5ldyBJZFRva2VuKGhhc2hQYXJhbXNbQ29uc3RhbnRzLmlkVG9rZW5dKTtcclxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IFJlc3BvbnNlVXRpbHMuc2V0UmVzcG9uc2VJZFRva2VuKHJlc3BvbnNlLCBpZFRva2VuT2JqKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaGFzaFBhcmFtcy5oYXNPd25Qcm9wZXJ0eShDb25zdGFudHMuY2xpZW50SW5mbykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xpZW50SW5mbyA9IGhhc2hQYXJhbXNbQ29uc3RhbnRzLmNsaWVudEluZm9dO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIud2FybmluZyhcIkNsaWVudEluZm8gbm90IHJlY2VpdmVkIGluIHRoZSByZXNwb25zZSBmcm9tIEFBRFwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYXV0aG9yaXR5S2V5ID0gU3RvcmFnZS5nZW5lcmF0ZUF1dGhvcml0eUtleShzdGF0ZUluZm8uc3RhdGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBhdXRob3JpdHkgPSB0aGlzLmNhY2hlU3RvcmFnZS5nZXRJdGVtKGF1dGhvcml0eUtleSwgdGhpcy5pbkNvb2tpZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFTdHJpbmdVdGlscy5pc0VtcHR5KGF1dGhvcml0eSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXV0aG9yaXR5ID0gVXJsVXRpbHMucmVwbGFjZVRlbmFudFBhdGgoYXV0aG9yaXR5LCBpZFRva2VuT2JqLnRlbmFudElkKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY2NvdW50ID0gQWNjb3VudC5jcmVhdGVBY2NvdW50KGlkVG9rZW5PYmosIG5ldyBDbGllbnRJbmZvKGNsaWVudEluZm8pKTtcclxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5hY2NvdW50ID0gdGhpcy5hY2NvdW50O1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpZFRva2VuT2JqICYmIGlkVG9rZW5PYmoubm9uY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2hlY2sgbm9uY2UgaW50ZWdyaXR5IGlmIGlkVG9rZW4gaGFzIG5vbmNlIC0gdGhyb3cgYW4gZXJyb3IgaWYgbm90IG1hdGNoZWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlkVG9rZW5PYmoubm9uY2UgIT09IHRoaXMuY2FjaGVTdG9yYWdlLmdldEl0ZW0oQ29uc3RhbnRzLm5vbmNlSWRUb2tlbiwgdGhpcy5pbkNvb2tpZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWNjb3VudCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNhY2hlU3RvcmFnZS5zZXRJdGVtKENvbnN0YW50cy5sb2dpbkVycm9yLCBcIk5vbmNlIE1pc21hdGNoLiBFeHBlY3RlZCBOb25jZTogXCIgKyB0aGlzLmNhY2hlU3RvcmFnZS5nZXRJdGVtKENvbnN0YW50cy5ub25jZUlkVG9rZW4sIHRoaXMuaW5Db29raWUpICsgXCIsXCIgKyBcIkFjdHVhbCBOb25jZTogXCIgKyBpZFRva2VuT2JqLm5vbmNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKFwiTm9uY2UgTWlzbWF0Y2guRXhwZWN0ZWQgTm9uY2U6IFwiICsgdGhpcy5jYWNoZVN0b3JhZ2UuZ2V0SXRlbShDb25zdGFudHMubm9uY2VJZFRva2VuLCB0aGlzLmluQ29va2llKSArIFwiLFwiICsgXCJBY3R1YWwgTm9uY2U6IFwiICsgaWRUb2tlbk9iai5ub25jZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvciA9IENsaWVudEF1dGhFcnJvci5jcmVhdGVOb25jZU1pc21hdGNoRXJyb3IodGhpcy5jYWNoZVN0b3JhZ2UuZ2V0SXRlbShDb25zdGFudHMubm9uY2VJZFRva2VuLCB0aGlzLmluQ29va2llKSwgaWRUb2tlbk9iai5ub25jZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2F2ZSB0aGUgdG9rZW5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNhY2hlU3RvcmFnZS5zZXRJdGVtKENvbnN0YW50cy5pZFRva2VuS2V5LCBoYXNoUGFyYW1zW0NvbnN0YW50cy5pZFRva2VuXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNhY2hlU3RvcmFnZS5zZXRJdGVtKENvbnN0YW50cy5tc2FsQ2xpZW50SW5mbywgY2xpZW50SW5mbyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTYXZlIGlkVG9rZW4gYXMgYWNjZXNzIHRva2VuIGZvciBhcHAgaXRzZWxmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNhdmVBY2Nlc3NUb2tlbihyZXNwb25zZSwgYXV0aG9yaXR5LCBoYXNoUGFyYW1zLCBjbGllbnRJbmZvLCBpZFRva2VuT2JqKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXV0aG9yaXR5S2V5ID0gc3RhdGVJbmZvLnN0YXRlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3F1aXJlVG9rZW5BY2NvdW50S2V5ID0gc3RhdGVJbmZvLnN0YXRlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihcIkludmFsaWQgaWRfdG9rZW4gcmVjZWl2ZWQgaW4gdGhlIHJlc3BvbnNlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvciA9IENsaWVudEF1dGhFcnJvci5jcmVhdGVJbnZhbGlkSWRUb2tlbkVycm9yKGlkVG9rZW5PYmopO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNhY2hlU3RvcmFnZS5zZXRJdGVtKENvbnN0YW50cy5tc2FsRXJyb3IsIGVycm9yLmVycm9yQ29kZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2FjaGVTdG9yYWdlLnNldEl0ZW0oQ29uc3RhbnRzLm1zYWxFcnJvckRlc2NyaXB0aW9uLCBlcnJvci5lcnJvck1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBTdGF0ZSBtaXNtYXRjaCAtIHVuZXhwZWN0ZWQvaW52YWxpZCBzdGF0ZVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGF1dGhvcml0eUtleSA9IHN0YXRlSW5mby5zdGF0ZTtcclxuICAgICAgICAgICAgICAgIGFjcXVpcmVUb2tlbkFjY291bnRLZXkgPSBzdGF0ZUluZm8uc3RhdGU7XHJcbiAgICAgICAgICAgICAgICB2YXIgZXhwZWN0ZWRTdGF0ZSA9IHRoaXMuY2FjaGVTdG9yYWdlLmdldEl0ZW0oQ29uc3RhbnRzLnN0YXRlTG9naW4sIHRoaXMuaW5Db29raWUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoXCJTdGF0ZSBNaXNtYXRjaC5FeHBlY3RlZCBTdGF0ZTogXCIgKyBleHBlY3RlZFN0YXRlICsgXCIsXCIgKyBcIkFjdHVhbCBTdGF0ZTogXCIgKyBzdGF0ZUluZm8uc3RhdGUpO1xyXG4gICAgICAgICAgICAgICAgZXJyb3IgPSBDbGllbnRBdXRoRXJyb3IuY3JlYXRlSW52YWxpZFN0YXRlRXJyb3Ioc3RhdGVJbmZvLnN0YXRlLCBleHBlY3RlZFN0YXRlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2FjaGVTdG9yYWdlLnNldEl0ZW0oQ29uc3RhbnRzLm1zYWxFcnJvciwgZXJyb3IuZXJyb3JDb2RlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2FjaGVTdG9yYWdlLnNldEl0ZW0oQ29uc3RhbnRzLm1zYWxFcnJvckRlc2NyaXB0aW9uLCBlcnJvci5lcnJvck1lc3NhZ2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY2FjaGVTdG9yYWdlLnNldEl0ZW0oQ29uc3RhbnRzLnJlbmV3U3RhdHVzICsgc3RhdGVJbmZvLnN0YXRlLCBDb25zdGFudHMudG9rZW5SZW5ld1N0YXR1c0NvbXBsZXRlZCk7XHJcbiAgICAgICAgdGhpcy5jYWNoZVN0b3JhZ2UucmVtb3ZlQWNxdWlyZVRva2VuRW50cmllcyhzdGF0ZUluZm8uc3RhdGUpO1xyXG4gICAgICAgIC8vIHRoaXMgaXMgcmVxdWlyZWQgaWYgbmF2aWdhdGVUb0xvZ2luUmVxdWVzdFVybD1mYWxzZVxyXG4gICAgICAgIGlmICh0aGlzLmluQ29va2llKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2FjaGVTdG9yYWdlLnNldEl0ZW1Db29raWUoYXV0aG9yaXR5S2V5LCBcIlwiLCAtMSk7XHJcbiAgICAgICAgICAgIHRoaXMuY2FjaGVTdG9yYWdlLmNsZWFyQ29va2llKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFyZXNwb25zZSkge1xyXG4gICAgICAgICAgICB0aHJvdyBBdXRoRXJyb3IuY3JlYXRlVW5leHBlY3RlZEVycm9yKFwiUmVzcG9uc2UgaXMgbnVsbFwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xyXG4gICAgfTtcclxuICAgIC8qIHRzbGludDplbmFibGU6bm8tc3RyaW5nLWxpdGVyYWwgKi9cclxuICAgIC8vI2VuZHJlZ2lvblxyXG4gICAgLy8jcmVnaW9uIEFjY291bnRcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgc2lnbmVkIGluIGFjY291bnRcclxuICAgICAqICh0aGUgYWNjb3VudCBvYmplY3QgaXMgY3JlYXRlZCBhdCB0aGUgdGltZSBvZiBzdWNjZXNzZnVsIGxvZ2luKVxyXG4gICAgICogb3IgbnVsbCB3aGVuIG5vIHN0YXRlIGlzIGZvdW5kXHJcbiAgICAgKiBAcmV0dXJucyB7QGxpbmsgQWNjb3VudH0gLSB0aGUgYWNjb3VudCBvYmplY3Qgc3RvcmVkIGluIE1TQUxcclxuICAgICAqL1xyXG4gICAgVXNlckFnZW50QXBwbGljYXRpb24ucHJvdG90eXBlLmdldEFjY291bnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8gaWYgYSBzZXNzaW9uIGFscmVhZHkgZXhpc3RzLCBnZXQgdGhlIGFjY291bnQgZnJvbSB0aGUgc2Vzc2lvblxyXG4gICAgICAgIGlmICh0aGlzLmFjY291bnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWNjb3VudDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gZnJhbWUgaXMgdXNlZCB0byBnZXQgaWRUb2tlbiBhbmQgcG9wdWxhdGUgdGhlIGFjY291bnQgZm9yIHRoZSBnaXZlbiBzZXNzaW9uXHJcbiAgICAgICAgdmFyIHJhd0lkVG9rZW4gPSB0aGlzLmNhY2hlU3RvcmFnZS5nZXRJdGVtKENvbnN0YW50cy5pZFRva2VuS2V5KTtcclxuICAgICAgICB2YXIgcmF3Q2xpZW50SW5mbyA9IHRoaXMuY2FjaGVTdG9yYWdlLmdldEl0ZW0oQ29uc3RhbnRzLm1zYWxDbGllbnRJbmZvKTtcclxuICAgICAgICBpZiAoIVN0cmluZ1V0aWxzLmlzRW1wdHkocmF3SWRUb2tlbikgJiYgIVN0cmluZ1V0aWxzLmlzRW1wdHkocmF3Q2xpZW50SW5mbykpIHtcclxuICAgICAgICAgICAgdmFyIGlkVG9rZW4gPSBuZXcgSWRUb2tlbihyYXdJZFRva2VuKTtcclxuICAgICAgICAgICAgdmFyIGNsaWVudEluZm8gPSBuZXcgQ2xpZW50SW5mbyhyYXdDbGllbnRJbmZvKTtcclxuICAgICAgICAgICAgdGhpcy5hY2NvdW50ID0gQWNjb3VudC5jcmVhdGVBY2NvdW50KGlkVG9rZW4sIGNsaWVudEluZm8pO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hY2NvdW50O1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBpZiBsb2dpbiBub3QgeWV0IGRvbmUsIHJldHVybiBudWxsXHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAaGlkZGVuXHJcbiAgICAgKlxyXG4gICAgICogRXh0cmFjdHMgc3RhdGUgdmFsdWUgZnJvbSB0aGUgYWNjb3VudFN0YXRlIHNlbnQgd2l0aCB0aGUgYXV0aGVudGljYXRpb24gcmVxdWVzdC5cclxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IHNjb3BlLlxyXG4gICAgICogQGlnbm9yZVxyXG4gICAgICovXHJcbiAgICBVc2VyQWdlbnRBcHBsaWNhdGlvbi5wcm90b3R5cGUuZ2V0QWNjb3VudFN0YXRlID0gZnVuY3Rpb24gKHN0YXRlKSB7XHJcbiAgICAgICAgaWYgKHN0YXRlKSB7XHJcbiAgICAgICAgICAgIHZhciBzcGxpdEluZGV4ID0gc3RhdGUuaW5kZXhPZihcInxcIik7XHJcbiAgICAgICAgICAgIGlmIChzcGxpdEluZGV4ID4gLTEgJiYgc3BsaXRJbmRleCArIDEgPCBzdGF0ZS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzdGF0ZS5zdWJzdHJpbmcoc3BsaXRJbmRleCArIDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBzdGF0ZTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFVzZSB0byBnZXQgYSBsaXN0IG9mIHVuaXF1ZSBhY2NvdW50cyBpbiBNU0FMIGNhY2hlIGJhc2VkIG9uIGhvbWVBY2NvdW50SWRlbnRpZmllci5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge0BsaW5rIEFycmF5PEFjY291bnQ+fSBBY2NvdW50IC0gYWxsIHVuaXF1ZSBhY2NvdW50cyBpbiBNU0FMIGNhY2hlLlxyXG4gICAgICovXHJcbiAgICBVc2VyQWdlbnRBcHBsaWNhdGlvbi5wcm90b3R5cGUuZ2V0QWxsQWNjb3VudHMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGFjY291bnRzID0gW107XHJcbiAgICAgICAgdmFyIGFjY2Vzc1Rva2VuQ2FjaGVJdGVtcyA9IHRoaXMuY2FjaGVTdG9yYWdlLmdldEFsbEFjY2Vzc1Rva2VucyhDb25zdGFudHMuY2xpZW50SWQsIENvbnN0YW50cy5ob21lQWNjb3VudElkZW50aWZpZXIpO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYWNjZXNzVG9rZW5DYWNoZUl0ZW1zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBpZFRva2VuID0gbmV3IElkVG9rZW4oYWNjZXNzVG9rZW5DYWNoZUl0ZW1zW2ldLnZhbHVlLmlkVG9rZW4pO1xyXG4gICAgICAgICAgICB2YXIgY2xpZW50SW5mbyA9IG5ldyBDbGllbnRJbmZvKGFjY2Vzc1Rva2VuQ2FjaGVJdGVtc1tpXS52YWx1ZS5ob21lQWNjb3VudElkZW50aWZpZXIpO1xyXG4gICAgICAgICAgICB2YXIgYWNjb3VudCA9IEFjY291bnQuY3JlYXRlQWNjb3VudChpZFRva2VuLCBjbGllbnRJbmZvKTtcclxuICAgICAgICAgICAgYWNjb3VudHMucHVzaChhY2NvdW50KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VW5pcXVlQWNjb3VudHMoYWNjb3VudHMpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQGhpZGRlblxyXG4gICAgICpcclxuICAgICAqIFVzZWQgdG8gZmlsdGVyIGFjY291bnRzIGJhc2VkIG9uIGhvbWVBY2NvdW50SWRlbnRpZmllclxyXG4gICAgICogQHBhcmFtIHtBcnJheTxBY2NvdW50Pn0gIEFjY291bnRzIC0gYWNjb3VudHMgc2F2ZWQgaW4gdGhlIGNhY2hlXHJcbiAgICAgKiBAaWdub3JlXHJcbiAgICAgKi9cclxuICAgIFVzZXJBZ2VudEFwcGxpY2F0aW9uLnByb3RvdHlwZS5nZXRVbmlxdWVBY2NvdW50cyA9IGZ1bmN0aW9uIChhY2NvdW50cykge1xyXG4gICAgICAgIGlmICghYWNjb3VudHMgfHwgYWNjb3VudHMubGVuZ3RoIDw9IDEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGFjY291bnRzO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgZmxhZ3MgPSBbXTtcclxuICAgICAgICB2YXIgdW5pcXVlQWNjb3VudHMgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgYWNjb3VudHMubGVuZ3RoOyArK2luZGV4KSB7XHJcbiAgICAgICAgICAgIGlmIChhY2NvdW50c1tpbmRleF0uaG9tZUFjY291bnRJZGVudGlmaWVyICYmIGZsYWdzLmluZGV4T2YoYWNjb3VudHNbaW5kZXhdLmhvbWVBY2NvdW50SWRlbnRpZmllcikgPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICBmbGFncy5wdXNoKGFjY291bnRzW2luZGV4XS5ob21lQWNjb3VudElkZW50aWZpZXIpO1xyXG4gICAgICAgICAgICAgICAgdW5pcXVlQWNjb3VudHMucHVzaChhY2NvdW50c1tpbmRleF0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB1bmlxdWVBY2NvdW50cztcclxuICAgIH07XHJcbiAgICAvLyNlbmRyZWdpb25cclxuICAgIC8vI3JlZ2lvbiBTY29wZXMgKEV4dHJhY3QgdG8gU2NvcGVzLnRzKVxyXG4gICAgLy8gTm90ZTogXCJ0aGlzXCIgZGVwZW5kZW5jeSBpbiB0aGlzIHNlY3Rpb24gaXMgbWluaW1hbC5cclxuICAgIC8vIElmIHBDYWNoZVN0b3JhZ2UgaXMgc2VwYXJhdGVkIGZyb20gdGhlIGNsYXNzIG9iamVjdCwgb3IgcGFzc2VkIGFzIGEgZm4gcGFyYW0sIHNjb3Blc1V0aWxzLnRzIGNhbiBiZSBjcmVhdGVkXHJcbiAgICAvKipcclxuICAgICAqIEBoaWRkZW5cclxuICAgICAqXHJcbiAgICAgKiBVc2VkIHRvIHZhbGlkYXRlIHRoZSBzY29wZXMgaW5wdXQgcGFyYW1ldGVyIHJlcXVlc3RlZCAgYnkgdGhlIGRldmVsb3Blci5cclxuICAgICAqIEBwYXJhbSB7QXJyYXk8c3RyaW5nPn0gc2NvcGVzIC0gRGV2ZWxvcGVyIHJlcXVlc3RlZCBwZXJtaXNzaW9ucy4gTm90IGFsbCBzY29wZXMgYXJlIGd1YXJhbnRlZWQgdG8gYmUgaW5jbHVkZWQgaW4gdGhlIGFjY2VzcyB0b2tlbiByZXR1cm5lZC5cclxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gc2NvcGVzUmVxdWlyZWQgLSBCb29sZWFuIGluZGljYXRpbmcgd2hldGhlciB0aGUgc2NvcGVzIGFycmF5IGlzIHJlcXVpcmVkIG9yIG5vdFxyXG4gICAgICogQGlnbm9yZVxyXG4gICAgICovXHJcbiAgICBVc2VyQWdlbnRBcHBsaWNhdGlvbi5wcm90b3R5cGUudmFsaWRhdGVJbnB1dFNjb3BlID0gZnVuY3Rpb24gKHNjb3Blcywgc2NvcGVzUmVxdWlyZWQpIHtcclxuICAgICAgICBpZiAoIXNjb3Blcykge1xyXG4gICAgICAgICAgICBpZiAoc2NvcGVzUmVxdWlyZWQpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IENsaWVudENvbmZpZ3VyYXRpb25FcnJvci5jcmVhdGVTY29wZXNSZXF1aXJlZEVycm9yKHNjb3Blcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gQ2hlY2sgdGhhdCBzY29wZXMgaXMgYW4gYXJyYXkgb2JqZWN0IChhbHNvIHRocm93cyBlcnJvciBpZiBzY29wZXMgPT0gbnVsbClcclxuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoc2NvcGVzKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBDbGllbnRDb25maWd1cmF0aW9uRXJyb3IuY3JlYXRlU2NvcGVzTm9uQXJyYXlFcnJvcihzY29wZXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBDaGVjayB0aGF0IHNjb3BlcyBpcyBub3QgYW4gZW1wdHkgYXJyYXlcclxuICAgICAgICBpZiAoc2NvcGVzLmxlbmd0aCA8IDEpIHtcclxuICAgICAgICAgICAgdGhyb3cgQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yLmNyZWF0ZUVtcHR5U2NvcGVzQXJyYXlFcnJvcihzY29wZXMudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIENoZWNrIHRoYXQgY2xpZW50SWQgaXMgcGFzc2VkIGFzIHNpbmdsZSBzY29wZVxyXG4gICAgICAgIGlmIChzY29wZXMuaW5kZXhPZih0aGlzLmNsaWVudElkKSA+IC0xKSB7XHJcbiAgICAgICAgICAgIGlmIChzY29wZXMubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yLmNyZWF0ZUNsaWVudElkU2luZ2xlU2NvcGVFcnJvcihzY29wZXMudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAaGlkZGVuXHJcbiAgICAgKlxyXG4gICAgICogRXh0cmFjdHMgc2NvcGUgdmFsdWUgZnJvbSB0aGUgc3RhdGUgc2VudCB3aXRoIHRoZSBhdXRoZW50aWNhdGlvbiByZXF1ZXN0LlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHN0YXRlXHJcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBzY29wZS5cclxuICAgICAqIEBpZ25vcmVcclxuICAgICAqL1xyXG4gICAgVXNlckFnZW50QXBwbGljYXRpb24ucHJvdG90eXBlLmdldFNjb3BlRnJvbVN0YXRlID0gZnVuY3Rpb24gKHN0YXRlKSB7XHJcbiAgICAgICAgaWYgKHN0YXRlKSB7XHJcbiAgICAgICAgICAgIHZhciBzcGxpdEluZGV4ID0gc3RhdGUuaW5kZXhPZihcInxcIik7XHJcbiAgICAgICAgICAgIGlmIChzcGxpdEluZGV4ID4gLTEgJiYgc3BsaXRJbmRleCArIDEgPCBzdGF0ZS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzdGF0ZS5zdWJzdHJpbmcoc3BsaXRJbmRleCArIDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBcIlwiO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQGlnbm9yZVxyXG4gICAgICogQXBwZW5kcyBleHRyYVNjb3Blc1RvQ29uc2VudCBpZiBwYXNzZWRcclxuICAgICAqIEBwYXJhbSB7QGxpbmsgQXV0aGVudGljYXRpb25QYXJhbWV0ZXJzfVxyXG4gICAgICovXHJcbiAgICBVc2VyQWdlbnRBcHBsaWNhdGlvbi5wcm90b3R5cGUuYXBwZW5kU2NvcGVzID0gZnVuY3Rpb24gKHJlcXVlc3QpIHtcclxuICAgICAgICB2YXIgc2NvcGVzO1xyXG4gICAgICAgIGlmIChyZXF1ZXN0ICYmIHJlcXVlc3Quc2NvcGVzKSB7XHJcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0LmV4dHJhU2NvcGVzVG9Db25zZW50KSB7XHJcbiAgICAgICAgICAgICAgICBzY29wZXMgPSByZXF1ZXN0LnNjb3Blcy5jb25jYXQocmVxdWVzdC5leHRyYVNjb3Blc1RvQ29uc2VudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBzY29wZXMgPSByZXF1ZXN0LnNjb3BlcztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gc2NvcGVzO1xyXG4gICAgfTtcclxuICAgIC8vI2VuZHJlZ2lvblxyXG4gICAgLy8jcmVnaW9uIEFuZ3VsYXJcclxuICAgIC8qKlxyXG4gICAgICogQGhpZGRlblxyXG4gICAgICpcclxuICAgICAqIEJyb2FkY2FzdCBtZXNzYWdlcyAtIFVzZWQgb25seSBmb3IgQW5ndWxhcj8gICpcclxuICAgICAqIEBwYXJhbSBldmVudE5hbWVcclxuICAgICAqIEBwYXJhbSBkYXRhXHJcbiAgICAgKi9cclxuICAgIFVzZXJBZ2VudEFwcGxpY2F0aW9uLnByb3RvdHlwZS5icm9hZGNhc3QgPSBmdW5jdGlvbiAoZXZlbnROYW1lLCBkYXRhKSB7XHJcbiAgICAgICAgdmFyIGV2dCA9IG5ldyBDdXN0b21FdmVudChldmVudE5hbWUsIHsgZGV0YWlsOiBkYXRhIH0pO1xyXG4gICAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KGV2dCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAaGlkZGVuXHJcbiAgICAgKlxyXG4gICAgICogSGVscGVyIGZ1bmN0aW9uIHRvIHJldHJpZXZlIHRoZSBjYWNoZWQgdG9rZW5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gc2NvcGVzXHJcbiAgICAgKiBAcGFyYW0ge0BsaW5rIEFjY291bnR9IGFjY291bnRcclxuICAgICAqIEBwYXJhbSBzdGF0ZVxyXG4gICAgICogQHJldHVybiB7QGxpbmsgQXV0aFJlc3BvbnNlfSBBdXRoUmVzcG9uc2VcclxuICAgICAqL1xyXG4gICAgVXNlckFnZW50QXBwbGljYXRpb24ucHJvdG90eXBlLmdldENhY2hlZFRva2VuSW50ZXJuYWwgPSBmdW5jdGlvbiAoc2NvcGVzLCBhY2NvdW50LCBzdGF0ZSkge1xyXG4gICAgICAgIC8vIEdldCB0aGUgY3VycmVudCBzZXNzaW9uJ3MgYWNjb3VudCBvYmplY3RcclxuICAgICAgICB2YXIgYWNjb3VudE9iamVjdCA9IGFjY291bnQgfHwgdGhpcy5nZXRBY2NvdW50KCk7XHJcbiAgICAgICAgaWYgKCFhY2NvdW50T2JqZWN0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBDb25zdHJ1Y3QgQXV0aGVudGljYXRpb25SZXF1ZXN0IGJhc2VkIG9uIHJlc3BvbnNlIHR5cGVcclxuICAgICAgICB2YXIgbmV3QXV0aG9yaXR5ID0gdGhpcy5hdXRob3JpdHlJbnN0YW5jZSA/IHRoaXMuYXV0aG9yaXR5SW5zdGFuY2UgOiBBdXRob3JpdHlGYWN0b3J5LkNyZWF0ZUluc3RhbmNlKHRoaXMuYXV0aG9yaXR5LCB0aGlzLmNvbmZpZy5hdXRoLnZhbGlkYXRlQXV0aG9yaXR5KTtcclxuICAgICAgICB2YXIgcmVzcG9uc2VUeXBlID0gdGhpcy5nZXRUb2tlblR5cGUoYWNjb3VudE9iamVjdCwgc2NvcGVzLCB0cnVlKTtcclxuICAgICAgICB2YXIgc2VydmVyQXV0aGVudGljYXRpb25SZXF1ZXN0ID0gbmV3IFNlcnZlclJlcXVlc3RQYXJhbWV0ZXJzKG5ld0F1dGhvcml0eSwgdGhpcy5jbGllbnRJZCwgc2NvcGVzLCByZXNwb25zZVR5cGUsIHRoaXMuZ2V0UmVkaXJlY3RVcmkoKSwgc3RhdGUpO1xyXG4gICAgICAgIC8vIGdldCBjYWNoZWQgdG9rZW5cclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRDYWNoZWRUb2tlbihzZXJ2ZXJBdXRoZW50aWNhdGlvblJlcXVlc3QsIGFjY291bnQpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQGhpZGRlblxyXG4gICAgICpcclxuICAgICAqIEdldCBzY29wZXMgZm9yIHRoZSBFbmRwb2ludCAtIFVzZWQgaW4gQW5ndWxhciB0byB0cmFjayBwcm90ZWN0ZWQgYW5kIHVucHJvdGVjdGVkIHJlc291cmNlcyB3aXRob3V0IGludGVyYWN0aW9uIGZyb20gdGhlIGRldmVsb3BlciBhcHBcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZW5kcG9pbnRcclxuICAgICAqL1xyXG4gICAgVXNlckFnZW50QXBwbGljYXRpb24ucHJvdG90eXBlLmdldFNjb3Blc0ZvckVuZHBvaW50ID0gZnVuY3Rpb24gKGVuZHBvaW50KSB7XHJcbiAgICAgICAgLy8gaWYgdXNlciBzcGVjaWZpZWQgbGlzdCBvZiB1bnByb3RlY3RlZFJlc291cmNlcywgbm8gbmVlZCB0byBzZW5kIHRva2VuIHRvIHRoZXNlIGVuZHBvaW50cywgcmV0dXJuIG51bGwuXHJcbiAgICAgICAgaWYgKHRoaXMuY29uZmlnLmZyYW1ld29yay51bnByb3RlY3RlZFJlc291cmNlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5jb25maWcuZnJhbWV3b3JrLnVucHJvdGVjdGVkUmVzb3VyY2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZW5kcG9pbnQuaW5kZXhPZih0aGlzLmNvbmZpZy5mcmFtZXdvcmsudW5wcm90ZWN0ZWRSZXNvdXJjZXNbaV0pID4gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBwcm9jZXNzIGFsbCBwcm90ZWN0ZWQgcmVzb3VyY2VzIGFuZCBzZW5kIHRoZSBtYXRjaGVkIG9uZVxyXG4gICAgICAgIGlmICh0aGlzLmNvbmZpZy5mcmFtZXdvcmsucHJvdGVjdGVkUmVzb3VyY2VNYXAuc2l6ZSA+IDApIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IEFycmF5LmZyb20odGhpcy5jb25maWcuZnJhbWV3b3JrLnByb3RlY3RlZFJlc291cmNlTWFwLmtleXMoKSk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIga2V5ID0gX2FbX2ldO1xyXG4gICAgICAgICAgICAgICAgLy8gY29uZmlnRW5kcG9pbnQgaXMgbGlrZSAvYXBpL1RvZG8gcmVxdWVzdGVkIGVuZHBvaW50IGNhbiBiZSAvYXBpL1RvZG8vMVxyXG4gICAgICAgICAgICAgICAgaWYgKGVuZHBvaW50LmluZGV4T2Yoa2V5KSA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29uZmlnLmZyYW1ld29yay5wcm90ZWN0ZWRSZXNvdXJjZU1hcC5nZXQoa2V5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBkZWZhdWx0IHJlc291cmNlIHdpbGwgYmUgY2xpZW50aWQgaWYgbm90aGluZyBzcGVjaWZpZWRcclxuICAgICAgICAvLyBBcHAgd2lsbCB1c2UgaWR0b2tlbiBmb3IgY2FsbHMgdG8gaXRzZWxmXHJcbiAgICAgICAgLy8gY2hlY2sgaWYgaXQncyBzdGFyaW5nIGZyb20gaHR0cCBvciBodHRwcywgbmVlZHMgdG8gbWF0Y2ggd2l0aCBhcHAgaG9zdFxyXG4gICAgICAgIGlmIChlbmRwb2ludC5pbmRleE9mKFwiaHR0cDovL1wiKSA+IC0xIHx8IGVuZHBvaW50LmluZGV4T2YoXCJodHRwczovL1wiKSA+IC0xKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmdldEhvc3RGcm9tVXJpKGVuZHBvaW50KSA9PT0gdGhpcy5nZXRIb3N0RnJvbVVyaSh0aGlzLmdldFJlZGlyZWN0VXJpKCkpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEFycmF5KHRoaXMuY2xpZW50SWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBpbiBhbmd1bGFyIGxldmVsLCB0aGUgdXJsIGZvciAkaHR0cCBpbnRlcmNlcHRvciBjYWxsIGNvdWxkIGJlIHJlbGF0aXZlIHVybCxcclxuICAgICAgICAgICAgLy8gaWYgaXQncyByZWxhdGl2ZSBjYWxsLCB3ZSdsbCB0cmVhdCBpdCBhcyBhcHAgYmFja2VuZCBjYWxsLlxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEFycmF5KHRoaXMuY2xpZW50SWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBpZiBub3QgdGhlIGFwcCdzIG93biBiYWNrZW5kIG9yIG5vdCBhIGRvbWFpbiBsaXN0ZWQgaW4gdGhlIGVuZHBvaW50cyBzdHJ1Y3R1cmVcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybiBib29sZWFuIGZsYWcgdG8gZGV2ZWxvcGVyIHRvIGhlbHAgaW5mb3JtIGlmIGxvZ2luIGlzIGluIHByb2dyZXNzXHJcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gdHJ1ZS9mYWxzZVxyXG4gICAgICovXHJcbiAgICBVc2VyQWdlbnRBcHBsaWNhdGlvbi5wcm90b3R5cGUuZ2V0TG9naW5JblByb2dyZXNzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBwZW5kaW5nQ2FsbGJhY2sgPSB0aGlzLmNhY2hlU3RvcmFnZS5nZXRJdGVtKENvbnN0YW50cy51cmxIYXNoKTtcclxuICAgICAgICBpZiAocGVuZGluZ0NhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5sb2dpbkluUHJvZ3Jlc3M7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAaGlkZGVuXHJcbiAgICAgKiBAaWdub3JlXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGxvZ2luSW5Qcm9ncmVzc1xyXG4gICAgICovXHJcbiAgICBVc2VyQWdlbnRBcHBsaWNhdGlvbi5wcm90b3R5cGUuc2V0bG9naW5JblByb2dyZXNzID0gZnVuY3Rpb24gKGxvZ2luSW5Qcm9ncmVzcykge1xyXG4gICAgICAgIHRoaXMubG9naW5JblByb2dyZXNzID0gbG9naW5JblByb2dyZXNzO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQGhpZGRlblxyXG4gICAgICogQGlnbm9yZVxyXG4gICAgICpcclxuICAgICAqIHJldHVybnMgdGhlIHN0YXR1cyBvZiBhY3F1aXJlVG9rZW5JblByb2dyZXNzXHJcbiAgICAgKi9cclxuICAgIFVzZXJBZ2VudEFwcGxpY2F0aW9uLnByb3RvdHlwZS5nZXRBY3F1aXJlVG9rZW5JblByb2dyZXNzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFjcXVpcmVUb2tlbkluUHJvZ3Jlc3M7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAaGlkZGVuXHJcbiAgICAgKiBAaWdub3JlXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGFjcXVpcmVUb2tlbkluUHJvZ3Jlc3NcclxuICAgICAqL1xyXG4gICAgVXNlckFnZW50QXBwbGljYXRpb24ucHJvdG90eXBlLnNldEFjcXVpcmVUb2tlbkluUHJvZ3Jlc3MgPSBmdW5jdGlvbiAoYWNxdWlyZVRva2VuSW5Qcm9ncmVzcykge1xyXG4gICAgICAgIHRoaXMuYWNxdWlyZVRva2VuSW5Qcm9ncmVzcyA9IGFjcXVpcmVUb2tlbkluUHJvZ3Jlc3M7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAaGlkZGVuXHJcbiAgICAgKiBAaWdub3JlXHJcbiAgICAgKlxyXG4gICAgICogcmV0dXJucyB0aGUgbG9nZ2VyIGhhbmRsZVxyXG4gICAgICovXHJcbiAgICBVc2VyQWdlbnRBcHBsaWNhdGlvbi5wcm90b3R5cGUuZ2V0TG9nZ2VyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbmZpZy5zeXN0ZW0ubG9nZ2VyO1xyXG4gICAgfTtcclxuICAgIC8vI2VuZHJlZ2lvblxyXG4gICAgLy8jcmVnaW9uIEdldHRlcnMgYW5kIFNldHRlcnNcclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIFVzZSB0byBnZXQgdGhlIHJlZGlyZWN0IHVyaSBjb25maWd1cmVkIGluIE1TQUwgb3IgbnVsbC5cclxuICAgICAqIEV2YWx1YXRlcyByZWRpcmVjdFVyaSBpZiBpdHMgYSBmdW5jdGlvbiwgb3RoZXJ3aXNlIHNpbXBseSByZXR1cm5zIGl0cyB2YWx1ZS5cclxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IHJlZGlyZWN0IFVSTFxyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgVXNlckFnZW50QXBwbGljYXRpb24ucHJvdG90eXBlLmdldFJlZGlyZWN0VXJpID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5jb25maWcuYXV0aC5yZWRpcmVjdFVyaSA9PT0gXCJmdW5jdGlvblwiKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbmZpZy5hdXRoLnJlZGlyZWN0VXJpKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbmZpZy5hdXRoLnJlZGlyZWN0VXJpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogVXNlIHRvIGdldCB0aGUgcG9zdCBsb2dvdXQgcmVkaXJlY3QgdXJpIGNvbmZpZ3VyZWQgaW4gTVNBTCBvciBudWxsLlxyXG4gICAgICogRXZhbHVhdGVzIHBvc3RMb2dvdXRyZWRpcmVjdFVyaSBpZiBpdHMgYSBmdW5jdGlvbiwgb3RoZXJ3aXNlIHNpbXBseSByZXR1cm5zIGl0cyB2YWx1ZS5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBwb3N0IGxvZ291dCByZWRpcmVjdCBVUkxcclxuICAgICAqL1xyXG4gICAgVXNlckFnZW50QXBwbGljYXRpb24ucHJvdG90eXBlLmdldFBvc3RMb2dvdXRSZWRpcmVjdFVyaSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodHlwZW9mIHRoaXMuY29uZmlnLmF1dGgucG9zdExvZ291dFJlZGlyZWN0VXJpID09PSBcImZ1bmN0aW9uXCIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29uZmlnLmF1dGgucG9zdExvZ291dFJlZGlyZWN0VXJpKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbmZpZy5hdXRoLnBvc3RMb2dvdXRSZWRpcmVjdFVyaTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFVzZSB0byBnZXQgdGhlIGN1cnJlbnQge0BsaW5rIENvbmZpZ3VyYXRpb259IG9iamVjdCBpbiBNU0FMXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMge0BsaW5rIENvbmZpZ3VyYXRpb259XHJcbiAgICAgKi9cclxuICAgIFVzZXJBZ2VudEFwcGxpY2F0aW9uLnByb3RvdHlwZS5nZXRDdXJyZW50Q29uZmlndXJhdGlvbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuY29uZmlnKSB7XHJcbiAgICAgICAgICAgIHRocm93IENsaWVudENvbmZpZ3VyYXRpb25FcnJvci5jcmVhdGVOb1NldENvbmZpZ3VyYXRpb25FcnJvcigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5jb25maWc7XHJcbiAgICB9O1xyXG4gICAgLy8jZW5kcmVnaW9uXHJcbiAgICAvLyNyZWdpb24gU3RyaW5nIFV0aWwgKFNob3VsZCBiZSBleHRyYWN0ZWQgdG8gVXRpbHMudHMpXHJcbiAgICAvKipcclxuICAgICAqIEBoaWRkZW5cclxuICAgICAqIEBpZ25vcmVcclxuICAgICAqXHJcbiAgICAgKiBleHRyYWN0IFVSSSBmcm9tIHRoZSBob3N0XHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFVSSVxyXG4gICAgICogQHJldHVybnMge3N0cmluZ30gaG9zdCBmcm9tIHRoZSBVUklcclxuICAgICAqL1xyXG4gICAgVXNlckFnZW50QXBwbGljYXRpb24ucHJvdG90eXBlLmdldEhvc3RGcm9tVXJpID0gZnVuY3Rpb24gKHVyaSkge1xyXG4gICAgICAgIC8vIHJlbW92ZSBodHRwOi8vIG9yIGh0dHBzOi8vIGZyb20gdXJpXHJcbiAgICAgICAgdmFyIGV4dHJhY3RlZFVyaSA9IFN0cmluZyh1cmkpLnJlcGxhY2UoL14oaHR0cHM/OilcXC9cXC8vLCBcIlwiKTtcclxuICAgICAgICBleHRyYWN0ZWRVcmkgPSBleHRyYWN0ZWRVcmkuc3BsaXQoXCIvXCIpWzBdO1xyXG4gICAgICAgIHJldHVybiBleHRyYWN0ZWRVcmk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAaGlkZGVuXHJcbiAgICAgKiBAaWdub3JlXHJcbiAgICAgKlxyXG4gICAgICogVXRpbHMgZnVuY3Rpb24gdG8gY3JlYXRlIHRoZSBBdXRoZW50aWNhdGlvblxyXG4gICAgICogQHBhcmFtIHtAbGluayBhY2NvdW50fSBhY2NvdW50IG9iamVjdFxyXG4gICAgICogQHBhcmFtIHNjb3Blc1xyXG4gICAgICogQHBhcmFtIHNpbGVudENhbGxcclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSB0b2tlbiB0eXBlOiBpZF90b2tlbiBvciBhY2Nlc3NfdG9rZW5cclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIFVzZXJBZ2VudEFwcGxpY2F0aW9uLnByb3RvdHlwZS5nZXRUb2tlblR5cGUgPSBmdW5jdGlvbiAoYWNjb3VudE9iamVjdCwgc2NvcGVzLCBzaWxlbnRDYWxsKSB7XHJcbiAgICAgICAgLy8gaWYgYWNjb3VudCBpcyBwYXNzZWQgYW5kIG1hdGNoZXMgdGhlIGFjY291bnQgb2JqZWN0L29yIHNldCB0byBnZXRBY2NvdW50KCkgZnJvbSBjYWNoZVxyXG4gICAgICAgIC8vIGlmIGNsaWVudC1pZCBpcyBwYXNzZWQgYXMgc2NvcGUsIGdldCBpZF90b2tlbiBlbHNlIHRva2VuL2lkX3Rva2VuX3Rva2VuIChpbiBjYXNlIG5vIHNlc3Npb24gZXhpc3RzKVxyXG4gICAgICAgIHZhciB0b2tlblR5cGU7XHJcbiAgICAgICAgLy8gYWNxdWlyZVRva2VuU2lsZW50XHJcbiAgICAgICAgaWYgKHNpbGVudENhbGwpIHtcclxuICAgICAgICAgICAgaWYgKEFjY291bnQuY29tcGFyZUFjY291bnRzKGFjY291bnRPYmplY3QsIHRoaXMuZ2V0QWNjb3VudCgpKSkge1xyXG4gICAgICAgICAgICAgICAgdG9rZW5UeXBlID0gKHNjb3Blcy5pbmRleE9mKHRoaXMuY29uZmlnLmF1dGguY2xpZW50SWQpID4gLTEpID8gUmVzcG9uc2VUeXBlcy5pZF90b2tlbiA6IFJlc3BvbnNlVHlwZXMudG9rZW47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0b2tlblR5cGUgPSAoc2NvcGVzLmluZGV4T2YodGhpcy5jb25maWcuYXV0aC5jbGllbnRJZCkgPiAtMSkgPyBSZXNwb25zZVR5cGVzLmlkX3Rva2VuIDogUmVzcG9uc2VUeXBlcy5pZF90b2tlbl90b2tlbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdG9rZW5UeXBlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBhbGwgb3RoZXIgY2FzZXNcclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKCFBY2NvdW50LmNvbXBhcmVBY2NvdW50cyhhY2NvdW50T2JqZWN0LCB0aGlzLmdldEFjY291bnQoKSkpIHtcclxuICAgICAgICAgICAgICAgIHRva2VuVHlwZSA9IFJlc3BvbnNlVHlwZXMuaWRfdG9rZW5fdG9rZW47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0b2tlblR5cGUgPSAoc2NvcGVzLmluZGV4T2YodGhpcy5jbGllbnRJZCkgPiAtMSkgPyBSZXNwb25zZVR5cGVzLmlkX3Rva2VuIDogUmVzcG9uc2VUeXBlcy50b2tlbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdG9rZW5UeXBlO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEBoaWRkZW5cclxuICAgICAqIEBpZ25vcmVcclxuICAgICAqXHJcbiAgICAgKiBTZXRzIHRoZSBjYWNoZWtleXMgZm9yIGFuZCBzdG9yZXMgdGhlIGFjY291bnQgaW5mb3JtYXRpb24gaW4gY2FjaGVcclxuICAgICAqIEBwYXJhbSBhY2NvdW50XHJcbiAgICAgKiBAcGFyYW0gc3RhdGVcclxuICAgICAqIEBoaWRkZW5cclxuICAgICAqL1xyXG4gICAgVXNlckFnZW50QXBwbGljYXRpb24ucHJvdG90eXBlLnNldEFjY291bnRDYWNoZSA9IGZ1bmN0aW9uIChhY2NvdW50LCBzdGF0ZSkge1xyXG4gICAgICAgIC8vIENhY2hlIGFjcXVpcmVUb2tlbkFjY291bnRLZXlcclxuICAgICAgICB2YXIgYWNjb3VudElkID0gYWNjb3VudCA/IHRoaXMuZ2V0QWNjb3VudElkKGFjY291bnQpIDogQ29uc3RhbnRzLm5vX2FjY291bnQ7XHJcbiAgICAgICAgdmFyIGFjcXVpcmVUb2tlbkFjY291bnRLZXkgPSBTdG9yYWdlLmdlbmVyYXRlQWNxdWlyZVRva2VuQWNjb3VudEtleShhY2NvdW50SWQsIHN0YXRlKTtcclxuICAgICAgICB0aGlzLmNhY2hlU3RvcmFnZS5zZXRJdGVtKGFjcXVpcmVUb2tlbkFjY291bnRLZXksIEpTT04uc3RyaW5naWZ5KGFjY291bnQpKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEBoaWRkZW5cclxuICAgICAqIEBpZ25vcmVcclxuICAgICAqXHJcbiAgICAgKiBTZXRzIHRoZSBjYWNoZUtleSBmb3IgYW5kIHN0b3JlcyB0aGUgYXV0aG9yaXR5IGluZm9ybWF0aW9uIGluIGNhY2hlXHJcbiAgICAgKiBAcGFyYW0gc3RhdGVcclxuICAgICAqIEBwYXJhbSBhdXRob3JpdHlcclxuICAgICAqIEBoaWRkZW5cclxuICAgICAqL1xyXG4gICAgVXNlckFnZW50QXBwbGljYXRpb24ucHJvdG90eXBlLnNldEF1dGhvcml0eUNhY2hlID0gZnVuY3Rpb24gKHN0YXRlLCBhdXRob3JpdHkpIHtcclxuICAgICAgICAvLyBDYWNoZSBhdXRob3JpdHlLZXlcclxuICAgICAgICB2YXIgYXV0aG9yaXR5S2V5ID0gU3RvcmFnZS5nZW5lcmF0ZUF1dGhvcml0eUtleShzdGF0ZSk7XHJcbiAgICAgICAgdGhpcy5jYWNoZVN0b3JhZ2Uuc2V0SXRlbShhdXRob3JpdHlLZXksIFVybFV0aWxzLkNhbm9uaWNhbGl6ZVVyaShhdXRob3JpdHkpLCB0aGlzLmluQ29va2llKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFVwZGF0ZXMgYWNjb3VudCwgYXV0aG9yaXR5LCBhbmQgbm9uY2UgaW4gY2FjaGVcclxuICAgICAqIEBwYXJhbSBzZXJ2ZXJBdXRoZW50aWNhdGlvblJlcXVlc3RcclxuICAgICAqIEBwYXJhbSBhY2NvdW50XHJcbiAgICAgKiBAaGlkZGVuXHJcbiAgICAgKiBAaWdub3JlXHJcbiAgICAgKi9cclxuICAgIFVzZXJBZ2VudEFwcGxpY2F0aW9uLnByb3RvdHlwZS51cGRhdGVDYWNoZUVudHJpZXMgPSBmdW5jdGlvbiAoc2VydmVyQXV0aGVudGljYXRpb25SZXF1ZXN0LCBhY2NvdW50LCBsb2dpblN0YXJ0UGFnZSkge1xyXG4gICAgICAgIC8vIENhY2hlIGFjY291bnQgYW5kIGF1dGhvcml0eVxyXG4gICAgICAgIGlmIChsb2dpblN0YXJ0UGFnZSkge1xyXG4gICAgICAgICAgICAvLyBDYWNoZSB0aGUgc3RhdGUsIG5vbmNlLCBhbmQgbG9naW4gcmVxdWVzdCBkYXRhXHJcbiAgICAgICAgICAgIHRoaXMuY2FjaGVTdG9yYWdlLnNldEl0ZW0oQ29uc3RhbnRzLmxvZ2luUmVxdWVzdCwgbG9naW5TdGFydFBhZ2UsIHRoaXMuaW5Db29raWUpO1xyXG4gICAgICAgICAgICB0aGlzLmNhY2hlU3RvcmFnZS5zZXRJdGVtKENvbnN0YW50cy5sb2dpbkVycm9yLCBcIlwiKTtcclxuICAgICAgICAgICAgdGhpcy5jYWNoZVN0b3JhZ2Uuc2V0SXRlbShDb25zdGFudHMuc3RhdGVMb2dpbiwgc2VydmVyQXV0aGVudGljYXRpb25SZXF1ZXN0LnN0YXRlLCB0aGlzLmluQ29va2llKTtcclxuICAgICAgICAgICAgdGhpcy5jYWNoZVN0b3JhZ2Uuc2V0SXRlbShDb25zdGFudHMubXNhbEVycm9yLCBcIlwiKTtcclxuICAgICAgICAgICAgdGhpcy5jYWNoZVN0b3JhZ2Uuc2V0SXRlbShDb25zdGFudHMubXNhbEVycm9yRGVzY3JpcHRpb24sIFwiXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRBY2NvdW50Q2FjaGUoYWNjb3VudCwgc2VydmVyQXV0aGVudGljYXRpb25SZXF1ZXN0LnN0YXRlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gQ2FjaGUgYXV0aG9yaXR5S2V5XHJcbiAgICAgICAgdGhpcy5zZXRBdXRob3JpdHlDYWNoZShzZXJ2ZXJBdXRoZW50aWNhdGlvblJlcXVlc3Quc3RhdGUsIHNlcnZlckF1dGhlbnRpY2F0aW9uUmVxdWVzdC5hdXRob3JpdHkpO1xyXG4gICAgICAgIC8vIENhY2hlIG5vbmNlXHJcbiAgICAgICAgdGhpcy5jYWNoZVN0b3JhZ2Uuc2V0SXRlbShDb25zdGFudHMubm9uY2VJZFRva2VuLCBzZXJ2ZXJBdXRoZW50aWNhdGlvblJlcXVlc3Qubm9uY2UsIHRoaXMuaW5Db29raWUpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgdW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSBsb2dnZWQgaW4gYWNjb3VudFxyXG4gICAgICogQHBhcmFtIGFjY291bnRcclxuICAgICAqIEBoaWRkZW5cclxuICAgICAqIEBpZ25vcmVcclxuICAgICAqL1xyXG4gICAgVXNlckFnZW50QXBwbGljYXRpb24ucHJvdG90eXBlLmdldEFjY291bnRJZCA9IGZ1bmN0aW9uIChhY2NvdW50KSB7XHJcbiAgICAgICAgLy9yZXR1cm4gYCR7YWNjb3VudC5hY2NvdW50SWRlbnRpZmllcn1gICsgQ29uc3RhbnRzLnJlc291cmNlRGVsaW1pdGVyICsgYCR7YWNjb3VudC5ob21lQWNjb3VudElkZW50aWZpZXJ9YDtcclxuICAgICAgICB2YXIgYWNjb3VudElkO1xyXG4gICAgICAgIGlmICghU3RyaW5nVXRpbHMuaXNFbXB0eShhY2NvdW50LmhvbWVBY2NvdW50SWRlbnRpZmllcikpIHtcclxuICAgICAgICAgICAgYWNjb3VudElkID0gYWNjb3VudC5ob21lQWNjb3VudElkZW50aWZpZXI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBhY2NvdW50SWQgPSBDb25zdGFudHMubm9fYWNjb3VudDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGFjY291bnRJZDtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEBoaWRkZW5cclxuICAgICAqIEBpZ25vcmVcclxuICAgICAqXHJcbiAgICAgKiBDb25zdHJ1Y3QgJ3Rva2VuUmVxdWVzdCcgZnJvbSB0aGUgYXZhaWxhYmxlIGRhdGEgaW4gYWRhbElkVG9rZW5cclxuICAgICAqIEBwYXJhbSBleHRyYVF1ZXJ5UGFyYW1ldGVyc1xyXG4gICAgICogQGhpZGRlblxyXG4gICAgICovXHJcbiAgICBVc2VyQWdlbnRBcHBsaWNhdGlvbi5wcm90b3R5cGUuYnVpbGRJRFRva2VuUmVxdWVzdCA9IGZ1bmN0aW9uIChyZXF1ZXN0KSB7XHJcbiAgICAgICAgdmFyIHRva2VuUmVxdWVzdCA9IHtcclxuICAgICAgICAgICAgc2NvcGVzOiBbdGhpcy5jbGllbnRJZF0sXHJcbiAgICAgICAgICAgIGF1dGhvcml0eTogdGhpcy5hdXRob3JpdHksXHJcbiAgICAgICAgICAgIGFjY291bnQ6IHRoaXMuZ2V0QWNjb3VudCgpLFxyXG4gICAgICAgICAgICBleHRyYVF1ZXJ5UGFyYW1ldGVyczogcmVxdWVzdC5leHRyYVF1ZXJ5UGFyYW1ldGVyc1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHRva2VuUmVxdWVzdDtcclxuICAgIH07XHJcbiAgICAvLyNlbmRyZWdpb25cclxuICAgIFVzZXJBZ2VudEFwcGxpY2F0aW9uLnByb3RvdHlwZS5nZXRUZWxlbWV0cnlNYW5hZ2VyRnJvbUNvbmZpZyA9IGZ1bmN0aW9uIChjb25maWcsIGNsaWVudElkKSB7XHJcbiAgICAgICAgaWYgKCFjb25maWcpIHsgLy8gaWYgdW5zZXRcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGlmIHNldCB0aGVuIHZhbGlkYXRlXHJcbiAgICAgICAgdmFyIGFwcGxpY2F0aW9uTmFtZSA9IGNvbmZpZy5hcHBsaWNhdGlvbk5hbWUsIGFwcGxpY2F0aW9uVmVyc2lvbiA9IGNvbmZpZy5hcHBsaWNhdGlvblZlcnNpb24sIHRlbGVtZXRyeUVtaXR0ZXIgPSBjb25maWcudGVsZW1ldHJ5RW1pdHRlcjtcclxuICAgICAgICBpZiAoIWFwcGxpY2F0aW9uTmFtZSB8fCAhYXBwbGljYXRpb25WZXJzaW9uIHx8ICF0ZWxlbWV0cnlFbWl0dGVyKSB7XHJcbiAgICAgICAgICAgIHRocm93IENsaWVudENvbmZpZ3VyYXRpb25FcnJvci5jcmVhdGVUZWxlbWV0cnlDb25maWdFcnJvcihjb25maWcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBpZiB2YWxpZCB0aGVuIGNvbnN0cnVjdFxyXG4gICAgICAgIHZhciB0ZWxlbWV0cnlQbGF0Zm9ybSA9IHtcclxuICAgICAgICAgICAgc2RrOiBcIm1zYWwuanNcIixcclxuICAgICAgICAgICAgc2RrVmVyc2lvbjogbGlicmFyeVZlcnNpb24oKSxcclxuICAgICAgICAgICAgYXBwbGljYXRpb25OYW1lOiBhcHBsaWNhdGlvbk5hbWUsXHJcbiAgICAgICAgICAgIGFwcGxpY2F0aW9uVmVyc2lvbjogYXBwbGljYXRpb25WZXJzaW9uXHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgdGVsZW1ldHJ5TWFuYWdlckNvbmZpZyA9IHtcclxuICAgICAgICAgICAgcGxhdGZvcm06IHRlbGVtZXRyeVBsYXRmb3JtLFxyXG4gICAgICAgICAgICBjbGllbnRJZDogY2xpZW50SWRcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiBuZXcgVGVsZW1ldHJ5TWFuYWdlcih0ZWxlbWV0cnlNYW5hZ2VyQ29uZmlnLCB0ZWxlbWV0cnlFbWl0dGVyKTtcclxuICAgIH07XHJcbiAgICB0c2xpYl8xLl9fZGVjb3JhdGUoW1xyXG4gICAgICAgIHJlc29sdmVUb2tlbk9ubHlJZk91dE9mSWZyYW1lXHJcbiAgICBdLCBVc2VyQWdlbnRBcHBsaWNhdGlvbi5wcm90b3R5cGUsIFwiYWNxdWlyZVRva2VuU2lsZW50XCIsIG51bGwpO1xyXG4gICAgcmV0dXJuIFVzZXJBZ2VudEFwcGxpY2F0aW9uO1xyXG59KCkpO1xyXG5leHBvcnQgeyBVc2VyQWdlbnRBcHBsaWNhdGlvbiB9O1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Vc2VyQWdlbnRBcHBsaWNhdGlvbi5qcy5tYXAiLCJleHBvcnQgeyBVc2VyQWdlbnRBcHBsaWNhdGlvbiB9IGZyb20gXCIuL1VzZXJBZ2VudEFwcGxpY2F0aW9uXCI7XHJcbmV4cG9ydCB7IExvZ2dlciB9IGZyb20gXCIuL0xvZ2dlclwiO1xyXG5leHBvcnQgeyBMb2dMZXZlbCB9IGZyb20gXCIuL0xvZ2dlclwiO1xyXG5leHBvcnQgeyBBY2NvdW50IH0gZnJvbSBcIi4vQWNjb3VudFwiO1xyXG5leHBvcnQgeyBDb25zdGFudHMgfSBmcm9tIFwiLi91dGlscy9Db25zdGFudHNcIjtcclxuZXhwb3J0IHsgQXV0aG9yaXR5IH0gZnJvbSBcIi4vQXV0aG9yaXR5XCI7XHJcbi8vIEVycm9yc1xyXG5leHBvcnQgeyBBdXRoRXJyb3IgfSBmcm9tIFwiLi9lcnJvci9BdXRoRXJyb3JcIjtcclxuZXhwb3J0IHsgQ2xpZW50QXV0aEVycm9yIH0gZnJvbSBcIi4vZXJyb3IvQ2xpZW50QXV0aEVycm9yXCI7XHJcbmV4cG9ydCB7IFNlcnZlckVycm9yIH0gZnJvbSBcIi4vZXJyb3IvU2VydmVyRXJyb3JcIjtcclxuZXhwb3J0IHsgQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yIH0gZnJvbSBcIi4vZXJyb3IvQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yXCI7XHJcbmV4cG9ydCB7IEludGVyYWN0aW9uUmVxdWlyZWRBdXRoRXJyb3IgfSBmcm9tIFwiLi9lcnJvci9JbnRlcmFjdGlvblJlcXVpcmVkQXV0aEVycm9yXCI7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJzb3VyY2VSb290IjoiIn0=